<!-- Page Heading -->
<div class="row">
    <div class="col-lg-12">
        <ol class="breadcrumb">
            <li><a href="#">Advertiser</a></li>
            <li><a href="#">Campaigns</a></li>
            <li class="active">Campaign Report</li>
        </ol>
        <h1 class="page-header">
            Campaign Report:
            <span>{{campaign.name}}</span>
        </h1>
    </div>
</div>
<!-- /.row -->


<div class="row">

    <div class="col-md-2 col-md-6">
        <div class="panel panel-primary">
            <div class="panel-heading">
                <div class="row">
                    <div class="text-center">
                        <div>Impression</div>
                        <div class="stats-num" id="cImpressionTotal">-</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-2 col-md-6" style="">
        <div class="panel panel-primary">
            <div class="panel-heading">
                <div class="row">
                    <div class="text-center">
                        <div>Completed View</div>
                        <div class="stats-num" id="cTrueViewTotal">-</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-2 col-md-6">
        <div class="panel panel-primary">
            <div class="panel-heading">
                <div class="row">
                    <div class="text-center">
                        <div>Time On Ad</div>
                        <div class="stats-num" id="cAvgTimeOnAd">--:--</div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div class="col-md-2 col-md-6">
        <div class="panel panel-primary">
            <div class="panel-heading">
                <div class="row">
                    <div class="text-center">
                        <div>Click</div>
                        <div class="stats-num" id="cClickTotal">-</div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div class="col-md-2 col-md-6">
        <div class="panel panel-primary">
            <div class="panel-heading">
                <div class="row">
                    <div class="text-center">
                        <div>CTR%</div>
                        <div class="stats-num" id="cCTR">-</div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div class="col-md-2 col-md-6" style="">
        <div class="panel panel-primary">
            <div class="panel-heading">
                <div class="row">
                    <div class="text-center">
                        <div>User Reach</div>
                        <div class="stats-num" id="cUniqueReach">-</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>


<div class="row" style="display: none">

    <select id="u152_input">
        <option value="Pepsi Promotion">Pepsi Promotion</option>
        <option selected="" value="Omo Ngai gi vet ban">Omo Ngai gi vet ban</option>
        <option value="The Remix Trailer">The Remix Trailer</option>
        <option value="Avengers 2">Avengers 2</option>
    </select>

    <select id="u149_input">
        <option selected="" value="All ad units">All ad units</option>
        <option value="Omo TVC 1">Omo TVC 1</option>
        <option value="Omo TVC 2">Samsung</option>
        <option value="Omo Promo">LG G4</option>
    </select>

    <select id="u150_input">
        <option selected="" value="All ad formats">All ad formats</option>
        <option value="In-stream">In-stream</option>
        <option value="At-pause">At-pause</option>
        <option value="Breaking news">Breaking news</option>
    </select>

    <select id="u151_input">
        <option selected="" value="Daily">Daily</option>
        <option value="Weekly">Weekly</option>
        <option value="Monthly">Monthly</option>
        <option value="Hourly">Hourly</option>
        <option value="Yearly">Yearly</option>
    </select>

</div>


<div class="row">
    <div class="panel">
        <div class="panel-heading">
            <div class="row">
                <div class="col-xs-4">

                </div>
                <div class="col-xs-8 text-right" style="padding: 3px 0px; display: none">
                    <label for="from">From</label>
                    <input type="text" id="from" name="from">
                    <label for="to">to</label>
                    <input type="text" id="to" name="to">
                </div>
            </div>
        </div>
    </div>
</div>


<div class="row">
    <div class="col-lg-12">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title"><i class="fa fa-bar-chart-o fa-fw"></i>Statistics in Recent 10 Days</h3>
            </div>
            <div class="panel-body">
                <div id="morris-area-chart"></div>
            </div>
        </div>
    </div>
</div>


<div class="row" style="">
    <h2>Creatives</h2>

    <div class="table-responsive">
        <table class="table table-bordered table-hover table-striped">
            <thead>
            <tr>
                <th>ID</th>
                <th>Creative</th>
                <th>Format</th>
                <th>Impression</th>
                <th>Click</th>
                <th>Average TimeOnAd</th>
                <th>CTR%</th>
                <th>Unique Reach</th>
            </tr>
            </thead>
            <tbody>
            {{#each creatives}}
            <tr>
                <td>{{id}}</td>
                <td><a href="/creative/{{id}}">{{name}} </a></td>
                <td>{{adType}}</td>
                <td>{{formatCurrency imp}}</td>
                <td>{{formatCurrency c}}</td>
                <td>--:--</td>
                <td>{{ctr}}%</td>
                <td>-</td>
            </tr>
            {{/each}}
            </tbody>
        </table>
    </div>

</div>


<script>
    //load Date Picker
    initJqueryDatePicker();

    var formatTime = function (x) {
        return new moment(x).format("YYYY-MM-DD");
    };

    // Area Chart
    d3.json("{{site.ssl_api_domain}}/api/campaign/stats/{{cpnId}}?type={{type}}&begin={{begin}}&end={{end}}", function (error, data) {
        Morris.Area({
            element: 'morris-area-chart',
            data: data,
            xkey: 'period',
            ykeys: ['totalImp', 'totalTrv', 'totalClick'],
            labels: ['Impression', 'Completed View', 'Click'],
            pointSize: 2,
            hideHover: 'auto',
            resize: true,
            dateFormat :  formatTime
        });
    });

    d3.json("{{site.ssl_api_domain}}/api/campaign/stats/{{campaign.id}}", function (error, data) {
        if(data){
            $('#cImpressionTotal').text( formatNumber(data.imp) );
            $('#cTrueViewTotal').text( formatNumber(data.trv));
            $('#cClickTotal').text( formatNumber(data.c));
            $('#cCTR').text(data.ctr);
//            $('#trueViewRate').text(data.tvr);
        }
    });

</script>