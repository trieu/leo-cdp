!function(x){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=x();else if("function"==typeof define&&define.amd)define([],x);else{var a;"undefined"!=typeof window?a=window:"undefined"!=typeof global?a=global:"undefined"!=typeof self&&(a=self);a.DMVAST=x()}}(function(){return function a(h,l,d){function g(b,c){if(!l[b]){if(!h[b]){var m="function"==typeof require&&require;if(!c&&m)return m(b,!0);if(k)return k(b,!0);throw Error("Cannot find module '"+b+"'");}m=l[b]={exports:{}};
h[b][0].call(m.exports,function(c){var e=h[b][1][c];return g(e?e:c)},m,m.exports,a,h,l,d)}return l[b].exports}for(var k="function"==typeof require&&require,c=0;c<d.length;c++)g(d[c]);return g}({1:[function(a,h,l){function d(){this._events=this._events||{};this._maxListeners=this._maxListeners||void 0}function g(c){return"function"===typeof c}function k(c){return"object"===typeof c&&null!==c}h.exports=d;d.EventEmitter=d;d.prototype._events=void 0;d.prototype._maxListeners=void 0;d.defaultMaxListeners=
10;d.prototype.setMaxListeners=function(c){if("number"!==typeof c||0>c||isNaN(c))throw TypeError("n must be a positive number");this._maxListeners=c;return this};d.prototype.emit=function(c){var b,e,m,f;this._events||(this._events={});if("error"===c&&(!this._events.error||k(this._events.error)&&!this._events.error.length)){b=arguments[1];if(b instanceof Error)throw b;throw TypeError('Uncaught, unspecified "error" event.');}e=this._events[c];if(void 0===e)return!1;if(g(e))switch(arguments.length){case 1:e.call(this);
break;case 2:e.call(this,arguments[1]);break;case 3:e.call(this,arguments[1],arguments[2]);break;default:b=arguments.length;m=Array(b-1);for(f=1;f<b;f++)m[f-1]=arguments[f];e.apply(this,m)}else if(k(e)){b=arguments.length;m=Array(b-1);for(f=1;f<b;f++)m[f-1]=arguments[f];e=e.slice();b=e.length;for(f=0;f<b;f++)e[f].apply(this,m)}return!0};d.prototype.addListener=function(c,b){var e;if(!g(b))throw TypeError("listener must be a function");this._events||(this._events={});this._events.newListener&&this.emit("newListener",
c,g(b.listener)?b.listener:b);this._events[c]?k(this._events[c])?this._events[c].push(b):this._events[c]=[this._events[c],b]:this._events[c]=b;k(this._events[c])&&!this._events[c].warned&&(e=void 0!==this._maxListeners?this._maxListeners:d.defaultMaxListeners)&&0<e&&this._events[c].length>e&&(this._events[c].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[c].length),"function"===
typeof console.trace&&console.trace());return this};d.prototype.on=d.prototype.addListener;d.prototype.once=function(c,b){function e(){this.removeListener(c,e);m||(m=!0,b.apply(this,arguments))}if(!g(b))throw TypeError("listener must be a function");var m=!1;e.listener=b;this.on(c,e);return this};d.prototype.removeListener=function(c,b){var e,m,f;if(!g(b))throw TypeError("listener must be a function");if(!this._events||!this._events[c])return this;e=this._events[c];f=e.length;m=-1;if(e===b||g(e.listener)&&
e.listener===b)delete this._events[c],this._events.removeListener&&this.emit("removeListener",c,b);else if(k(e)){for(;0<f--;)if(e[f]===b||e[f].listener&&e[f].listener===b){m=f;break}if(0>m)return this;1===e.length?(e.length=0,delete this._events[c]):e.splice(m,1);this._events.removeListener&&this.emit("removeListener",c,b)}return this};d.prototype.removeAllListeners=function(c){var b;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[c]&&
delete this._events[c],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);this.removeAllListeners("removeListener");this._events={};return this}b=this._events[c];if(g(b))this.removeListener(c,b);else for(;b.length;)this.removeListener(c,b[b.length-1]);delete this._events[c];return this};d.prototype.listeners=function(c){return this._events&&this._events[c]?g(this._events[c])?[this._events[c]]:this._events[c].slice():[]};d.listenerCount=function(c,
b){return c._events&&c._events[b]?g(c._events[b])?1:c._events[b].length:0}},{}],2:[function(a,h,l){a=function(){return function(){this.errorURLTemplates=[];this.impressionURLTemplates=[];this.creatives=[]}}();h.exports=a},{}],3:[function(a,h,l){var d,g;d=a("./parser.coffee");g=a("./util.coffee");a=function(){function a(){}a.cappingFreeLunch=0;a.cappingMinimumTimeInterval=0;a.options={withCredentials:!1,timeout:0};a.get=function(c,b,e){var a,f,g;f=+new Date;a=l.extend=function(b,c){var f,e;for(f in c)e=
c[f],b[f]=e;return b};e||("function"===typeof b&&(e=b),g={});g=a(this.options,b);this.totalCallsTimeout<f?(this.totalCalls=1,this.totalCallsTimeout=f+36E5):this.totalCalls++;if(this.cappingFreeLunch>=this.totalCalls)e(null);else if(f-this.lastSuccessfullAd<this.cappingMinimumTimeInterval)e(null);else return d.parse(c,g,function(b){return function(b){return e(b)}}(this))};(function(){var c,b;b=g.storage;c=Object.defineProperty;["lastSuccessfullAd","totalCalls","totalCallsTimeout"].forEach(function(e){c(a,
e,{get:function(){return b.getItem(e)},set:function(c){return b.setItem(e,c)},configurable:!1,enumerable:!0})});null==a.totalCalls&&(a.totalCalls=0);null==a.totalCallsTimeout&&(a.totalCallsTimeout=0)})();return a}();h.exports=a},{"./parser.coffee":8,"./util.coffee":14}],4:[function(a,h,l){a=function(){return function(){this.id=null;this.height=this.width=0;this.companionClickThroughURLTemplate=this.staticResource=this.type=null;this.trackingEvents={}}}();h.exports=a},{}],5:[function(a,h,l){var d,
g={}.hasOwnProperty,k=function(c,b){function e(){this.constructor=c}for(var a in b)g.call(b,a)&&(c[a]=b[a]);e.prototype=b.prototype;c.prototype=new e;c.__super__=b.prototype;return c};d=function(){return function(){this.trackingEvents={}}}();a=function(c){function b(){b.__super__.constructor.apply(this,arguments);this.type="linear";this.duration=0;this.skipDelay=null;this.mediaFiles=[];this.videoClickThroughURLTemplate=null;this.videoClickTrackingURLTemplates=[];this.adParameters=null}k(b,c);return b}(d);
l=function(c){function b(){return b.__super__.constructor.apply(this,arguments)}k(b,c);return b}(d);d=function(c){function b(){this.type="companion";this.variations=[];this.videoClickTrackingURLTemplates=[]}k(b,c);return b}(d);h.exports={VASTCreativeLinear:a,VASTCreativeNonLinear:l,VASTCreativeCompanion:d}},{}],6:[function(a,h,l){h.exports={client:a("./client.coffee"),tracker:a("./tracker.coffee"),parser:a("./parser.coffee"),util:a("./util.coffee")}},{"./client.coffee":3,"./parser.coffee":8,"./tracker.coffee":10,
"./util.coffee":14}],7:[function(a,h,l){a=function(){return function(){this.fileURL=this.id=null;this.deliveryType="progressive";this.codec=this.mimeType=null;this.height=this.width=this.maxBitrate=this.minBitrate=this.bitrate=0;this.maintainAspectRatio=this.scalable=this.apiFramework=null}}();h.exports=a},{}],8:[function(a,h,l){var d,g,k,c,b,e,m,f,n,p=[].indexOf||function(b){for(var c=0,f=this.length;c<f;c++)if(c in this&&this[c]===b)return c;return-1};g=a("./urlhandler.coffee");f=a("./response.coffee");
k=a("./ad.coffee");n=a("./util.coffee");e=a("./creative.coffee").VASTCreativeLinear;b=a("./creative.coffee").VASTCreativeCompanion;m=a("./mediafile.coffee");c=a("./companionad.coffee");d=a("events").EventEmitter;a=function(){function a(){}var h;h=[];a.addURLTemplateFilter=function(b){"function"===typeof b&&h.push(b)};a.removeURLTemplateFilter=function(){return h.pop()};a.countURLTemplateFilters=function(){return h.length};a.clearUrlTemplateFilters=function(){return h=[]};a.parse=function(b,c,a){a||
("function"===typeof c&&(a=c),c={});return this._parse(b,null,c,function(b,c){return a(c)})};a.vent=new d;a.track=function(b,c){this.vent.emit("VAST-error",c);return n.track(b,c)};a.on=function(b,c){return this.vent.on(b,c)};a.once=function(b,c){return this.vent.once(b,c)};a._parse=function(b,c,a,e){var t,m,d;e||("function"===typeof a&&(e=a),a={});m=0;for(d=h.length;m<d;m++)t=h[m],b=t(b);null==c&&(c=[]);c.push(b);return g.get(b,a,function(m){return function(t,d){var g,n,q,k,h,r,l;if(null!=t)return e(t);
k=new f;if(null==(null!=d?d.documentElement:void 0)||"VAST"!==d.documentElement.nodeName)return e();l=d.documentElement.childNodes;h=0;for(r=l.length;h<r;h++)q=l[h],"Error"===q.nodeName&&k.errorURLTemplates.push(m.parseNodeText(q));l=d.documentElement.childNodes;h=0;for(r=l.length;h<r;h++)q=l[h],"Ad"===q.nodeName&&(g=m.parseAdElement(q),null!=g?k.ads.push(g):m.track(k.errorURLTemplates,{ERRORCODE:101}));n=function(b){var c,a,f;null==b&&(b=!1);if(k){f=k.ads;c=0;for(a=f.length;c<a;c++)if(g=f[c],null!=
g.nextWrapperURL)return;0===k.ads.length&&(b||m.track(k.errorURLTemplates,{ERRORCODE:303}),k=null);return e(null,k)}};for(q=k.ads.length;q--;)g=k.ads[q],null!=g.nextWrapperURL&&function(f){var e;if(10<=c.length||(e=f.nextWrapperURL,0<=p.call(c,e)))m.track(f.errorURLTemplates,{ERRORCODE:302}),k.ads.splice(k.ads.indexOf(f),1),n();else return-1===f.nextWrapperURL.indexOf("://")&&(e=b.slice(0,b.lastIndexOf("/")),f.nextWrapperURL=""+e+"/"+f.nextWrapperURL),m._parse(f.nextWrapperURL,c,a,function(b,c){var a,
e,u,y,d,g,t,C,v,q,h,p,l,r,z;e=!1;if(null!=b)m.track(f.errorURLTemplates,{ERRORCODE:301}),k.ads.splice(k.ads.indexOf(f),1),e=!0;else if(null==c)m.track(f.errorURLTemplates,{ERRORCODE:303}),k.ads.splice(k.ads.indexOf(f),1),e=!0;else for(k.errorURLTemplates=k.errorURLTemplates.concat(c.errorURLTemplates),y=k.ads.indexOf(f),k.ads.splice(y,1),l=c.ads,t=0,C=l.length;t<C;t++){d=l[t];d.errorURLTemplates=f.errorURLTemplates.concat(d.errorURLTemplates);d.impressionURLTemplates=f.impressionURLTemplates.concat(d.impressionURLTemplates);
if(null!=f.trackingEvents)for(r=d.creatives,h=0,v=r.length;h<v;h++)if(a=r[h],"linear"===a.type)for(z=Object.keys(f.trackingEvents),p=0,q=z.length;p<q;p++)u=z[p],(g=a.trackingEvents)[u]||(g[u]=[]),a.trackingEvents[u]=a.trackingEvents[u].concat(f.trackingEvents[u]);if(null!=f.videoClickTrackingURLTemplates)for(q=d.creatives,v=0,u=q.length;v<u;v++)a=q[v],"linear"===a.type&&(a.videoClickTrackingURLTemplates=a.videoClickTrackingURLTemplates.concat(f.videoClickTrackingURLTemplates));k.ads.splice(y,0,d)}delete f.nextWrapperURL;
return n(e)})}(g);return n()}}(this))};a.childByName=function(b,c){var a,f,e,d;d=b.childNodes;f=0;for(e=d.length;f<e;f++)if(a=d[f],a.nodeName===c)return a};a.childsByName=function(b,c){var a,f,e,d,m;f=[];m=b.childNodes;e=0;for(d=m.length;e<d;e++)a=m[e],a.nodeName===c&&f.push(a);return f};a.parseAdElement=function(b){var c,a,f;f=b.childNodes;c=0;for(a=f.length;c<a;c++){b=f[c];if("Wrapper"===b.nodeName)return this.parseWrapperElement(b);if("InLine"===b.nodeName)return this.parseInLineElement(b)}};a.parseWrapperElement=
function(b){var c,a,f,e,d;c=this.parseInLineElement(b);a=this.childByName(b,"VASTAdTagURI");null!=a?c.nextWrapperURL=this.parseNodeText(a):(a=this.childByName(b,"VASTAdTagURL"),null!=a&&(c.nextWrapperURL=this.parseNodeText(this.childByName(a,"URL"))));a=null;d=c.creatives;f=0;for(e=d.length;f<e;f++)if(b=d[f],"linear"===b.type){a=b;break}null!=a&&(null!=a.trackingEvents&&(c.trackingEvents=a.trackingEvents),null!=a.videoClickTrackingURLTemplates&&(c.videoClickTrackingURLTemplates=a.videoClickTrackingURLTemplates));
if(null!=c.nextWrapperURL)return c};a.parseInLineElement=function(b){var c,a,f,e,d,m,g,h,n,p;c=new k;h=b.childNodes;b=0;for(d=h.length;b<d;b++)switch(e=h[b],e.nodeName){case "Error":this.isUrl(e)&&c.errorURLTemplates.push(this.parseNodeText(e));break;case "Impression":this.isUrl(e)&&c.impressionURLTemplates.push(this.parseNodeText(e));break;case "Creatives":for(n=this.childsByName(e,"Creative"),e=0,m=n.length;e<m;e++)for(f=n[e],p=f.childNodes,f=0,g=p.length;f<g;f++)switch(a=p[f],a.nodeName){case "Linear":(a=
this.parseCreativeLinearElement(a))&&c.creatives.push(a);break;case "CompanionAds":(a=this.parseCompanionAd(a))&&c.creatives.push(a)}}return c};a.parseCreativeLinearElement=function(b){var c,a,f,d,g,k,h,n,p,l;a=new e;a.duration=this.parseDuration(this.parseNodeText(this.childByName(b,"Duration")));if(-1===a.duration&&"Wrapper"!==b.parentNode.parentNode.parentNode.nodeName)return null;c=b.getAttribute("skipoffset");null==c?a.skipDelay=null:"%"===c.charAt(c.length-1)?(c=parseInt(c,10),a.skipDelay=c/
100*a.duration):a.skipDelay=this.parseDuration(c);c=this.childByName(b,"VideoClicks");if(null!=c)for(a.videoClickThroughURLTemplate=this.parseNodeText(this.childByName(c,"ClickThrough")),f=this.childsByName(c,"ClickTracking"),g=0,l=f.length;g<l;g++)c=f[g],a.videoClickTrackingURLTemplates.push(this.parseNodeText(c));c=this.childByName(b,"AdParameters");null!=c&&(a.adParameters=this.parseNodeText(c));l=this.childsByName(b,"TrackingEvents");c=0;for(g=l.length;c<g;c++)for(f=l[c],k=this.childsByName(f,
"Tracking"),p=0,d=k.length;p<d;p++)h=k[p],f=h.getAttribute("event"),h=this.parseNodeText(h),null!=f&&null!=h&&(null==(n=a.trackingEvents)[f]&&(n[f]=[]),a.trackingEvents[f].push(h));c=this.childsByName(b,"MediaFiles");b=0;for(n=c.length;b<n;b++)for(g=c[b],p=this.childsByName(g,"MediaFile"),f=0,l=p.length;f<l;f++)d=p[f],g=new m,g.id=d.getAttribute("id"),g.fileURL=this.parseNodeText(d),g.deliveryType=d.getAttribute("delivery"),g.codec=d.getAttribute("codec"),g.mimeType=d.getAttribute("type"),g.apiFramework=
d.getAttribute("apiFramework"),g.bitrate=parseInt(d.getAttribute("bitrate")||0),g.minBitrate=parseInt(d.getAttribute("minBitrate")||0),g.maxBitrate=parseInt(d.getAttribute("maxBitrate")||0),g.width=parseInt(d.getAttribute("width")||0),g.height=parseInt(d.getAttribute("height")||0),(k=d.getAttribute("scalable"))&&"string"===typeof k&&(k=k.toLowerCase(),"true"===k?g.scalable=!0:"false"===k&&(g.scalable=!1)),(d=d.getAttribute("maintainAspectRatio"))&&"string"===typeof d&&(d=d.toLowerCase(),"true"===
d?g.maintainAspectRatio=!0:"false"===d&&(g.maintainAspectRatio=!1)),a.mediaFiles.push(g);return a};a.parseCompanionAd=function(a){var f,e,d,g,m,k,h,n,p,l,r,w,A,B;e=new b;A=this.childsByName(a,"Companion");h=0;for(p=A.length;h<p;h++){f=A[h];a=new c;a.id=f.getAttribute("id")||null;a.width=f.getAttribute("width");a.height=f.getAttribute("height");d=this.childsByName(f,"HTMLResource");n=0;for(l=d.length;n<l;n++)g=d[n],a.type=g.getAttribute("creativeType")||0,a.htmlResource=this.parseNodeText(g);d=this.childsByName(f,
"IFrameResource");n=0;for(l=d.length;n<l;n++)g=d[n],a.type=g.getAttribute("creativeType")||0,a.iframeResource=this.parseNodeText(g);d=this.childsByName(f,"StaticResource");n=0;for(l=d.length;n<l;n++)g=d[n],a.type=g.getAttribute("creativeType")||0,a.staticResource=this.parseNodeText(g);l=this.childsByName(f,"TrackingEvents");n=0;for(g=l.length;n<g;n++)for(d=l[n],B=this.childsByName(d,"Tracking"),w=0,r=B.length;w<r;w++)m=B[w],d=m.getAttribute("event"),m=this.parseNodeText(m),null!=d&&null!=m&&(null==
(k=a.trackingEvents)[d]&&(k[d]=[]),a.trackingEvents[d].push(m));a.companionClickThroughURLTemplate=this.parseNodeText(this.childByName(f,"CompanionClickThrough"));e.variations.push(a)}return e};a.parseDuration=function(c){var a,b;if(null==c)return-1;a=c.split(":");if(3!==a.length)return-1;b=a[2].split(".");c=parseInt(b[0]);2===b.length&&(c+=parseFloat("0."+b[1]));b=parseInt(60*a[1]);a=parseInt(3600*a[0]);return isNaN(a||isNaN(b||isNaN(c||3600<b||60<c)))?-1:a+b+c};a.parseNodeText=function(c){return c&&
(c.textContent||c.text||"").trim()};a.isUrl=function(c){return/[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?//=]*)/i.test(this.parseNodeText(c))};return a}();h.exports=a},{"./ad.coffee":2,"./companionad.coffee":4,"./creative.coffee":5,"./mediafile.coffee":7,"./response.coffee":9,"./urlhandler.coffee":11,"./util.coffee":14,events:1}],9:[function(a,h,l){a=function(){return function(){this.ads=[];this.errorURLTemplates=[]}}();h.exports=a},{}],10:[function(a,h,l){var d,g,k,c={}.hasOwnProperty,
b=function(a,b){function f(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);f.prototype=b.prototype;a.prototype=new f;a.__super__=b.prototype;return a};d=a("./client.coffee");k=a("./util.coffee");g=a("./creative.coffee").VASTCreativeLinear;a=function(c){function a(c,b){var e,k,h;this.ad=c;this.creative=b;this.skipable=this.impressed=this.muted=!1;this.skipDelayDefault=-1;this.trackingEvents={};this.emitAlwaysEvents="creativeView start firstQuartile midpoint thirdQuartile complete resume pause rewind skip closeLinear close".split(" ");
h=b.trackingEvents;for(e in h)k=h[e],this.trackingEvents[e]=k.slice(0);b instanceof g?(this.setDuration(b.duration),this.skipDelay=b.skipDelay,this.linear=!0,this.clickThroughURLTemplate=b.videoClickThroughURLTemplate,this.clickTrackingURLTemplates=b.videoClickTrackingURLTemplates):(this.skipDelay=-1,this.linear=!1);this.on("start",function(){d.lastSuccessfullAd=+new Date})}b(a,c);a.prototype.setDuration=function(a){this.assetDuration=a;return this.quartiles={firstQuartile:Math.round(25*this.assetDuration)/
100,midpoint:Math.round(50*this.assetDuration)/100,thirdQuartile:Math.round(75*this.assetDuration)/100}};a.prototype.setProgress=function(a){var c,b,e,d;b=null===this.skipDelay?this.skipDelayDefault:this.skipDelay;-1===b||this.skipable||(b>a?this.emit("skip-countdown",b-a):(this.skipable=!0,this.emit("skip-countdown",0)));if(this.linear&&0<this.assetDuration){b=[];if(0<a)for(c in b.push("start"),e=Math.round(a/this.assetDuration*100),b.push("progress-"+e+"%"),d=this.quartiles,d)e=d[c],e<=a&&a<=e+
1&&b.push(c);e=0;for(d=b.length;e<d;e++)c=b[e],this.track(c,!0);a<this.progress&&this.track("rewind")}return this.progress=a};a.prototype.setMuted=function(a){this.muted!==a&&this.track(a?"mute":"unmute");return this.muted=a};a.prototype.setPaused=function(a){this.paused!==a&&this.track(a?"pause":"resume");return this.paused=a};a.prototype.setFullscreen=function(a){this.fullscreen!==a&&this.track(a?"fullscreen":"exitFullscreen");return this.fullscreen=a};a.prototype.setSkipDelay=function(a){if("number"===
typeof a)return this.skipDelay=a};a.prototype.load=function(){if(!this.impressed)return this.impressed=!0,this.trackURLs(this.ad.impressionURLTemplates),this.track("creativeView")};a.prototype.errorWithCode=function(a){return this.trackURLs(this.ad.errorURLTemplates,{ERRORCODE:a})};a.prototype.complete=function(){return this.track("complete")};a.prototype.stop=function(){return this.track(this.linear?"closeLinear":"close")};a.prototype.skip=function(){this.track("skip");return this.trackingEvents=
[]};a.prototype.click=function(){var a,b;null!=(b=this.clickTrackingURLTemplates)&&b.length&&this.trackURLs(this.clickTrackingURLTemplates);if(null!=this.clickThroughURLTemplate)return this.linear&&(a={CONTENTPLAYHEAD:this.progressFormated()}),a=k.resolveURLTemplates([this.clickThroughURLTemplate],a)[0],this.emit("clickthrough",a)};a.prototype.track=function(a,b){var c,e;null==b&&(b=!1);"closeLinear"===a&&null==this.trackingEvents[a]&&null!=this.trackingEvents.close&&(a="close");e=this.trackingEvents[a];
c=this.emitAlwaysEvents.indexOf(a);null!=e?(this.emit(a,""),this.trackURLs(e)):-1!==c&&this.emit(a,"");!0===b&&(delete this.trackingEvents[a],-1<c&&this.emitAlwaysEvents.splice(c,1))};a.prototype.trackURLs=function(a,b){null==b&&(b={});this.linear&&(b.CONTENTPLAYHEAD=this.progressFormated());return k.track(a,b)};a.prototype.progressFormated=function(){var a,b,c,e;c=parseInt(this.progress);a=c/3600;2>a.length&&(a="0"+a);b=c/60%60;2>b.length&&(b="0"+b);e=c%60;2>e.length&&(e="0"+b);c=parseInt(100*(this.progress-
c));return""+a+":"+b+":"+e+"."+c};return a}(a("events").EventEmitter);h.exports=a},{"./client.coffee":3,"./creative.coffee":5,"./util.coffee":14,events:1}],11:[function(a,h,l){var d,g;g=a("./urlhandlers/xmlhttprequest.coffee");d=a("./urlhandlers/flash.coffee");l=function(){function k(){}k.get=function(c,b,e){e||("function"===typeof b&&(e=b),b={});return b.urlhandler&&b.urlhandler.supported()?b.urlhandler.get(c,b,e):"undefined"===typeof window||null===window?a("./urlhandlers/node.coffee").get(c,b,
e):g.supported()?g.get(c,b,e):d.supported()?d.get(c,b,e):e()};return k}();h.exports=l},{"./urlhandlers/flash.coffee":12,"./urlhandlers/xmlhttprequest.coffee":13}],12:[function(a,h,l){a=function(){function a(){}a.xdr=function(){var a;window.XDomainRequest&&(a=new XDomainRequest);return a};a.supported=function(){return!!this.xdr()};a.get=function(a,d,c){var b,e;if(e="function"===typeof window.ActiveXObject?new window.ActiveXObject("Microsoft.XMLDOM"):void 0)e.async=!1;else return c();b=this.xdr();b.open("GET",
a);b.timeout=d.timeout||0;b.withCredentials=d.withCredentials||!1;b.send();return b.onload=function(){e.loadXML(b.responseText);return c(null,e)}};return a}();h.exports=a},{}],13:[function(a,h,l){a=function(){function a(){}a.xhr=function(){var a;a=new window.XMLHttpRequest;if("withCredentials"in a)return a};a.supported=function(){return!!this.xhr()};a.get=function(a,d,c){var b;try{return b=this.xhr(),b.open("GET",a),b.timeout=d.timeout||0,b.withCredentials=d.withCredentials||!1,b.send(),b.onreadystatechange=
function(){if(4===b.readyState)return c(null,b.responseXML)}}catch(e){return c()}};return a}();h.exports=a},{}],14:[function(a,h,l){a=function(){function a(){}a.track=function(a,d){var c,b,e,h,f,l;b=this.resolveURLTemplates(a,d);l=[];h=0;for(f=b.length;h<f;h++)c=b[h],"undefined"!==typeof window&&null!==window&&(e=new Image,l.push(e.src=c));return l};a.resolveURLTemplates=function(a,d){var c,b,e,h,f,l,p,r;b=[];null==d&&(d={});"CACHEBUSTING"in d||(d.CACHEBUSTING=Math.round(1E10*Math.random()));d.random=
d.CACHEBUSTING;p=0;for(r=a.length;p<r;p++)if(f=c=a[p]){for(e in d)l=d[e],c="["+e+"]",h="%%"+e+"%%",f=f.replace(c,l),f=f.replace(h,l);b.push(f)}return b};a.storage=function(){var a,d,c;try{c="undefined"!==typeof window&&null!==window?window.localStorage||window.sessionStorage:null}catch(b){c=null}d=function(a){try{if(a.setItem("__VASTUtil__","__VASTUtil__"),"__VASTUtil__"!==a.getItem("__VASTUtil__"))return!0}catch(b){return!0}return!1};if(null==c||d(c))a={},c={length:0,getItem:function(b){return a[b]},
setItem:function(b,c){a[b]=c;this.length=Object.keys(a).length},removeItem:function(b){delete a[b];this.length=Object.keys(a).length},clear:function(){a={};this.length=0}};return c}();return a}();h.exports=a},{}]},{},[6])(6)});