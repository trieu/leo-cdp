(function(l,n,k){var p=function(a){var b,c,e;for(c=1;c<arguments.length;c++)for(e in b=arguments[c],b)b.hasOwnProperty(e)&&(a[e]=b[e]);return a},q={skip:5},r=function(a,b){return{createSourceObjects:function(c){var b={},f,g,d,h=a.options().techOrder;f=0;for(g=h.length;f<g;f++)if(d=h[f].charAt(0).toUpperCase()+h[f].slice(1),(d=l.videojs[d])&&d.isSupported())for(var k=0,n=c.length;k<n;k++){var m=c[k];d.canPlaySource({type:m.mimeType,src:m.fileURL})&&(void 0===b[h[f]]&&(b[h[f]]=[]),b[h[f]].push({type:m.mimeType,
src:m.fileURL,width:m.width,height:m.height}))}c=[];for(g=0;g<h.length;g++)if(d=h[g],void 0!==b[d])for(f=0;f<b[d].length;f++)c.push(b[d][f]);return c},getContent:function(){k.client.get(b.url,function(b){if(b)for(var e=0;e<b.ads.length;e++){var f=b.ads[e];a.vast.companion=void 0;for(var g=0;g<f.creatives.length;g++){var d=f.creatives[g];if("linear"===d.type){if(d.mediaFiles.length){a.vast.sources=a.vast.createSourceObjects(d.mediaFiles);if(!a.vast.sources.length){a.trigger("adscanceled");return}a.vastTracker=
new k.tracker(f,d)}}else"companion"===d.type&&(a.vast.companion=d)}if(a.vastTracker){a.trigger("vast-ready");break}else k.util.track(f.errorURLTemplates,{ERRORCODE:403})}a.vastTracker||(console.log("No Ads, back to play content"),a.trigger("adscanceled"))})},setupEvents:function(){var b=!1,e=function(){a.vastTracker.load()},f=function(){isNaN(a.vastTracker.assetDuration)&&(a.vastTracker.assetDuration=a.duration());a.vastTracker.setProgress(a.currentTime())},g=function(){a.vastTracker.setPaused(!0);
a.one("play",function(){a.vastTracker.setPaused(!1)})},d=function(){k.util.track(a.vastTracker.ad.errorURLTemplates,{ERRORCODE:405});b=!0;a.trigger("ended")};a.on("canplay",e);a.on("timeupdate",f);a.on("pause",g);a.on("error",d);a.one("vast-preroll-removed",function(){a.off("canplay",e);a.off("timeupdate",f);a.off("pause",g);a.off("error",d);b||a.vastTracker.complete()})},preroll:function(){a.ads.startLinearAdMode();a.vast.showControls=a.controls();a.vast.showControls&&a.controls(!1);a.src(a.vast.sources);
var c;a.vastTracker.clickThroughURLTemplate&&(c=k.util.resolveURLTemplates([a.vastTracker.clickThroughURLTemplate],{CACHEBUSTER:Math.round(1E10*Math.random()),CONTENTPLAYHEAD:a.vastTracker.progressFormated()})[0]);var e=l.document.createElement("a");e.className="vast-blocker";e.href=c||"#";e.target="_blank";e.onclick=function(){if(a.paused())return a.play(),!1;a.vastTracker.click();a.trigger("adclick")};a.vast.blocker=e;a.el().insertBefore(e,a.controlBar.el());c=l.document.createElement("div");c.className=
"vast-skip-button";0>b.skip&&(c.style.display="none");a.vast.skipButton=c;a.el().appendChild(c);e=l.document.createElement("div");e.className="vast-timer";e.id=a.id()+"-vast-timer";e.innerHTML="00:00";a.el().appendChild(e);a.vast.countDown=e;a.on("timeupdate",a.vast.timeupdate);c.onclick=function(b){0<=(" "+a.vast.skipButton.className+" ").indexOf(" enabled ")&&(a.vastTracker.skip(),a.vast.tearDown());if(void 0!==l.Event.prototype.stopPropagation)b.stopPropagation();else return!1};a.vast.setupEvents();
a.one("ended",a.vast.tearDown);a.trigger("vast-preroll-ready")},tearDown:function(){a.vast.countDown&&(clearInterval(a.vast.countDown.tid),a.vast.countDown.parentNode.removeChild(a.vast.countDown),a.vast.skipButton.parentNode.removeChild(a.vast.skipButton),a.vast.blocker.parentNode.removeChild(a.vast.blocker));a.off("timeupdate",a.vast.timeupdate);a.off("ended",a.vast.tearDown);a.ads.endLinearAdMode();a.vast.showControls&&a.controls(!0);a.trigger("vast-preroll-removed")},timeupdate:function(c){a.loadingSpinner.el().style.display=
"none";c=Math.ceil(b.skip-a.currentTime());0<c?a.vast.skipButton.innerHTML='<div style="font-size:12px;">C\u00f3 th\u1ec3 \u0111\u00f3ng qu\u1ea3ng c\u00e1o sau</div><div style="font-size:18px;">'+c+" gi\u00e2y</div>":-1===(" "+a.vast.skipButton.className+" ").indexOf(" enabled ")&&(a.vast.skipButton.className+=" enabled",a.vast.skipButton.innerHTML='<div style="font-size:18px;">\u0110\u00f3ng qu\u1ea3ng c\u00e1o</div>')}}};n.plugin("vast",function(a){var b=this,c=p({},q,a||{});if(void 0===b.ads)return l.console.error("vast video plugin requires videojs-contrib-ads, vast plugin not initialized"),
null;b.vast=new r(b,c);b.on("vast-ready",function(){b.trigger("adsready")});b.on("vast-preroll-ready",function(){b.play();var a=0,c=setInterval(function(){var g=Math.floor(b.duration())-++a,d=parseInt(g/60,10),d=10>d?"0"+d:d,h=g%60,h=10>h?"0"+h:h,k=document.getElementById(b.id()+"-vast-timer");0>=g&&clearInterval(c);k.innerHTML=d+":"+h},1E3);b.vast.countDown.tid=c});b.on("vast-preroll-removed",function(){l._EndAdVideoPlayed instanceof Function?l._EndAdVideoPlayed():b.play()});b.on("contentupdate",
function(){b.vast.getContent(c.url)});b.on("adscanceled",function(){console.log("adscanceled is triggered at "+new Date);b.vast.tearDown();setTimeout(function(){b.play()},4E3);setTimeout(function(){b.play()},5600);return!1});b.on("readyforpreroll",function(){if(!c.url)return b.trigger("adscanceled"),null;b.vast.preroll()});b.currentSrc()&&b.vast.getContent(c.url);return b})})(window,videojs,DMVAST);