/*
 MediaPlayer.ONE
 Version 2.2.3
 Updated Time: Mar 07, 2019 15h
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(B,u,y){B!=Array.prototype&&B!=Object.prototype&&(B[u]=y.value)};$jscomp.getGlobal=function(B){return"undefined"!=typeof window&&window===B?B:"undefined"!=typeof global&&null!=global?global:B};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var B=0;return function(u){return $jscomp.SYMBOL_PREFIX+(u||"")+B++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var B=$jscomp.global.Symbol.iterator;B||(B=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[B]&&$jscomp.defineProperty(Array.prototype,B,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var B=$jscomp.global.Symbol.asyncIterator;B||(B=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.arrayIterator=function(B){var u=0;return $jscomp.iteratorPrototype(function(){return u<B.length?{done:!1,value:B[u++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(B){$jscomp.initSymbolIterator();B={next:B};B[$jscomp.global.Symbol.iterator]=function(){return this};return B};$jscomp.iteratorFromArray=function(B,u){$jscomp.initSymbolIterator();B instanceof String&&(B+="");var y=0,w={next:function(){if(y<B.length){var h=y++;return{value:u(h,B[h]),done:!1}}w.next=function(){return{done:!0,value:void 0}};return w.next()}};w[Symbol.iterator]=function(){return w};return w};
$jscomp.polyfill=function(B,u,y,w){if(u){y=$jscomp.global;B=B.split(".");for(w=0;w<B.length-1;w++){var h=B[w];h in y||(y[h]={});y=y[h]}B=B[B.length-1];w=y[B];u=u(w);u!=w&&null!=u&&$jscomp.defineProperty(y,B,{configurable:!0,writable:!0,value:u})}};$jscomp.polyfill("Array.prototype.keys",function(B){return B?B:function(){return $jscomp.iteratorFromArray(this,function(u){return u})}},"es6","es3");
$jscomp.checkEs6ConformanceViaProxy=function(){try{var B={},u=Object.create(new $jscomp.global.Proxy(B,{get:function(y,w,h){return y==B&&"q"==w&&h==u}}));return!0===u.q}catch(y){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.makeIterator=function(B){$jscomp.initSymbolIterator();var u=B[Symbol.iterator];return u?u.call(B):$jscomp.arrayIterator(B)};
$jscomp.owns=function(B,u){return Object.prototype.hasOwnProperty.call(B,u)};
$jscomp.polyfill("WeakMap",function(B){function u(){if(!B||!Object.seal)return!1;try{var e=Object.seal({}),m=Object.seal({}),r=new B([[e,2],[m,3]]);if(2!=r.get(e)||3!=r.get(m))return!1;r.delete(e);r.set(m,4);return!r.has(e)&&4==r.get(m)}catch(x){return!1}}function y(e){$jscomp.owns(e,h)||$jscomp.defineProperty(e,h,{value:{}})}function w(e){var m=Object[e];m&&(Object[e]=function(e){y(e);return m(e)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(B&&$jscomp.ES6_CONFORMANCE)return B}else if(u())return B;
var h="$jscomp_hidden_"+Math.random();w("freeze");w("preventExtensions");w("seal");var p=0,A=function(e){this.id_=(p+=Math.random()+1).toString();if(e){$jscomp.initSymbol();$jscomp.initSymbolIterator();e=$jscomp.makeIterator(e);for(var m;!(m=e.next()).done;)m=m.value,this.set(m[0],m[1])}};A.prototype.set=function(e,m){y(e);if(!$jscomp.owns(e,h))throw Error("WeakMap key fail: "+e);e[h][this.id_]=m;return this};A.prototype.get=function(e){return $jscomp.owns(e,h)?e[h][this.id_]:void 0};A.prototype.has=
function(e){return $jscomp.owns(e,h)&&$jscomp.owns(e[h],this.id_)};A.prototype.delete=function(e){return $jscomp.owns(e,h)&&$jscomp.owns(e[h],this.id_)?delete e[h][this.id_]:!1};return A},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(B){function u(){if($jscomp.ASSUME_NO_NATIVE_MAP||!B||"function"!=typeof B||!B.prototype.entries||"function"!=typeof Object.seal)return!1;try{var m=Object.seal({x:4}),e=new B($jscomp.makeIterator([[m,"s"]]));if("s"!=e.get(m)||1!=e.size||e.get({x:4})||e.set({x:4},"t")!=e||2!=e.size)return!1;var h=e.entries(),p=h.next();if(p.done||p.value[0]!=m||"s"!=p.value[1])return!1;p=h.next();return p.done||4!=p.value[0].x||"t"!=p.value[1]||!h.next().done?!1:!0}catch(G){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(B&&$jscomp.ES6_CONFORMANCE)return B}else if(u())return B;$jscomp.initSymbol();$jscomp.initSymbolIterator();var y=new WeakMap,w=function(e){this.data_={};this.head_=A();this.size=0;if(e){e=$jscomp.makeIterator(e);for(var m;!(m=e.next()).done;)m=m.value,this.set(m[0],m[1])}};w.prototype.set=function(e,r){e=0===e?0:e;var m=h(this,e);m.list||(m.list=this.data_[m.id]=[]);m.entry?m.entry.value=r:(m.entry={next:this.head_,previous:this.head_.previous,head:this.head_,
key:e,value:r},m.list.push(m.entry),this.head_.previous.next=m.entry,this.head_.previous=m.entry,this.size++);return this};w.prototype.delete=function(e){e=h(this,e);return e.entry&&e.list?(e.list.splice(e.index,1),e.list.length||delete this.data_[e.id],e.entry.previous.next=e.entry.next,e.entry.next.previous=e.entry.previous,e.entry.head=null,this.size--,!0):!1};w.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=A();this.size=0};w.prototype.has=function(e){return!!h(this,e).entry};
w.prototype.get=function(e){return(e=h(this,e).entry)&&e.value};w.prototype.entries=function(){return p(this,function(e){return[e.key,e.value]})};w.prototype.keys=function(){return p(this,function(e){return e.key})};w.prototype.values=function(){return p(this,function(e){return e.value})};w.prototype.forEach=function(e,r){for(var m=this.entries(),h;!(h=m.next()).done;)h=h.value,e.call(r,h[1],h[0],this)};w.prototype[Symbol.iterator]=w.prototype.entries;var h=function(m,r){var h=r&&typeof r;"object"==
h||"function"==h?y.has(r)?h=y.get(r):(h=""+ ++e,y.set(r,h)):h="p_"+r;var p=m.data_[h];if(p&&$jscomp.owns(m.data_,h))for(m=0;m<p.length;m++){var A=p[m];if(r!==r&&A.key!==A.key||r===A.key)return{id:h,list:p,index:m,entry:A}}return{id:h,list:p,index:-1,entry:void 0}},p=function(e,r){var m=e.head_;return $jscomp.iteratorPrototype(function(){if(m){for(;m.head!=e.head_;)m=m.previous;for(;m.next!=m.head;)return m=m.next,{done:!1,value:r(m)};m=null}return{done:!0,value:void 0}})},A=function(){var e={};return e.previous=
e.next=e.head=e},e=0;return w},"es6","es3");$jscomp.polyfill("Array.prototype.fill",function(B){return B?B:function(u,y,w){var h=this.length||0;0>y&&(y=Math.max(0,h+y));if(null==w||w>h)w=h;w=Number(w);0>w&&(w=Math.max(0,h+w));for(y=Number(y||0);y<w;y++)this[y]=u;return this}},"es6","es3");$jscomp.polyfill("Array.prototype.values",function(B){return B?B:function(){return $jscomp.iteratorFromArray(this,function(u,y){return y})}},"es8","es3");
$jscomp.assign="function"==typeof Object.assign?Object.assign:function(B,u){for(var y=1;y<arguments.length;y++){var w=arguments[y];if(w)for(var h in w)$jscomp.owns(w,h)&&(B[h]=w[h])}return B};$jscomp.polyfill("Object.assign",function(B){return B||$jscomp.assign},"es6","es3");$jscomp.polyfill("Array.prototype.entries",function(B){return B?B:function(){return $jscomp.iteratorFromArray(this,function(u,y){return[u,y]})}},"es6","es3");
$jscomp.findInternal=function(B,u,y){B instanceof String&&(B=String(B));for(var w=B.length,h=0;h<w;h++){var p=B[h];if(u.call(y,p,h,B))return{i:h,v:p}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(B){return B?B:function(u,y){return $jscomp.findInternal(this,u,y).v}},"es6","es3");$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(B){function u(){this.batch_=null}function y(p){return p instanceof h?p:new h(function(e,m){e(p)})}if(B&&!$jscomp.FORCE_POLYFILL_PROMISE)return B;u.prototype.asyncExecute=function(h){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(h);return this};u.prototype.asyncExecuteBatch_=function(){var h=this;this.asyncExecuteFunction(function(){h.executeBatch_()})};var w=$jscomp.global.setTimeout;u.prototype.asyncExecuteFunction=function(h){w(h,
0)};u.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var h=this.batch_;this.batch_=[];for(var e=0;e<h.length;++e){var m=h[e];h[e]=null;try{m()}catch(r){this.asyncThrow_(r)}}}this.batch_=null};u.prototype.asyncThrow_=function(h){this.asyncExecuteFunction(function(){throw h;})};var h=function(h){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var e=this.createResolveAndReject_();try{h(e.resolve,e.reject)}catch(m){e.reject(m)}};h.prototype.createResolveAndReject_=
function(){function h(h){return function(r){m||(m=!0,h.call(e,r))}}var e=this,m=!1;return{resolve:h(this.resolveTo_),reject:h(this.reject_)}};h.prototype.resolveTo_=function(p){if(p===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(p instanceof h)this.settleSameAsPromise_(p);else{a:switch(typeof p){case "object":var e=null!=p;break a;case "function":e=!0;break a;default:e=!1}e?this.resolveToNonPromiseObj_(p):this.fulfill_(p)}};h.prototype.resolveToNonPromiseObj_=function(h){var e=
void 0;try{e=h.then}catch(m){this.reject_(m);return}"function"==typeof e?this.settleSameAsThenable_(e,h):this.fulfill_(h)};h.prototype.reject_=function(h){this.settle_(2,h)};h.prototype.fulfill_=function(h){this.settle_(1,h)};h.prototype.settle_=function(h,e){if(0!=this.state_)throw Error("Cannot settle("+h+", "+e+"): Promise already settled in state"+this.state_);this.state_=h;this.result_=e;this.executeOnSettledCallbacks_()};h.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var h=
0;h<this.onSettledCallbacks_.length;++h)p.asyncExecute(this.onSettledCallbacks_[h]);this.onSettledCallbacks_=null}};var p=new u;h.prototype.settleSameAsPromise_=function(h){var e=this.createResolveAndReject_();h.callWhenSettled_(e.resolve,e.reject)};h.prototype.settleSameAsThenable_=function(h,e){var m=this.createResolveAndReject_();try{h.call(e,m.resolve,m.reject)}catch(r){m.reject(r)}};h.prototype.then=function(p,e){function m(e,h){return"function"==typeof e?function(h){try{r(e(h))}catch(M){x(M)}}:
h}var r,x,v=new h(function(e,h){r=e;x=h});this.callWhenSettled_(m(p,r),m(e,x));return v};h.prototype.catch=function(h){return this.then(void 0,h)};h.prototype.callWhenSettled_=function(h,e){function m(){switch(r.state_){case 1:h(r.result_);break;case 2:e(r.result_);break;default:throw Error("Unexpected state: "+r.state_);}}var r=this;null==this.onSettledCallbacks_?p.asyncExecute(m):this.onSettledCallbacks_.push(m)};h.resolve=y;h.reject=function(p){return new h(function(e,h){h(p)})};h.race=function(p){return new h(function(e,
h){for(var m=$jscomp.makeIterator(p),x=m.next();!x.done;x=m.next())y(x.value).callWhenSettled_(e,h)})};h.all=function(p){var e=$jscomp.makeIterator(p),m=e.next();return m.done?y([]):new h(function(h,p){function r(e){return function(m){x[e]=m;u--;0==u&&h(x)}}var x=[],u=0;do x.push(void 0),u++,y(m.value).callWhenSettled_(r(x.length-1),p),m=e.next();while(!m.done)})};return h},"es6","es3");
$jscomp.polyfill("Array.from",function(B){return B?B:function(u,y,w){$jscomp.initSymbolIterator();y=null!=y?y:function(e){return e};var h=[],p=u[Symbol.iterator];if("function"==typeof p){u=p.call(u);for(var A=0;!(p=u.next()).done;)h.push(y.call(w,p.value,A++))}else for(p=u.length,A=0;A<p;A++)h.push(y.call(w,u[A],A));return h}},"es6","es3");window.mediaPlayerTracking=function(){};/*

 Video.js 7.2.4 <http://videojs.com/>
 Copyright Brightcove, Inc. <https://www.brightcove.com/>
 Available under Apache License Version 2.0
 <https://github.com/videojs/video.js/blob/master/LICENSE>

 Includes vtt.js <https://github.com/mozilla/vtt.js>
 Available under Apache License Version 2.0
 <https://github.com/mozilla/vtt.js/blob/master/LICENSE>
 2018 Brightcove, Inc
 @license Apache-2.0
*/
(function(B,u){"object"===typeof exports&&"undefined"!==typeof module?module.exports=u():"function"===typeof define&&define.amd?define(u):B.videojs=u()})(this,function(){function B(q,k){return k={exports:{}},q(k,k.exports),k.exports}function u(q,k){rf(q).forEach(function(c){return k(q[c],c)})}function y(q,k){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return rf(q).reduce(function(d,c){return k(d,q[c],c)},c)}function w(q){for(var k=arguments.length,c=Array(1<k?k-1:0),d=1;d<k;d++)c[d-
1]=arguments[d];if(Object.assign)return Object.assign.apply(Object,[q].concat(c));c.forEach(function(d){d&&u(d,function(d,c){q[c]=d})});return q}function h(q){return!!q&&"object"===("undefined"===typeof q?"undefined":la(q))}function p(q){return h(q)&&"[object Object]"===Ui.call(q)&&q.constructor===Object}function A(q,k){return q&&k?"function"===typeof E.getComputedStyle?(q=E.getComputedStyle(q))?q[k]:"":"":""}function e(q){if(/\s/.test(q))throw Error("class has illegal whitespace characters");}function m(){return K===
E.document}function r(q){return h(q)&&1===q.nodeType}function x(){try{return E.parent!==E.self}catch(q){return!0}}function v(q){return function(k,c){if("string"!==typeof k||!/\S/.test(k))return K[q](null);"string"===typeof c&&/\S/.test(c)&&(c=K.querySelector(c));c=r(c)?c:K;return c[q]&&c[q](k)}}function G(){var q=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},k=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},c=arguments[3],d=K.createElement(0<arguments.length&&void 0!==arguments[0]?
arguments[0]:"div");Object.getOwnPropertyNames(q).forEach(function(c){var f=q[c];-1!==c.indexOf("aria-")||"role"===c||"type"===c?(V.warn(Dd(Vi,c,f)),d.setAttribute(c,f)):"textContent"===c?R(d,f):d[c]=f});Object.getOwnPropertyNames(k).forEach(function(c){d.setAttribute(c,k[c])});c&&ta(d,c);return d}function R(q,k){"undefined"===typeof q.textContent?q.innerText=k:q.textContent=k;return q}function P(q,k){k.firstChild?k.insertBefore(q,k.firstChild):k.appendChild(q)}function M(q,k){e(k);return q.classList?
q.classList.contains(k):(new RegExp("(^|\\s)"+k+"($|\\s)")).test(q.className)}function F(q,k){q.classList?q.classList.add(k):M(q,k)||(q.className=(q.className+" "+k).trim());return q}function H(q,k){q.classList?q.classList.remove(k):(e(k),q.className=q.className.split(/\s+/).filter(function(c){return c!==k}).join(" "));return q}function aa(q,k,c){var d=M(q,k);"function"===typeof c&&(c=c(q,k));"boolean"!==typeof c&&(c=!d);if(c!==d)return c?F(q,k):H(q,k),q}function X(q,k){Object.getOwnPropertyNames(k).forEach(function(c){var d=
k[c];null===d||"undefined"===typeof d||!1===d?q.removeAttribute(c):q.setAttribute(c,!0===d?"":d)})}function C(q){var k={};if(q&&q.attributes&&0<q.attributes.length)for(var c=q.attributes,d=c.length-1;0<=d;d--){var n=c[d].name,f=c[d].value;if("boolean"===typeof q[n]||-1!==",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+n+","))f=null!==f?!0:!1;k[n]=f}return k}function ba(){K.body.focus();K.onselectstart=function(){return!1}}function S(){K.onselectstart=function(){return!0}}
function ea(q){if(q&&q.getBoundingClientRect&&q.parentNode){var k=q.getBoundingClientRect(),c={};"bottom height left right top width".split(" ").forEach(function(d){void 0!==k[d]&&(c[d]=k[d])});c.height||(c.height=parseFloat(A(q,"height")));c.width||(c.width=parseFloat(A(q,"width")));return c}}function ja(q){var k=void 0;q.getBoundingClientRect&&q.parentNode&&(k=q.getBoundingClientRect());if(!k)return{left:0,top:0};q=K.documentElement;var c=K.body;return{left:Math.round(k.left+(E.pageXOffset||c.scrollLeft)-
(q.clientLeft||c.clientLeft||0)),top:Math.round(k.top+(E.pageYOffset||c.scrollTop)-(q.clientTop||c.clientTop||0))}}function za(q,k){var c={},d=ja(q),n=q.offsetWidth;q=q.offsetHeight;var f=d.top;d=d.left;var b=k.pageY,g=k.pageX;k.changedTouches&&(g=k.changedTouches[0].pageX,b=k.changedTouches[0].pageY);c.y=Math.max(0,Math.min(1,(f-b+q)/q));c.x=Math.max(0,Math.min(1,(g-d)/n));return c}function Ba(q){return h(q)&&3===q.nodeType}function Ea(q){for(;q.firstChild;)q.removeChild(q.firstChild);return q}function Fa(q){"function"===
typeof q&&(q=q());return(Array.isArray(q)?q:[q]).map(function(k){"function"===typeof k&&(k=k());if(r(k)||Ba(k))return k;if("string"===typeof k&&/\S/.test(k))return K.createTextNode(k)}).filter(function(k){return k})}function ta(q,k){Fa(k).forEach(function(c){return q.appendChild(c)});return q}function nb(q,k){return ta(Ea(q),k)}function Ia(q){return void 0===q.button&&void 0===q.buttons||0===q.button&&void 0===q.buttons?!0:0!==q.button||1!==q.buttons?!1:!0}function cb(q){var k=q[Ab];k||(k=q[Ab]=Bb++);
fc[k]||(fc[k]={});return fc[k]}function Mb(q){return(q=q[Ab])?!!Object.getOwnPropertyNames(fc[q]).length:!1}function ob(q){var k=q[Ab];if(k){delete fc[k];try{delete q[Ab]}catch(c){q.removeAttribute?q.removeAttribute(Ab):q[Ab]=null}}}function pb(q,k){var c=cb(q);0===c.handlers[k].length&&(delete c.handlers[k],q.removeEventListener?q.removeEventListener(k,c.dispatcher,!1):q.detachEvent&&q.detachEvent("on"+k,c.dispatcher));0>=Object.getOwnPropertyNames(c.handlers).length&&(delete c.handlers,delete c.dispatcher,
delete c.disabled);0===Object.getOwnPropertyNames(c).length&&ob(q)}function Nb(q,k,c,d){c.forEach(function(c){q(k,c,d)})}function Z(q){function k(){return!0}function c(){return!1}if(!q||!q.isPropagationStopped){var d=q||E.event;q={};for(var n in d)"layerX"!==n&&"layerY"!==n&&"keyLocation"!==n&&"webkitMovementX"!==n&&"webkitMovementY"!==n&&("returnValue"===n&&d.preventDefault||(q[n]=d[n]));q.target||(q.target=q.srcElement||K);q.relatedTarget||(q.relatedTarget=q.fromElement===q.target?q.toElement:q.fromElement);
q.preventDefault=function(){d.preventDefault&&d.preventDefault();q.returnValue=!1;d.returnValue=!1;q.defaultPrevented=!0};q.defaultPrevented=!1;q.stopPropagation=function(){d.stopPropagation&&d.stopPropagation();q.cancelBubble=!0;d.cancelBubble=!0;q.isPropagationStopped=k};q.isPropagationStopped=c;q.stopImmediatePropagation=function(){d.stopImmediatePropagation&&d.stopImmediatePropagation();q.isImmediatePropagationStopped=k;q.stopPropagation()};q.isImmediatePropagationStopped=c;if(null!==q.clientX&&
void 0!==q.clientX){n=K.documentElement;var f=K.body;q.pageX=q.clientX+(n&&n.scrollLeft||f&&f.scrollLeft||0)-(n&&n.clientLeft||f&&f.clientLeft||0);q.pageY=q.clientY+(n&&n.scrollTop||f&&f.scrollTop||0)-(n&&n.clientTop||f&&f.clientTop||0)}q.which=q.charCode||q.keyCode;null!==q.button&&void 0!==q.button&&(q.button=q.button&1?0:q.button&4?1:q.button&2?2:0)}return q}function Ca(q,k,c){if(Array.isArray(k))return Nb(Ca,q,k,c);var d=cb(q);d.handlers||(d.handlers={});d.handlers[k]||(d.handlers[k]=[]);c.guid||
(c.guid=Bb++);d.handlers[k].push(c);d.dispatcher||(d.disabled=!1,d.dispatcher=function(c,f){if(!d.disabled){c=Z(c);var b=d.handlers[c.type];if(b){b=b.slice(0);for(var n=0,a=b.length;n<a&&!c.isImmediatePropagationStopped();n++)try{b[n].call(q,c,f)}catch(l){V.error(l)}}}});1===d.handlers[k].length&&(q.addEventListener?(c=!1,sf&&-1<Wi.indexOf(k)&&(c={passive:!0}),q.addEventListener(k,d.dispatcher,c)):q.attachEvent&&q.attachEvent("on"+k,d.dispatcher))}function pa(q,k,c){if(Mb(q)){var d=cb(q);if(d.handlers){if(Array.isArray(k))return Nb(pa,
q,k,c);if(void 0===k)for(var n in d.handlers)Object.prototype.hasOwnProperty.call(d.handlers||{},n)&&(k=q,c=n,d.handlers[c]=[],pb(k,c));else if(n=d.handlers[k]){if(!c)d.handlers[k]=[];else if(c.guid)for(d=0;d<n.length;d++)n[d].guid===c.guid&&n.splice(d--,1);pb(q,k)}}}}function Ma(q,k,c){var d=Mb(q)?cb(q):{},n=q.parentNode||q.ownerDocument;"string"===typeof k?k={type:k,target:q}:k.target||(k.target=q);k=Z(k);d.dispatcher&&d.dispatcher.call(q,k,c);if(n&&!k.isPropagationStopped()&&!0===k.bubbles)Ma.call(null,
n,k,c);else if(!n&&!k.defaultPrevented&&(q=cb(k.target),k.target[k.type])){q.disabled=!0;if("function"===typeof k.target[k.type])k.target[k.type]();q.disabled=!1}return!k.defaultPrevented}function ia(q,k,c){if(Array.isArray(k))return Nb(ia,q,k,c);var d=function f(){pa(q,k,f);c.apply(this,arguments)};d.guid=c.guid=c.guid||Bb++;Ca(q,k,d)}function Ja(q,k){k&&(Ed=k);E.setTimeout(Xi,q)}function db(q){var k=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).eventBusKey;if(k){if(!q[k].nodeName)throw Error('The eventBusKey "'+
k+'" does not refer to an element.');q.eventBusEl_=q[k]}else q.eventBusEl_=G("span",{className:"vjs-event-bus"});w(q,Yi);q.on("dispose",function(){q.off();E.setTimeout(function(){q.eventBusEl_=null},0)});return q}function Cb(q,k){w(q,Zi);q.state=w({},q.state,k);if("function"===typeof q.handleStateChanged&&Qc(q))q.on("statechanged",q.handleStateChanged);return q}function da(q){return"string"!==typeof q?q:q.charAt(0).toUpperCase()+q.slice(1)}function gc(q,k){return da(q)===da(k)}function Y(){for(var q=
{},k=arguments.length,c=Array(k),d=0;d<k;d++)c[d]=arguments[d];c.forEach(function(d){d&&u(d,function(d,c){p(d)?(p(q[c])||(q[c]={}),q[c]=Y(q[c],d)):q[c]=d})});return q}function Rc(q,k,c,d){var n=c.length-1;if("number"!==typeof d||0>d||d>n)throw Error("Failed to execute '"+q+"' on 'TimeRanges': The index provided ("+d+") is non-numeric or out of bounds (0-"+n+").");return c[d][k]}function Db(q){return void 0===q||0===q.length?{length:0,start:function(){throw Error("This TimeRanges object is empty");
},end:function(){throw Error("This TimeRanges object is empty");}}:{length:q.length,start:Rc.bind(null,"start",0,q),end:Rc.bind(null,"end",1,q)}}function Xa(q,k){return Array.isArray(q)?Db(q):void 0===q||void 0===k?Db():Db([[q,k]])}function tf(q,k){var c=0;if(!k)return 0;q&&q.length||(q=Xa(0,0));for(var d=0;d<q.length;d++){var n=q.start(d);var f=q.end(d);f>k&&(f=k);c+=f-n}return c/k}function va(q){if(q instanceof va)return q;"number"===typeof q?this.code=q:"string"===typeof q?this.message=q:h(q)&&
("number"===typeof q.code&&(this.code=q.code),w(this,q));this.message||(this.message=va.defaultMessages[this.code]||"")}function uf(q){return void 0!==q&&null!==q&&"function"===typeof q.then}function hc(q){uf(q)&&q.then(null,function(k){})}function $i(q){for(var k in q)if(q.hasOwnProperty(k))return!1;return!0}function vf(q,k,c){var d=q;wf(k)?(c=k,"string"===typeof q&&(d={uri:q})):d=aj(k,{uri:q});d.callback=c;return d}function eb(q,k,c){k=vf(q,k,c);return xf(k)}function xf(q){function k(c){clearTimeout(e);
c instanceof Error||(c=Error(""+(c||"Unknown XMLHttpRequest Error")));c.statusCode=0;var a=h;d||(d=!0,q.callback(c,a,void 0))}function c(){if(!b){clearTimeout(e);var c=q.useXDR&&void 0===n.status?200:1223===n.status?204:n.status;var f=h,l=null;if(0!==c){n.response?f=n.response:(f=n.responseText)||("document"===n.responseType?f=n.responseXML:(f=n.responseXML&&"parsererror"===n.responseXML.documentElement.nodeName,f=""!==n.responseType||f?null:n.responseXML));if(Q)try{f=JSON.parse(f)}catch(Lm){}f={body:f,
statusCode:c,method:a,headers:{},url:g,rawRequest:n};n.getAllResponseHeaders&&(f.headers=bj(n.getAllResponseHeaders()))}else l=Error("Internal XMLHttpRequest Error");c=f.body;d||(d=!0,q.callback(l,f,c))}}if("undefined"===typeof q.callback)throw Error("callback argument missing");var d=!1,n=q.xhr||null;n||(n=q.cors||q.useXDR?new eb.XDomainRequest:new eb.XMLHttpRequest);var f,b,g=n.url=q.uri||q.url,a=n.method=q.method||"GET",l=q.body||q.data,t=n.headers=q.headers||{},z=!!q.sync,Q=!1,e,h={body:void 0,
headers:{},statusCode:0,method:a,url:g,rawRequest:n};"json"in q&&!1!==q.json&&(Q=!0,t.accept||t.Accept||(t.Accept="application/json"),"GET"!==a&&"HEAD"!==a&&(t["content-type"]||t["Content-Type"]||(t["Content-Type"]="application/json"),l=JSON.stringify(!0===q.json?l:q.json)));n.onreadystatechange=function(){4===n.readyState&&setTimeout(c,0)};n.onload=c;n.onerror=k;n.onprogress=function(){};n.onabort=function(){b=!0};n.ontimeout=k;n.open(a,g,!z,q.username,q.password);z||(n.withCredentials=!!q.withCredentials);
!z&&0<q.timeout&&(e=setTimeout(function(){if(!b){b=!0;n.abort("timeout");var d=Error("XMLHttpRequest timeout");d.code="ETIMEDOUT";k(d)}},q.timeout));if(n.setRequestHeader)for(f in t)t.hasOwnProperty(f)&&n.setRequestHeader(f,t[f]);else if(q.headers&&!$i(q.headers))throw Error("Headers cannot be set on an XDomainRequest object");"responseType"in q&&(n.responseType=q.responseType);"beforeSend"in q&&"function"===typeof q.beforeSend&&q.beforeSend(n);n.send(l||null);return n}function cj(){}function Ga(q,
k){this.name="ParsingError";this.code=q.code;this.message=k||q.message}function Gd(q){q=q.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);if(!q)return null;if(q[3]){var k=q[3].replace(":","");return 3600*(q[1]|0)+60*(q[2]|0)+(k|0)+(q[4]|0)/1E3}return 59<q[1]?3600*(q[1]|0)+60*(q[2]|0)+(q[4]|0)/1E3:60*(q[1]|0)+(q[2]|0)+(q[4]|0)/1E3}function ic(){this.values=Hd(null)}function jc(q,k,c,d){q=d?q.split(d):[q];for(var n in q)"string"===typeof q[n]&&(d=q[n].split(c),2===d.length&&k(d[0],d[1]))}function dj(q,k,
c){function d(){var d=Gd(q);if(null===d)throw new Ga(Ga.Errors.BadTimeStamp,"Malformed timestamp: "+f);q=q.replace(/^[^\sa-zA-Z-]+/,"");return d}function n(){q=q.replace(/^\s+/,"")}var f=q;n();k.startTime=d();n();if("--\x3e"!==q.substr(0,3))throw new Ga(Ga.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+f);q=q.substr(3);n();k.endTime=d();n();(function(d,f){var a=new ic;jc(d,function(d,f){switch(d){case "region":for(var b=c.length-1;0<=b;b--)if(c[b].id===f){a.set(d,
c[b].region);break}break;case "vertical":a.alt(d,f,["rl","lr"]);break;case "line":f=f.split(",");b=f[0];a.integer(d,b);a.percent(d,b)?a.set("snapToLines",!1):null;a.alt(d,b,["auto"]);2===f.length&&a.alt("lineAlign",f[1],["start","middle","end"]);break;case "position":f=f.split(",");a.percent(d,f[0]);2===f.length&&a.alt("positionAlign",f[1],["start","middle","end"]);break;case "size":a.percent(d,f);break;case "align":a.alt(d,f,["start","middle","end","left","right"])}},/:/,/\s/);f.region=a.get("region",
null);f.vertical=a.get("vertical","");f.line=a.get("line","auto");f.lineAlign=a.get("lineAlign","start");f.snapToLines=a.get("snapToLines",!0);f.size=a.get("size",100);f.align=a.get("align","middle");f.position=a.get("position",{start:0,left:0,middle:50,end:100,right:100},f.align);f.positionAlign=a.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},f.align)})(q,k)}function yf(q,k){function c(){if(!k)return null;var d=k.match(/^([^<]*)(<[^>]*>?)?/);d=d[1]?d[1]:d[2];
k=k.substr(d.length);return d}function d(d){return ej[d]}function n(c){for(;z=c.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)c=c.replace(z[0],d);return c}function f(d,c){var a=fj[d];if(!a)return null;var f=q.document.createElement(a);f.localName=a;(d=gj[d])&&c&&(f[d]=c.trim());return f}for(var b=q.document.createElement("div"),g=b,a,l=[];null!==(a=c());)if("<"===a[0])if("/"===a[1])l.length&&l[l.length-1]===a.substr(2).replace(">","")&&(l.pop(),g=g.parentNode);else{var t=Gd(a.substr(1,a.length-2));if(t)a=
q.document.createProcessingInstruction("timestamp",t),g.appendChild(a);else{var z=a.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);z&&(!(a=f(z[1],z[3]))||zf[a.localName]&&zf[a.localName]!==g.localName||(z[2]&&(a.className=z[2].substr(1).replace("."," ")),l.push(z[1]),g.appendChild(a),g=a))}}else g.appendChild(q.document.createTextNode(n(a)));return b}function hj(q){for(var k=0;k<Af.length;k++){var c=Af[k];if(q>=c[0]&&q<=c[1])return!0}return!1}function ij(q){function k(d,c){for(var a=c.childNodes.length-
1;0<=a;a--)d.push(c.childNodes[a])}function c(d){if(!d||!d.length)return null;var f=d.pop(),a=f.textContent||f.innerText;if(a)return(f=a.match(/^.*(\n|\r)/))?(d.length=0,f[0]):a;if("ruby"===f.tagName)return c(d);if(f.childNodes)return k(d,f),c(d)}var d=[],n="";if(!q||!q.childNodes)return"ltr";for(k(d,q);n=c(d);)for(var f=0;f<n.length;f++)if(q=n.charCodeAt(f),hj(q))return"rtl";return"ltr"}function Id(){}function Sc(q,k,c){this.cue=k;this.cueDiv=yf(q,k.text);var d={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",
position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===k.vertical?"horizontal-tb":"lr"===k.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(d,this.cueDiv);this.div=q.document.createElement("div");d={direction:ij(this.cueDiv),writingMode:""===k.vertical?"horizontal-tb":"lr"===k.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===k.align?"center":k.align,font:c.font,whiteSpace:"pre-line",position:"absolute"};this.applyStyles(d);
this.div.appendChild(this.cueDiv);q=0;switch(k.positionAlign){case "start":q=k.position;break;case "middle":q=k.position-k.size/2;break;case "end":q=k.position-k.size}""===k.vertical?this.applyStyles({left:this.formatStyle(q,"%"),width:this.formatStyle(k.size,"%")}):this.applyStyles({top:this.formatStyle(q,"%"),height:this.formatStyle(k.size,"%")});this.move=function(d){this.applyStyles({top:this.formatStyle(d.top,"px"),bottom:this.formatStyle(d.bottom,"px"),left:this.formatStyle(d.left,"px"),right:this.formatStyle(d.right,
"px"),height:this.formatStyle(d.height,"px"),width:this.formatStyle(d.width,"px")})}}function wa(q){if(q.div){var k=q.div.offsetHeight;var c=q.div.offsetWidth;var d=q.div.offsetTop;var n=(n=q.div.childNodes)&&(n=n[0])&&n.getClientRects&&n.getClientRects();q=q.div.getBoundingClientRect();var f=n?Math.max(n[0]&&n[0].height||0,q.height/n.length):0}this.left=q.left;this.right=q.right;this.top=q.top||d;this.height=q.height||k;this.bottom=q.bottom||d+(q.height||k);this.width=q.width||c;this.lineHeight=
void 0!==f?f:q.lineHeight}function qb(){}function Jd(q){return"string"!==typeof q?!1:jj[q.toLowerCase()]?q.toLowerCase():!1}function Tc(q,k,c){this.hasBeenReset=!1;var d="",n=!1,f=q,b=k,g=c,a=null,l="",t=!0,z="auto",Q="start",e=50,h="middle",m=50,p="middle";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return d},set:function(c){d=""+c}},pauseOnExit:{enumerable:!0,get:function(){return n},set:function(d){n=!!d}},startTime:{enumerable:!0,get:function(){return f},set:function(d){if("number"!==
typeof d)throw new TypeError("Start time must be set to a number.");f=d;this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return b},set:function(d){if("number"!==typeof d)throw new TypeError("End time must be set to a number.");b=d;this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return g},set:function(d){g=""+d;this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return a},set:function(d){a=d;this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return l},set:function(d){d=
"string"!==typeof d?!1:kj[d.toLowerCase()]?d.toLowerCase():!1;if(!1===d)throw new SyntaxError("An invalid or illegal string was specified.");l=d;this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return t},set:function(d){t=!!d;this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return z},set:function(d){if("number"!==typeof d&&"auto"!==d)throw new SyntaxError("An invalid number or illegal string was specified.");z=d;this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return Q},
set:function(d){d=Jd(d);if(!d)throw new SyntaxError("An invalid or illegal string was specified.");Q=d;this.hasBeenReset=!0}},position:{enumerable:!0,get:function(){return e},set:function(d){if(0>d||100<d)throw Error("Position must be between 0 and 100.");e=d;this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return h},set:function(d){d=Jd(d);if(!d)throw new SyntaxError("An invalid or illegal string was specified.");h=d;this.hasBeenReset=!0}},size:{enumerable:!0,get:function(){return m},
set:function(d){if(0>d||100<d)throw Error("Size must be between 0 and 100.");m=d;this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return p},set:function(d){d=Jd(d);if(!d)throw new SyntaxError("An invalid or illegal string was specified.");p=d;this.hasBeenReset=!0}}});this.displayState=void 0}function kc(q){return"number"===typeof q&&0<=q&&100>=q}function lj(q,k,c,d){var n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},f=q.textTracks();n.kind=k;c&&(n.label=c);d&&(n.language=d);
n.tech=q;n=new Ha.text.TrackClass(n);f.addTrack(n);return n}function mj(q,k,c){q.setTimeout(function(){return Eb(k,Fb[k.type],c,q)},1)}function nj(q,k){q.forEach(function(c){return c.setTech&&c.setTech(k)})}function Bf(q,k,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,n="call"+da(c);n=q.reduce(Kd(n),d);n=(d=n===Uc)?null:k[c](n);for(var f=q.length-1;0<=f;f--){var b=q[f];if(b[c])b[c](d,n)}return n}function Kd(q){return function(k,c){return k===Uc?Uc:c[q]?c[q](k):k}}function oj(q,
k){var c=Ld[q.id()],d=null;if(void 0===c||null===c)return d=k(q),Ld[q.id()]=[[k,d]],d;for(var n=0;n<c.length;n++){var f=c[n];f[0]===k&&(d=f[1])}null===d&&(d=k(q),c.push([k,d]));return d}function Eb(){var q=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},k=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],c=arguments[2],d=arguments[3],n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:[],f=5<arguments.length&&void 0!==arguments[5]?arguments[5]:!1,b=k[0],g=k.slice(1);if("string"===
typeof b)Eb(q,Fb[b],c,d,n,f);else if(b){var a=oj(d,b);if(!a.setSource)return n.push(a),Eb(q,g,c,d,n,f);a.setSource(w({},q),function(b,k){if(b)return Eb(q,g,c,d,n,f);n.push(a);Eb(k,q.type===k.type?g:Fb[k.type],c,d,n,f)})}else g.length?Eb(q,g,c,d,n,f):f?c(q,n):Eb(q,Fb["*"],c,d,n,!0)}function Cf(q){var k=Df(q.src);!q.type&&k&&(q.type=k);return q}function Md(q,k){if(4===q.length)q=q[1]+q[1]+q[2]+q[2]+q[3]+q[3];else if(7===q.length)q=q.slice(1);else throw Error("Invalid color code provided, "+q+"; must be formatted as e.g. #f0e or #f604e2.");
return"rgba("+parseInt(q.slice(0,2),16)+","+parseInt(q.slice(2,4),16)+","+parseInt(q.slice(4,6),16)+","+k+")"}function Ob(q){return Nd(q,1<arguments.length&&void 0!==arguments[1]?arguments[1]:q)}function Ef(q,k){k&&(q=k(q));if(q&&"none"!==q)return q}function D(q,k,c){var d=D.getPlayer(q);if(d)return k&&V.warn('Player "'+q+'" is already initialised. Options will not be applied.'),c&&d.ready(c),d;var n="string"===typeof q?rb("#"+Ff(q)):q;if(!r(n))throw new TypeError("The element or ID supplied is not valid. (videojs)");
K.body.contains(n)||V.warn("The element supplied is not included in the DOM");k=k||{};D.hooks("beforesetup").forEach(function(d){d=d(n,Y(k));!h(d)||Array.isArray(d)?V.error("please return an object in beforesetup hooks"):k=Y(k,d)});d=new (I.getComponent("Player"))(n,k,c);D.hooks("setup").forEach(function(c){return c(d)});return d}function Gf(q,k){return function(c){var d=this;if(k){if(Pb&&!c)return c=k.toString().replace(/^function.+?{/,"").slice(0,-1),c=Hf(c),this[Od]=new Pb(c),pj(this[Od],c),this[Od];
var n={postMessage:function(c){d.onmessage&&setTimeout(function(){d.onmessage({data:c,target:n})})}};k.call(n);this.postMessage=function(c){setTimeout(function(){n.onmessage({data:c,target:d})})};this.isThisThread=!0}else return new Pb(q)}}function Hf(q){try{return Qb.createObjectURL(new Blob([q],{type:"application/javascript"}))}catch(c){var k=new qj;k.append(q);return Qb.createObjectURL(k.getBlob(type))}}function pj(q,k){if(q&&k){var c=q.terminate;q.objURL=k;q.terminate=function(){q.objURL&&Qb.revokeObjectURL(q.objURL);
c.call(q)}}}function lc(){}var mc="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},E="undefined"!==typeof window?window:"undefined"!==typeof mc?mc:"undefined"!==typeof self?self:{},If={},Jf=Object.freeze({default:If}),rj=Jf&&If||Jf,Kf="undefined"!==typeof mc?mc:"undefined"!==typeof window?window:{};if("undefined"!==typeof document)var Pd=document;else(Pd=Kf["__GLOBAL_DOCUMENT_CACHE@4"])||(Pd=Kf["__GLOBAL_DOCUMENT_CACHE@4"]=rj);var K=Pd,Da=void 0,
Vc="info",Sa=[],Wc=function(q,k){var c=Da.levels[Vc],d=new RegExp("^("+c+")$");"log"!==q&&k.unshift(q.toUpperCase()+":");Sa&&Sa.push([].concat(k));k.unshift("VIDEOJS:");if(E.console){var n=E.console[q];n||"debug"!==q||(n=E.console.info||E.console.log);if(n&&c&&d.test(q))n[Array.isArray(k)?"apply":"call"](E.console,k)}};Da=function(){for(var q=arguments.length,k=Array(q),c=0;c<q;c++)k[c]=arguments[c];Wc("log",k)};Da.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",
warn:"warn|error",error:"error",DEFAULT:Vc};Da.level=function(q){if("string"===typeof q){if(!Da.levels.hasOwnProperty(q))throw Error('"'+q+'" in not a valid log level');Vc=q}return Vc};Da.history=function(){return Sa?[].concat(Sa):[]};Da.history.clear=function(){Sa&&(Sa.length=0)};Da.history.disable=function(){null!==Sa&&(Sa.length=0,Sa=null)};Da.history.enable=function(){null===Sa&&(Sa=[])};Da.error=function(){for(var q=arguments.length,k=Array(q),c=0;c<q;c++)k[c]=arguments[c];return Wc("error",
k)};Da.warn=function(){for(var q=arguments.length,k=Array(q),c=0;c<q;c++)k[c]=arguments[c];return Wc("warn",k)};Da.debug=function(){for(var q=arguments.length,k=Array(q),c=0;c<q;c++)k[c]=arguments[c];return Wc("debug",k)};var V=Da,Dd=function(q){for(var k="",c=0;c<arguments.length;c++)k+=q[c].replace(/\n\r?\s*/g,"")+(arguments[c+1]||"");return k},la="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(q){return typeof q}:function(q){return q&&"function"===typeof Symbol&&q.constructor===
Symbol&&q!==Symbol.prototype?"symbol":typeof q},N=function(q,k){if(!(q instanceof k))throw new TypeError("Cannot call a class as a function");},J=function(q,k){if("function"!==typeof k&&null!==k)throw new TypeError("Super expression must either be null or a function, not "+typeof k);q.prototype=Object.create(k&&k.prototype,{constructor:{value:q,enumerable:!1,writable:!0,configurable:!0}});k&&(Object.setPrototypeOf?Object.setPrototypeOf(q,k):q.__proto__=k)},O=function(q,k){if(!q)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!k||"object"!==typeof k&&"function"!==typeof k?q:k},Qd=function(q,k){q.raw=k;return q},Ui=Object.prototype.toString,rf=function(q){return h(q)?Object.keys(q):[]},Vi=Qd(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."],["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set ",
" to ","."]),rb=v("querySelector"),Lf=v("querySelectorAll"),Mf=Object.freeze({isReal:m,isEl:r,isInFrame:x,createEl:G,textContent:R,prependTo:P,hasClass:M,addClass:F,removeClass:H,toggleClass:aa,setAttributes:X,getAttributes:C,getAttribute:function(q,k){return q.getAttribute(k)},setAttribute:function(q,k,c){q.setAttribute(k,c)},removeAttribute:function(q,k){q.removeAttribute(k)},blockTextSelection:ba,unblockTextSelection:S,getBoundingClientRect:ea,findPosition:ja,getPointerPosition:za,isTextNode:Ba,
emptyEl:Ea,normalizeContent:Fa,appendContent:ta,insertContent:nb,isSingleLeftClick:Ia,$:rb,$$:Lf}),Bb=1,fc={},Ab="vdata"+(new Date).getTime(),sf=!1;(function(){try{var q=Object.defineProperty({},"passive",{get:function(){sf=!0}});E.addEventListener("test",null,q);E.removeEventListener("test",null,q)}catch(k){}})();var Wi=["touchstart","touchmove"],sj=Object.freeze({fixEvent:Z,on:Ca,off:pa,trigger:Ma,one:ia}),Rd=!1,Ed=void 0,Xi=function(){if(m()&&!1!==Ed.options.autoSetup){var q=Array.prototype.slice.call(K.getElementsByTagName("video")),
k=Array.prototype.slice.call(K.getElementsByTagName("audio")),c=Array.prototype.slice.call(K.getElementsByTagName("video-js"));if((q=q.concat(k,c))&&0<q.length)for(k=0,c=q.length;k<c;k++){var d=q[k];if(d&&d.getAttribute)void 0===d.player&&null!==d.getAttribute("data-setup")&&Ed(d);else{Ja(1);break}}else Rd||Ja(1)}};m()&&"complete"===K.readyState?Rd=!0:ia(E,"load",function(){Rd=!0});var Nf=function(q){var k=K.createElement("style");k.className=q;return k},Of=function(q,k){q.styleSheet?q.styleSheet.cssText=
k:q.textContent=k},U=function(q,k,c){k.guid||(k.guid=Bb++);var d=function(){return k.apply(q,arguments)};d.guid=c?c+"_"+k.guid:k.guid;return d},Rb=function(q,k){var c=Date.now();return function(){var d=Date.now();d-c>=k&&(q.apply(void 0,arguments),c=d)}},tj=function(q,k,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:E,n=void 0,f=function(){var f=this,g=arguments,a=function(){a=n=null;c||q.apply(f,g)};!n&&c&&q.apply(f,g);d.clearTimeout(n);n=d.setTimeout(a,k)};f.cancel=function(){d.clearTimeout(n);
n=null};return f},qa=function(){};qa.prototype.allowedEvents_={};qa.prototype.on=function(q,k){var c=this.addEventListener;this.addEventListener=function(){};Ca(this,q,k);this.addEventListener=c};qa.prototype.addEventListener=qa.prototype.on;qa.prototype.off=function(q,k){pa(this,q,k)};qa.prototype.removeEventListener=qa.prototype.off;qa.prototype.one=function(q,k){var c=this.addEventListener;this.addEventListener=function(){};ia(this,q,k);this.addEventListener=c};qa.prototype.trigger=function(q){var k=
q.type||q;"string"===typeof q&&(q={type:k});q=Z(q);if(this.allowedEvents_[k]&&this["on"+k])this["on"+k](q);Ma(this,q)};qa.prototype.dispatchEvent=qa.prototype.trigger;var nc=void 0;qa.prototype.queueTrigger=function(q){var k=this;nc||(nc=new Map);var c=q.type||q,d=nc.get(this);d||(d=new Map,nc.set(this,d));var n=d.get(c);d.delete(c);E.clearTimeout(n);n=E.setTimeout(function(){0===d.size&&(d=null,nc.delete(k));k.trigger(q)},0);d.set(c,n)};var Qc=function(q){return q instanceof qa||!!q.eventBusEl_&&
["on","one","off","trigger"].every(function(k){return"function"===typeof q[k]})},Pf=function(q){return"string"===typeof q&&/\S/.test(q)||Array.isArray(q)&&!!q.length},Sd=function(q){if(!q.nodeName&&!Qc(q))throw Error("Invalid target; must be a DOM node or evented object.");},Qf=function(q){if(!Pf(q))throw Error("Invalid event type; must be a non-empty string or array.");},Rf=function(q){if("function"!==typeof q)throw Error("Invalid listener; must be a function.");},Sf=function(q,k){var c=3>k.length||
k[0]===q||k[0]===q.eventBusEl_;if(c){var d=q.eventBusEl_;3<=k.length&&k.shift();var n=k[0];k=k[1]}else d=k[0],n=k[1],k=k[2];Sd(d);Qf(n);Rf(k);k=U(q,k);return{isTargetingSelf:c,target:d,type:n,listener:k}},oc=function(q,k,c,d){Sd(q);if(q.nodeName)sj[k](q,c,d);else q[k](c,d)},Yi={on:function(){for(var q=this,k=arguments.length,c=Array(k),d=0;d<k;d++)c[d]=arguments[d];k=Sf(this,c);c=k.isTargetingSelf;var n=k.target,f=k.type,b=k.listener;oc(n,"on",f,b);if(!c){var g=function(){return q.off(n,f,b)};g.guid=
b.guid;k=function(){return q.off("dispose",g)};k.guid=b.guid;oc(this,"on","dispose",g);oc(n,"on","dispose",k)}},one:function(){for(var q=this,k=arguments.length,c=Array(k),d=0;d<k;d++)c[d]=arguments[d];k=Sf(this,c);var n=k.target,f=k.type,b=k.listener;k.isTargetingSelf?oc(n,"one",f,b):(k=function a(){for(var d=arguments.length,c=Array(d),k=0;k<d;k++)c[k]=arguments[k];q.off(n,f,a);b.apply(null,c)},k.guid=b.guid,oc(n,"one",f,k))},off:function(q,k,c){!q||Pf(q)?pa(this.eventBusEl_,q,k):(Sd(q),Qf(k),Rf(c),
c=U(this,c),this.off("dispose",c),q.nodeName?(pa(q,k,c),pa(q,"dispose",c)):Qc(q)&&(q.off(k,c),q.off("dispose",c)))},trigger:function(q,k){return Ma(this.eventBusEl_,q,k)}},Zi={state:{},setState:function(q){var k=this;"function"===typeof q&&(q=q());var c=void 0;u(q,function(d,n){k.state[n]!==d&&(c=c||{},c[n]={from:k.state[n],to:d});k.state[n]=d});c&&Qc(this)&&this.trigger({changes:c,type:"statechanged"});return c}},I=function(){function q(k,c,d){N(this,q);this.player_=!k&&this.play?k=this:k;this.options_=
Y({},this.options_);c=this.options_=Y(this.options_,c);this.id_=c.id||c.el&&c.el.id;this.id_||(this.id_=(k&&k.id&&k.id()||"no_player")+"_component_"+Bb++);this.name_=c.name||null;c.el?this.el_=c.el:!1!==c.createEl&&(this.el_=this.createEl());!1!==c.evented&&db(this,{eventBusKey:this.el_?"el_":null});Cb(this,this.constructor.defaultState);this.children_=[];this.childIndex_={};this.childNameIndex_={};!1!==c.initChildren&&this.initChildren();this.ready(d);!1!==c.reportTouchActivity&&this.enableTouchActivity()}
q.prototype.dispose=function(){this.trigger({type:"dispose",bubbles:!1});if(this.children_)for(var k=this.children_.length-1;0<=k;k--)this.children_[k].dispose&&this.children_[k].dispose();this.childNameIndex_=this.childIndex_=this.children_=null;this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),ob(this.el_),this.el_=null);this.player_=null};q.prototype.player=function(){return this.player_};q.prototype.options=function(k){V.warn("this.options() has been deprecated and will be moved to the constructor in 6.0");
return k?this.options_=Y(this.options_,k):this.options_};q.prototype.el=function(){return this.el_};q.prototype.createEl=function(k,c,d){return G(k,c,d)};q.prototype.localize=function(k,c){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:k,n=this.player_.language&&this.player_.language(),f=this.player_.languages&&this.player_.languages(),b=f&&f[n];n=n&&n.split("-")[0];f=f&&f[n];b&&b[k]?d=b[k]:f&&f[k]&&(d=f[k]);c&&(d=d.replace(/\{(\d+)\}/g,function(d,a){var f=a=c[a-1];"undefined"===typeof a&&
(f=d);return f}));return d};q.prototype.contentEl=function(){return this.contentEl_||this.el_};q.prototype.id=function(){return this.id_};q.prototype.name=function(){return this.name_};q.prototype.children=function(){return this.children_};q.prototype.getChildById=function(k){return this.childIndex_[k]};q.prototype.getChild=function(k){if(k)return k=da(k),this.childNameIndex_[k]};q.prototype.addChild=function(k){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},d=2<arguments.length&&
void 0!==arguments[2]?arguments[2]:this.children_.length,n=void 0;if("string"===typeof k){n=da(k);var f=c.componentClass||n;c.name=n;var b=q.getComponent(f);if(!b)throw Error("Component "+f+" does not exist");if("function"!==typeof b)return null;c=new b(this.player_||this,c)}else c=k;this.children_.splice(d,0,c);"function"===typeof c.id&&(this.childIndex_[c.id()]=c);(n=n||c.name&&da(c.name()))&&(this.childNameIndex_[n]=c);"function"===typeof c.el&&c.el()&&(d=this.contentEl().children[d]||null,this.contentEl().insertBefore(c.el(),
d));return c};q.prototype.removeChild=function(k){"string"===typeof k&&(k=this.getChild(k));if(k&&this.children_){for(var c=!1,d=this.children_.length-1;0<=d;d--)if(this.children_[d]===k){c=!0;this.children_.splice(d,1);break}c&&(this.childIndex_[k.id()]=null,this.childNameIndex_[k.name()]=null,(c=k.el())&&c.parentNode===this.contentEl()&&this.contentEl().removeChild(k.el()))}};q.prototype.initChildren=function(){var k=this,c=this.options_.children;if(c){var d=this.options_,n=void 0,f=q.getComponent("Tech");
n=Array.isArray(c)?c:Object.keys(c);n.concat(Object.keys(this.options_).filter(function(d){return!n.some(function(c){return"string"===typeof c?d===c:d===c.name})})).map(function(d){if("string"===typeof d){var f=d;d=c[f]||k.options_[f]||{}}else f=d.name;return{name:f,opts:d}}).filter(function(d){return(d=q.getComponent(d.opts.componentClass||da(d.name)))&&!f.isTech(d)}).forEach(function(c){var f=c.name;c=c.opts;void 0!==d[f]&&(c=d[f]);!1!==c&&(!0===c&&(c={}),c.playerOptions=k.options_.playerOptions,
(c=k.addChild(f,c))&&(k[f]=c))})}};q.prototype.buildCSSClass=function(){return""};q.prototype.ready=function(k){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;k&&(this.isReady_?c?k.call(this):this.setTimeout(k,1):(this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(k)))};q.prototype.triggerReady=function(){this.isReady_=!0;this.setTimeout(function(){var k=this.readyQueue_;this.readyQueue_=[];k&&0<k.length&&k.forEach(function(c){c.call(this)},this);this.trigger("ready")},1)};
q.prototype.$=function(k,c){return rb(k,c||this.contentEl())};q.prototype.$$=function(k,c){return Lf(k,c||this.contentEl())};q.prototype.hasClass=function(k){return M(this.el_,k)};q.prototype.addClass=function(k){F(this.el_,k)};q.prototype.removeClass=function(k){H(this.el_,k)};q.prototype.toggleClass=function(k,c){aa(this.el_,k,c)};q.prototype.show=function(){this.removeClass("vjs-hidden")};q.prototype.hide=function(){this.addClass("vjs-hidden")};q.prototype.lockShowing=function(){this.addClass("vjs-lock-showing")};
q.prototype.unlockShowing=function(){this.removeClass("vjs-lock-showing")};q.prototype.getAttribute=function(k){return this.el_.getAttribute(k)};q.prototype.setAttribute=function(k,c){this.el_.setAttribute(k,c)};q.prototype.removeAttribute=function(k){this.el_.removeAttribute(k)};q.prototype.width=function(k,c){return this.dimension("width",k,c)};q.prototype.height=function(k,c){return this.dimension("height",k,c)};q.prototype.dimensions=function(k,c){this.width(k,!0);this.height(c)};q.prototype.dimension=
function(k,c,d){if(void 0!==c){if(null===c||c!==c)c=0;-1!==(""+c).indexOf("%")||-1!==(""+c).indexOf("px")?this.el_.style[k]=c:this.el_.style[k]="auto"===c?"":c+"px";d||this.trigger("componentresize")}else{if(!this.el_)return 0;c=this.el_.style[k];d=c.indexOf("px");return-1!==d?parseInt(c.slice(0,d),10):parseInt(this.el_["offset"+da(k)],10)}};q.prototype.currentDimension=function(k){var c=0;if("width"!==k&&"height"!==k)throw Error("currentDimension only accepts width or height value");"function"===
typeof E.getComputedStyle&&(c=E.getComputedStyle(this.el_),c=c.getPropertyValue(k)||c[k]);c=parseFloat(c);0===c&&(k="offset"+da(k),c=this.el_[k]);return c};q.prototype.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}};q.prototype.currentWidth=function(){return this.currentDimension("width")};q.prototype.currentHeight=function(){return this.currentDimension("height")};q.prototype.focus=function(){this.el_.focus()};q.prototype.blur=function(){this.el_.blur()};
q.prototype.emitTapEvents=function(){var k=0,c=null,d=void 0;this.on("touchstart",function(f){1===f.touches.length&&(c={pageX:f.touches[0].pageX,pageY:f.touches[0].pageY},k=(new Date).getTime(),d=!0)});this.on("touchmove",function(f){if(1<f.touches.length)d=!1;else if(c){var b=f.touches[0].pageX-c.pageX;f=f.touches[0].pageY-c.pageY;10<Math.sqrt(b*b+f*f)&&(d=!1)}});var n=function(){d=!1};this.on("touchleave",n);this.on("touchcancel",n);this.on("touchend",function(f){c=null;!0===d&&200>(new Date).getTime()-
k&&(f.preventDefault(),this.trigger("tap"))})};q.prototype.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var k=U(this.player(),this.player().reportUserActivity),c=void 0;this.on("touchstart",function(){k();this.clearInterval(c);c=this.setInterval(k,250)});var d=function(d){k();this.clearInterval(c)};this.on("touchmove",k);this.on("touchend",d);this.on("touchcancel",d)}};q.prototype.setTimeout=function(k,c){var d=this;k=U(this,k);var n=E.setTimeout(function(){d.off("dispose",
f);k()},c);var f=function(){return d.clearTimeout(n)};f.guid="vjs-timeout-"+n;this.on("dispose",f);return n};q.prototype.clearTimeout=function(k){E.clearTimeout(k);var c=function(){};c.guid="vjs-timeout-"+k;this.off("dispose",c);return k};q.prototype.setInterval=function(k,c){var d=this;k=U(this,k);var n=E.setInterval(k,c);k=function(){return d.clearInterval(n)};k.guid="vjs-interval-"+n;this.on("dispose",k);return n};q.prototype.clearInterval=function(k){E.clearInterval(k);var c=function(){};c.guid=
"vjs-interval-"+k;this.off("dispose",c);return k};q.prototype.requestAnimationFrame=function(k){var c=this;if(this.supportsRaf_){k=U(this,k);var d=E.requestAnimationFrame(function(){c.off("dispose",n);k()});var n=function(){return c.cancelAnimationFrame(d)};n.guid="vjs-raf-"+d;this.on("dispose",n);return d}return this.setTimeout(k,1E3/60)};q.prototype.cancelAnimationFrame=function(k){if(this.supportsRaf_){E.cancelAnimationFrame(k);var c=function(){};c.guid="vjs-raf-"+k;this.off("dispose",c);return k}return this.clearTimeout(k)};
q.registerComponent=function(k,c){if("string"!==typeof k||!k)throw Error('Illegal component name, "'+k+'"; must be a non-empty string.');var d=q.getComponent("Tech");d=d&&d.isTech(c);var n=q===c||q.prototype.isPrototypeOf(c.prototype);if(d||!n)throw Error('Illegal component, "'+k+'"; '+(d?"techs must be registered using Tech.registerTech()":"must be a Component subclass")+".");k=da(k);q.components_||(q.components_={});d=q.getComponent("Player");if("Player"===k&&d&&d.players){var f=d.players;d=Object.keys(f);
if(f&&0<d.length&&d.map(function(d){return f[d]}).every(Boolean))throw Error("Can not register Player component after player has been created.");}return q.components_[k]=c};q.getComponent=function(k){if(k&&(k=da(k),q.components_&&q.components_[k]))return q.components_[k]};return q}();I.prototype.supportsRaf_="function"===typeof E.requestAnimationFrame&&"function"===typeof E.cancelAnimationFrame;I.registerComponent("Component",I);var xa=E.navigator&&E.navigator.userAgent||"",Tf=/AppleWebKit\/([\d.]+)/i.exec(xa),
uj=Tf?parseFloat(Tf.pop()):null,Td=/iPad/i.test(xa),Ud=/iPhone/i.test(xa)&&!Td,Uf=/iPod/i.test(xa),fb=Ud||Td||Uf,vj=function(){var q=xa.match(/OS (\d+)_/i);return q&&q[1]?q[1]:null}(),Gb=/Android/i.test(xa),Vd=function(){var q=xa.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!q)return null;var k=q[1]&&parseFloat(q[1]),c=q[2]&&parseFloat(q[2]);return k&&c?parseFloat(q[1]+"."+q[2]):k?k:null}(),Vf=Gb&&5>Vd&&537>uj,Wf=/Firefox/i.test(xa),Wd=/Edge/i.test(xa),sb=!Wd&&(/Chrome/i.test(xa)||/CriOS/i.test(xa)),
Xf=function(){var q=xa.match(/(Chrome|CriOS)\/(\d+)/);return q&&q[2]?parseFloat(q[2]):null}(),Yf=function(){var q=/MSIE\s(\d+)\.\d/.exec(xa);q=q&&parseFloat(q[1]);!q&&/Trident\/7.0/i.test(xa)&&/rv:11.0/.test(xa)&&(q=11);return q}(),Zf=/Safari/i.test(xa)&&!sb&&!Gb&&!Wd,$f=(Zf||fb)&&!sb,Xc=m()&&("ontouchstart"in E||E.navigator.maxTouchPoints||E.DocumentTouch&&E.document instanceof E.DocumentTouch),wj=Object.freeze({IS_IPAD:Td,IS_IPHONE:Ud,IS_IPOD:Uf,IS_IOS:fb,IOS_VERSION:vj,IS_ANDROID:Gb,ANDROID_VERSION:Vd,
IS_NATIVE_ANDROID:Vf,IS_FIREFOX:Wf,IS_EDGE:Wd,IS_CHROME:sb,CHROME_VERSION:Xf,IE_VERSION:Yf,IS_SAFARI:Zf,IS_ANY_SAFARI:$f,TOUCH_ENABLED:Xc}),gb={},Yc=["requestFullscreen exitFullscreen fullscreenElement fullscreenEnabled fullscreenchange fullscreenerror".split(" "),"webkitRequestFullscreen webkitExitFullscreen webkitFullscreenElement webkitFullscreenEnabled webkitfullscreenchange webkitfullscreenerror".split(" "),"webkitRequestFullScreen webkitCancelFullScreen webkitCurrentFullScreenElement webkitCancelFullScreen webkitfullscreenchange webkitfullscreenerror".split(" "),
"mozRequestFullScreen mozCancelFullScreen mozFullScreenElement mozFullScreenEnabled mozfullscreenchange mozfullscreenerror".split(" "),"msRequestFullscreen msExitFullscreen msFullscreenElement msFullscreenEnabled MSFullscreenChange MSFullscreenError".split(" ")],xj=Yc[0],Zc=void 0,$c=0;for(;$c<Yc.length;$c++)if(Yc[$c][1]in K){Zc=Yc[$c];break}if(Zc)for(var ad=0;ad<Zc.length;ad++)gb[xj[ad]]=Zc[ad];va.prototype.code=0;va.prototype.message="";va.prototype.status=null;va.errorTypes="MEDIA_ERR_CUSTOM MEDIA_ERR_ABORTED MEDIA_ERR_NETWORK MEDIA_ERR_DECODE MEDIA_ERR_SRC_NOT_SUPPORTED MEDIA_ERR_ENCRYPTED".split(" ");
va.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Sb=0;Sb<va.errorTypes.length;Sb++)va[va.errorTypes[Sb]]=
Sb,va.prototype[va.errorTypes[Sb]]=Sb;var Xd=function(q){return"kind label language id inBandMetadataTrackDispatchType mode src".split(" ").reduce(function(k,c,d){q[c]&&(k[c]=q[c]);return k},{cues:q.cues&&Array.prototype.map.call(q.cues,function(k){return{startTime:k.startTime,endTime:k.endTime,text:k.text,id:k.id}})})},ag={textTracksToJson:function(q){var k=q.$$("track"),c=Array.prototype.map.call(k,function(d){return d.track});return Array.prototype.map.call(k,function(d){var c=Xd(d.track);d.src&&
(c.src=d.src);return c}).concat(Array.prototype.filter.call(q.textTracks(),function(d){return-1===c.indexOf(d)}).map(Xd))},jsonToTextTracks:function(q,k){q.forEach(function(c){var d=k.addRemoteTextTrack(c).track;!c.src&&c.cues&&c.cues.forEach(function(c){return d.addCue(c)})});return k.textTracks()},trackToJson_:Xd},Tb=function(q){function k(c,d){N(this,k);c=O(this,q.call(this,c,d));c.opened_=c.hasBeenOpened_=c.hasBeenFilled_=!1;c.closeable(!c.options_.uncloseable);c.content(c.options_.content);c.contentEl_=
G("div",{className:"vjs-modal-dialog-content"},{role:"document"});c.descEl_=G("p",{className:"vjs-modal-dialog-description vjs-control-text",id:c.el().getAttribute("aria-describedby")});R(c.descEl_,c.description());c.el_.appendChild(c.descEl_);c.el_.appendChild(c.contentEl_);return c}J(k,q);k.prototype.createEl=function(){return q.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),
role:"dialog"})};k.prototype.dispose=function(){this.previouslyActiveEl_=this.descEl_=this.contentEl_=null;q.prototype.dispose.call(this)};k.prototype.buildCSSClass=function(){return"vjs-modal-dialog vjs-hidden "+q.prototype.buildCSSClass.call(this)};k.prototype.handleKeyPress=function(c){27===c.which&&this.closeable()&&this.close()};k.prototype.label=function(){return this.localize(this.options_.label||"Modal Window")};k.prototype.description=function(){var c=this.options_.description||this.localize("This is a modal window.");
this.closeable()&&(c+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button."));return c};k.prototype.open=function(){if(!this.opened_){var c=this.player();this.trigger("beforemodalopen");this.opened_=!0;(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill();this.wasPlaying_=!c.paused();this.options_.pauseOnOpen&&this.wasPlaying_&&c.pause();if(this.closeable())this.on(this.el_.ownerDocument,"keydown",U(this,this.handleKeyPress));
this.hadControls_=c.controls();c.controls(!1);this.show();this.conditionalFocus_();this.el().setAttribute("aria-hidden","false");this.trigger("modalopen");this.hasBeenOpened_=!0}};k.prototype.opened=function(c){if("boolean"===typeof c)this[c?"open":"close"]();return this.opened_};k.prototype.close=function(){if(this.opened_){var c=this.player();this.trigger("beforemodalclose");this.opened_=!1;this.wasPlaying_&&this.options_.pauseOnOpen&&c.play();this.closeable()&&this.off(this.el_.ownerDocument,"keydown",
U(this,this.handleKeyPress));this.hadControls_&&c.controls(!0);this.hide();this.el().setAttribute("aria-hidden","true");this.trigger("modalclose");this.conditionalBlur_();this.options_.temporary&&this.dispose()}};k.prototype.closeable=function(c){if("boolean"===typeof c){c=this.closeable_=!!c;var d=this.getChild("closeButton");if(c&&!d){var n=this.contentEl_;this.contentEl_=this.el_;d=this.addChild("closeButton",{controlText:"Close Modal Dialog"});this.contentEl_=n;this.on(d,"close",this.close)}!c&&
d&&(this.off(d,"close",this.close),this.removeChild(d),d.dispose())}return this.closeable_};k.prototype.fill=function(){this.fillWith(this.content())};k.prototype.fillWith=function(c){var d=this.contentEl(),n=d.parentNode,f=d.nextSibling;this.trigger("beforemodalfill");this.hasBeenFilled_=!0;n.removeChild(d);this.empty();nb(d,c);this.trigger("modalfill");f?n.insertBefore(d,f):n.appendChild(d);(c=this.getChild("closeButton"))&&n.appendChild(c.el_)};k.prototype.empty=function(){this.trigger("beforemodalempty");
Ea(this.contentEl());this.trigger("modalempty")};k.prototype.content=function(c){"undefined"!==typeof c&&(this.content_=c);return this.content_};k.prototype.conditionalFocus_=function(){var c=K.activeElement,d=this.player_.el_;this.previouslyActiveEl_=null;if(d.contains(c)||d===c)this.previouslyActiveEl_=c,this.focus(),this.on(K,"keydown",this.handleKeyDown)};k.prototype.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null);this.off(K,
"keydown",this.handleKeyDown)};k.prototype.handleKeyDown=function(c){if(9===c.which){for(var d=this.focusableEls_(),n=this.el_.querySelector(":focus"),f=void 0,b=0;b<d.length;b++)if(n===d[b]){f=b;break}K.activeElement===this.el_&&(f=0);c.shiftKey&&0===f?(d[d.length-1].focus(),c.preventDefault()):c.shiftKey||f!==d.length-1||(d[0].focus(),c.preventDefault())}};k.prototype.focusableEls_=function(){var c=this.el_.querySelectorAll("*");return Array.prototype.filter.call(c,function(d){return(d instanceof
E.HTMLAnchorElement||d instanceof E.HTMLAreaElement)&&d.hasAttribute("href")||(d instanceof E.HTMLInputElement||d instanceof E.HTMLSelectElement||d instanceof E.HTMLTextAreaElement||d instanceof E.HTMLButtonElement)&&!d.hasAttribute("disabled")||d instanceof E.HTMLIFrameElement||d instanceof E.HTMLObjectElement||d instanceof E.HTMLEmbedElement||d.hasAttribute("tabindex")&&-1!==d.getAttribute("tabindex")||d.hasAttribute("contenteditable")})};return k}(I);Tb.prototype.options_={pauseOnOpen:!0,temporary:!0};
I.registerComponent("ModalDialog",Tb);var Ub=function(q){function k(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];N(this,k);var d=O(this,q.call(this));d.tracks_=[];Object.defineProperty(d,"length",{get:function(){return this.tracks_.length}});for(var n=0;n<c.length;n++)d.addTrack(c[n]);return d}J(k,q);k.prototype.addTrack=function(c){var d=this.tracks_.length;""+d in this||Object.defineProperty(this,d,{get:function(){return this.tracks_[d]}});-1===this.tracks_.indexOf(c)&&(this.tracks_.push(c),
this.trigger({track:c,type:"addtrack"}))};k.prototype.removeTrack=function(c){for(var d=void 0,n=0,f=this.length;n<f;n++)if(this[n]===c){d=this[n];d.off&&d.off();this.tracks_.splice(n,1);break}d&&this.trigger({track:d,type:"removetrack"})};k.prototype.getTrackById=function(c){for(var d=null,n=0,f=this.length;n<f;n++){var b=this[n];if(b.id===c){d=b;break}}return d};return k}(qa);Ub.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"};for(var yj in Ub.prototype.allowedEvents_)Ub.prototype["on"+
yj]=null;var Yd=function(q,k){for(var c=0;c<q.length;c++)Object.keys(q[c]).length&&k.id!==q[c].id&&(q[c].enabled=!1)},zj=function(q){function k(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];N(this,k);for(var d=c.length-1;0<=d;d--)if(c[d].enabled){Yd(c,c[d]);break}c=O(this,q.call(this,c));c.changing_=!1;return c}J(k,q);k.prototype.addTrack=function(c){var d=this;c.enabled&&Yd(this,c);q.prototype.addTrack.call(this,c);c.addEventListener&&c.addEventListener("enabledchange",function(){d.changing_||
(d.changing_=!0,Yd(d,c),d.changing_=!1,d.trigger("change"))})};return k}(Ub),Zd=function(q,k){for(var c=0;c<q.length;c++)Object.keys(q[c]).length&&k.id!==q[c].id&&(q[c].selected=!1)},Aj=function(q){function k(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];N(this,k);for(var d=c.length-1;0<=d;d--)if(c[d].selected){Zd(c,c[d]);break}c=O(this,q.call(this,c));c.changing_=!1;Object.defineProperty(c,"selectedIndex",{get:function(){for(var d=0;d<this.length;d++)if(this[d].selected)return d;
return-1},set:function(){}});return c}J(k,q);k.prototype.addTrack=function(c){var d=this;c.selected&&Zd(this,c);q.prototype.addTrack.call(this,c);c.addEventListener&&c.addEventListener("selectedchange",function(){d.changing_||(d.changing_=!0,Zd(d,c),d.changing_=!1,d.trigger("change"))})};return k}(Ub),bg=function(q){function k(){N(this,k);return O(this,q.apply(this,arguments))}J(k,q);k.prototype.addTrack=function(c){q.prototype.addTrack.call(this,c);c.addEventListener("modechange",U(this,function(){this.queueTrigger("change")}));
-1===["metadata","chapters"].indexOf(c.kind)&&c.addEventListener("modechange",U(this,function(){this.trigger("selectedlanguagechange")}))};return k}(Ub),Bj=function(){function q(){var k=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];N(this,q);this.trackElements_=[];Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var c=0,d=k.length;c<d;c++)this.addTrackElement_(k[c])}q.prototype.addTrackElement_=function(k){var c=this.trackElements_.length;""+
c in this||Object.defineProperty(this,c,{get:function(){return this.trackElements_[c]}});-1===this.trackElements_.indexOf(k)&&this.trackElements_.push(k)};q.prototype.getTrackElementByTrack_=function(k){for(var c=void 0,d=0,n=this.trackElements_.length;d<n;d++)if(k===this.trackElements_[d].track){c=this.trackElements_[d];break}return c};q.prototype.removeTrackElement_=function(k){for(var c=0,d=this.trackElements_.length;c<d;c++)if(k===this.trackElements_[c]){this.trackElements_.splice(c,1);break}};
return q}(),cg=function(){function q(k){N(this,q);q.prototype.setCues_.call(this,k);Object.defineProperty(this,"length",{get:function(){return this.length_}})}q.prototype.setCues_=function(k){var c=this.length||0,d=0,n=k.length;this.cues_=k;this.length_=k.length;k=function(d){""+d in this||Object.defineProperty(this,""+d,{get:function(){return this.cues_[d]}})};if(c<n)for(d=c;d<n;d++)k.call(this,d)};q.prototype.getCueById=function(k){for(var c=null,d=0,n=this.length;d<n;d++){var f=this[d];if(f.id===
k){c=f;break}}return c};return q}(),Cj={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Dj={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Ej={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},dg={disabled:"disabled",hidden:"hidden",showing:"showing"},$d=function(q){function k(){var c=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};N(this,k);var d=O(this,q.call(this)),n={id:c.id||"vjs_track_"+Bb++,kind:c.kind||"",label:c.label||"",language:c.language||""};c=function(c){Object.defineProperty(d,c,{get:function(){return n[c]},set:function(){}})};for(var f in n)c(f);return d}J(k,q);return k}(qa),ae=function(q){var k="protocol hostname port pathname search hash host".split(" "),c=K.createElement("a");c.href=q;var d=""===c.host&&"file:"!==c.protocol,n=void 0;d&&(n=K.createElement("div"),
n.innerHTML='<a href="'+q+'"></a>',c=n.firstChild,n.setAttribute("style","display:none; position:absolute;"),K.body.appendChild(n));q={};for(var f=0;f<k.length;f++)q[k[f]]=c[k[f]];"http:"===q.protocol&&(q.host=q.host.replace(/:80$/,""));"https:"===q.protocol&&(q.host=q.host.replace(/:443$/,""));q.protocol||(q.protocol=E.location.protocol);d&&K.body.removeChild(n);return q},eg=function(q){if(!q.match(/^https?:\/\//)){var k=K.createElement("div");k.innerHTML='<a href="'+q+'">x</a>';q=k.firstChild.href}return q},
be=function(q){return"string"===typeof q&&(q=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i.exec(q))?q.pop().toLowerCase():""},bd=function(q){var k=E.location;q=ae(q);return(":"===q.protocol?k.protocol:q.protocol)+q.host!==k.protocol+k.host},Fj=Object.freeze({parseUrl:ae,getAbsoluteURL:eg,getFileExtension:be,isCrossOrigin:bd}),ce=function(q){var k=Gj.call(q);return"[object Function]"===k||"function"===typeof q&&"[object RegExp]"!==k||"undefined"!==typeof window&&(q===window.setTimeout||
q===window.alert||q===window.confirm||q===window.prompt)},Gj=Object.prototype.toString,fg=Object.freeze({default:ce,__moduleExports:ce}),pc=B(function(q,k){k=q.exports=function(c){return c.replace(/^\s*|\s*$/g,"")};k.left=function(c){return c.replace(/^\s*/,"")};k.right=function(c){return c.replace(/\s*$/,"")}}),gg=Object.freeze({default:pc,__moduleExports:pc,left:pc.left,right:pc.right}),wf=fg&&ce||fg,de=function(q,k,c){if(!wf(k))throw new TypeError("iterator must be a function");3>arguments.length&&
(c=this);if("[object Array]"===Hj.call(q))for(var d=c,n=0,f=q.length;n<f;n++)hg.call(q,n)&&k.call(d,q[n],n,q);else if("string"===typeof q)for(d=c,n=0,f=q.length;n<f;n++)k.call(d,q.charAt(n),n,q);else for(n in d=c,q)hg.call(q,n)&&k.call(d,q[n],n,q)},Hj=Object.prototype.toString,hg=Object.prototype.hasOwnProperty,ig=Object.freeze({default:de,__moduleExports:de}),ee=gg&&pc||gg,Ij=ig&&de||ig,fe=function(q){if(!q)return{};var k={};Ij(ee(q).split("\n"),function(c){var d=c.indexOf(":"),n=ee(c.slice(0,d)).toLowerCase();
c=ee(c.slice(d+1));"undefined"===typeof k[n]?k[n]=c:"[object Array]"===Object.prototype.toString.call(k[n])?k[n].push(c):k[n]=[k[n],c]});return k},jg=Object.freeze({default:fe,__moduleExports:fe}),ge=function(){for(var q={},k=0;k<arguments.length;k++){var c=arguments[k],d;for(d in c)Jj.call(c,d)&&(q[d]=c[d])}return q},Jj=Object.prototype.hasOwnProperty,kg=Object.freeze({default:ge,__moduleExports:ge}),bj=jg&&fe||jg,aj=kg&&ge||kg;eb.XMLHttpRequest=E.XMLHttpRequest||cj;eb.XDomainRequest="withCredentials"in
new eb.XMLHttpRequest?eb.XMLHttpRequest:E.XDomainRequest;(function(q,k){for(var c=0;c<q.length;c++)k(q[c])})("get put post patch head delete".split(" "),function(q){eb["delete"===q?"del":q]=function(k,c,d){c=vf(k,c,d);c.method=q.toUpperCase();return xf(c)}});var lg=function(q,k){var c=new E.WebVTT.Parser(E,E.vttjs,E.WebVTT.StringDecoder()),d=[];c.oncue=function(d){k.addCue(d)};c.onparsingerror=function(c){d.push(c)};c.onflush=function(){k.trigger({type:"loadeddata",target:k})};c.parse(q);0<d.length&&
(E.console&&E.console.groupCollapsed&&E.console.groupCollapsed("Text Track parsing errors for "+k.src),d.forEach(function(d){return V.error(d)}),E.console&&E.console.groupEnd&&E.console.groupEnd());c.flush()},Kj=function(q,k){var c={uri:q};if(q=bd(q))c.cors=q;eb(c,U(this,function(d,c,f){if(d)return V.error(d,c);k.loaded_=!0;if("function"!==typeof E.WebVTT){if(k.tech_){var b=function(){return lg(f,k)};k.tech_.on("vttjsloaded",b);k.tech_.on("vttjserror",function(){V.error("vttjs failed to load, stopping trying to process "+
k.src);k.tech_.off("vttjsloaded",b)})}}else lg(f,k)}))},qc=function(q){function k(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};N(this,k);if(!c.tech)throw Error("A tech was not provided.");c=Y(c,{kind:Ej[c.kind]||"subtitles",language:c.language||c.srclang||""});var d=dg[c.mode]||"disabled",n=c.default;if("metadata"===c.kind||"chapters"===c.kind)d="hidden";var f=O(this,q.call(this,c));f.tech_=c.tech;f.cues_=[];f.activeCues_=[];var b=new cg(f.cues_),g=new cg(f.activeCues_),a=!1,
l=U(f,function(){this.activeCues=this.activeCues;a&&(this.trigger("cuechange"),a=!1)});"disabled"!==d&&f.tech_.ready(function(){f.tech_.on("timeupdate",l)},!0);Object.defineProperties(f,{default:{get:function(){return n},set:function(){}},mode:{get:function(){return d},set:function(c){var a=this;dg[c]&&(d=c,"disabled"!==d?this.tech_.ready(function(){a.tech_.on("timeupdate",l)},!0):this.tech_.off("timeupdate",l),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?b:null},set:function(){}},
activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return g;for(var d=this.tech_.currentTime(),c=[],f=0,b=this.cues.length;f<b;f++){var n=this.cues[f];n.startTime<=d&&n.endTime>=d?c.push(n):n.startTime===n.endTime&&n.startTime<=d&&n.startTime+.5>=d&&c.push(n)}a=!1;if(c.length!==this.activeCues_.length)a=!0;else for(d=0;d<c.length;d++)-1===this.activeCues_.indexOf(c[d])&&(a=!0);this.activeCues_=c;g.setCues_(this.activeCues_);return g},set:function(){}}});c.src?(f.src=c.src,
Kj(c.src,f)):f.loaded_=!0;return f}J(k,q);k.prototype.addCue=function(c){var d=c;if(E.vttjs&&!(c instanceof E.vttjs.VTTCue)){d=new E.vttjs.VTTCue(c.startTime,c.endTime,c.text);for(var n in c)n in d||(d[n]=c[n]);d.id=c.id;d.originalCue_=c}c=this.tech_.textTracks();for(n=0;n<c.length;n++)c[n]!==this&&c[n].removeCue(d);this.cues_.push(d);this.cues.setCues_(this.cues_)};k.prototype.removeCue=function(c){for(var d=this.cues_.length;d--;){var n=this.cues_[d];if(n===c||n.originalCue_&&n.originalCue_===c){this.cues_.splice(d,
1);this.cues.setCues_(this.cues_);break}}};return k}($d);qc.prototype.allowedEvents_={cuechange:"cuechange"};var mg=function(q){function k(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};N(this,k);c=Y(c,{kind:Dj[c.kind]||""});var d=O(this,q.call(this,c)),n=!1;Object.defineProperty(d,"enabled",{get:function(){return n},set:function(d){"boolean"===typeof d&&d!==n&&(n=d,this.trigger("enabledchange"))}});c.enabled&&(d.enabled=c.enabled);d.loaded_=!0;return d}J(k,q);return k}($d),ng=
function(q){function k(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};N(this,k);c=Y(c,{kind:Cj[c.kind]||""});var d=O(this,q.call(this,c)),n=!1;Object.defineProperty(d,"selected",{get:function(){return n},set:function(d){"boolean"===typeof d&&d!==n&&(n=d,this.trigger("selectedchange"))}});c.selected&&(d.selected=c.selected);return d}J(k,q);return k}($d),Vb=function(q){function k(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};N(this,k);var d=O(this,q.call(this)),
n=void 0,f=new qc(c);d.kind=f.kind;d.src=f.src;d.srclang=f.language;d.label=f.label;d.default=f.default;Object.defineProperties(d,{readyState:{get:function(){return n}},track:{get:function(){return f}}});n=0;f.addEventListener("loadeddata",function(){n=2;d.trigger({type:"load",target:d})});return d}J(k,q);return k}(qa);Vb.prototype.allowedEvents_={load:"load"};Vb.NONE=0;Vb.LOADING=1;Vb.LOADED=2;Vb.ERROR=3;var Na={audio:{ListClass:zj,TrackClass:mg,capitalName:"Audio"},video:{ListClass:Aj,TrackClass:ng,
capitalName:"Video"},text:{ListClass:bg,TrackClass:qc,capitalName:"Text"}};Object.keys(Na).forEach(function(q){Na[q].getterName=q+"Tracks";Na[q].privateName=q+"Tracks_"});var rc={remoteText:{ListClass:bg,TrackClass:qc,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:Bj,TrackClass:Vb,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Ha=Y(Na,rc);rc.names=Object.keys(rc);Na.names=Object.keys(Na);
Ha.names=[].concat(rc.names).concat(Na.names);var Hd=Object.create||function(){function q(){}return function(k){if(1!==arguments.length)throw Error("Object.create shim only accepts one parameter.");q.prototype=k;return new q}}();Ga.prototype=Hd(Error.prototype);Ga.prototype.constructor=Ga;Ga.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};ic.prototype={set:function(q,k){this.get(q)||""===k||(this.values[q]=k)},get:function(q,
k,c){return c?this.has(q)?this.values[q]:k[c]:this.has(q)?this.values[q]:k},has:function(q){return q in this.values},alt:function(q,k,c){for(var d=0;d<c.length;++d)if(k===c[d]){this.set(q,k);break}},integer:function(q,k){/^-?\d+$/.test(k)&&this.set(q,parseInt(k,10))},percent:function(q,k){return k.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(k=parseFloat(k),0<=k&&100>=k)?(this.set(q,k),!0):!1}};var ej={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"\u200e","&rlm;":"\u200f","&nbsp;":"\u00a0"},fj={c:"span",i:"i",
b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},gj={v:"title",lang:"lang"},zf={rt:"ruby"},Af=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,
64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,
68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],
[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];Id.prototype.applyStyles=function(q,k){k=k||this.div;for(var c in q)q.hasOwnProperty(c)&&(k.style[c]=q[c])};Id.prototype.formatStyle=function(q,k){return 0===q?0:q+k};Sc.prototype=Hd(Id.prototype);Sc.prototype.constructor=Sc;wa.prototype.move=function(q,k){k=void 0!==k?k:this.lineHeight;switch(q){case "+x":this.left+=k;this.right+=k;break;case "-x":this.left-=k;this.right-=k;break;case "+y":this.top+=k;this.bottom+=k;break;case "-y":this.top-=
k,this.bottom-=k}};wa.prototype.overlaps=function(q){return this.left<q.right&&this.right>q.left&&this.top<q.bottom&&this.bottom>q.top};wa.prototype.overlapsAny=function(q){for(var k=0;k<q.length;k++)if(this.overlaps(q[k]))return!0;return!1};wa.prototype.within=function(q){return this.top>=q.top&&this.bottom<=q.bottom&&this.left>=q.left&&this.right<=q.right};wa.prototype.overlapsOppositeAxis=function(q,k){switch(k){case "+x":return this.left<q.left;case "-x":return this.right>q.right;case "+y":return this.top<
q.top;case "-y":return this.bottom>q.bottom}};wa.prototype.intersectPercentage=function(q){return Math.max(0,Math.min(this.right,q.right)-Math.max(this.left,q.left))*Math.max(0,Math.min(this.bottom,q.bottom)-Math.max(this.top,q.top))/(this.height*this.width)};wa.prototype.toCSSCompatValues=function(q){return{top:this.top-q.top,bottom:q.bottom-this.bottom,left:this.left-q.left,right:q.right-this.right,height:this.height,width:this.width}};wa.getSimpleBoxPosition=function(q){var k=q.div?q.div.offsetHeight:
q.tagName?q.offsetHeight:0,c=q.div?q.div.offsetWidth:q.tagName?q.offsetWidth:0,d=q.div?q.div.offsetTop:q.tagName?q.offsetTop:0;q=q.div?q.div.getBoundingClientRect():q.tagName?q.getBoundingClientRect():q;return{left:q.left,right:q.right,top:q.top||d,height:q.height||k,bottom:q.bottom||d+(q.height||k),width:q.width||c}};qb.StringDecoder=function(){return{decode:function(q){if(!q)return"";if("string"!==typeof q)throw Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(q))}}};
qb.convertCueToDOMTree=function(q,k){return q&&k?yf(q,k):null};qb.processCues=function(q,k,c){if(!q||!k||!c)return null;for(;c.firstChild;)c.removeChild(c.firstChild);var d=q.document.createElement("div");d.style.position="absolute";d.style.left="0";d.style.right="0";d.style.top="0";d.style.bottom="0";d.style.margin="1.5%";c.appendChild(d);if(function(d){for(var c=0;c<d.length;c++)if(d[c].hasBeenReset||!d[c].displayState)return!0;return!1}(k)){var n=[],f=wa.getSimpleBoxPosition(d),b={font:Math.round(5*
f.height)/100+"px sans-serif"};(function(){for(var c,a,l=0;l<k.length;l++){a=k[l];c=new Sc(q,a,b);d.appendChild(c.div);var t=void 0,z=void 0,Q=c,e=f,h=n,m=new wa(Q),p=Q.cue;if("number"===typeof p.line&&(p.snapToLines||0<=p.line&&100>=p.line))var r=p.line;else if(p.track&&p.track.textTrackList&&p.track.textTrackList.mediaElement){r=p.track;for(var v=r.textTrackList,x=0,C=0;C<v.length&&v[C]!==r;C++)"showing"===v[C].mode&&x++;r=-1*++x}else r=-1;v=[];if(p.snapToLines){switch(p.vertical){case "":v=["+y",
"-y"];z="height";break;case "rl":v=["+x","-x"];z="width";break;case "lr":v=["-x","+x"],z="width"}x=m.lineHeight;C=x*Math.round(r);z=e[z]+x;var u=v[0];Math.abs(C)>z&&(C=(0>C?-1:1)*Math.ceil(z/x)*x);0>r&&(C+=""===p.vertical?e.height:e.width,v=v.reverse());m.move(u,C)}else{m=m.lineHeight/e.height*100;switch(p.lineAlign){case "middle":r-=m/2;break;case "end":r-=m}switch(p.vertical){case "":Q.applyStyles({top:Q.formatStyle(r,"%")});break;case "rl":Q.applyStyles({left:Q.formatStyle(r,"%")});break;case "lr":Q.applyStyles({right:Q.formatStyle(r,
"%")})}v=["+y","-x","+x","-y"];m=new wa(Q)}a:{p=m;m=v;z=new wa(p);r=1;for(v=0;v<m.length;v++){for(;p.overlapsOppositeAxis(e,m[v])||p.within(e)&&p.overlapsAny(h);)p.move(m[v]);if(p.within(e)){t=p;break a}x=p.intersectPercentage(e);r>x&&(t=new wa(p),r=x);p=new wa(z)}t=t||z}Q.move(t.toCSSCompatValues(e));a.displayState=c.div;n.push(wa.getSimpleBoxPosition(c))}})()}else for(c=0;c<k.length;c++)d.appendChild(k[c].displayState)};qb.Parser=function(q,k,c){c||(c=k,k={});k||(k={});this.window=q;this.vttjs=
k;this.state="INITIAL";this.buffer="";this.decoder=c||new TextDecoder("utf8");this.regionList=[]};qb.Parser.prototype={reportOrThrowError:function(q){if(q instanceof Ga)this.onparsingerror&&this.onparsingerror(q);else throw q;},parse:function(q){function k(){for(var d=f.buffer,c=0;c<d.length&&"\r"!==d[c]&&"\n"!==d[c];)++c;var a=d.substr(0,c);"\r"===d[c]&&++c;"\n"===d[c]&&++c;f.buffer=d.substr(c);return a}function c(d){var c=new ic;jc(d,function(d,a){switch(d){case "id":c.set(d,a);break;case "width":c.percent(d,
a);break;case "lines":c.integer(d,a);break;case "regionanchor":case "viewportanchor":a=a.split(",");if(2!==a.length)break;var f=new ic;f.percent("x",a[0]);f.percent("y",a[1]);if(!f.has("x")||!f.has("y"))break;c.set(d+"X",f.get("x"));c.set(d+"Y",f.get("y"));break;case "scroll":c.alt(d,a,["up"])}},/=/,/\s/);c.has("id")&&(d=new (f.vttjs.VTTRegion||f.window.VTTRegion),d.width=c.get("width",100),d.lines=c.get("lines",3),d.regionAnchorX=c.get("regionanchorX",0),d.regionAnchorY=c.get("regionanchorY",100),
d.viewportAnchorX=c.get("viewportanchorX",0),d.viewportAnchorY=c.get("viewportanchorY",100),d.scroll=c.get("scroll",""),f.onregion&&f.onregion(d),f.regionList.push({id:c.get("id"),region:d}))}function d(d){var c=new ic;jc(d,function(d,a){switch(d){case "MPEGT":c.integer(d+"S",a);break;case "LOCA":c.set(d+"L",Gd(a))}},/[^\d]:/,/,/);f.ontimestampmap&&f.ontimestampmap({MPEGTS:c.get("MPEGTS"),LOCAL:c.get("LOCAL")})}function n(a){a.match(/X-TIMESTAMP-MAP/)?jc(a,function(c,a){switch(c){case "X-TIMESTAMP-MAP":d(a)}},
/=/):jc(a,function(d,a){switch(d){case "Region":c(a)}},/:/)}var f=this;q&&(f.buffer+=f.decoder.decode(q,{stream:!0}));try{if("INITIAL"===f.state){if(!/\r\n|\n/.test(f.buffer))return this;var b=k();var g=b.match(/^WEBVTT([ \t].*)?$/);if(!g||!g[0])throw new Ga(Ga.Errors.BadSignature);f.state="HEADER"}for(q=!1;f.buffer;){if(!/\r\n|\n/.test(f.buffer))return this;q?q=!1:b=k();switch(f.state){case "HEADER":/:/.test(b)?n(b):b||(f.state="ID");continue;case "NOTE":b||(f.state="ID");continue;case "ID":if(/^NOTE($|[ \t])/.test(b)){f.state=
"NOTE";break}if(!b)continue;f.cue=new (f.vttjs.VTTCue||f.window.VTTCue)(0,0,"");f.state="CUE";if(-1===b.indexOf("--\x3e")){f.cue.id=b;continue}case "CUE":try{dj(b,f.cue,f.regionList)}catch(l){f.reportOrThrowError(l);f.cue=null;f.state="BADCUE";continue}f.state="CUETEXT";continue;case "CUETEXT":var a=-1!==b.indexOf("--\x3e");if(!b||a&&(q=!0)){f.oncue&&f.oncue(f.cue);f.cue=null;f.state="ID";continue}f.cue.text&&(f.cue.text+="\n");f.cue.text+=b;continue;case "BADCUE":b||(f.state="ID")}}}catch(l){f.reportOrThrowError(l);
if("CUETEXT"===f.state&&f.cue&&f.oncue)f.oncue(f.cue);f.cue=null;f.state="INITIAL"===f.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{this.buffer+=this.decoder.decode();if(this.cue||"HEADER"===this.state)this.buffer+="\n\n",this.parse();if("INITIAL"===this.state)throw new Ga(Ga.Errors.BadSignature);}catch(q){this.reportOrThrowError(q)}this.onflush&&this.onflush();return this}};var og=Object.freeze({default:qb,__moduleExports:qb}),kj={"":1,lr:1,rl:1},jj={start:1,middle:1,end:1,left:1,
right:1};Tc.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var pg=Object.freeze({default:Tc,__moduleExports:Tc}),Mj={"":!0,up:!0},he=function(){var q=100,k=3,c=0,d=100,n=0,f=100,b="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return q},set:function(d){if(!kc(d))throw Error("Width must be between 0 and 100.");q=d}},lines:{enumerable:!0,get:function(){return k},set:function(d){if("number"!==typeof d)throw new TypeError("Lines must be set to a number.");
k=d}},regionAnchorY:{enumerable:!0,get:function(){return d},set:function(c){if(!kc(c))throw Error("RegionAnchorX must be between 0 and 100.");d=c}},regionAnchorX:{enumerable:!0,get:function(){return c},set:function(d){if(!kc(d))throw Error("RegionAnchorY must be between 0 and 100.");c=d}},viewportAnchorY:{enumerable:!0,get:function(){return f},set:function(d){if(!kc(d))throw Error("ViewportAnchorY must be between 0 and 100.");f=d}},viewportAnchorX:{enumerable:!0,get:function(){return n},set:function(d){if(!kc(d))throw Error("ViewportAnchorX must be between 0 and 100.");
n=d}},scroll:{enumerable:!0,get:function(){return b},set:function(d){d="string"!==typeof d?!1:Mj[d.toLowerCase()]?d.toLowerCase():!1;if(!1===d)throw new SyntaxError("An invalid or illegal string was specified.");b=d}}})},qg=Object.freeze({default:he,__moduleExports:he}),Nj=og&&qb||og,Oj=pg&&Tc||pg,Pj=qg&&he||qg,rg=B(function(q){q=q.exports={WebVTT:Nj,VTTCue:Oj,VTTRegion:Pj};E.vttjs=q;E.WebVTT=q.WebVTT;var k=q.VTTCue,c=q.VTTRegion,d=E.VTTCue,n=E.VTTRegion;q.shim=function(){E.VTTCue=k;E.VTTRegion=c};
q.restore=function(){E.VTTCue=d;E.VTTRegion=n};E.VTTCue||q.shim()}),fa=function(q){function k(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};N(this,k);c.reportTouchActivity=!1;var n=O(this,q.call(this,null,c,d));n.hasStarted_=!1;n.on("playing",function(){this.hasStarted_=!0});n.on("loadstart",function(){this.hasStarted_=!1});Ha.names.forEach(function(d){d=Ha[d];c&&c[d.getterName]&&(n[d.privateName]=c[d.getterName])});
n.featuresProgressEvents||n.manualProgressOn();n.featuresTimeupdateEvents||n.manualTimeUpdatesOn();["Text","Audio","Video"].forEach(function(d){!1===c["native"+d+"Tracks"]&&(n["featuresNative"+d+"Tracks"]=!1)});if(!1===c.nativeCaptions||!1===c.nativeTextTracks)n.featuresNativeTextTracks=!1;else if(!0===c.nativeCaptions||!0===c.nativeTextTracks)n.featuresNativeTextTracks=!0;n.featuresNativeTextTracks||n.emulateTextTracks();n.autoRemoteTextTracks_=new Ha.text.ListClass;n.initTrackListeners();c.nativeControlsForTouch||
n.emitTapEvents();n.constructor&&(n.name_=n.constructor.name||"Unknown Tech");return n}J(k,q);k.prototype.triggerSourceset=function(c){var d=this;if(!this.isReady_)this.one("ready",function(){return d.setTimeout(function(){return d.triggerSourceset(c)},1)});this.trigger({src:c,type:"sourceset"})};k.prototype.manualProgressOn=function(){this.on("durationchange",this.onDurationChange);this.manualProgress=!0;this.one("ready",this.trackProgress)};k.prototype.manualProgressOff=function(){this.manualProgress=
!1;this.stopTrackingProgress();this.off("durationchange",this.onDurationChange)};k.prototype.trackProgress=function(c){this.stopTrackingProgress();this.progressInterval=this.setInterval(U(this,function(){var d=this.bufferedPercent();this.bufferedPercent_!==d&&this.trigger("progress");this.bufferedPercent_=d;1===d&&this.stopTrackingProgress()}),500)};k.prototype.onDurationChange=function(c){this.duration_=this.duration()};k.prototype.buffered=function(){return Xa(0,0)};k.prototype.bufferedPercent=
function(){return tf(this.buffered(),this.duration_)};k.prototype.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)};k.prototype.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0;this.on("play",this.trackCurrentTime);this.on("pause",this.stopTrackingCurrentTime)};k.prototype.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1;this.stopTrackingCurrentTime();this.off("play",this.trackCurrentTime);this.off("pause",this.stopTrackingCurrentTime)};k.prototype.trackCurrentTime=
function(){this.currentTimeInterval&&this.stopTrackingCurrentTime();this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)};k.prototype.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval);this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})};k.prototype.dispose=function(){this.clearTracks(Na.names);this.manualProgress&&this.manualProgressOff();this.manualTimeUpdates&&this.manualTimeUpdatesOff();
q.prototype.dispose.call(this)};k.prototype.clearTracks=function(c){var d=this;c=[].concat(c);c.forEach(function(c){for(var f=d[c+"Tracks"]()||[],b=f.length;b--;){var n=f[b];"text"===c&&d.removeRemoteTextTrack(n);f.removeTrack(n)}})};k.prototype.cleanupAutoTextTracks=function(){for(var c=this.autoRemoteTextTracks_||[],d=c.length;d--;)this.removeRemoteTextTrack(c[d])};k.prototype.reset=function(){};k.prototype.error=function(c){void 0!==c&&(this.error_=new va(c),this.trigger("error"));return this.error_};
k.prototype.played=function(){return this.hasStarted_?Xa(0,0):Xa()};k.prototype.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})};k.prototype.initTrackListeners=function(){var c=this;Na.names.forEach(function(d){var n=function(){c.trigger(d+"trackchange")},f=c[Na[d].getterName]();f.addEventListener("removetrack",n);f.addEventListener("addtrack",n);c.on("dispose",function(){f.removeEventListener("removetrack",n);f.removeEventListener("addtrack",
n)})})};k.prototype.addWebVttScript_=function(){var c=this;if(!E.WebVTT)if(K.body.contains(this.el()))if(!this.options_["vtt.js"]&&p(rg)&&0<Object.keys(rg).length)this.trigger("vttjsloaded");else{var d=K.createElement("script");d.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js";d.onload=function(){c.trigger("vttjsloaded")};d.onerror=function(){c.trigger("vttjserror")};this.on("dispose",function(){d.onload=null;d.onerror=null});E.WebVTT=!0;this.el().parentNode.appendChild(d)}else this.ready(this.addWebVttScript_)};
k.prototype.emulateTextTracks=function(){var c=this,d=this.textTracks(),n=this.remoteTextTracks(),f=function(c){return d.addTrack(c.track)},b=function(c){return d.removeTrack(c.track)};n.on("addtrack",f);n.on("removetrack",b);this.addWebVttScript_();var k=function(){return c.trigger("texttrackchange")},a=function(){k();for(var c=0;c<d.length;c++){var a=d[c];a.removeEventListener("cuechange",k);"showing"===a.mode&&a.addEventListener("cuechange",k)}};a();d.addEventListener("change",a);d.addEventListener("addtrack",
a);d.addEventListener("removetrack",a);this.on("dispose",function(){n.off("addtrack",f);n.off("removetrack",b);d.removeEventListener("change",a);d.removeEventListener("addtrack",a);d.removeEventListener("removetrack",a);for(var c=0;c<d.length;c++)d[c].removeEventListener("cuechange",k)})};k.prototype.addTextTrack=function(c,d,n){if(!c)throw Error("TextTrack kind is required but was not provided");return lj(this,c,d,n)};k.prototype.createRemoteTextTrack=function(c){c=Y(c,{tech:this});return new rc.remoteTextEl.TrackClass(c)};
k.prototype.addRemoteTextTrack=function(){var c=this,d=arguments[1],n=this.createRemoteTextTrack(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{});!0!==d&&!1!==d&&(V.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),d=!0);this.remoteTextTrackEls().addTrackElement_(n);this.remoteTextTracks().addTrack(n.track);!0!==d&&this.ready(function(){return c.autoRemoteTextTracks_.addTrack(n.track)});
return n};k.prototype.removeRemoteTextTrack=function(c){var d=this.remoteTextTrackEls().getTrackElementByTrack_(c);this.remoteTextTrackEls().removeTrackElement_(d);this.remoteTextTracks().removeTrack(c);this.autoRemoteTextTracks_.removeTrack(c)};k.prototype.getVideoPlaybackQuality=function(){return{}};k.prototype.setPoster=function(){};k.prototype.playsinline=function(){};k.prototype.setPlaysinline=function(){};k.prototype.overrideNativeAudioTracks=function(){};k.prototype.overrideNativeVideoTracks=
function(){};k.prototype.canPlayType=function(){return""};k.canPlayType=function(){return""};k.canPlaySource=function(c,d){return k.canPlayType(c.type)};k.isTech=function(c){return c.prototype instanceof k||c instanceof k||c===k};k.registerTech=function(c,d){k.techs_||(k.techs_={});if(!k.isTech(d))throw Error("Tech "+c+" must be a Tech");if(!k.canPlayType)throw Error("Techs must have a static canPlayType method on them");if(!k.canPlaySource)throw Error("Techs must have a static canPlaySource method on them");
c=da(c);k.techs_[c]=d;"Tech"!==c&&k.defaultTechOrder_.push(c);return d};k.getTech=function(c){if(c){c=da(c);if(k.techs_&&k.techs_[c])return k.techs_[c];if(E&&E.videojs&&E.videojs[c])return V.warn("The "+c+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),E.videojs[c]}};return k}(I);Ha.names.forEach(function(q){var k=Ha[q];fa.prototype[k.getterName]=function(){this[k.privateName]=this[k.privateName]||new k.ListClass;return this[k.privateName]}});
fa.prototype.featuresVolumeControl=!0;fa.prototype.featuresMuteControl=!0;fa.prototype.featuresFullscreenResize=!1;fa.prototype.featuresPlaybackRate=!1;fa.prototype.featuresProgressEvents=!1;fa.prototype.featuresSourceset=!1;fa.prototype.featuresTimeupdateEvents=!1;fa.prototype.featuresNativeTextTracks=!1;fa.withSourceHandlers=function(q){q.registerSourceHandler=function(k,c){var d=q.sourceHandlers;d||(d=q.sourceHandlers=[]);void 0===c&&(c=d.length);d.splice(c,0,k)};q.canPlayType=function(k){for(var c=
q.sourceHandlers||[],d,n=0;n<c.length;n++)if(d=c[n].canPlayType(k))return d;return""};q.selectSourceHandler=function(k,c){for(var d=q.sourceHandlers||[],n,f=0;f<d.length;f++)if(n=d[f].canHandleSource(k,c))return d[f];return null};q.canPlaySource=function(k,c){var d=q.selectSourceHandler(k,c);return d?d.canHandleSource(k,c):""};["seekable","seeking","duration"].forEach(function(k){var c=this[k];"function"===typeof c&&(this[k]=function(){return this.sourceHandler_&&this.sourceHandler_[k]?this.sourceHandler_[k].apply(this.sourceHandler_,
arguments):c.apply(this,arguments)})},q.prototype);q.prototype.setSource=function(k){var c=q.selectSourceHandler(k,this.options_);c||(q.nativeSourceHandler?c=q.nativeSourceHandler:V.error("No source handler found for the current source."));this.disposeSourceHandler();this.off("dispose",this.disposeSourceHandler);c!==q.nativeSourceHandler&&(this.currentSource_=k);this.sourceHandler_=c.handleSource(k,this,this.options_);this.on("dispose",this.disposeSourceHandler)};q.prototype.disposeSourceHandler=
function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null);this.cleanupAutoTextTracks();this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};I.registerComponent("Tech",fa);fa.registerTech("Tech",fa);fa.defaultTechOrder_=[];var Fb={},Ld={},Uc={},Qj={buffered:1,currentTime:1,duration:1,seekable:1,played:1,paused:1},Rj={setCurrentTime:1},sg={play:1,pause:1},Sj={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",
mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",mp3:"audio/mpeg",aac:"audio/aac",oga:"audio/ogg",m3u8:"application/x-mpegURL"},Df=function(){var q=be(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"");return Sj[q.toLowerCase()]||""},Tj=function(q,k){if(!k)return"";if(q.cache_.source.src===k&&q.cache_.source.type)return q.cache_.source.type;var c=q.cache_.sources.filter(function(d){return d.src===k});if(c.length)return c[0].type;q=q.$$("source");for(c=0;c<q.length;c++){var d=q[c];if(d.type&&
d.src&&d.src===k)return d.type}return Df(k)},Uj=function c(k){if(Array.isArray(k)){var d=[];k.forEach(function(n){n=c(n);Array.isArray(n)?d=d.concat(n):h(n)&&d.push(n)});k=d}else k="string"===typeof k&&k.trim()?[Cf({src:k})]:h(k)&&"string"===typeof k.src&&k.src&&k.src.trim()?[Cf(k)]:[];return k},Vj=function(k){function c(d,n,f){N(this,c);var b=Y({createEl:!1},n);f=O(this,k.call(this,d,b,f));if(n.playerOptions.sources&&0!==n.playerOptions.sources.length)d.src(n.playerOptions.sources);else for(b=0,
n=n.playerOptions.techOrder;b<n.length;b++){var g=da(n[b]),a=fa.getTech(g);g||(a=I.getComponent(g));if(a&&a.isSupported()){d.loadTech_(g);break}}return f}J(c,k);return c}(I);I.registerComponent("MediaLoader",Vj);var cd=function(k){function c(d,n){N(this,c);d=O(this,k.call(this,d,n));d.emitTapEvents();d.enable();return d}J(c,k);c.prototype.createEl=function(){var d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},f=2<arguments.length&&
void 0!==arguments[2]?arguments[2]:{};c=w({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},c);"button"===d&&V.error("Creating a ClickableComponent with an HTML element of "+d+" is not supported; use a Button instead.");f=w({role:"button"},f);this.tabIndex_=c.tabIndex;d=k.prototype.createEl.call(this,d,c,f);this.createControlTextEl(d);return d};c.prototype.dispose=function(){this.controlTextEl_=null;k.prototype.dispose.call(this)};
c.prototype.createControlTextEl=function(d){this.controlTextEl_=G("span",{className:"vjs-control-text"},{"aria-live":"polite"});d&&d.appendChild(this.controlTextEl_);this.controlText(this.controlText_,d);return this.controlTextEl_};c.prototype.controlText=function(d){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.el();if(void 0===d)return this.controlText_||"Need Text";var f=this.localize(d);this.controlText_=d;R(this.controlTextEl_,f);this.nonIconControl||c.setAttribute("title",
f)};c.prototype.buildCSSClass=function(){return"vjs-control vjs-button "+k.prototype.buildCSSClass.call(this)};c.prototype.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),"undefined"!==typeof this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur))};c.prototype.disable=function(){this.enabled_=!1;this.addClass("vjs-disabled");
this.el_.setAttribute("aria-disabled","true");"undefined"!==typeof this.tabIndex_&&this.el_.removeAttribute("tabIndex");this.off(["tap","click"],this.handleClick);this.off("focus",this.handleFocus);this.off("blur",this.handleBlur)};c.prototype.handleClick=function(d){};c.prototype.handleFocus=function(d){Ca(K,"keydown",U(this,this.handleKeyPress))};c.prototype.handleKeyPress=function(d){32===d.which||13===d.which?(d.preventDefault(),this.trigger("click")):k.prototype.handleKeyPress&&k.prototype.handleKeyPress.call(this,
d)};c.prototype.handleBlur=function(d){pa(K,"keydown",U(this,this.handleKeyPress))};return c}(I);I.registerComponent("ClickableComponent",cd);var Wj=function(k){function c(d,n){N(this,c);n=O(this,k.call(this,d,n));n.update();d.on("posterchange",U(n,n.update));return n}J(c,k);c.prototype.dispose=function(){this.player().off("posterchange",this.update);k.prototype.dispose.call(this)};c.prototype.createEl=function(){return G("div",{className:"vjs-poster",tabIndex:-1})};c.prototype.update=function(d){d=
this.player().poster();this.setSrc(d);d?this.show():this.hide()};c.prototype.setSrc=function(d){var c="";d&&(c='url("'+d+'")');this.el_.style.backgroundImage=c};c.prototype.handleClick=function(d){this.player_.controls()&&(this.player_.paused()?hc(this.player_.play()):this.player_.pause())};return c}(cd);I.registerComponent("PosterImage",Wj);var Xj={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',
proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'},Yj=function(k){function c(d,n,f){N(this,c);n=O(this,k.call(this,d,n,f));var b=U(n,n.updateDisplay);d.on("loadstart",U(n,n.toggleDisplay));d.on("texttrackchange",b);d.on("loadstart",U(n,n.preselectTrack));d.ready(U(n,function(){if(d.tech_&&d.tech_.featuresNativeTextTracks)this.hide();else{d.on("fullscreenchange",
b);d.on("playerresize",b);E.addEventListener("orientationchange",b);d.on("dispose",function(){return E.removeEventListener("orientationchange",b)});for(var c=this.options_.playerOptions.tracks||[],a=0;a<c.length;a++)this.player_.addRemoteTextTrack(c[a],!0);this.preselectTrack()}}));return n}J(c,k);c.prototype.preselectTrack=function(){for(var d={captions:1,subtitles:1},c=this.player_.textTracks(),f=this.player_.cache_.selectedLanguage,b=void 0,k=void 0,a=void 0,l=0;l<c.length;l++){var t=c[l];f&&f.enabled&&
f.language===t.language?t.kind===f.kind?a=t:a||(a=t):f&&!f.enabled?k=b=a=null:t.default&&("descriptions"!==t.kind||b?t.kind in d&&!k&&(k=t):b=t)}a?a.mode="showing":k?k.mode="showing":b&&(b.mode="showing")};c.prototype.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()};c.prototype.createEl=function(){return k.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})};c.prototype.clearDisplay=
function(){"function"===typeof E.WebVTT&&E.WebVTT.processCues(E,[],this.el_)};c.prototype.updateDisplay=function(){var d=this.player_.textTracks();this.clearDisplay();for(var c=null,f=null,b=d.length;b--;){var k=d[b];"showing"===k.mode&&("descriptions"===k.kind?c=k:f=k)}f?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(f)):c&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(c))};c.prototype.updateForTrack=
function(d){if("function"===typeof E.WebVTT&&d.activeCues){for(var c=[],f=0;f<d.activeCues.length;f++)c.push(d.activeCues[f]);E.WebVTT.processCues(E,c,this.el_);if(this.player_.textTrackSettings)for(d=this.player_.textTrackSettings.getValues(),f=c.length;f--;){var b=c[f];if(b){b=b.displayState;d.color&&(b.firstChild.style.color=d.color);if(d.textOpacity){var k=Md(d.color||"#fff",d.textOpacity);try{b.firstChild.style.color=k}catch(a){}}d.backgroundColor&&(b.firstChild.style.backgroundColor=d.backgroundColor);
if(d.backgroundOpacity){k=Md(d.backgroundColor||"#000",d.backgroundOpacity);try{b.firstChild.style.backgroundColor=k}catch(a){}}if(d.windowColor)if(d.windowOpacity){k=Md(d.windowColor,d.windowOpacity);try{b.style.backgroundColor=k}catch(a){}}else b.style.backgroundColor=d.windowColor;d.edgeStyle&&("dropshadow"===d.edgeStyle?b.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px #222":"raised"===d.edgeStyle?b.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px #222":
"depressed"===d.edgeStyle?b.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px #222":"uniform"===d.edgeStyle&&(b.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px #222"));d.fontPercent&&1!==d.fontPercent&&(k=E.parseFloat(b.style.fontSize),b.style.fontSize=k*d.fontPercent+"px",b.style.height="auto",b.style.top="auto",b.style.bottom="2px");d.fontFamily&&"default"!==d.fontFamily&&("small-caps"===d.fontFamily?b.firstChild.style.fontVariant="small-caps":
b.firstChild.style.fontFamily=Xj[d.fontFamily])}}}};return c}(I);I.registerComponent("TextTrackDisplay",Yj);var Zj=function(k){function c(){N(this,c);return O(this,k.apply(this,arguments))}J(c,k);c.prototype.createEl=function(){var d=this.player_.isAudio();d=this.localize(d?"Audio Player":"Video Player");d=G("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[d])});var c=k.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});c.appendChild(d);
return c};return c}(I);I.registerComponent("LoadingSpinner",Zj);var hb=function(k){function c(){N(this,c);return O(this,k.apply(this,arguments))}J(c,k);c.prototype.createEl=function(d){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};d="button";c=w({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},c);f=w({type:"button"},f);c=I.prototype.createEl.call(this,d,c,f);this.createControlTextEl(c);
return c};c.prototype.addChild=function(d){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};V.warn("Adding an actionable (user controllable) child to a Button ("+this.constructor.name+") is not supported; use a ClickableComponent instead.");return I.prototype.addChild.call(this,d,c)};c.prototype.enable=function(){k.prototype.enable.call(this);this.el_.removeAttribute("disabled")};c.prototype.disable=function(){k.prototype.disable.call(this);this.el_.setAttribute("disabled","disabled")};
c.prototype.handleKeyPress=function(d){32!==d.which&&13!==d.which&&k.prototype.handleKeyPress.call(this,d)};return c}(cd);I.registerComponent("Button",hb);var tg=function(k){function c(d,n){N(this,c);d=O(this,k.call(this,d,n));d.mouseused_=!1;d.on("mousedown",d.handleMouseDown);return d}J(c,k);c.prototype.buildCSSClass=function(){return"vjs-big-play-button"};c.prototype.handleClick=function(d){var c=this.player_.play();if(this.mouseused_&&d.clientX&&d.clientY)hc(c);else{var f=(d=this.player_.getChild("controlBar"))&&
d.getChild("playToggle");f?(d=function(){return f.focus()},uf(c)?c.then(d,function(){}):this.setTimeout(d,1)):this.player_.focus()}};c.prototype.handleKeyPress=function(d){this.mouseused_=!1;k.prototype.handleKeyPress.call(this,d)};c.prototype.handleMouseDown=function(d){this.mouseused_=!0};return c}(hb);tg.prototype.controlText_="Play Video";I.registerComponent("BigPlayButton",tg);var ak=function(k){function c(d,n){N(this,c);d=O(this,k.call(this,d,n));d.controlText(n&&n.controlText||d.localize("Close"));
return d}J(c,k);c.prototype.buildCSSClass=function(){return"vjs-close-button "+k.prototype.buildCSSClass.call(this)};c.prototype.handleClick=function(d){this.trigger({type:"close",bubbles:!1})};return c}(hb);I.registerComponent("CloseButton",ak);var ug=function(k){function c(d,n){N(this,c);n=O(this,k.call(this,d,n));n.on(d,"play",n.handlePlay);n.on(d,"pause",n.handlePause);n.on(d,"ended",n.handleEnded);return n}J(c,k);c.prototype.buildCSSClass=function(){return"vjs-play-control "+k.prototype.buildCSSClass.call(this)};
c.prototype.handleClick=function(d){this.player_.paused()?this.player_.play():this.player_.pause()};c.prototype.handleSeeked=function(d){this.removeClass("vjs-ended");this.player_.paused()?this.handlePause(d):this.handlePlay(d)};c.prototype.handlePlay=function(d){this.removeClass("vjs-ended");this.removeClass("vjs-paused");this.addClass("vjs-playing");this.controlText("Pause")};c.prototype.handlePause=function(d){this.removeClass("vjs-playing");this.addClass("vjs-paused");this.controlText("Play")};
c.prototype.handleEnded=function(d){this.removeClass("vjs-playing");this.addClass("vjs-ended");this.controlText("Replay");this.one(this.player_,"seeked",this.handleSeeked)};return c}(hb);ug.prototype.controlText_="Play";I.registerComponent("PlayToggle",ug);var vg=function(k,c){k=0>k?0:k;var d=Math.floor(k%60),n=Math.floor(k/60%60),f=Math.floor(k/3600),b=Math.floor(c/60%60);c=Math.floor(c/3600);if(isNaN(k)||Infinity===k)f=n=d="-";f=0<f||0<c?f+":":"";return f+(((f||10<=b)&&10>n?"0"+n:n)+":")+(10>d?
"0"+d:d)},Nd=vg,Wb=function(k){function c(d,n){N(this,c);n=O(this,k.call(this,d,n));n.throttledUpdateContent=Rb(U(n,n.updateContent),25);n.on(d,"timeupdate",n.throttledUpdateContent);return n}J(c,k);c.prototype.createEl=function(d){d=this.buildCSSClass();var c=k.prototype.createEl.call(this,"div",{className:d+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text">'+this.localize(this.labelText_)+"\u00a0</span>"});this.contentEl_=G("span",{className:d+"-display"},{"aria-live":"off"});
this.updateTextNode_();c.appendChild(this.contentEl_);return c};c.prototype.dispose=function(){this.textNode_=this.contentEl_=null;k.prototype.dispose.call(this)};c.prototype.updateTextNode_=function(){if(this.contentEl_){for(;this.contentEl_.firstChild;)this.contentEl_.removeChild(this.contentEl_.firstChild);this.textNode_=K.createTextNode(this.formattedTime_||this.formatTime_(0));this.contentEl_.appendChild(this.textNode_)}};c.prototype.formatTime_=function(d){return Ob(d)};c.prototype.updateFormattedTime_=
function(d){d=this.formatTime_(d);d!==this.formattedTime_&&(this.formattedTime_=d,this.requestAnimationFrame(this.updateTextNode_))};c.prototype.updateContent=function(d){};return c}(I);Wb.prototype.labelText_="Time";Wb.prototype.controlText_="Time";I.registerComponent("TimeDisplay",Wb);var ie=function(k){function c(d,n){N(this,c);n=O(this,k.call(this,d,n));n.on(d,"ended",n.handleEnded);return n}J(c,k);c.prototype.buildCSSClass=function(){return"vjs-current-time"};c.prototype.updateContent=function(d){d=
this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateFormattedTime_(d)};c.prototype.handleEnded=function(d){this.player_.duration()&&this.updateFormattedTime_(this.player_.duration())};return c}(Wb);ie.prototype.labelText_="Current Time";ie.prototype.controlText_="Current Time";I.registerComponent("CurrentTimeDisplay",ie);var je=function(k){function c(d,n){N(this,c);n=O(this,k.call(this,d,n));n.on(d,"durationchange",n.updateContent);n.on(d,"loadedmetadata",
n.throttledUpdateContent);return n}J(c,k);c.prototype.buildCSSClass=function(){return"vjs-duration"};c.prototype.updateContent=function(d){(d=this.player_.duration())&&this.duration_!==d&&(this.duration_=d,this.updateFormattedTime_(d))};return c}(Wb);je.prototype.labelText_="Duration";je.prototype.controlText_="Duration";I.registerComponent("DurationDisplay",je);var bk=function(k){function c(){N(this,c);return O(this,k.apply(this,arguments))}J(c,k);c.prototype.createEl=function(){return k.prototype.createEl.call(this,
"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"})};return c}(I);I.registerComponent("TimeDivider",bk);var ke=function(k){function c(d,n){N(this,c);n=O(this,k.call(this,d,n));n.on(d,"durationchange",n.throttledUpdateContent);n.on(d,"ended",n.handleEnded);return n}J(c,k);c.prototype.buildCSSClass=function(){return"vjs-remaining-time"};c.prototype.formatTime_=function(d){return"-"+k.prototype.formatTime_.call(this,d)};c.prototype.updateContent=function(d){this.player_.duration()&&
(this.player_.remainingTimeDisplay?this.updateFormattedTime_(this.player_.remainingTimeDisplay()):this.updateFormattedTime_(this.player_.remainingTime()))};c.prototype.handleEnded=function(d){this.player_.duration()&&this.updateFormattedTime_(0)};return c}(Wb);ke.prototype.labelText_="Remaining Time";ke.prototype.controlText_="Remaining Time";I.registerComponent("RemainingTimeDisplay",ke);var ck=function(k){function c(d,n){N(this,c);d=O(this,k.call(this,d,n));d.updateShowing();d.on(d.player(),"durationchange",
d.updateShowing);return d}J(c,k);c.prototype.createEl=function(){var d=k.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});this.contentEl_=G("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+"\u00a0</span>"+this.localize("LIVE")},{"aria-live":"off"});d.appendChild(this.contentEl_);return d};c.prototype.dispose=function(){this.contentEl_=null;k.prototype.dispose.call(this)};c.prototype.updateShowing=function(d){Infinity===
this.player().duration()?this.show():this.hide()};return c}(I);I.registerComponent("LiveDisplay",ck);var le=function(k){function c(d,n){N(this,c);d=O(this,k.call(this,d,n));d.bar=d.getChild(d.options_.barName);d.vertical(!!d.options_.vertical);d.enable();return d}J(c,k);c.prototype.enabled=function(){return this.enabled_};c.prototype.enable=function(){if(!this.enabled()){this.on("mousedown",this.handleMouseDown);this.on("touchstart",this.handleMouseDown);this.on("focus",this.handleFocus);this.on("blur",
this.handleBlur);this.on("click",this.handleClick);this.on(this.player_,"controlsvisible",this.update);if(this.playerEvent)this.on(this.player_,this.playerEvent,this.update);this.removeClass("disabled");this.setAttribute("tabindex",0);this.enabled_=!0}};c.prototype.disable=function(){if(this.enabled()){var d=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown);this.off("touchstart",this.handleMouseDown);this.off("focus",this.handleFocus);this.off("blur",this.handleBlur);this.off("click",
this.handleClick);this.off(this.player_,"controlsvisible",this.update);this.off(d,"mousemove",this.handleMouseMove);this.off(d,"mouseup",this.handleMouseUp);this.off(d,"touchmove",this.handleMouseMove);this.off(d,"touchend",this.handleMouseUp);this.removeAttribute("tabindex");this.addClass("disabled");this.playerEvent&&this.off(this.player_,this.playerEvent,this.update);this.enabled_=!1}};c.prototype.createEl=function(d){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},f=2<arguments.length&&
void 0!==arguments[2]?arguments[2]:{};c.className+=" vjs-slider";c=w({tabIndex:0},c);f=w({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},f);return k.prototype.createEl.call(this,d,c,f)};c.prototype.handleMouseDown=function(d){var c=this.bar.el_.ownerDocument;"mousedown"===d.type&&d.preventDefault();"touchstart"!==d.type||sb||d.preventDefault();ba();this.addClass("vjs-sliding");this.trigger("slideractive");this.on(c,"mousemove",this.handleMouseMove);this.on(c,"mouseup",
this.handleMouseUp);this.on(c,"touchmove",this.handleMouseMove);this.on(c,"touchend",this.handleMouseUp);this.handleMouseMove(d)};c.prototype.handleMouseMove=function(d){};c.prototype.handleMouseUp=function(){var d=this.bar.el_.ownerDocument;S();this.removeClass("vjs-sliding");this.trigger("sliderinactive");this.off(d,"mousemove",this.handleMouseMove);this.off(d,"mouseup",this.handleMouseUp);this.off(d,"touchmove",this.handleMouseMove);this.off(d,"touchend",this.handleMouseUp);this.update()};c.prototype.update=
function(){if(this.el_){var d=this.getPercent(),c=this.bar;if(c){if("number"!==typeof d||d!==d||0>d||Infinity===d)d=0;var f=(100*d).toFixed(2)+"%";c=c.el().style;this.vertical()?c.height=f:c.width=f;return d}}};c.prototype.calculateDistance=function(d){d=za(this.el_,d);return this.vertical()?d.y:d.x};c.prototype.handleFocus=function(){this.on(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)};c.prototype.handleKeyPress=function(d){if(37===d.which||40===d.which)d.preventDefault(),this.stepBack();
else if(38===d.which||39===d.which)d.preventDefault(),this.stepForward()};c.prototype.handleBlur=function(){this.off(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)};c.prototype.handleClick=function(d){d.stopImmediatePropagation();d.preventDefault()};c.prototype.vertical=function(d){if(void 0===d)return this.vertical_||!1;(this.vertical_=!!d)?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")};return c}(I);I.registerComponent("Slider",le);var dk=function(k){function c(d,
n){N(this,c);n=O(this,k.call(this,d,n));n.partEls_=[];n.on(d,"progress",n.update);return n}J(c,k);c.prototype.createEl=function(){return k.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+"</span>: 0%</span>"})};c.prototype.dispose=function(){this.partEls_=null;k.prototype.dispose.call(this)};c.prototype.update=function(d){d=this.player_.buffered();var c=this.player_.duration(),f=this.player_.bufferedEnd(),
b=this.partEls_,k=function(d,c){d=d/c||0;return 100*(1<=d?1:d)+"%"};this.el_.style.width=k(f,c);for(c=0;c<d.length;c++){var a=d.start(c),l=d.end(c),t=b[c];t||(t=this.el_.appendChild(G()),b[c]=t);t.style.left=k(a,f);t.style.width=k(l-a,f)}for(f=b.length;f>d.length;f--)this.el_.removeChild(b[f-1]);b.length=d.length};return c}(I);I.registerComponent("LoadProgressBar",dk);var ek=function(k){function c(){N(this,c);return O(this,k.apply(this,arguments))}J(c,k);c.prototype.createEl=function(){return k.prototype.createEl.call(this,
"div",{className:"vjs-time-tooltip"})};c.prototype.update=function(d,c,f){var b=ea(this.el_),n=ea(this.player_.el()),a=d.width*c;n&&b&&(c=d.left-n.left+a,d=d.width-a+(n.right-d.right),n=b.width/2,c<n?n+=n-c:d<n&&(n=d),0>n?n=0:n>b.width&&(n=b.width),this.el_.style.right="-"+n+"px",R(this.el_,f))};return c}(I);I.registerComponent("TimeTooltip",ek);var me=function(k){function c(){N(this,c);return O(this,k.apply(this,arguments))}J(c,k);c.prototype.createEl=function(){return k.prototype.createEl.call(this,
"div",{className:"vjs-play-progress vjs-slider-bar",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"})};c.prototype.update=function(d,c){var f=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_);this.rafId_=this.requestAnimationFrame(function(){var b=f.player_.scrubbing()?f.player_.getCache().currentTime:f.player_.currentTime();b=Ob(b,f.player_.duration());var n=f.getChild("timeTooltip");n&&n.update(d,c,b)})};return c}(I);me.prototype.options_=
{children:[]};fb||Gb||me.prototype.options_.children.push("timeTooltip");I.registerComponent("PlayProgressBar",me);var wg=function(k){function c(d,n){N(this,c);d=O(this,k.call(this,d,n));d.update=Rb(U(d,d.update),25);return d}J(c,k);c.prototype.createEl=function(){return k.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})};c.prototype.update=function(d,c){var f=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_);this.rafId_=this.requestAnimationFrame(function(){var b=f.player_.duration();
b=Ob(c*b,b);f.el_.style.left=d.width*c+"px";f.getChild("timeTooltip").update(d,c,b)})};return c}(I);wg.prototype.options_={children:["timeTooltip"]};I.registerComponent("MouseTimeDisplay",wg);var dd=function(k){function c(d,n){N(this,c);d=O(this,k.call(this,d,n));d.setEventHandlers_();return d}J(c,k);c.prototype.setEventHandlers_=function(){var d=this;this.update=Rb(U(this,this.update),30);this.on(this.player_,"timeupdate",this.update);this.on(this.player_,"ended",this.handleEnded);this.updateInterval=
null;this.on(this.player_,["playing"],function(){d.clearInterval(d.updateInterval);d.updateInterval=d.setInterval(function(){d.requestAnimationFrame(function(){d.update()})},30)});this.on(this.player_,["ended","pause","waiting"],function(){d.clearInterval(d.updateInterval)});this.on(this.player_,["timeupdate","ended"],this.update)};c.prototype.createEl=function(){return k.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})};c.prototype.update_=
function(d,c){var f=this.player_.duration();this.el_.setAttribute("aria-valuenow",(100*c).toFixed(2));this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[Ob(d,f),Ob(f,f)],"{1} of {2}"));this.bar.update(ea(this.el_),c)};c.prototype.update=function(d){d=k.prototype.update.call(this);this.update_(this.getCurrentTime_(),d);return d};c.prototype.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()};
c.prototype.handleEnded=function(d){this.update_(this.player_.duration(),1)};c.prototype.getPercent=function(){var d=this.getCurrentTime_()/this.player_.duration();return 1<=d?1:d||0};c.prototype.handleMouseDown=function(d){Ia(d)&&(d.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),k.prototype.handleMouseDown.call(this,d))};c.prototype.handleMouseMove=function(d){Ia(d)&&(d=this.calculateDistance(d)*this.player_.duration(),d===this.player_.duration()&&
(d-=.1),this.player_.currentTime(d))};c.prototype.enable=function(){k.prototype.enable.call(this);var d=this.getChild("mouseTimeDisplay");d&&d.show()};c.prototype.disable=function(){k.prototype.disable.call(this);var d=this.getChild("mouseTimeDisplay");d&&d.hide()};c.prototype.handleMouseUp=function(d){k.prototype.handleMouseUp.call(this,d);d&&d.stopPropagation();this.player_.scrubbing(!1);this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0});this.videoWasPlaying&&hc(this.player_.play())};
c.prototype.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)};c.prototype.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)};c.prototype.handleAction=function(d){this.player_.paused()?this.player_.play():this.player_.pause()};c.prototype.handleKeyPress=function(d){32===d.which||13===d.which?(d.preventDefault(),this.handleAction(d)):k.prototype.handleKeyPress&&k.prototype.handleKeyPress.call(this,d)};return c}(le);dd.prototype.options_={children:["loadProgressBar",
"playProgressBar"],barName:"playProgressBar"};fb||Gb||dd.prototype.options_.children.splice(1,0,"mouseTimeDisplay");dd.prototype.playerEvent="timeupdate";I.registerComponent("SeekBar",dd);var xg=function(k){function c(d,n){N(this,c);d=O(this,k.call(this,d,n));d.handleMouseMove=Rb(U(d,d.handleMouseMove),25);d.throttledHandleMouseSeek=Rb(U(d,d.handleMouseSeek),25);d.enable();return d}J(c,k);c.prototype.createEl=function(){return k.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})};
c.prototype.handleMouseMove=function(d){var c=this.getChild("seekBar");if(c){var f=c.getChild("mouseTimeDisplay"),b=c.el();c=ea(b);d=za(b,d).x;1<d?d=1:0>d&&(d=0);f&&f.update(c,d)}};c.prototype.handleMouseSeek=function(d){var c=this.getChild("seekBar");c&&c.handleMouseMove(d)};c.prototype.enabled=function(){return this.enabled_};c.prototype.disable=function(){this.children().forEach(function(d){return d.disable&&d.disable()});this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDown),
this.off(this.el_,"mousemove",this.handleMouseMove),this.handleMouseUp(),this.addClass("disabled"),this.enabled_=!1)};c.prototype.enable=function(){this.children().forEach(function(d){return d.enable&&d.enable()});this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDown),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)};c.prototype.handleMouseDown=function(d){var c=this.el_.ownerDocument,f=this.getChild("seekBar");f&&f.handleMouseDown(d);
this.on(c,"mousemove",this.throttledHandleMouseSeek);this.on(c,"touchmove",this.throttledHandleMouseSeek);this.on(c,"mouseup",this.handleMouseUp);this.on(c,"touchend",this.handleMouseUp)};c.prototype.handleMouseUp=function(d){var c=this.el_.ownerDocument,f=this.getChild("seekBar");f&&f.handleMouseUp(d);this.off(c,"mousemove",this.throttledHandleMouseSeek);this.off(c,"touchmove",this.throttledHandleMouseSeek);this.off(c,"mouseup",this.handleMouseUp);this.off(c,"touchend",this.handleMouseUp)};return c}(I);
xg.prototype.options_={children:["seekBar"]};I.registerComponent("ProgressControl",xg);var yg=function(k){function c(d,n){N(this,c);n=O(this,k.call(this,d,n));n.on(d,"fullscreenchange",n.handleFullscreenChange);!1===K[gb.fullscreenEnabled]&&n.disable();return n}J(c,k);c.prototype.buildCSSClass=function(){return"vjs-fullscreen-control "+k.prototype.buildCSSClass.call(this)};c.prototype.handleFullscreenChange=function(d){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")};
c.prototype.handleClick=function(d){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()};return c}(hb);yg.prototype.controlText_="Fullscreen";I.registerComponent("FullscreenToggle",yg);var fk=function(k,c){c.tech_&&!c.tech_.featuresVolumeControl&&k.addClass("vjs-hidden");k.on(c,"loadstart",function(){c.tech_.featuresVolumeControl?k.removeClass("vjs-hidden"):k.addClass("vjs-hidden")})},gk=function(k){function c(){N(this,c);return O(this,k.apply(this,arguments))}
J(c,k);c.prototype.createEl=function(){return k.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})};return c}(I);I.registerComponent("VolumeLevel",gk);var ne=function(k){function c(d,n){N(this,c);var f=O(this,k.call(this,d,n));f.on("slideractive",f.updateLastVolume_);f.on(d,"volumechange",f.updateARIAAttributes);d.ready(function(){return f.updateARIAAttributes()});return f}J(c,k);c.prototype.createEl=function(){return k.prototype.createEl.call(this,
"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})};c.prototype.handleMouseDown=function(d){Ia(d)&&k.prototype.handleMouseDown.call(this,d)};c.prototype.handleMouseMove=function(d){Ia(d)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(d)))};c.prototype.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)};c.prototype.getPercent=function(){return this.player_.muted()?0:this.player_.volume()};c.prototype.stepForward=
function(){this.checkMuted();this.player_.volume(this.player_.volume()+.1)};c.prototype.stepBack=function(){this.checkMuted();this.player_.volume(this.player_.volume()-.1)};c.prototype.updateARIAAttributes=function(d){d=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",d);this.el_.setAttribute("aria-valuetext",d+"%")};c.prototype.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())};c.prototype.updateLastVolume_=function(){var d=this,c=
this.player_.volume();this.one("sliderinactive",function(){0===d.player_.volume()&&d.player_.lastVolume_(c)})};return c}(le);ne.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};ne.prototype.playerEvent="volumechange";I.registerComponent("VolumeBar",ne);var zg=function(k){function c(d){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};N(this,c);n.vertical=n.vertical||!1;if("undefined"===typeof n.volumeBar||p(n.volumeBar))n.volumeBar=n.volumeBar||{},n.volumeBar.vertical=
n.vertical;var f=O(this,k.call(this,d,n));fk(f,d);f.throttledHandleMouseMove=Rb(U(f,f.handleMouseMove),25);f.on("mousedown",f.handleMouseDown);f.on("touchstart",f.handleMouseDown);f.on(f.volumeBar,["focus","slideractive"],function(){f.volumeBar.addClass("vjs-slider-active");f.addClass("vjs-slider-active");f.trigger("slideractive")});f.on(f.volumeBar,["blur","sliderinactive"],function(){f.volumeBar.removeClass("vjs-slider-active");f.removeClass("vjs-slider-active");f.trigger("sliderinactive")});return f}
J(c,k);c.prototype.createEl=function(){var d="vjs-volume-horizontal";this.options_.vertical&&(d="vjs-volume-vertical");return k.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+d})};c.prototype.handleMouseDown=function(d){d=this.el_.ownerDocument;this.on(d,"mousemove",this.throttledHandleMouseMove);this.on(d,"touchmove",this.throttledHandleMouseMove);this.on(d,"mouseup",this.handleMouseUp);this.on(d,"touchend",this.handleMouseUp)};c.prototype.handleMouseUp=function(d){d=
this.el_.ownerDocument;this.off(d,"mousemove",this.throttledHandleMouseMove);this.off(d,"touchmove",this.throttledHandleMouseMove);this.off(d,"mouseup",this.handleMouseUp);this.off(d,"touchend",this.handleMouseUp)};c.prototype.handleMouseMove=function(d){this.volumeBar.handleMouseMove(d)};return c}(I);zg.prototype.options_={children:["volumeBar"]};I.registerComponent("VolumeControl",zg);var hk=function(k,c){c.tech_&&!c.tech_.featuresMuteControl&&k.addClass("vjs-hidden");k.on(c,"loadstart",function(){c.tech_.featuresMuteControl?
k.removeClass("vjs-hidden"):k.addClass("vjs-hidden")})},Ag=function(k){function c(d,n){N(this,c);n=O(this,k.call(this,d,n));hk(n,d);n.on(d,["loadstart","volumechange"],n.update);return n}J(c,k);c.prototype.buildCSSClass=function(){return"vjs-mute-control "+k.prototype.buildCSSClass.call(this)};c.prototype.handleClick=function(d){d=this.player_.volume();var c=this.player_.lastVolume_();0===d?(this.player_.volume(.1>c?.1:c),this.player_.muted(!1)):this.player_.muted(this.player_.muted()?!1:!0)};c.prototype.update=
function(d){this.updateIcon_();this.updateControlText_()};c.prototype.updateIcon_=function(){var d=this.player_.volume(),c=3;fb&&this.player_.muted(this.player_.tech_.el_.muted);0===d||this.player_.muted()?c=0:.33>d?c=1:.67>d&&(c=2);for(d=0;4>d;d++)H(this.el_,"vjs-vol-"+d);F(this.el_,"vjs-vol-"+c)};c.prototype.updateControlText_=function(){var d=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==d&&this.controlText(d)};return c}(hb);Ag.prototype.controlText_="Mute";
I.registerComponent("MuteToggle",Ag);var Bg=function(k){function c(d){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};N(this,c);n.inline="undefined"!==typeof n.inline?n.inline:!0;if("undefined"===typeof n.volumeControl||p(n.volumeControl))n.volumeControl=n.volumeControl||{},n.volumeControl.vertical=!n.inline;n=O(this,k.call(this,d,n));n.on(d,["loadstart"],n.volumePanelState_);n.on(n.volumeControl,["slideractive"],n.sliderActive_);n.on(n.volumeControl,["sliderinactive"],n.sliderInactive_);
return n}J(c,k);c.prototype.sliderActive_=function(){this.addClass("vjs-slider-active")};c.prototype.sliderInactive_=function(){this.removeClass("vjs-slider-active")};c.prototype.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden");this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")};c.prototype.createEl=function(){var d="vjs-volume-panel-horizontal";
this.options_.inline||(d="vjs-volume-panel-vertical");return k.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+d})};return c}(I);Bg.prototype.options_={children:["muteToggle","volumeControl"]};I.registerComponent("VolumePanel",Bg);var oe=function(k){function c(d,n){N(this,c);d=O(this,k.call(this,d,n));n&&(d.menuButton_=n.menuButton);d.focusedChild_=-1;d.on("keydown",d.handleKeyPress);return d}J(c,k);c.prototype.addItem=function(d){this.addChild(d);d.on("click",U(this,
function(c){this.menuButton_&&(this.menuButton_.unpressButton(),"CaptionSettingsMenuItem"!==d.name()&&this.menuButton_.focus())}))};c.prototype.createEl=function(){this.contentEl_=G(this.options_.contentElType||"ul",{className:"vjs-menu-content"});this.contentEl_.setAttribute("role","menu");var d=k.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});d.appendChild(this.contentEl_);Ca(d,"click",function(d){d.preventDefault();d.stopImmediatePropagation()});return d};c.prototype.dispose=
function(){this.contentEl_=null;k.prototype.dispose.call(this)};c.prototype.handleKeyPress=function(d){if(37===d.which||40===d.which)d.preventDefault(),this.stepForward();else if(38===d.which||39===d.which)d.preventDefault(),this.stepBack()};c.prototype.stepForward=function(){var d=0;void 0!==this.focusedChild_&&(d=this.focusedChild_+1);this.focus(d)};c.prototype.stepBack=function(){var d=0;void 0!==this.focusedChild_&&(d=this.focusedChild_-1);this.focus(d)};c.prototype.focus=function(){var d=0<arguments.length&&
void 0!==arguments[0]?arguments[0]:0,c=this.children().slice();c.length&&c[0].className&&/vjs-menu-title/.test(c[0].className)&&c.shift();0<c.length&&(0>d?d=0:d>=c.length&&(d=c.length-1),this.focusedChild_=d,c[d].el_.focus())};return c}(I);I.registerComponent("Menu",oe);var pe=function(k){function c(d){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};N(this,c);var f=O(this,k.call(this,d,n));f.menuButton_=new hb(d,n);f.menuButton_.controlText(f.controlText_);f.menuButton_.el_.setAttribute("aria-haspopup",
"true");n=hb.prototype.buildCSSClass();f.menuButton_.el_.className=f.buildCSSClass()+" "+n;f.menuButton_.removeClass("vjs-control");f.addChild(f.menuButton_);f.update();f.enabled_=!0;f.on(f.menuButton_,"tap",f.handleClick);f.on(f.menuButton_,"click",f.handleClick);f.on(f.menuButton_,"focus",f.handleFocus);f.on(f.menuButton_,"blur",f.handleBlur);f.on("keydown",f.handleSubmenuKeyPress);return f}J(c,k);c.prototype.update=function(){var d=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu));
this.menu=d;this.addChild(d);this.buttonPressed_=!1;this.menuButton_.el_.setAttribute("aria-expanded","false");this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()};c.prototype.createMenu=function(){var d=new oe(this.player_,{menuButton:this});this.hideThreshold_=0;if(this.options_.title){var c=G("li",{className:"vjs-menu-title",innerHTML:da(this.options_.title),tabIndex:-1});this.hideThreshold_+=1;d.children_.unshift(c);P(c,d.contentEl())}if(this.items=this.createItems())for(c=
0;c<this.items.length;c++)d.addItem(this.items[c]);return d};c.prototype.createItems=function(){};c.prototype.createEl=function(){return k.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})};c.prototype.buildWrapperCSSClass=function(){var d="vjs-menu-button";d=!0===this.options_.inline?d+"-inline":d+"-popup";var c=hb.prototype.buildCSSClass();return"vjs-menu-button "+d+" "+c+" "+k.prototype.buildCSSClass.call(this)};c.prototype.buildCSSClass=function(){var d="vjs-menu-button";
d=!0===this.options_.inline?d+"-inline":d+"-popup";return"vjs-menu-button "+d+" "+k.prototype.buildCSSClass.call(this)};c.prototype.controlText=function(d){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.menuButton_.el();return this.menuButton_.controlText(d,c)};c.prototype.handleClick=function(d){this.one(this.menu.contentEl(),"mouseleave",U(this,function(d){this.unpressButton();this.el_.blur()}));this.buttonPressed_?this.unpressButton():this.pressButton()};c.prototype.focus=function(){this.menuButton_.focus()};
c.prototype.blur=function(){this.menuButton_.blur()};c.prototype.handleFocus=function(){Ca(K,"keydown",U(this,this.handleKeyPress))};c.prototype.handleBlur=function(){pa(K,"keydown",U(this,this.handleKeyPress))};c.prototype.handleKeyPress=function(d){27===d.which||9===d.which?(this.buttonPressed_&&this.unpressButton(),9!==d.which&&(d.preventDefault(),this.menuButton_.el_.focus())):38!==d.which&&40!==d.which||this.buttonPressed_||(this.pressButton(),d.preventDefault())};c.prototype.handleSubmenuKeyPress=
function(d){if(27===d.which||9===d.which)this.buttonPressed_&&this.unpressButton(),9!==d.which&&(d.preventDefault(),this.menuButton_.el_.focus())};c.prototype.pressButton=function(){this.enabled_&&(this.buttonPressed_=!0,this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),fb&&x()||this.menu.focus())};c.prototype.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","false"))};c.prototype.disable=
function(){this.unpressButton();this.enabled_=!1;this.addClass("vjs-disabled");this.menuButton_.disable()};c.prototype.enable=function(){this.enabled_=!0;this.removeClass("vjs-disabled");this.menuButton_.enable()};return c}(I);I.registerComponent("MenuButton",pe);var qe=function(k){function c(d,n){N(this,c);var f=n.tracks;d=O(this,k.call(this,d,n));1>=d.items.length&&d.hide();if(!f)return O(d);var b=U(d,d.update);f.addEventListener("removetrack",b);f.addEventListener("addtrack",b);d.player_.on("ready",
b);d.player_.on("dispose",function(){f.removeEventListener("removetrack",b);f.removeEventListener("addtrack",b)});return d}J(c,k);return c}(pe);I.registerComponent("TrackButton",qe);var sc=function(k){function c(d,n){N(this,c);d=O(this,k.call(this,d,n));d.selectable=n.selectable;d.isSelected_=n.selected||!1;d.multiSelectable=n.multiSelectable;d.selected(d.isSelected_);d.selectable?d.multiSelectable?d.el_.setAttribute("role","menuitemcheckbox"):d.el_.setAttribute("role","menuitemradio"):d.el_.setAttribute("role",
"menuitem");return d}J(c,k);c.prototype.createEl=function(d,c,f){this.nonIconControl=!0;return k.prototype.createEl.call(this,"li",w({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},c),f)};c.prototype.handleClick=function(d){this.selected(!0)};c.prototype.selected=function(d){this.selectable&&(d?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=
!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))};return c}(cd);I.registerComponent("MenuItem",sc);var tc=function(k){function c(d,n){N(this,c);var f=n.track,b=d.textTracks();n.label=f.label||f.language||"Unknown";n.selected="showing"===f.mode;var g=O(this,k.call(this,d,n));g.track=f;var a=function(){for(var d=arguments.length,c=Array(d),a=0;a<d;a++)c[a]=arguments[a];g.handleTracksChange.apply(g,c)},l=function(){for(var d=
arguments.length,c=Array(d),a=0;a<d;a++)c[a]=arguments[a];g.handleSelectedLanguageChange.apply(g,c)};d.on(["loadstart","texttrackchange"],a);b.addEventListener("change",a);b.addEventListener("selectedlanguagechange",l);g.on("dispose",function(){d.off(["loadstart","texttrackchange"],a);b.removeEventListener("change",a);b.removeEventListener("selectedlanguagechange",l)});if(void 0===b.onchange){var t=void 0;g.on(["tap","click"],function(){if("object"!==la(E.Event))try{t=new E.Event("change")}catch(z){}t||
(t=K.createEvent("Event"),t.initEvent("change",!0,!0));b.dispatchEvent(t)})}g.handleTracksChange();return g}J(c,k);c.prototype.handleClick=function(d){var c=this.track.kind,f=this.track.kinds,b=this.player_.textTracks();f||(f=[c]);k.prototype.handleClick.call(this,d);if(b)for(d=0;d<b.length;d++)c=b[d],c===this.track&&-1<f.indexOf(c.kind)?"showing"!==c.mode&&(c.mode="showing"):"disabled"!==c.mode&&(c.mode="disabled")};c.prototype.handleTracksChange=function(d){d="showing"===this.track.mode;d!==this.isSelected_&&
this.selected(d)};c.prototype.handleSelectedLanguageChange=function(d){"showing"===this.track.mode&&(d=this.player_.cache_.selectedLanguage,d&&d.enabled&&d.language===this.track.language&&d.kind!==this.track.kind||(this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}))};c.prototype.dispose=function(){this.track=null;k.prototype.dispose.call(this)};return c}(sc);I.registerComponent("TextTrackMenuItem",tc);var Cg=function(k){function c(d,n){N(this,c);n.track=
{player:d,kind:n.kind,kinds:n.kinds,default:!1,mode:"disabled"};n.kinds||(n.kinds=[n.kind]);n.track.label=n.label?n.label:n.kinds.join(" and ")+" off";n.selectable=!0;n.multiSelectable=!1;return O(this,k.call(this,d,n))}J(c,k);c.prototype.handleTracksChange=function(d){d=this.player().textTracks();for(var c=!0,f=0,b=d.length;f<b;f++){var k=d[f];if(-1<this.options_.kinds.indexOf(k.kind)&&"showing"===k.mode){c=!1;break}}c!==this.isSelected_&&this.selected(c)};c.prototype.handleSelectedLanguageChange=
function(d){d=this.player().textTracks();for(var c=!0,f=0,b=d.length;f<b;f++){var k=d[f];if(-1<["captions","descriptions","subtitles"].indexOf(k.kind)&&"showing"===k.mode){c=!1;break}}c&&(this.player_.cache_.selectedLanguage={enabled:!1})};return c}(tc);I.registerComponent("OffTextTrackMenuItem",Cg);var Xb=function(k){function c(d){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};N(this,c);n.tracks=d.textTracks();return O(this,k.call(this,d,n))}J(c,k);c.prototype.createItems=function(){var d=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:tc,f=void 0;this.label_&&(f=this.label_+" off");d.push(new Cg(this.player_,{kinds:this.kinds_,kind:this.kind_,label:f}));this.hideThreshold_+=1;f=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var b=0;b<f.length;b++){var k=f[b];if(-1<this.kinds_.indexOf(k.kind)){var a=new c(this.player_,{track:k,selectable:!0,multiSelectable:!1});a.addClass("vjs-"+
k.kind+"-menu-item");d.push(a)}}return d};return c}(qe);I.registerComponent("TextTrackButton",Xb);var Dg=function(k){function c(d,n){N(this,c);var f=n.track,b=n.cue,g=d.currentTime();n.selectable=!0;n.multiSelectable=!1;n.label=b.text;n.selected=b.startTime<=g&&g<b.endTime;d=O(this,k.call(this,d,n));d.track=f;d.cue=b;f.addEventListener("cuechange",U(d,d.update));return d}J(c,k);c.prototype.handleClick=function(d){k.prototype.handleClick.call(this);this.player_.currentTime(this.cue.startTime);this.update(this.cue.startTime)};
c.prototype.update=function(d){d=this.cue;var c=this.player_.currentTime();this.selected(d.startTime<=c&&c<d.endTime)};return c}(sc);I.registerComponent("ChaptersTrackMenuItem",Dg);var re=function(k){function c(d,n,f){N(this,c);return O(this,k.call(this,d,n,f))}J(c,k);c.prototype.buildCSSClass=function(){return"vjs-chapters-button "+k.prototype.buildCSSClass.call(this)};c.prototype.buildWrapperCSSClass=function(){return"vjs-chapters-button "+k.prototype.buildWrapperCSSClass.call(this)};c.prototype.update=
function(d){this.track_&&(!d||"addtrack"!==d.type&&"removetrack"!==d.type)||this.setTrack(this.findChaptersTrack());k.prototype.update.call(this)};c.prototype.setTrack=function(d){if(this.track_!==d){this.updateHandler_||(this.updateHandler_=this.update.bind(this));if(this.track_){var c=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);c&&c.removeEventListener("load",this.updateHandler_);this.track_=null}if(this.track_=d)this.track_.mode="hidden",(d=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_))&&
d.addEventListener("load",this.updateHandler_)}};c.prototype.findChaptersTrack=function(){for(var d=this.player_.textTracks()||[],c=d.length-1;0<=c;c--){var f=d[c];if(f.kind===this.kind_)return f}};c.prototype.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(da(this.kind_))};c.prototype.createMenu=function(){this.options_.title=this.getMenuCaption();return k.prototype.createMenu.call(this)};c.prototype.createItems=function(){var d=[];if(!this.track_)return d;
var c=this.track_.cues;if(!c)return d;for(var f=0,b=c.length;f<b;f++){var k=new Dg(this.player_,{track:this.track_,cue:c[f]});d.push(k)}return d};return c}(Xb);re.prototype.kind_="chapters";re.prototype.controlText_="Chapters";I.registerComponent("ChaptersButton",re);var se=function(k){function c(d,n,f){N(this,c);n=O(this,k.call(this,d,n,f));var b=d.textTracks(),g=U(n,n.handleTracksChange);b.addEventListener("change",g);n.on("dispose",function(){b.removeEventListener("change",g)});return n}J(c,k);
c.prototype.handleTracksChange=function(d){d=this.player().textTracks();for(var c=!1,f=0,b=d.length;f<b;f++){var k=d[f];if(k.kind!==this.kind_&&"showing"===k.mode){c=!0;break}}c?this.disable():this.enable()};c.prototype.buildCSSClass=function(){return"vjs-descriptions-button "+k.prototype.buildCSSClass.call(this)};c.prototype.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+k.prototype.buildWrapperCSSClass.call(this)};return c}(Xb);se.prototype.kind_="descriptions";se.prototype.controlText_=
"Descriptions";I.registerComponent("DescriptionsButton",se);var te=function(k){function c(d,n,f){N(this,c);return O(this,k.call(this,d,n,f))}J(c,k);c.prototype.buildCSSClass=function(){return"vjs-subtitles-button "+k.prototype.buildCSSClass.call(this)};c.prototype.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+k.prototype.buildWrapperCSSClass.call(this)};return c}(Xb);te.prototype.kind_="subtitles";te.prototype.controlText_="Subtitles";I.registerComponent("SubtitlesButton",te);var ue=
function(k){function c(d,n){N(this,c);n.track={player:d,kind:n.kind,label:n.kind+" settings",selectable:!1,default:!1,mode:"disabled"};n.selectable=!1;n.name="CaptionSettingsMenuItem";d=O(this,k.call(this,d,n));d.addClass("vjs-texttrack-settings");d.controlText(", opens "+n.kind+" settings dialog");return d}J(c,k);c.prototype.handleClick=function(d){this.player().getChild("textTrackSettings").open()};return c}(tc);I.registerComponent("CaptionSettingsMenuItem",ue);var ve=function(k){function c(d,n,
f){N(this,c);return O(this,k.call(this,d,n,f))}J(c,k);c.prototype.buildCSSClass=function(){return"vjs-captions-button "+k.prototype.buildCSSClass.call(this)};c.prototype.buildWrapperCSSClass=function(){return"vjs-captions-button "+k.prototype.buildWrapperCSSClass.call(this)};c.prototype.createItems=function(){var d=[];this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(d.push(new ue(this.player_,{kind:this.kind_})),this.hideThreshold_+=
1);return k.prototype.createItems.call(this,d)};return c}(Xb);ve.prototype.kind_="captions";ve.prototype.controlText_="Captions";I.registerComponent("CaptionsButton",ve);var Eg=function(k){function c(){N(this,c);return O(this,k.apply(this,arguments))}J(c,k);c.prototype.createEl=function(d,c,f){var b='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);"captions"===this.options_.track.kind&&(b+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+
this.localize("Captions")+"</span>\n      ");return k.prototype.createEl.call(this,d,w({innerHTML:b+"</span>"},c),f)};return c}(tc);I.registerComponent("SubsCapsMenuItem",Eg);var we=function(k){function c(d){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};N(this,c);n=O(this,k.call(this,d,n));n.label_="subtitles";-1<["en","en-us","en-ca","fr-ca"].indexOf(n.player_.language_)&&(n.label_="captions");n.menuButton_.controlText(da(n.label_));return n}J(c,k);c.prototype.buildCSSClass=function(){return"vjs-subs-caps-button "+
k.prototype.buildCSSClass.call(this)};c.prototype.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+k.prototype.buildWrapperCSSClass.call(this)};c.prototype.createItems=function(){var d=[];this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(d.push(new ue(this.player_,{kind:this.label_})),this.hideThreshold_+=1);return d=k.prototype.createItems.call(this,d,Eg)};return c}(Xb);we.prototype.kinds_=["captions","subtitles"];we.prototype.controlText_=
"Subtitles";I.registerComponent("SubsCapsButton",we);var Fg=function(k){function c(d,n){N(this,c);var f=n.track,b=d.audioTracks();n.label=f.label||f.language||"Unknown";n.selected=f.enabled;var g=O(this,k.call(this,d,n));g.track=f;g.addClass("vjs-"+f.kind+"-menu-item");var a=function(){for(var d=arguments.length,c=Array(d),a=0;a<d;a++)c[a]=arguments[a];g.handleTracksChange.apply(g,c)};b.addEventListener("change",a);g.on("dispose",function(){b.removeEventListener("change",a)});return g}J(c,k);c.prototype.createEl=
function(d,c,f){var b='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);"main-desc"===this.options_.track.kind&&(b+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Descriptions")+"</span>\n      ");return k.prototype.createEl.call(this,d,w({innerHTML:b+"</span>"},c),f)};c.prototype.handleClick=function(d){var c=this.player_.audioTracks();k.prototype.handleClick.call(this,d);for(d=0;d<c.length;d++){var f=
c[d];f.enabled=f===this.track}};c.prototype.handleTracksChange=function(d){this.selected(this.track.enabled)};return c}(sc);I.registerComponent("AudioTrackMenuItem",Fg);var Gg=function(k){function c(d){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};N(this,c);n.tracks=d.audioTracks();return O(this,k.call(this,d,n))}J(c,k);c.prototype.buildCSSClass=function(){return"vjs-audio-button "+k.prototype.buildCSSClass.call(this)};c.prototype.buildWrapperCSSClass=function(){return"vjs-audio-button "+
k.prototype.buildWrapperCSSClass.call(this)};c.prototype.createItems=function(){var d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];this.hideThreshold_=1;for(var c=this.player_.audioTracks(),f=0;f<c.length;f++)d.push(new Fg(this.player_,{track:c[f],selectable:!0,multiSelectable:!1}));return d};return c}(qe);Gg.prototype.controlText_="Audio Track";I.registerComponent("AudioTrackButton",Gg);var xe=function(k){function c(d,n){N(this,c);var f=n.rate,b=parseFloat(f,10);n.label=f;n.selected=
1===b;n.selectable=!0;n.multiSelectable=!1;n=O(this,k.call(this,d,n));n.label=f;n.rate=b;n.on(d,"ratechange",n.update);return n}J(c,k);c.prototype.handleClick=function(d){k.prototype.handleClick.call(this);this.player().playbackRate(this.rate)};c.prototype.update=function(d){this.selected(this.player().playbackRate()===this.rate)};return c}(sc);xe.prototype.contentElType="button";I.registerComponent("PlaybackRateMenuItem",xe);var Hg=function(k){function c(d,n){N(this,c);n=O(this,k.call(this,d,n));
n.updateVisibility();n.updateLabel();n.on(d,"loadstart",n.updateVisibility);n.on(d,"ratechange",n.updateLabel);return n}J(c,k);c.prototype.createEl=function(){var d=k.prototype.createEl.call(this);this.labelEl_=G("div",{className:"vjs-playback-rate-value",innerHTML:"1x"});d.appendChild(this.labelEl_);return d};c.prototype.dispose=function(){this.labelEl_=null;k.prototype.dispose.call(this)};c.prototype.buildCSSClass=function(){return"vjs-playback-rate "+k.prototype.buildCSSClass.call(this)};c.prototype.buildWrapperCSSClass=
function(){return"vjs-playback-rate "+k.prototype.buildWrapperCSSClass.call(this)};c.prototype.createMenu=function(){var d=new oe(this.player()),c=this.playbackRates();if(c)for(var f=c.length-1;0<=f;f--)d.addChild(new xe(this.player(),{rate:c[f]+"x"}));return d};c.prototype.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())};c.prototype.handleClick=function(d){d=this.player().playbackRate();for(var c=this.playbackRates(),f=c[0],b=0;b<c.length;b++)if(c[b]>
d){f=c[b];break}this.player().playbackRate(f)};c.prototype.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates};c.prototype.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&0<this.playbackRates().length};c.prototype.updateVisibility=function(d){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")};c.prototype.updateLabel=
function(d){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")};return c}(pe);Hg.prototype.controlText_="Playback Rate";I.registerComponent("PlaybackRateMenuButton",Hg);var Ig=function(k){function c(){N(this,c);return O(this,k.apply(this,arguments))}J(c,k);c.prototype.buildCSSClass=function(){return"vjs-spacer "+k.prototype.buildCSSClass.call(this)};c.prototype.createEl=function(){return k.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})};
return c}(I);I.registerComponent("Spacer",Ig);var ik=function(k){function c(){N(this,c);return O(this,k.apply(this,arguments))}J(c,k);c.prototype.buildCSSClass=function(){return"vjs-custom-control-spacer "+k.prototype.buildCSSClass.call(this)};c.prototype.createEl=function(){var d=k.prototype.createEl.call(this,{className:this.buildCSSClass()});d.innerHTML="\u00a0";return d};return c}(Ig);I.registerComponent("CustomControlSpacer",ik);var Jg=function(k){function c(){N(this,c);return O(this,k.apply(this,
arguments))}J(c,k);c.prototype.createEl=function(){return k.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})};return c}(I);Jg.prototype.options_={children:"playToggle volumePanel currentTimeDisplay timeDivider durationDisplay progressControl liveDisplay remainingTimeDisplay customControlSpacer playbackRateMenuButton chaptersButton descriptionsButton subsCapsButton audioTrackButton fullscreenToggle".split(" ")};I.registerComponent("ControlBar",Jg);var Kg=function(k){function c(d,
n){N(this,c);n=O(this,k.call(this,d,n));n.on(d,"error",n.open);return n}J(c,k);c.prototype.buildCSSClass=function(){return"vjs-error-display "+k.prototype.buildCSSClass.call(this)};c.prototype.content=function(){var d=this.player().error();return d?this.localize(d.message):""};return c}(Tb);Kg.prototype.options_=Y(Tb.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});I.registerComponent("ErrorDisplay",Kg);var Lg=["#000","Black"],Mg=["#00F","Blue"],Ng=["#0FF","Cyan"],Og=
["#0F0","Green"],Pg=["#F0F","Magenta"],Qg=["#F00","Red"],Rg=["#FFF","White"],Sg=["#FF0","Yellow"],ye=["1","Opaque"],ze=["0.5","Semi-Transparent"],Tg=["0","Transparent"],Hb={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Lg,Rg,Qg,Og,Mg,Sg,Pg,Ng]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[ye,ze,Tg]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",
label:"Color",options:[Rg,Lg,Qg,Og,Mg,Sg,Pg,Ng]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif",
"Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(k){return"1.00"===k?null:Number(k)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",
options:[ye,ze]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[Tg,ze,ye]}};Hb.windowColor.options=Hb.backgroundColor.options;var jk=function(k){function c(d,n){N(this,c);n.temporary=!1;var f=O(this,k.call(this,d,n));f.updateDisplay=U(f,f.updateDisplay);f.fill();f.hasBeenOpened_=f.hasBeenFilled_=!0;f.endDialog=G("p",{className:"vjs-control-text",
textContent:f.localize("End of dialog window.")});f.el().appendChild(f.endDialog);f.setDefaults();void 0===n.persistTextTrackSettings&&(f.options_.persistTextTrackSettings=f.options_.playerOptions.persistTextTrackSettings);f.on(f.$(".vjs-done-button"),"click",function(){f.saveSettings();f.close()});f.on(f.$(".vjs-default-button"),"click",function(){f.setDefaults();f.updateDisplay()});u(Hb,function(d){f.on(f.$(d.selector),"change",f.updateDisplay)});f.options_.persistTextTrackSettings&&f.restoreSettings();
return f}J(c,k);c.prototype.dispose=function(){this.endDialog=null;k.prototype.dispose.call(this)};c.prototype.createElSelect_=function(d){var c=this,f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",b=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"label",k=Hb[d],a=k.id.replace("%s",this.id_),l=[f,a].join(" ").trim();return["<"+b+' id="'+a+'" class="'+("label"===b?"vjs-label":"")+'">',this.localize(k.label),"</"+b+">",'<select aria-labelledby="'+l+'">'].concat(k.options.map(function(d){var f=
a+"-"+d[1].replace(/\W+/g,"");return['<option id="'+f+'" value="'+d[0]+'" ','aria-labelledby="'+l+" "+f+'">',c.localize(d[1]),"</option>"].join("")})).concat("</select>").join("")};c.prototype.createElFgColor_=function(){var d="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+d+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",d),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",d),"</span></fieldset>"].join("")};
c.prototype.createElBgColor_=function(){var d="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+d+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",d),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",d),"</span></fieldset>"].join("")};c.prototype.createElWinColor_=function(){var d="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+
d+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",d),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",d),"</span></fieldset>"].join("")};c.prototype.createElColors_=function(){return G("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})};c.prototype.createElFont_=function(){return G("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',
this.createElSelect_("fontPercent","","legend"),'</fieldset><fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),'</fieldset><fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})};c.prototype.createElControls_=function(){var d=this.localize("restore all settings to the default values");return G("div",{className:"vjs-track-settings-controls",innerHTML:['<button class="vjs-default-button" title="'+
d+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+d+"</span>","</button>",'<button class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})};c.prototype.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]};c.prototype.label=function(){return this.localize("Caption Settings Dialog")};c.prototype.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")};c.prototype.buildCSSClass=
function(){return k.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"};c.prototype.getValues=function(){var d=this;return y(Hb,function(c,f,b){var k=d.$(f.selector);f=Ef(k.options[k.options.selectedIndex].value,f.parser);void 0!==f&&(c[b]=f);return c},{})};c.prototype.setValues=function(d){var c=this;u(Hb,function(f,b){var k=c.$(f.selector);b=d[b];f=f.parser;if(b)for(var a=0;a<k.options.length;a++)if(Ef(k.options[a].value,f)===b){k.selectedIndex=a;break}})};c.prototype.setDefaults=function(){var d=
this;u(Hb,function(c){var f=c.hasOwnProperty("default")?c.default:0;d.$(c.selector).selectedIndex=f})};c.prototype.restoreSettings=function(){var d=void 0;try{d=JSON.parse(E.localStorage.getItem("vjs-text-track-settings"))}catch(n){V.warn(n)}d&&this.setValues(d)};c.prototype.saveSettings=function(){if(this.options_.persistTextTrackSettings){var d=this.getValues();try{Object.keys(d).length?E.localStorage.setItem("vjs-text-track-settings",JSON.stringify(d)):E.localStorage.removeItem("vjs-text-track-settings")}catch(n){V.warn(n)}}};
c.prototype.updateDisplay=function(){var d=this.player_.getChild("textTrackDisplay");d&&d.updateDisplay()};c.prototype.conditionalBlur_=function(){this.previouslyActiveEl_=null;this.off(K,"keydown",this.handleKeyDown);var d=this.player_.controlBar,c=d&&d.subsCapsButton;d=d&&d.captionsButton;c?c.focus():d&&d.focus()};return c}(Tb);I.registerComponent("TextTrackSettings",jk);var kk=function(k){function c(d,n){N(this,c);var f=n.ResizeObserver||E.ResizeObserver;null===n.ResizeObserver&&(f=!1);var b=Y({createEl:!f,
reportTouchActivity:!1},n),g=O(this,k.call(this,d,b));g.ResizeObserver=n.ResizeObserver||E.ResizeObserver;g.loadListener_=null;g.resizeObserver_=null;g.debouncedHandler_=tj(function(){g.resizeHandler()},100,!1,g);f?(g.resizeObserver_=new g.ResizeObserver(g.debouncedHandler_),g.resizeObserver_.observe(d.el())):(g.loadListener_=function(){g.el_&&g.el_.contentWindow&&Ca(g.el_.contentWindow,"resize",g.debouncedHandler_)},g.one("load",g.loadListener_));return g}J(c,k);c.prototype.createEl=function(){return k.prototype.createEl.call(this,
"iframe",{className:"vjs-resize-manager"})};c.prototype.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")};c.prototype.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel();this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect());this.el_&&this.el_.contentWindow&&pa(this.el_.contentWindow,"resize",this.debouncedHandler_);this.loadListener_&&this.off("load",this.loadListener_);
this.loadListener_=this.debouncedHandler_=this.resizeObserver=this.ResizeObserver=null};return c}(I);I.registerComponent("ResizeManager",kk);var Ae=function(k){var c=k.el();if(c.hasAttribute("src"))return k.triggerSourceset(c.src),!0;c=k.$$("source");var d=[],n="";if(!c.length)return!1;for(var f=0;f<c.length;f++){var b=c[f].src;b&&-1===d.indexOf(b)&&d.push(b)}if(!d.length)return!1;1===d.length&&(n=d[0]);k.triggerSourceset(n);return!0},lk=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},
set:function(k){var c=K.createElement(this.nodeName.toLowerCase());c.innerHTML=k;for(k=K.createDocumentFragment();c.childNodes.length;)k.appendChild(c.childNodes[0]);this.innerText="";E.Element.prototype.appendChild.call(this,k);return this.innerHTML}}),Ug=function(k,c){for(var d={},n=0;n<k.length&&!((d=Object.getOwnPropertyDescriptor(k[n],c))&&d.set&&d.get);n++);d.enumerable=!0;d.configurable=!0;return d},Vg=function(k){var c=k.el();if(!c.resetSourceWatch_){var d={},n=Ug([k.el(),E.HTMLMediaElement.prototype,
E.Element.prototype,lk],"innerHTML"),f=function(d){return function(){for(var f=arguments.length,a=Array(f),b=0;b<f;b++)a[b]=arguments[b];f=d.apply(c,a);Ae(k);return f}};["append","appendChild","insertAdjacentHTML"].forEach(function(b){c[b]&&(d[b]=c[b],c[b]=f(d[b]))});Object.defineProperty(c,"innerHTML",Y(n,{set:f(n.set)}));c.resetSourceWatch_=function(){c.resetSourceWatch_=null;Object.keys(d).forEach(function(f){c[f]=d[f]});Object.defineProperty(c,"innerHTML",n)};k.one("sourceset",c.resetSourceWatch_)}},
mk=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?eg(E.Element.prototype.getAttribute.call(this,"src")):""},set:function(k){E.Element.prototype.setAttribute.call(this,"src",k);return k}}),nk=function(k){if(k.featuresSourceset){var c=k.el();if(!c.resetSourceset_){var d=Ug([k.el(),E.HTMLMediaElement.prototype,mk],"src"),n=c.setAttribute,f=c.load;Object.defineProperty(c,"src",Y(d,{set:function(f){f=d.set.call(c,f);k.triggerSourceset(c.src);return f}}));c.setAttribute=
function(d,f){f=n.call(c,d,f);/src/i.test(d)&&k.triggerSourceset(c.src);return f};c.load=function(){var d=f.call(c);Ae(k)||(k.triggerSourceset(""),Vg(k));return d};c.currentSrc?k.triggerSourceset(c.currentSrc):Ae(k)||Vg(k);c.resetSourceset_=function(){c.resetSourceset_=null;c.load=f;c.setAttribute=n;Object.defineProperty(c,"src",d);c.resetSourceWatch_&&c.resetSourceWatch_()}}}},ok=Qd(["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."],
["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."]),L=function(k){function c(d,n){N(this,c);n=O(this,k.call(this,d,n));var f=d.source,b=!1;f&&(n.el_.currentSrc!==f.src||d.tag&&3===d.tag.initNetworkState_)?n.setSource(f):n.handleLateInit_(n.el_);d.enableSourceset&&n.setupSourcesetHandling_();if(n.el_.hasChildNodes()){var g=n.el_.childNodes,a=g.length;for(f=[];a--;){var l=g[a];"track"===l.nodeName.toLowerCase()&&
(n.featuresNativeTextTracks?(n.remoteTextTrackEls().addTrackElement_(l),n.remoteTextTracks().addTrack(l.track),n.textTracks().addTrack(l.track),b||n.el_.hasAttribute("crossorigin")||!bd(l.src)||(b=!0)):f.push(l))}for(g=0;g<f.length;g++)n.el_.removeChild(f[g])}n.proxyNativeTracks_();n.featuresNativeTextTracks&&b&&V.warn(Dd(ok));n.restoreMetadataTracksInIOSNativePlayer_();(Xc||Ud||Vf)&&!0===d.nativeControlsForTouch&&n.setControls(!0);n.proxyWebkitFullscreen_();n.triggerReady();return n}J(c,k);c.prototype.dispose=
function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_();c.disposeMediaElement(this.el_);this.options_=null;k.prototype.dispose.call(this)};c.prototype.setupSourcesetHandling_=function(){nk(this)};c.prototype.restoreMetadataTracksInIOSNativePlayer_=function(){var d=this.textTracks(),c=void 0,f=function(){c=[];for(var f=0;f<d.length;f++){var a=d[f];"metadata"===a.kind&&c.push({track:a,storedMode:a.mode})}};f();d.addEventListener("change",f);this.on("dispose",function(){return d.removeEventListener("change",
f)});var b=function a(){for(var f=0;f<c.length;f++){var b=c[f];"disabled"===b.track.mode&&b.track.mode!==b.storedMode&&(b.track.mode=b.storedMode)}d.removeEventListener("change",a)};this.on("webkitbeginfullscreen",function(){d.removeEventListener("change",f);d.removeEventListener("change",b);d.addEventListener("change",b)});this.on("webkitendfullscreen",function(){d.removeEventListener("change",f);d.addEventListener("change",f);d.removeEventListener("change",b)})};c.prototype.overrideNative_=function(d,
c){var f=this;if(c===this["featuresNative"+d+"Tracks"]){var b=d.toLowerCase();this[b+"TracksListeners_"]&&Object.keys(this[b+"TracksListeners_"]).forEach(function(d){f.el()[b+"Tracks"].removeEventListener(d,f[b+"TracksListeners_"][d])});this["featuresNative"+d+"Tracks"]=!c;this[b+"TracksListeners_"]=null;this.proxyNativeTracksForType_(b)}};c.prototype.overrideNativeAudioTracks=function(d){this.overrideNative_("Audio",d)};c.prototype.overrideNativeVideoTracks=function(d){this.overrideNative_("Video",
d)};c.prototype.proxyNativeTracksForType_=function(d){var c=this;d=Na[d];var f=this.el()[d.getterName],b=this[d.getterName]();if(this["featuresNative"+d.capitalName+"Tracks"]&&f&&f.addEventListener){var k={change:function(d){b.trigger({type:"change",target:b,currentTarget:b,srcElement:b})},addtrack:function(d){b.addTrack(d.track)},removetrack:function(d){b.removeTrack(d.track)}},a=function(){for(var d=[],c=0;c<b.length;c++){for(var a=!1,k=0;k<f.length;k++)if(f[k]===b[c]){a=!0;break}a||d.push(b[c])}for(;d.length;)b.removeTrack(d.shift())};
this[d.getterName+"Listeners_"]=k;Object.keys(k).forEach(function(d){var a=k[d];f.addEventListener(d,a);c.on("dispose",function(c){return f.removeEventListener(d,a)})});this.on("loadstart",a);this.on("dispose",function(d){return c.off("loadstart",a)})}};c.prototype.proxyNativeTracks_=function(){var d=this;Na.names.forEach(function(c){d.proxyNativeTracksForType_(c)})};c.prototype.createEl=function(){var d=this.options_.tag;if(!d||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(d){var k=
d.cloneNode(!0);d.parentNode&&d.parentNode.insertBefore(k,d);c.disposeMediaElement(d);d=k}else d=K.createElement("video"),k=this.options_.tag&&C(this.options_.tag),k=Y({},k),Xc&&!0===this.options_.nativeControlsForTouch||delete k.controls,X(d,w(k,{id:this.options_.techId,class:"vjs-tech"}));d.playerId=this.options_.playerId}"undefined"!==typeof this.options_.preload&&d.setAttribute("preload",this.options_.preload);k=["loop","muted","playsinline","autoplay"];for(var f=0;f<k.length;f++){var b=k[f],
g=this.options_[b];"undefined"!==typeof g&&(g?d.setAttribute(b,b):d.removeAttribute(b),d[b]=g)}return d};c.prototype.handleLateInit_=function(d){if(0!==d.networkState&&3!==d.networkState)if(0===d.readyState){var c=!1,f=function(){c=!0};this.on("loadstart",f);var b=function(){c||this.trigger("loadstart")};this.on("loadedmetadata",b);this.ready(function(){this.off("loadstart",f);this.off("loadedmetadata",b);c||this.trigger("loadstart")})}else{var k=["loadstart"];k.push("loadedmetadata");2<=d.readyState&&
k.push("loadeddata");3<=d.readyState&&k.push("canplay");4<=d.readyState&&k.push("canplaythrough");this.ready(function(){k.forEach(function(d){this.trigger(d)},this)})}};c.prototype.setCurrentTime=function(d){try{this.el_.currentTime=d}catch(n){V(n,"Video is not ready. (Video.js)")}};c.prototype.duration=function(){var d=this;return Infinity===this.el_.duration&&Gb&&sb&&0===this.el_.currentTime?(this.on("timeupdate",function f(){0<d.el_.currentTime&&(Infinity===d.el_.duration&&d.trigger("durationchange"),
d.off("timeupdate",f))}),NaN):this.el_.duration||NaN};c.prototype.width=function(){return this.el_.offsetWidth};c.prototype.height=function(){return this.el_.offsetHeight};c.prototype.proxyWebkitFullscreen_=function(){var d=this;if("webkitDisplayingFullscreen"in this.el_){var c=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},f=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",c),this.trigger("fullscreenchange",
{isFullscreen:!0}))};this.on("webkitbeginfullscreen",f);this.on("dispose",function(){d.off("webkitbeginfullscreen",f);d.off("webkitendfullscreen",c)})}};c.prototype.supportsFullScreen=function(){if("function"===typeof this.el_.webkitEnterFullScreen){var d=E.navigator&&E.navigator.userAgent||"";if(/Android/.test(d)||!/Chrome|Mac OS X 10.5/.test(d))return!0}return!1};c.prototype.enterFullScreen=function(){var d=this.el_;d.paused&&d.networkState<=d.HAVE_METADATA?(this.el_.play(),this.setTimeout(function(){d.pause();
d.webkitEnterFullScreen()},0)):d.webkitEnterFullScreen()};c.prototype.exitFullScreen=function(){this.el_.webkitExitFullScreen()};c.prototype.src=function(d){if(void 0===d)return this.el_.src;this.setSrc(d)};c.prototype.reset=function(){c.resetMediaElement(this.el_)};c.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc};c.prototype.setControls=function(d){this.el_.controls=!!d};c.prototype.addTextTrack=function(d,c,f){return this.featuresNativeTextTracks?
this.el_.addTextTrack(d,c,f):k.prototype.addTextTrack.call(this,d,c,f)};c.prototype.createRemoteTextTrack=function(d){if(!this.featuresNativeTextTracks)return k.prototype.createRemoteTextTrack.call(this,d);var c=K.createElement("track");d.kind&&(c.kind=d.kind);d.label&&(c.label=d.label);if(d.language||d.srclang)c.srclang=d.language||d.srclang;d.default&&(c.default=d.default);d.id&&(c.id=d.id);d.src&&(c.src=d.src);return c};c.prototype.addRemoteTextTrack=function(d,c){d=k.prototype.addRemoteTextTrack.call(this,
d,c);this.featuresNativeTextTracks&&this.el().appendChild(d);return d};c.prototype.removeRemoteTextTrack=function(d){k.prototype.removeRemoteTextTrack.call(this,d);if(this.featuresNativeTextTracks)for(var c=this.$$("track"),f=c.length;f--;)d!==c[f]&&d!==c[f].track||this.el().removeChild(c[f])};c.prototype.getVideoPlaybackQuality=function(){if("function"===typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var d={};"undefined"!==typeof this.el().webkitDroppedFrameCount&&
"undefined"!==typeof this.el().webkitDecodedFrameCount&&(d.droppedVideoFrames=this.el().webkitDroppedFrameCount,d.totalVideoFrames=this.el().webkitDecodedFrameCount);E.performance&&"function"===typeof E.performance.now?d.creationTime=E.performance.now():E.performance&&E.performance.timing&&"number"===typeof E.performance.timing.navigationStart&&(d.creationTime=E.Date.now()-E.performance.timing.navigationStart);return d};return c}(fa);if(m()){L.TEST_VID=K.createElement("video");var ed=K.createElement("track");
ed.kind="captions";ed.srclang="en";ed.label="English";L.TEST_VID.appendChild(ed)}L.isSupported=function(){try{L.TEST_VID.volume=.5}catch(k){return!1}return!(!L.TEST_VID||!L.TEST_VID.canPlayType)};L.canPlayType=function(k){return L.TEST_VID.canPlayType(k)};L.canPlaySource=function(k,c){return L.canPlayType(k.type)};L.canControlVolume=function(){try{var k=L.TEST_VID.volume;L.TEST_VID.volume=k/2+.1;return k!==L.TEST_VID.volume}catch(c){return!1}};L.canMuteVolume=function(){try{var k=L.TEST_VID.muted;
L.TEST_VID.muted=!k;L.TEST_VID.muted?L.TEST_VID.setAttribute("muted","muted"):L.TEST_VID.removeAttribute("muted");return k!==L.TEST_VID.muted}catch(c){return!1}};L.canControlPlaybackRate=function(){if(Gb&&sb&&58>Xf)return!1;try{var k=L.TEST_VID.playbackRate;L.TEST_VID.playbackRate=k/2+.1;return k!==L.TEST_VID.playbackRate}catch(c){return!1}};L.canOverrideAttributes=function(){try{var k=function(){};Object.defineProperty(K.createElement("video"),"src",{get:k,set:k});Object.defineProperty(K.createElement("audio"),
"src",{get:k,set:k});Object.defineProperty(K.createElement("video"),"innerHTML",{get:k,set:k});Object.defineProperty(K.createElement("audio"),"innerHTML",{get:k,set:k})}catch(c){return!1}return!0};L.supportsNativeTextTracks=function(){return $f||fb&&sb};L.supportsNativeVideoTracks=function(){return!(!L.TEST_VID||!L.TEST_VID.videoTracks)};L.supportsNativeAudioTracks=function(){return!(!L.TEST_VID||!L.TEST_VID.audioTracks)};L.Events="loadstart suspend abort error emptied stalled loadedmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate progress play pause ratechange resize volumechange".split(" ");
L.prototype.featuresVolumeControl=L.canControlVolume();L.prototype.featuresMuteControl=L.canMuteVolume();L.prototype.featuresPlaybackRate=L.canControlPlaybackRate();L.prototype.featuresSourceset=L.canOverrideAttributes();L.prototype.movingMediaElementInDOM=!fb;L.prototype.featuresFullscreenResize=!0;L.prototype.featuresProgressEvents=!0;L.prototype.featuresTimeupdateEvents=!0;L.prototype.featuresNativeTextTracks=L.supportsNativeTextTracks();L.prototype.featuresNativeVideoTracks=L.supportsNativeVideoTracks();
L.prototype.featuresNativeAudioTracks=L.supportsNativeAudioTracks();var Wg=L.TEST_VID&&L.TEST_VID.constructor.prototype.canPlayType,pk=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;L.patchCanPlayType=function(){4<=Vd&&!Wf&&!sb&&(L.TEST_VID.constructor.prototype.canPlayType=function(k){return k&&pk.test(k)?"maybe":Wg.call(this,k)})};L.unpatchCanPlayType=function(){var k=L.TEST_VID.constructor.prototype.canPlayType;L.TEST_VID.constructor.prototype.canPlayType=Wg;return k};L.patchCanPlayType();L.disposeMediaElement=
function(k){if(k){for(k.parentNode&&k.parentNode.removeChild(k);k.hasChildNodes();)k.removeChild(k.firstChild);k.removeAttribute("src");if("function"===typeof k.load)try{k.load()}catch(c){}}};L.resetMediaElement=function(k){if(k){for(var c=k.querySelectorAll("source"),d=c.length;d--;)k.removeChild(c[d]);k.removeAttribute("src");if("function"===typeof k.load)try{k.load()}catch(n){}}};"muted defaultMuted autoplay controls loop playsinline".split(" ").forEach(function(k){L.prototype[k]=function(){return this.el_[k]||
this.el_.hasAttribute(k)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(k){L.prototype["set"+da(k)]=function(c){(this.el_[k]=c)?this.el_.setAttribute(k,k):this.el_.removeAttribute(k)}});"paused currentTime buffered volume poster preload error seeking seekable ended playbackRate defaultPlaybackRate played networkState readyState videoWidth videoHeight".split(" ").forEach(function(k){L.prototype[k]=function(){return this.el_[k]}});"volume src poster preload playbackRate defaultPlaybackRate".split(" ").forEach(function(k){L.prototype["set"+
da(k)]=function(c){this.el_[k]=c}});["pause","load","play"].forEach(function(k){L.prototype[k]=function(){return this.el_[k]()}});fa.withSourceHandlers(L);L.nativeSourceHandler={};L.nativeSourceHandler.canPlayType=function(k){try{return L.TEST_VID.canPlayType(k)}catch(c){return""}};L.nativeSourceHandler.canHandleSource=function(k,c){return k.type?L.nativeSourceHandler.canPlayType(k.type):k.src?(k=be(k.src),L.nativeSourceHandler.canPlayType("video/"+k)):""};L.nativeSourceHandler.handleSource=function(k,
c,d){c.setSrc(k.src)};L.nativeSourceHandler.dispose=function(){};L.registerSourceHandler(L.nativeSourceHandler);fa.registerTech("Html5",L);var qk=Qd(["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "],["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "]),Xg=
"progress abort suspend emptied stalled loadedmetadata loadeddata timeupdate resize volumechange texttrackchange".split(" "),Be={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},ma=function(k){function c(d,n,f){N(this,c);d.id=d.id||n.id||"vjs_video_"+Bb++;n=w(c.getTagSettings(d),n);n.initChildren=!1;n.createEl=!1;n.evented=!1;n.reportTouchActivity=!1;if(!n.language)if("function"===typeof d.closest){var b=d.closest("[lang]");b&&b.getAttribute&&(n.language=b.getAttribute("lang"))}else for(b=
d;b&&1===b.nodeType;){if(C(b).hasOwnProperty("lang")){n.language=b.getAttribute("lang");break}b=b.parentNode}f=O(this,k.call(this,null,n,f));f.isPosterFromTech_=!1;f.queuedCallbacks_=[];f.isReady_=!1;f.hasStarted_=!1;f.userActive_=!1;if(!f.options_||!f.options_.techOrder||!f.options_.techOrder.length)throw Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");f.tag=d;f.tagAttributes=d&&C(d);f.language(f.options_.language);
if(n.languages){var g={};Object.getOwnPropertyNames(n.languages).forEach(function(d){g[d.toLowerCase()]=n.languages[d]});f.languages_=g}else f.languages_=c.prototype.options_.languages;f.cache_={};f.poster_=n.poster||"";f.controls_=!!n.controls;f.cache_.lastVolume=1;d.controls=!1;d.removeAttribute("controls");d.hasAttribute("autoplay")?f.options_.autoplay=!0:f.autoplay(f.options_.autoplay);f.scrubbing_=!1;f.el_=f.createEl();f.cache_.lastPlaybackRate=f.defaultPlaybackRate();db(f,{eventBusKey:"el_"});
b=Y(f.options_);if(n.plugins){var a=n.plugins;Object.keys(a).forEach(function(d){if("function"===typeof this[d])this[d](a[d]);else throw Error('plugin "'+d+'" does not exist');},f)}f.options_.playerOptions=b;f.middleware_=[];f.initChildren();f.isAudio("audio"===d.nodeName.toLowerCase());f.controls()?f.addClass("vjs-controls-enabled"):f.addClass("vjs-controls-disabled");f.el_.setAttribute("role","region");f.isAudio()?f.el_.setAttribute("aria-label",f.localize("Audio Player")):f.el_.setAttribute("aria-label",
f.localize("Video Player"));f.isAudio()&&f.addClass("vjs-audio");f.flexNotSupported_()&&f.addClass("vjs-no-flex");fb||f.addClass("vjs-workinghover");c.players[f.id_]=f;f.addClass("vjs-v7");f.userActive(!0);f.reportUserActivity();f.one("play",f.listenForUserActivity_);f.on("fullscreenchange",f.handleFullscreenChange_);f.on("stageclick",f.handleStageClick_);f.changingSrc_=!1;f.playWaitingForReady_=!1;f.playOnLoadstart_=null;return f}J(c,k);c.prototype.dispose=function(){this.trigger("dispose");this.off("dispose");
this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null);c.players[this.id_]=null;this.tag&&this.tag.player&&(this.tag.player=null);this.el_&&this.el_.player&&(this.el_.player=null);this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_="");this.playerElIngest_&&(this.playerElIngest_=null);this.tag&&(this.tag=null);Ld[this.id()]=null;k.prototype.dispose.call(this)};c.prototype.createEl=function(){var d=this.tag,c=void 0,f=
this.playerElIngest_=d.parentNode&&d.parentNode.hasAttribute&&d.parentNode.hasAttribute("data-vjs-player"),b="video-js"===this.tag.tagName.toLowerCase();f?c=this.el_=d.parentNode:b||(c=this.el_=k.prototype.createEl.call(this,"div"));var g=C(d);if(b){c=this.el_=d;for(d=this.tag=K.createElement("video");c.children.length;)d.appendChild(c.firstChild);M(c,"video-js")||F(c,"video-js");c.appendChild(d);f=this.playerElIngest_=c;Object.keys(c).forEach(function(a){d[a]=c[a]})}d.setAttribute("tabindex","-1");
g.tabindex="-1";Yf&&(d.setAttribute("role","application"),g.role="application");d.removeAttribute("width");d.removeAttribute("height");"width"in g&&delete g.width;"height"in g&&delete g.height;Object.getOwnPropertyNames(g).forEach(function(a){b&&"class"===a||c.setAttribute(a,g[a]);b&&d.setAttribute(a,g[a])});d.playerId=d.id;d.id+="_html5_api";d.className="vjs-tech";d.player=c.player=this;this.addClass("vjs-paused");if(!0!==E.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=Nf("vjs-styles-dimensions");var a=
rb(".vjs-styles-defaults"),l=rb("head");l.insertBefore(this.styleEl_,a?a.nextSibling:l.firstChild)}this.width(this.options_.width);this.height(this.options_.height);this.fluid(this.options_.fluid);this.aspectRatio(this.options_.aspectRatio);a=d.getElementsByTagName("a");for(l=0;l<a.length;l++){var t=a.item(l);F(t,"vjs-hidden");t.setAttribute("hidden","hidden")}d.initNetworkState_=d.networkState;d.parentNode&&!f&&d.parentNode.insertBefore(c,d);P(d,c);this.children_.unshift(d);this.el_.setAttribute("lang",
this.language_);return this.el_=c};c.prototype.width=function(d){return this.dimension("width",d)};c.prototype.height=function(d){return this.dimension("height",d)};c.prototype.dimension=function(d,c){var f=d+"_";if(void 0===c)return this[f]||0;if(""===c)this[f]=void 0,this.updateStyleEl_();else{var b=parseFloat(c);isNaN(b)?V.error('Improper value "'+c+'" supplied for for '+d):(this[f]=b,this.updateStyleEl_())}};c.prototype.fluid=function(d){if(void 0===d)return!!this.fluid_;this.fluid_=!!d;d?this.addClass("vjs-fluid"):
this.removeClass("vjs-fluid");this.updateStyleEl_()};c.prototype.aspectRatio=function(d){if(void 0===d)return this.aspectRatio_;if(!/^\d+:\d+$/.test(d))throw Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=d;this.fluid(!0);this.updateStyleEl_()};c.prototype.updateStyleEl_=function(){if(!0===E.VIDEOJS_NO_DYNAMIC_STYLE){var d="number"===typeof this.width_?this.width_:this.options_.width,c="number"===typeof this.height_?this.height_:
this.options_.height,f=this.tech_&&this.tech_.el();f&&(0<=d&&(f.width=d),0<=c&&(f.height=c))}else{d=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:0<this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9").split(":");var b=d[1]/d[0];d=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/b:this.videoWidth()||300;c=void 0!==this.height_?this.height_:d*b;f=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions";this.addClass(f);
Of(this.styleEl_,"\n      ."+f+" {\n        width: "+d+"px;\n        height: "+c+"px;\n      }\n\n      ."+f+".vjs-fluid {\n        padding-top: "+100*b+"%;\n      }\n    ")}};c.prototype.loadTech_=function(d,c){var f=this;this.tech_&&this.unloadTech_();var b=da(d),k=d.charAt(0).toLowerCase()+d.slice(1);"Html5"!==b&&this.tag&&(fa.getTech("Html5").disposeMediaElement(this.tag),this.tag=this.tag.player=null);this.techName_=b;this.isReady_=!1;var a="string"===typeof this.autoplay()?!1:this.autoplay(),
l={source:c,autoplay:a,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+k+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};Ha.names.forEach(function(d){d=
Ha[d];l[d.getterName]=f[d.privateName]});w(l,this.options_[b]);w(l,this.options_[k]);w(l,this.options_[d.toLowerCase()]);this.tag&&(l.tag=this.tag);c&&c.src===this.cache_.src&&0<this.cache_.currentTime&&(l.startTime=this.cache_.currentTime);d=fa.getTech(d);if(!d)throw Error("No Tech named '"+b+"' exists! '"+b+"' should be registered using videojs.registerTech()'");this.tech_=new d(l);this.tech_.ready(U(this,this.handleTechReady_),!0);ag.jsonToTextTracks(this.textTracksJson_||[],this.tech_);Xg.forEach(function(d){f.on(f.tech_,
d,f["handleTech"+da(d)+"_"])});Object.keys(Be).forEach(function(d){f.on(f.tech_,d,function(c){if(0===f.tech_.playbackRate()&&f.tech_.seeking())f.queuedCallbacks_.push({callback:f["handleTech"+Be[d]+"_"].bind(f),event:c});else f["handleTech"+Be[d]+"_"](c)})});this.on(this.tech_,"loadstart",this.handleTechLoadStart_);this.on(this.tech_,"sourceset",this.handleTechSourceset_);this.on(this.tech_,"waiting",this.handleTechWaiting_);this.on(this.tech_,"ended",this.handleTechEnded_);this.on(this.tech_,"seeking",
this.handleTechSeeking_);this.on(this.tech_,"play",this.handleTechPlay_);this.on(this.tech_,"firstplay",this.handleTechFirstPlay_);this.on(this.tech_,"pause",this.handleTechPause_);this.on(this.tech_,"durationchange",this.handleTechDurationChange_);this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_);this.on(this.tech_,"error",this.handleTechError_);this.on(this.tech_,"loadedmetadata",this.updateStyleEl_);this.on(this.tech_,"posterchange",this.handleTechPosterChange_);this.on(this.tech_,
"textdata",this.handleTechTextData_);this.on(this.tech_,"ratechange",this.handleTechRateChange_);this.usingNativeControls(this.techGet_("controls"));this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_();this.tech_.el().parentNode===this.el()||"Html5"===b&&this.tag||P(this.tech_.el(),this.el());this.tag&&(this.tag=this.tag.player=null)};c.prototype.unloadTech_=function(){var d=this;Ha.names.forEach(function(c){c=Ha[c];d[c.privateName]=d[c.getterName]()});this.textTracksJson_=
ag.textTracksToJson(this.tech_);this.isReady_=!1;this.tech_.dispose();this.tech_=!1;this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange"));this.isPosterFromTech_=!1};c.prototype.tech=function(d){void 0===d&&V.warn(Dd(qk));return this.tech_};c.prototype.addTechControlsListeners_=function(){this.removeTechControlsListeners_();this.on(this.tech_,"mousedown",this.handleTechClick_);this.on(this.tech_,"dblclick",this.handleTechDoubleClick_);this.on(this.tech_,"touchstart",this.handleTechTouchStart_);
this.on(this.tech_,"touchmove",this.handleTechTouchMove_);this.on(this.tech_,"touchend",this.handleTechTouchEnd_);this.on(this.tech_,"tap",this.handleTechTap_)};c.prototype.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_);this.off(this.tech_,"touchstart",this.handleTechTouchStart_);this.off(this.tech_,"touchmove",this.handleTechTouchMove_);this.off(this.tech_,"touchend",this.handleTechTouchEnd_);this.off(this.tech_,"mousedown",this.handleTechClick_);this.off(this.tech_,
"dblclick",this.handleTechDoubleClick_)};c.prototype.handleTechReady_=function(){this.triggerReady();this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume);this.handleTechPosterChange_();this.handleTechDurationChange_()};c.prototype.handleTechLoadStart_=function(){this.removeClass("vjs-ended");this.removeClass("vjs-seeking");this.error(null);this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay"));this.manualAutoplay_(this.autoplay())};
c.prototype.manualAutoplay_=function(d){var c=this;if(this.tech_&&"string"===typeof d){var f=function(){var d=c.muted();c.muted(!0);var a=c.play();if(a&&a.then&&a.catch)return a.catch(function(a){c.muted(d)})},b=void 0;"any"===d?(b=this.play())&&b.then&&b.catch&&b.catch(function(){return f()}):b="muted"===d?f():this.play();if(b&&b.then&&b.catch)return b.then(function(){c.trigger({type:"autoplay-success",autoplay:d})}).catch(function(f){c.trigger({type:"autoplay-failure",autoplay:d})})}};c.prototype.updateSourceCaches_=
function(){var d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",c=d,f="";"string"!==typeof c&&(c=d.src,f=d.type);if(!/^blob:/.test(c)){this.cache_.source=this.cache_.source||{};this.cache_.sources=this.cache_.sources||[];c&&!f&&(f=Tj(this,c));this.cache_.source=Y({},d,{src:c,type:f});d=this.cache_.sources.filter(function(d){return d.src&&d.src===c});f=[];for(var b=this.$$("source"),k=[],a=0;a<b.length;a++){var l=C(b[a]);f.push(l);l.src&&l.src===c&&k.push(l.src)}k.length&&!d.length?this.cache_.sources=
f:d.length||(this.cache_.sources=[this.cache_.source]);this.cache_.src=c}};c.prototype.handleTechSourceset_=function(d){var c=this;if(!this.changingSrc_&&(this.updateSourceCaches_(d.src),!d.src))this.tech_.one(["sourceset","loadstart"],function g(d){"sourceset"!==d.type&&c.updateSourceCaches_(c.techGet_("currentSrc"));c.tech_.off(["sourceset","loadstart"],g)});this.trigger({src:d.src,type:"sourceset"})};c.prototype.hasStarted=function(d){if(void 0===d)return this.hasStarted_;d!==this.hasStarted_&&
((this.hasStarted_=d)?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))};c.prototype.handleTechPlay_=function(){this.removeClass("vjs-ended");this.removeClass("vjs-paused");this.addClass("vjs-playing");this.hasStarted(!0);this.trigger("play")};c.prototype.handleTechRateChange_=function(){0<this.tech_.playbackRate()&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(d){return d.callback(d.event)}),this.queuedCallbacks_=[]);this.cache_.lastPlaybackRate=
this.tech_.playbackRate();this.trigger("ratechange")};c.prototype.handleTechWaiting_=function(){var d=this;this.addClass("vjs-waiting");this.trigger("waiting");this.one("timeupdate",function(){return d.removeClass("vjs-waiting")})};c.prototype.handleTechCanPlay_=function(){this.removeClass("vjs-waiting");this.trigger("canplay")};c.prototype.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting");this.trigger("canplaythrough")};c.prototype.handleTechPlaying_=function(){this.removeClass("vjs-waiting");
this.trigger("playing")};c.prototype.handleTechSeeking_=function(){this.addClass("vjs-seeking");this.trigger("seeking")};c.prototype.handleTechSeeked_=function(){this.removeClass("vjs-seeking");this.trigger("seeked")};c.prototype.handleTechFirstPlay_=function(){this.options_.starttime&&(V.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime));this.addClass("vjs-has-started");this.trigger("firstplay")};c.prototype.handleTechPause_=
function(){this.removeClass("vjs-playing");this.addClass("vjs-paused");this.trigger("pause")};c.prototype.handleTechEnded_=function(){this.addClass("vjs-ended");this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause();this.trigger("ended")};c.prototype.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))};c.prototype.handleTechClick_=function(d){Ia(d)&&this.controls_&&(this.paused()?hc(this.play()):this.pause())};c.prototype.handleTechDoubleClick_=
function(d){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(c){return c.contains(d.target)})||(this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))};c.prototype.handleTechTap_=function(){this.userActive(!this.userActive())};c.prototype.handleTechTouchStart_=function(){this.userWasActive=this.userActive()};c.prototype.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()};c.prototype.handleTechTouchEnd_=function(d){d.preventDefault()};
c.prototype.handleFullscreenChange_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")};c.prototype.handleStageClick_=function(){this.reportUserActivity()};c.prototype.handleTechFullscreenChange_=function(d,c){c&&this.isFullscreen(c.isFullscreen);this.trigger("fullscreenchange")};c.prototype.handleTechError_=function(){var d=this.tech_.error();this.error(d)};c.prototype.handleTechTextData_=function(){var d=null;1<arguments.length&&(d=arguments[1]);this.trigger("textdata",
d)};c.prototype.getCache=function(){return this.cache_};c.prototype.techCall_=function(d,c){this.ready(function(){if(d in Rj)return this.tech_[d](this.middleware_.reduce(Kd(d),c));if(d in sg)return Bf(this.middleware_,this.tech_,d,c);try{if(this.tech_)this.tech_[d](c)}catch(f){throw V(f),f;}},!0)};c.prototype.techGet_=function(d){if(this.tech_&&this.tech_.isReady_){if(d in Qj){var c=this.tech_;return this.middleware_.reduceRight(Kd(d),c[d]())}if(d in sg)return Bf(this.middleware_,this.tech_,d);try{return this.tech_[d]()}catch(f){if(void 0===
this.tech_[d])throw V("Video.js: "+d+" method not defined for "+this.techName_+" playback technology.",f),f;if("TypeError"===f.name)throw V("Video.js: "+d+" unavailable on "+this.techName_+" playback technology element.",f),this.tech_.isReady_=!1,f;V(f);throw f;}}};c.prototype.play=function(){var d=this,c=this.options_.Promise||E.Promise;return c?new c(function(c){d.play_(c)}):this.play_()};c.prototype.play_=function(){var d=this,c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:hc;this.playOnLoadstart_&&
this.off("loadstart",this.playOnLoadstart_);this.isReady_?this.changingSrc_||!this.src()&&!this.currentSrc()?(this.playOnLoadstart_=function(){d.playOnLoadstart_=null;c(d.play())},this.one("loadstart",this.playOnLoadstart_)):c(this.techGet_("play")):this.playWaitingForReady_||(this.playWaitingForReady_=!0,this.ready(function(){d.playWaitingForReady_=!1;c(d.play())}))};c.prototype.pause=function(){this.techCall_("pause")};c.prototype.paused=function(){return!1===this.techGet_("paused")?!1:!0};c.prototype.played=
function(){return this.techGet_("played")||Xa(0,0)};c.prototype.scrubbing=function(d){if("undefined"===typeof d)return this.scrubbing_;this.scrubbing_=!!d;d?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")};c.prototype.currentTime=function(d){if("undefined"!==typeof d)0>d&&(d=0),this.techCall_("setCurrentTime",d);else return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime};c.prototype.duration=function(d){if(void 0===d)return void 0!==this.cache_.duration?
this.cache_.duration:NaN;d=parseFloat(d);0>d&&(d=Infinity);d!==this.cache_.duration&&(this.cache_.duration=d,Infinity===d?this.addClass("vjs-live"):this.removeClass("vjs-live"),this.trigger("durationchange"))};c.prototype.remainingTime=function(){return this.duration()-this.currentTime()};c.prototype.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())};c.prototype.buffered=function(){var d=this.techGet_("buffered");d&&d.length||(d=Xa(0,0));return d};c.prototype.bufferedPercent=
function(){return tf(this.buffered(),this.duration())};c.prototype.bufferedEnd=function(){var d=this.buffered(),c=this.duration();d=d.end(d.length-1);d>c&&(d=c);return d};c.prototype.volume=function(d){if(void 0!==d)d=Math.max(0,Math.min(1,parseFloat(d))),this.cache_.volume=d,this.techCall_("setVolume",d),0<d&&this.lastVolume_(d);else return d=parseFloat(this.techGet_("volume")),isNaN(d)?1:d};c.prototype.muted=function(d){if(void 0!==d)this.techCall_("setMuted",d);else return this.techGet_("muted")||
!1};c.prototype.defaultMuted=function(d){return void 0!==d?this.techCall_("setDefaultMuted",d):this.techGet_("defaultMuted")||!1};c.prototype.lastVolume_=function(d){if(void 0!==d&&0!==d)this.cache_.lastVolume=d;else return this.cache_.lastVolume};c.prototype.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1};c.prototype.isFullscreen=function(d){if(void 0!==d)this.isFullscreen_=!!d;else return!!this.isFullscreen_};c.prototype.requestFullscreen=function(){this.isFullscreen(!0);
gb.requestFullscreen?(Ca(K,gb.fullscreenchange,U(this,function f(c){this.isFullscreen(K[gb.fullscreenElement]);!1===this.isFullscreen()&&pa(K,gb.fullscreenchange,f);this.trigger("fullscreenchange")})),this.el_[gb.requestFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange"))};c.prototype.exitFullscreen=function(){this.isFullscreen(!1);if(gb.requestFullscreen)K[gb.exitFullscreen]();else this.tech_.supportsFullScreen()?
this.techCall_("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange"))};c.prototype.enterFullWindow=function(){this.isFullWindow=!0;this.docOrigOverflow=K.documentElement.style.overflow;Ca(K,"keydown",U(this,this.fullWindowOnEscKey));K.documentElement.style.overflow="hidden";F(K.body,"vjs-full-window");this.trigger("enterFullWindow")};c.prototype.fullWindowOnEscKey=function(d){27===d.keyCode&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())};c.prototype.exitFullWindow=
function(){this.isFullWindow=!1;pa(K,"keydown",this.fullWindowOnEscKey);K.documentElement.style.overflow=this.docOrigOverflow;H(K.body,"vjs-full-window");this.trigger("exitFullWindow")};c.prototype.canPlayType=function(d){for(var c,f=0,b=this.options_.techOrder;f<b.length;f++){c=b[f];var k=fa.getTech(c);k||(k=I.getComponent(c));if(!k)V.error('The "'+c+'" tech is undefined. Skipped browser support check for that tech.');else if(k.isSupported()&&(c=k.canPlayType(d)))return c}return""};c.prototype.selectSource=
function(d){var c=this,f=this.options_.techOrder.map(function(d){return[d,fa.getTech(d)]}).filter(function(d){var c=d[0];if(d=d[1])return d.isSupported();V.error('The "'+c+'" tech is undefined. Skipped browser support check for that tech.');return!1}),b=function(d,c,a){var f=void 0;d.some(function(d){return c.some(function(c){if(f=a(d,c))return!0})});return f},k=void 0;k=function(d){return function(c,a){return d(a,c)}};var a=function(d,a){var f=d[0];if(d[1].canPlaySource(a,c.options_[f.toLowerCase()]))return{source:a,
tech:f}};return(k=this.options_.sourceOrder?b(d,f,k(a)):b(f,d,a))||!1};c.prototype.src=function(d){var c=this;if("undefined"===typeof d)return this.cache_.src||"";var f=Uj(d);f.length?(this.changingSrc_=!0,this.cache_.sources=f,this.updateSourceCaches_(f[0]),mj(this,f[0],function(d,k){c.middleware_=k;c.cache_.sources=f;c.updateSourceCaches_(d);if(c.src_(d)){if(1<f.length)return c.src(f.slice(1));c.changingSrc_=!1;c.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},
0);c.triggerReady()}else nj(k,c.tech_)})):this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0)};c.prototype.src_=function(d){var c=this,f=this.selectSource([d]);if(!f)return!0;if(!gc(f.tech,this.techName_))return this.changingSrc_=!0,this.loadTech_(f.tech,f.source),this.tech_.ready(function(){c.changingSrc_=!1}),!1;this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",d):this.techCall_("src",
d.src);this.changingSrc_=!1},!0);return!1};c.prototype.load=function(){this.techCall_("load")};c.prototype.reset=function(){this.tech_&&this.tech_.clearTracks("text");this.loadTech_(this.options_.techOrder[0],null);this.techCall_("reset")};c.prototype.currentSources=function(){var d=this.currentSource(),c=[];0!==Object.keys(d).length&&c.push(d);return this.cache_.sources||c};c.prototype.currentSource=function(){return this.cache_.source||{}};c.prototype.currentSrc=function(){return this.currentSource()&&
this.currentSource().src||""};c.prototype.currentType=function(){return this.currentSource()&&this.currentSource().type||""};c.prototype.preload=function(d){if(void 0!==d)this.techCall_("setPreload",d),this.options_.preload=d;else return this.techGet_("preload")};c.prototype.autoplay=function(d){if(void 0===d)return this.options_.autoplay||!1;var c=void 0;"string"===typeof d&&/(any|play|muted)/.test(d)?(this.options_.autoplay=d,this.manualAutoplay_(d),c=!1):this.options_.autoplay=d?!0:!1;c=c||this.options_.autoplay;
this.tech_&&this.techCall_("setAutoplay",c)};c.prototype.playsinline=function(d){return void 0!==d?(this.techCall_("setPlaysinline",d),this.options_.playsinline=d,this):this.techGet_("playsinline")};c.prototype.loop=function(d){if(void 0!==d)this.techCall_("setLoop",d),this.options_.loop=d;else return this.techGet_("loop")};c.prototype.poster=function(d){if(void 0===d)return this.poster_;d||(d="");d!==this.poster_&&(this.poster_=d,this.techCall_("setPoster",d),this.isPosterFromTech_=!1,this.trigger("posterchange"))};
c.prototype.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var d=this.tech_.poster()||"";d!==this.poster_&&(this.poster_=d,this.isPosterFromTech_=!0,this.trigger("posterchange"))}};c.prototype.controls=function(d){if(void 0===d)return!!this.controls_;d=!!d;this.controls_!==d&&(this.controls_=d,this.usingNativeControls()&&this.techCall_("setControls",d),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),
this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))};c.prototype.usingNativeControls=function(d){if(void 0===d)return!!this.usingNativeControls_;d=!!d;this.usingNativeControls_!==d&&((this.usingNativeControls_=d)?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):
(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))};c.prototype.error=function(d){if(void 0===d)return this.error_||null;null===d?(this.error_=d,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close()):(this.error_=new va(d),this.addClass("vjs-error"),V.error("(CODE:"+this.error_.code+" "+va.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"))};c.prototype.reportUserActivity=function(d){this.userActivity_=!0};
c.prototype.userActive=function(d){if(void 0===d)return this.userActive_;d=!!d;if(d!==this.userActive_)if(this.userActive_=d)this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");else{if(this.tech_)this.tech_.one("mousemove",function(d){d.stopPropagation();d.preventDefault()});this.userActivity_=!1;this.removeClass("vjs-user-active");this.addClass("vjs-user-inactive");this.trigger("userinactive")}};c.prototype.listenForUserActivity_=
function(){var d=void 0,c=void 0,f=void 0,b=U(this,this.reportUserActivity);this.on("mousedown",function(){b();this.clearInterval(d);d=this.setInterval(b,250)});this.on("mousemove",function(d){if(d.screenX!==c||d.screenY!==f)c=d.screenX,f=d.screenY,b()});this.on("mouseup",function(c){b();this.clearInterval(d)});this.on("keydown",b);this.on("keyup",b);var k=void 0;this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1;this.userActive(!0);this.clearTimeout(k);var d=this.options_.inactivityTimeout;
0>=d||(k=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},d))}},250)};c.prototype.playbackRate=function(d){if(void 0!==d)this.techCall_("setPlaybackRate",d);else return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1};c.prototype.defaultPlaybackRate=function(d){return void 0!==d?this.techCall_("setDefaultPlaybackRate",d):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1};c.prototype.isAudio=
function(d){if(void 0!==d)this.isAudio_=!!d;else return!!this.isAudio_};c.prototype.addTextTrack=function(d,c,f){if(this.tech_)return this.tech_.addTextTrack(d,c,f)};c.prototype.addRemoteTextTrack=function(d,c){if(this.tech_)return this.tech_.addRemoteTextTrack(d,c)};c.prototype.removeRemoteTextTrack=function(){var d=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).track;d=void 0===d?arguments[0]:d;if(this.tech_)return this.tech_.removeRemoteTextTrack(d)};c.prototype.getVideoPlaybackQuality=
function(){return this.techGet_("getVideoPlaybackQuality")};c.prototype.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0};c.prototype.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0};c.prototype.language=function(d){if(void 0===d)return this.language_;this.language_=String(d).toLowerCase()};c.prototype.languages=function(){return Y(c.prototype.options_.languages,this.languages_)};c.prototype.toJSON=function(){var d=
Y(this.options_),c=d.tracks;d.tracks=[];for(var f=0;f<c.length;f++){var b=c[f];b=Y(b);b.player=void 0;d.tracks[f]=b}return d};c.prototype.createModal=function(d,c){var f=this;c=c||{};c.content=d||"";var b=new Tb(this,c);this.addChild(b);b.on("dispose",function(){f.removeChild(b)});b.open();return b};c.getTagSettings=function(d){var c={sources:[],tracks:[]},f=C(d),b=f["data-setup"];M(d,"vjs-fluid")&&(f.fluid=!0);if(null!==b){var k=null;try{var a=JSON.parse(b||"{}",void 0)}catch(l){k=l}a=[k,a];b=a[0];
a=a[1];b&&V.error(b);w(f,a)}w(c,f);if(d.hasChildNodes())for(d=d.childNodes,f=0,b=d.length;f<b;f++)a=d[f],k=a.nodeName.toLowerCase(),"source"===k?c.sources.push(C(a)):"track"===k&&c.tracks.push(C(a));return c};c.prototype.flexNotSupported_=function(){var d=K.createElement("i");return!("flexBasis"in d.style||"webkitFlexBasis"in d.style||"mozFlexBasis"in d.style||"msFlexBasis"in d.style||"msFlexOrder"in d.style)};return c}(I);Ha.names.forEach(function(k){var c=Ha[k];ma.prototype[c.getterName]=function(){if(this.tech_)return this.tech_[c.getterName]();
this[c.privateName]=this[c.privateName]||new c.ListClass;return this[c.privateName]}});ma.players={};var uc=E.navigator;ma.prototype.options_={techOrder:fa.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2E3,playbackRates:[],children:"mediaLoader posterImage textTrackDisplay loadingSpinner bigPlayButton controlBar errorDisplay textTrackSettings resizeManager".split(" "),language:uc&&(uc.languages&&uc.languages[0]||uc.userLanguage||uc.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media."};
["ended","seeking","seekable","networkState","readyState"].forEach(function(k){ma.prototype[k]=function(){return this.techGet_(k)}});Xg.forEach(function(k){ma.prototype["handleTech"+da(k)+"_"]=function(){return this.trigger(k)}});I.registerComponent("Player",ma);var ib={},fd=function(k){return ib.hasOwnProperty(k)?ib[k]:void 0},gd=function(k,c,d){d=(d?"before":"")+"pluginsetup";k.trigger(d,c);k.trigger(d+":"+c.name,c)},rk=function(k,c){var d=function(){gd(this,{name:k,plugin:c,instance:null},!0);
var d=c.apply(this,arguments);this.activePlugins_=this.activePlugins_||{};this.activePlugins_[k]=!0;gd(this,{name:k,plugin:c,instance:d});return d};Object.keys(c).forEach(function(k){d[k]=c[k]});return d},Yg=function(k,c){c.prototype.name=k;return function(){gd(this,{name:k,plugin:c,instance:null},!0);for(var d=arguments.length,n=Array(d),f=0;f<d;f++)n[f]=arguments[f];var b=new (Function.prototype.bind.apply(c,[null].concat([this].concat(n))));this[k]=function(){return b};gd(this,b.getEventHash());
return b}},Ya=function(){function k(c){N(this,k);if(this.constructor===k)throw Error("Plugin must be sub-classed; not directly instantiated.");this.player=c;db(this);delete this.trigger;Cb(this,this.constructor.defaultState);var d=this.name;c.activePlugins_=c.activePlugins_||{};c.activePlugins_[d]=!0;this.dispose=U(this,this.dispose);c.on("dispose",this.dispose)}k.prototype.version=function(){return this.constructor.VERSION};k.prototype.getEventHash=function(){var c=0<arguments.length&&void 0!==arguments[0]?
arguments[0]:{};c.name=this.name;c.plugin=this.constructor;c.instance=this;return c};k.prototype.trigger=function(c){return Ma(this.eventBusEl_,c,this.getEventHash(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}))};k.prototype.handleStateChanged=function(c){};k.prototype.dispose=function(){var c=this.name,d=this.player;this.trigger("dispose");this.off();d.off("dispose",this.dispose);d.activePlugins_[c]=!1;this.player=this.state=null;d[c]=Yg(c,ib[c])};k.isBasic=function(c){c="string"===typeof c?
fd(c):c;return"function"===typeof c&&!k.prototype.isPrototypeOf(c.prototype)};k.registerPlugin=function(c,d){if("string"!==typeof c)throw Error('Illegal plugin name, "'+c+'", must be a string, was '+("undefined"===typeof c?"undefined":la(c))+".");if(ib.hasOwnProperty(c))V.warn('A plugin named "'+c+'" already exists. You may want to avoid re-registering plugins!');else if(ma.prototype.hasOwnProperty(c))throw Error('Illegal plugin name, "'+c+'", cannot share a name with an existing player method!');
if("function"!==typeof d)throw Error('Illegal plugin for "'+c+'", must be a function, was '+("undefined"===typeof d?"undefined":la(d))+".");ib[c]=d;"plugin"!==c&&(k.isBasic(d)?ma.prototype[c]=rk(c,d):ma.prototype[c]=Yg(c,d));return d};k.deregisterPlugin=function(c){if("plugin"===c)throw Error("Cannot de-register base plugin.");ib.hasOwnProperty(c)&&(delete ib[c],delete ma.prototype[c])};k.getPlugins=function(){var c=void 0;(0<arguments.length&&void 0!==arguments[0]?arguments[0]:Object.keys(ib)).forEach(function(d){var k=
fd(d);k&&(c=c||{},c[d]=k)});return c};k.getPluginVersion=function(c){return(c=fd(c))&&c.VERSION||""};return k}();Ya.getPlugin=fd;Ya.BASE_PLUGIN_NAME="plugin";Ya.registerPlugin("plugin",Ya);ma.prototype.usingPlugin=function(k){return!!this.activePlugins_&&!0===this.activePlugins_[k]};ma.prototype.hasPlugin=function(k){return!!ib.hasOwnProperty(k)};var sk=function(k,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof c?
"undefined":la(c)));k.prototype=Object.create(c&&c.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}});c&&(k.super_=c)},Ff=function(k){return 0===k.indexOf("#")?k.slice(1):k};D.hooks_={};D.hooks=function(k,c){D.hooks_[k]=D.hooks_[k]||[];c&&(D.hooks_[k]=D.hooks_[k].concat(c));return D.hooks_[k]};D.hook=function(k,c){D.hooks(k,c)};D.hookOnce=function(k,c){D.hooks(k,[].concat(c).map(function(d){return function f(){D.removeHook(k,f);return d.apply(void 0,arguments)}}))};D.removeHook=
function(k,c){c=D.hooks(k).indexOf(c);if(-1>=c)return!1;D.hooks_[k]=D.hooks_[k].slice();D.hooks_[k].splice(c,1);return!0};if(!0!==E.VIDEOJS_NO_DYNAMIC_STYLE&&m()){var hd=rb(".vjs-styles-defaults");if(!hd){hd=Nf("vjs-styles-defaults");var Ce=rb("head");Ce&&Ce.insertBefore(hd,Ce.firstChild);Of(hd,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}Ja(1,D);D.VERSION="7.2.4";D.options=ma.prototype.options_;D.getPlayers=
function(){return ma.players};D.getPlayer=function(k){var c=ma.players;if("string"===typeof k){k=Ff(k);var d=c[k];if(d)return d;k=rb("#"+k)}if(r(k)&&(d=k,k=d.player,d=d.playerId,k||c[d]))return k||c[d]};D.getAllPlayers=function(){return Object.keys(ma.players).map(function(k){return ma.players[k]}).filter(Boolean)};D.players=ma.players;D.getComponent=I.getComponent;D.registerComponent=function(k,c){fa.isTech(c)&&V.warn("The "+k+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)");
I.registerComponent.call(I,k,c)};D.getTech=fa.getTech;D.registerTech=fa.registerTech;D.use=function(k,c){Fb[k]=Fb[k]||[];Fb[k].push(c)};Object.defineProperty(D,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(D.middleware,"TERMINATOR",{value:Uc,writeable:!1,enumerable:!0});D.browser=wj;D.TOUCH_ENABLED=Xc;D.extend=function(k){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},d=function(){k.apply(this,arguments)},n={};"object"===("undefined"===typeof c?"undefined":
la(c))?(c.constructor!==Object.prototype.constructor&&(d=c.constructor),n=c):"function"===typeof c&&(d=c);sk(d,k);for(var f in n)n.hasOwnProperty(f)&&(d.prototype[f]=n[f]);return d};D.mergeOptions=Y;D.bind=U;D.registerPlugin=Ya.registerPlugin;D.deregisterPlugin=Ya.deregisterPlugin;D.plugin=function(k,c){V.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead");return Ya.registerPlugin(k,c)};D.getPlugins=Ya.getPlugins;D.getPlugin=Ya.getPlugin;D.getPluginVersion=Ya.getPluginVersion;
D.addLanguage=function(k,c){var d;k=(""+k).toLowerCase();D.options.languages=Y(D.options.languages,(d={},d[k]=c,d));return D.options.languages[k]};D.log=V;D.createTimeRange=D.createTimeRanges=Xa;D.formatTime=Ob;D.setFormatTime=function(k){Nd=k};D.resetFormatTime=function(){Nd=vg};D.parseUrl=ae;D.isCrossOrigin=bd;D.EventTarget=qa;D.on=Ca;D.one=ia;D.off=pa;D.trigger=Ma;D.xhr=eb;D.TextTrack=qc;D.AudioTrack=mg;D.VideoTrack=ng;"isEl isTextNode createEl hasClass addClass removeClass toggleClass setAttributes getAttributes emptyEl appendContent insertContent".split(" ").forEach(function(k){D[k]=
function(){V.warn("videojs."+k+"() is deprecated; use videojs.dom."+k+"() instead");return Mf[k].apply(null,arguments)}});D.computedStyle=A;D.dom=Mf;D.url=Fj;var id=B(function(k,c){(function(d){var c=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,f=/^([^\/?#]*)(.*)$/,b=/(?:\/|^)\.(?=\/)/g,g=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,a={buildAbsoluteURL:function(d,c,b){b=b||{};d=d.trim();c=c.trim();if(!c){if(!b.alwaysNormalize)return d;b=a.parseURL(d);if(!b)throw Error("Error trying to parse base URL.");
b.path=a.normalizePath(b.path);return a.buildURLFromParts(b)}var k=a.parseURL(c);if(!k)throw Error("Error trying to parse relative URL.");if(k.scheme){if(!b.alwaysNormalize)return c;k.path=a.normalizePath(k.path);return a.buildURLFromParts(k)}c=a.parseURL(d);if(!c)throw Error("Error trying to parse base URL.");!c.netLoc&&c.path&&"/"!==c.path[0]&&(d=f.exec(c.path),c.netLoc=d[1],c.path=d[2]);c.netLoc&&!c.path&&(c.path="/");d={scheme:c.scheme,netLoc:k.netLoc,path:null,params:k.params,query:k.query,fragment:k.fragment};
k.netLoc||(d.netLoc=c.netLoc,"/"!==k.path[0]&&(k.path?(c=c.path,c=c.substring(0,c.lastIndexOf("/")+1)+k.path,d.path=a.normalizePath(c)):(d.path=c.path,k.params||(d.params=c.params,k.query||(d.query=c.query)))));null===d.path&&(d.path=b.alwaysNormalize?a.normalizePath(k.path):k.path);return a.buildURLFromParts(d)},parseURL:function(d){return(d=c.exec(d))?{scheme:d[1]||"",netLoc:d[2]||"",path:d[3]||"",params:d[4]||"",query:d[5]||"",fragment:d[6]||""}:null},normalizePath:function(d){for(d=d.split("").reverse().join("").replace(b,
"");d.length!==(d=d.replace(g,"")).length;);return d.split("").reverse().join("")},buildURLFromParts:function(d){return d.scheme+d.netLoc+d.path+d.params+d.query+d.fragment}};k.exports=a})(mc)}),jd=function(k,c){if(!(k instanceof c))throw new TypeError("Cannot call a class as a function");},tk=Object.assign||function(k){for(var c=1;c<arguments.length;c++){var d=arguments[c],n;for(n in d)Object.prototype.hasOwnProperty.call(d,n)&&(k[n]=d[n])}return k},De=function(k,c){if("function"!==typeof c&&null!==
c)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof c?"undefined":la(c)));k.prototype=Object.create(c&&c.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(k,c):k.__proto__=c)},Ee=function(k,c){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!c||"object"!==("undefined"===typeof c?"undefined":la(c))&&"function"!==typeof c?k:c},
Fe=function(){function k(){jd(this,k);this.listeners={}}k.prototype.on=function(c,d){this.listeners[c]||(this.listeners[c]=[]);this.listeners[c].push(d)};k.prototype.off=function(c,d){if(!this.listeners[c])return!1;d=this.listeners[c].indexOf(d);this.listeners[c].splice(d,1);return-1<d};k.prototype.trigger=function(c){var d=this.listeners[c],k;if(d)if(2===arguments.length){var f=d.length;for(k=0;k<f;++k)d[k].call(this,arguments[1])}else{var b=Array.prototype.slice.call(arguments,1);f=d.length;for(k=
0;k<f;++k)d[k].apply(this,b)}};k.prototype.dispose=function(){this.listeners={}};k.prototype.pipe=function(c){this.on("data",function(d){c.push(d)})};return k}(),uk=function(k){function c(){jd(this,c);var d=Ee(this,k.call(this));d.buffer="";return d}De(c,k);c.prototype.push=function(d){this.buffer+=d;for(d=this.buffer.indexOf("\n");-1<d;d=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,d)),this.buffer=this.buffer.substring(d+1)};return c}(Fe),vc=function(k){k=k.split(/(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))/);
for(var c={},d=k.length,n;d--;)""!==k[d]&&(n=/([^=]*)=(.*)/.exec(k[d]).slice(1),n[0]=n[0].replace(/^\s+|\s+$/g,""),n[1]=n[1].replace(/^\s+|\s+$/g,""),n[1]=n[1].replace(/^['"](.*)['"]$/g,"$1"),c[n[0]]=n[1]);return c},vk=function(k){function c(){jd(this,c);var d=Ee(this,k.call(this));d.customParsers=[];return d}De(c,k);c.prototype.push=function(d){var c;d=d.replace(/^[\u0000\s]+|[\u0000\s]+$/g,"");if(0!==d.length)if("#"!==d[0])this.trigger("data",{type:"uri",uri:d});else{for(c=0;c<this.customParsers.length;c++)if(this.customParsers[c].call(this,
d))return;if(0!==d.indexOf("#EXT"))this.trigger("data",{type:"comment",text:d.slice(1)});else if(d=d.replace("\r",""),c=/^#EXTM3U/.exec(d))this.trigger("data",{type:"tag",tagType:"m3u"});else if(c=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(d))d={type:"tag",tagType:"inf"},c[1]&&(d.duration=parseFloat(c[1])),c[2]&&(d.title=c[2]),this.trigger("data",d);else if(c=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(d))d={type:"tag",tagType:"targetduration"},c[1]&&(d.duration=parseInt(c[1],10)),this.trigger("data",d);
else if(c=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(d))d={type:"tag",tagType:"totalduration"},c[1]&&(d.duration=parseInt(c[1],10)),this.trigger("data",d);else if(c=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(d))d={type:"tag",tagType:"version"},c[1]&&(d.version=parseInt(c[1],10)),this.trigger("data",d);else if(c=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(d))d={type:"tag",tagType:"media-sequence"},c[1]&&(d.number=parseInt(c[1],10)),this.trigger("data",d);else if(c=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(d))d=
{type:"tag",tagType:"discontinuity-sequence"},c[1]&&(d.number=parseInt(c[1],10)),this.trigger("data",d);else if(c=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(d))d={type:"tag",tagType:"playlist-type"},c[1]&&(d.playlistType=c[1]),this.trigger("data",d);else if(c=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(d))d={type:"tag",tagType:"byterange"},c[1]&&(d.length=parseInt(c[1],10)),c[2]&&(d.offset=parseInt(c[2],10)),this.trigger("data",d);else if(c=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(d))d={type:"tag",tagType:"allow-cache"},
c[1]&&(d.allowed=!/NO/.test(c[1])),this.trigger("data",d);else if(c=/^#EXT-X-MAP:?(.*)$/.exec(d)){d={type:"tag",tagType:"map"};if(c[1]&&(c=vc(c[1]),c.URI&&(d.uri=c.URI),c.BYTERANGE)){var f=c.BYTERANGE.split("@");c=f[0];f=f[1];d.byterange={};c&&(d.byterange.length=parseInt(c,10));f&&(d.byterange.offset=parseInt(f,10))}this.trigger("data",d)}else(c=/^#EXT-X-STREAM-INF:?(.*)$/.exec(d))?(d={type:"tag",tagType:"stream-inf"},c[1]&&(d.attributes=vc(c[1]),d.attributes.RESOLUTION&&(c=d.attributes.RESOLUTION.split("x"),
f={},c[0]&&(f.width=parseInt(c[0],10)),c[1]&&(f.height=parseInt(c[1],10)),d.attributes.RESOLUTION=f),d.attributes.BANDWIDTH&&(d.attributes.BANDWIDTH=parseInt(d.attributes.BANDWIDTH,10)),d.attributes["PROGRAM-ID"]&&(d.attributes["PROGRAM-ID"]=parseInt(d.attributes["PROGRAM-ID"],10))),this.trigger("data",d)):(c=/^#EXT-X-MEDIA:?(.*)$/.exec(d))?(d={type:"tag",tagType:"media"},c[1]&&(d.attributes=vc(c[1])),this.trigger("data",d)):(c=/^#EXT-X-ENDLIST/.exec(d))?this.trigger("data",{type:"tag",tagType:"endlist"}):
(c=/^#EXT-X-DISCONTINUITY/.exec(d))?this.trigger("data",{type:"tag",tagType:"discontinuity"}):(c=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(d))?(d={type:"tag",tagType:"program-date-time"},c[1]&&(d.dateTimeString=c[1],d.dateTimeObject=new Date(c[1])),this.trigger("data",d)):(c=/^#EXT-X-KEY:?(.*)$/.exec(d))?(d={type:"tag",tagType:"key"},c[1]&&(d.attributes=vc(c[1]),d.attributes.IV&&("0x"===d.attributes.IV.substring(0,2).toLowerCase()&&(d.attributes.IV=d.attributes.IV.substring(2)),d.attributes.IV=d.attributes.IV.match(/.{8}/g),
d.attributes.IV[0]=parseInt(d.attributes.IV[0],16),d.attributes.IV[1]=parseInt(d.attributes.IV[1],16),d.attributes.IV[2]=parseInt(d.attributes.IV[2],16),d.attributes.IV[3]=parseInt(d.attributes.IV[3],16),d.attributes.IV=new Uint32Array(d.attributes.IV))),this.trigger("data",d)):(c=/^#EXT-X-START:?(.*)$/.exec(d))?(d={type:"tag",tagType:"start"},c[1]&&(d.attributes=vc(c[1]),d.attributes["TIME-OFFSET"]=parseFloat(d.attributes["TIME-OFFSET"]),d.attributes.PRECISE=/YES/.test(d.attributes.PRECISE)),this.trigger("data",
d)):(c=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(d))?(d={type:"tag",tagType:"cue-out-cont"},d.data=c[1]?c[1]:"",this.trigger("data",d)):(c=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(d))?(d={type:"tag",tagType:"cue-out"},d.data=c[1]?c[1]:"",this.trigger("data",d)):(c=/^#EXT-X-CUE-IN:?(.*)?$/.exec(d))?(d={type:"tag",tagType:"cue-in"},d.data=c[1]?c[1]:"",this.trigger("data",d)):this.trigger("data",{type:"tag",data:d.slice(4)})}};c.prototype.addParser=function(c){var d=this,f=c.expression,b=c.customType,k=c.dataParser,
a=c.segment;"function"!==typeof k&&(k=function(c){return c});this.customParsers.push(function(c){if(f.exec(c))return d.trigger("data",{type:"custom",data:k(c),customType:b,segment:a}),!0})};return c}(Fe),Zg=function(k){function c(){jd(this,c);var d=Ee(this,k.call(this));d.lineStream=new uk;d.parseStream=new vk;d.lineStream.pipe(d.parseStream);var n=[],f={},b=void 0,g=void 0,a=function(){},l={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},t=0;d.manifest={allowCache:!0,discontinuityStarts:[],
segments:[]};d.parseStream.on("data",function(c){var k=void 0,z=void 0;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=c.allowed;"allowed"in c||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var d={};"length"in c&&(f.byterange=d,d.length=c.length,"offset"in c||(this.trigger("info",{message:"defaulting offset to zero"}),c.offset=0));"offset"in c&&(f.byterange=d,d.offset=c.offset)},endlist:function(){this.manifest.endList=
!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"}));"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"}));0<c.duration&&(f.duration=c.duration);0===c.duration&&(f.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"}));this.manifest.segments=n},key:function(){c.attributes?
"NONE"===c.attributes.METHOD?g=null:c.attributes.URI?(c.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),g={method:c.attributes.METHOD||"AES-128",uri:c.attributes.URI},"undefined"!==typeof c.attributes.IV&&(g.iv=c.attributes.IV)):this.trigger("warn",{message:"ignoring key declaration without URI"}):this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(c.number)?this.manifest.mediaSequence=c.number:
this.trigger("warn",{message:"ignoring invalid media sequence: "+c.number})},"discontinuity-sequence":function(){isFinite(c.number)?t=this.manifest.discontinuitySequence=c.number:this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+c.number})},"playlist-type":function(){/VOD|EVENT/.test(c.playlistType)?this.manifest.playlistType=c.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+c.playlist})},map:function(){b={};c.uri&&(b.uri=c.uri);c.byterange&&(b.byterange=
c.byterange)},"stream-inf":function(){this.manifest.playlists=n;this.manifest.mediaGroups=this.manifest.mediaGroups||l;c.attributes?(f.attributes||(f.attributes={}),tk(f.attributes,c.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){this.manifest.mediaGroups=this.manifest.mediaGroups||l;if(c.attributes&&c.attributes.TYPE&&c.attributes["GROUP-ID"]&&c.attributes.NAME){var d=this.manifest.mediaGroups[c.attributes.TYPE];d[c.attributes["GROUP-ID"]]=d[c.attributes["GROUP-ID"]]||
{};k=d[c.attributes["GROUP-ID"]];z={"default":/yes/i.test(c.attributes.DEFAULT)};z.autoselect=z["default"]?!0:/yes/i.test(c.attributes.AUTOSELECT);c.attributes.LANGUAGE&&(z.language=c.attributes.LANGUAGE);c.attributes.URI&&(z.uri=c.attributes.URI);c.attributes["INSTREAM-ID"]&&(z.instreamId=c.attributes["INSTREAM-ID"]);c.attributes.CHARACTERISTICS&&(z.characteristics=c.attributes.CHARACTERISTICS);c.attributes.FORCED&&(z.forced=/yes/i.test(c.attributes.FORCED));k[c.attributes.NAME]=z}else this.trigger("warn",
{message:"ignoring incomplete or missing media group"})},discontinuity:function(){t+=1;f.discontinuity=!0;this.manifest.discontinuityStarts.push(n.length)},"program-date-time":function(){"undefined"===typeof this.manifest.dateTimeString&&(this.manifest.dateTimeString=c.dateTimeString,this.manifest.dateTimeObject=c.dateTimeObject);f.dateTimeString=c.dateTimeString;f.dateTimeObject=c.dateTimeObject},targetduration:function(){!isFinite(c.duration)||0>c.duration?this.trigger("warn",{message:"ignoring invalid target duration: "+
c.duration}):this.manifest.targetDuration=c.duration},totalduration:function(){!isFinite(c.duration)||0>c.duration?this.trigger("warn",{message:"ignoring invalid total duration: "+c.duration}):this.manifest.totalDuration=c.duration},start:function(){!c.attributes||isNaN(c.attributes["TIME-OFFSET"])?this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"}):this.manifest.start={timeOffset:c.attributes["TIME-OFFSET"],precise:c.attributes.PRECISE}},"cue-out":function(){f.cueOut=
c.data},"cue-out-cont":function(){f.cueOutCont=c.data},"cue-in":function(){f.cueIn=c.data}}[c.tagType]||a).call(d)},uri:function(){f.uri=c.uri;n.push(f);!this.manifest.targetDuration||"duration"in f||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),f.duration=this.manifest.targetDuration);g&&(f.key=g);f.timeline=t;b&&(f.map=b);f={}},comment:function(){},custom:function(){c.segment?(f.custom=f.custom||{},f.custom[c.customType]=c.data):(this.manifest.custom=this.manifest.custom||
{},this.manifest.custom[c.customType]=c.data)}})[c.type].call(d)});return d}De(c,k);c.prototype.push=function(c){this.lineStream.push(c)};c.prototype.end=function(){this.lineStream.push("\n")};c.prototype.addParser=function(c){this.parseStream.addParser(c)};return c}(Fe),wk=function(k){return k.reduce(function(c,d){var k=d.attributes.role&&d.attributes.role.value||"main",f=d.attributes.lang||"",b="main";f&&(b=d.attributes.lang+" ("+k+")");if(c[b]&&c[b].playlists[0].attributes.BANDWIDTH>d.attributes.bandwidth)return c;
var g,a=d.attributes;d=d.segments;d={attributes:(g={NAME:a.id,BANDWIDTH:a.bandwidth,CODECS:a.codecs},g["PROGRAM-ID"]=1,g),uri:"",endList:"static"===(a.type||"static"),timeline:a.periodIndex,resolvedUri:"",targetDuration:a.duration,segments:d,mediaSequence:d.length?d[0].number:1};a.contentProtection&&(d.contentProtection=a.contentProtection);c[b]={language:f,autoselect:!0,"default":"main"===k,playlists:[d],uri:""};return c},{})},xk=function(k){return k.reduce(function(c,d){var k=d.attributes.lang||
"text";if(c[k])return c;var f;var b=d.attributes;d=d.segments;"undefined"===typeof d&&(d=[{uri:b.baseUrl,timeline:b.periodIndex,resolvedUri:b.baseUrl||"",duration:b.sourceDuration,number:0}],b.duration=b.sourceDuration);b={attributes:(f={NAME:b.id,BANDWIDTH:b.bandwidth},f["PROGRAM-ID"]=1,f),uri:"",endList:"static"===(b.type||"static"),timeline:b.periodIndex,resolvedUri:b.baseUrl||"",targetDuration:b.duration,segments:d,mediaSequence:d.length?d[0].number:1};c[k]={language:k,"default":!1,autoselect:!1,
playlists:[b],uri:""};return c},{})},yk=function(k){var c,d=k.attributes;k=k.segments;k={attributes:(c={NAME:d.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:d.width,height:d.height},CODECS:d.codecs,BANDWIDTH:d.bandwidth},c["PROGRAM-ID"]=1,c),uri:"",endList:"static"===(d.type||"static"),timeline:d.periodIndex,resolvedUri:"",targetDuration:d.duration,segments:k,mediaSequence:k.length?k[0].number:1};d.contentProtection&&(k.contentProtection=d.contentProtection);return k},zk=function(k){var c;if(!k.length)return{};
var d=k[0].attributes,n=d.sourceDuration;d=d.minimumUpdatePeriod;var f=void 0===d?0:d,b=k.filter(function(c){c=c.attributes;return"video/mp4"===c.mimeType||"video"===c.contentType}).map(yk);d=k.filter(function(c){c=c.attributes;return"audio/mp4"===c.mimeType||"audio"===c.contentType});k=k.filter(function(c){c=c.attributes;return"text/vtt"===c.mimeType||"text"===c.contentType});n={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(c={AUDIO:{},VIDEO:{}},c["CLOSED-CAPTIONS"]={},
c.SUBTITLES={},c),uri:"",duration:n,playlists:b,minimumUpdatePeriod:1E3*f};d.length&&(n.mediaGroups.AUDIO.audio=wk(d));k.length&&(n.mediaGroups.SUBTITLES.subs=xk(k));return n},Ak="function"===typeof Symbol&&"symbol"===la(Symbol.iterator)?function(k){return"undefined"===typeof k?"undefined":la(k)}:function(k){return k&&"function"===typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":"undefined"===typeof k?"undefined":la(k)},$g=function(k){return!!k&&"object"===("undefined"===typeof k?
"undefined":Ak(k))},Ka=function c(){for(var d=arguments.length,n=Array(d),f=0;f<d;f++)n[f]=arguments[f];return n.reduce(function(d,f){Object.keys(f).forEach(function(a){Array.isArray(d[a])&&Array.isArray(f[a])?d[a]=d[a].concat(f[a]):$g(d[a])&&$g(f[a])?d[a]=c(d[a],f[a]):d[a]=f[a]});return d},{})},Ge=function(c,d){if(/^[a-z]+:/i.test(d))return d;/\/\//i.test(c)||(c=id.buildAbsoluteURL(E.location.href,c));return id.buildAbsoluteURL(c,d)},wc=function(c){var d=c.baseUrl,n=c.source;n=void 0===n?"":n;c=
c.range;c=void 0===c?"":c;d={uri:n,resolvedUri:Ge((void 0===d?"":d)||"",n)};c&&(c=c.split("-"),n=parseInt(c[0],10),c=parseInt(c[1],10),d.byterange={length:c-n,offset:n});return d},ah=function(c,d){var n=c.type;n=void 0===n?"static":n;var f=c.minimumUpdatePeriod;f=void 0===f?0:f;var b=c.media;b=void 0===b?"":b;var g=c.sourceDuration,a=c.timescale;a=void 0===a?1:a;var l=c.startNumber;l=void 0===l?1:l;for(var t=c.periodIndex,z=[],Q=-1,e=0;e<d.length;e++){var h=d[e],p=h.d,m=h.r||0;h=h.t||0;0>Q&&(Q=h);
h&&h>Q&&(Q=h);if(0>m)if(m=e+1,m===d.length)if("dynamic"===n&&0<f&&0<b.indexOf("$Number$")){m=c.timescale;h=c.start;var r=c.minimumUpdatePeriod;m=Math.ceil((((c.NOW+c.clientOffset)/1E3+(void 0===r?0:r)-(c.availabilityStartTime+(void 0===h?0:h)))*(void 0===m?1:m)-Q)/p)}else m=(g*a-Q)/p;else m=(d[m].t-Q)/p;else m+=1;m=l+z.length+m;for(h=l+z.length;h<m;)z.push({number:h,duration:p/a,time:Q,timeline:t}),Q+=p,h++}return z},kd=function(c){return c.reduce(function(c,n){return c.concat(n)},[])},bh=function(c){if(!c.length)return[];
for(var d=[],n=0;n<c.length;n++)d.push(c[n]);return d},Bk={"static":function(c){var d=c.timescale;return{start:0,end:Math.ceil(c.sourceDuration/(c.duration/(void 0===d?1:d)))}},dynamic:function(c){var d=c.timescale;d=void 0===d?1:d;var n=c.duration,f=c.start,b=c.minimumUpdatePeriod,g=c.timeShiftBufferDepth,a=(c.NOW+c.clientOffset)/1E3;c=c.availabilityStartTime+(void 0===f?0:f);return{start:Math.max(0,Math.floor((a-c-(void 0===g?Infinity:g))*d/n)),end:Math.min(Math.ceil((a+(void 0===b?0:b)-c)*d/n),
Math.floor((a-c)*d/n))}}},Ck=function(c){return function(d,n){var f=c.duration,b=c.timescale,g=c.startNumber;return{number:(void 0===g?1:g)+d,duration:f/(void 0===b?1:b),timeline:c.periodIndex,time:n*f}}},He=function(c){var d=c.type,n=void 0===d?"static":d;d=c.duration;var f=c.timescale;f=void 0===f?1:f;var b=c.sourceDuration,g=Bk[n](c),a=g.end,l=[];for(g=g.start;g<a;g++)l.push(g);c=l.map(Ck(c));"static"===n&&(n=c.length-1,c[n].duration=b-d/f*n);return c},ch=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,dh=function(c){return function(d,
n,f,b){if("$$"===d)return"$";if("undefined"===typeof c[n])return d;d=""+c[n];if("RepresentationID"===n)return d;b=f?parseInt(b,10):1;return d.length>=b?d:""+Array(b-d.length+1).join("0")+d}},Dk=function(c,d){return c.duration||d?c.duration?He(c):ah(c,d):[{number:c.startNumber||1,duration:c.sourceDuration,time:0,timeline:c.periodIndex}]},Ek=function(c,d){var n={RepresentationID:c.id,Bandwidth:c.bandwidth||0},f=c.initialization;f=void 0===f?{sourceURL:"",range:""}:f;var b=wc({baseUrl:c.baseUrl,source:f.sourceURL.replace(ch,
dh(n)),range:f.range});return Dk(c,d).map(function(d){n.Number=d.number;n.Time=d.time;var a=(c.media||"").replace(ch,dh(n));return{uri:a,timeline:d.timeline,duration:d.duration,resolvedUri:Ge(c.baseUrl||"",a),map:b,number:d.number}})},Fk=function(c,d){var n=c.duration,f=c.segmentUrls;f=void 0===f?[]:f;if(!n&&!d||n&&d)throw Error("SEGMENT_TIME_UNSPECIFIED");var b=f.map(function(d){var a=c.baseUrl,f=c.initialization;f=void 0===f?{}:f;f=wc({baseUrl:a,source:f.sourceURL,range:f.range});d=wc({baseUrl:a,
source:d.media,range:d.mediaRange});d.map=f;return d});f=void 0;n&&(f=He(c));d&&(f=ah(c,d));return f.map(function(c,d){if(b[d])return d=b[d],d.timeline=c.timeline,d.duration=c.duration,d.number=c.number,d}).filter(function(c){return c})},Gk=function(c){var d=c.baseUrl,n=c.initialization,f=void 0===n?{}:n;n=c.sourceDuration;var b=c.timescale;b=void 0===b?1:b;var g=c.indexRange,a=void 0===g?"":g;g=c.duration;if(!d)throw Error("NO_BASE_URL");f=wc({baseUrl:d,source:f.sourceURL,range:f.range});d=wc({baseUrl:d,
source:d,range:a});d.map=f;g?(c=He(c),c.length&&(d.duration=c[0].duration,d.timeline=c[0].timeline)):n&&(d.duration=n/b,d.timeline=0);d.number=0;return[d]},Hk=function(c){var d=c.attributes,n=c.segmentInfo,f=c=void 0;n.template?(f=Ek,c=Ka(d,n.template)):n.base?(f=Gk,c=Ka(d,n.base)):n.list&&(f=Fk,c=Ka(d,n.list));if(!f)return{attributes:d};d=f(c,n.timeline);c.duration?(n=c,f=n.timescale,c.duration=n.duration/(void 0===f?1:f)):c.duration=d.length?d.reduce(function(c,d){return Math.max(c,Math.ceil(d.duration))},
0):0;return{attributes:c,segments:d}},na=function(c,d){return bh(c.childNodes).filter(function(c){return c.tagName===d})},xc=function(c){c=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(c);if(!c)return 0;c=c.slice(1);var d=c[1],n=c[2],f=c[3],b=c[4],g=c[5];return 31536E3*parseFloat(c[0]||0)+2592E3*parseFloat(d||0)+86400*parseFloat(n||0)+3600*parseFloat(f||0)+60*parseFloat(b||0)+parseFloat(g||0)},eh={mediaPresentationDuration:function(c){return xc(c)},availabilityStartTime:function(c){/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(c)&&
(c+="Z");return Date.parse(c)/1E3},minimumUpdatePeriod:function(c){return xc(c)},timeShiftBufferDepth:function(c){return xc(c)},start:function(c){return xc(c)},width:function(c){return parseInt(c,10)},height:function(c){return parseInt(c,10)},bandwidth:function(c){return parseInt(c,10)},startNumber:function(c){return parseInt(c,10)},timescale:function(c){return parseInt(c,10)},duration:function(c){var d=parseInt(c,10);return isNaN(d)?xc(c):d},d:function(c){return parseInt(c,10)},t:function(c){return parseInt(c,
10)},r:function(c){return parseInt(c,10)},DEFAULT:function(c){return c}},Aa=function(c){return c&&c.attributes?bh(c.attributes).reduce(function(c,n){c[n.name]=(eh[n.name]||eh.DEFAULT)(n.value);return c},{}):{}},Ik={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},ld=function(c,
d){return d.length?kd(c.map(function(c){return d.map(function(d){return Ge(c,d.textContent.trim())})})):c},Ie=function(c){var d=na(c,"SegmentTemplate")[0],n=na(c,"SegmentList")[0],f=n&&na(n,"SegmentURL").map(function(c){return Ka({tag:"SegmentURL"},Aa(c))});c=na(c,"SegmentBase")[0];var b=n||d;b=b&&na(b,"SegmentTimeline")[0];var g=n||c||d;g=g&&na(g,"Initialization")[0];(d=d&&Aa(d))&&g?d.initialization=g&&Aa(g):d&&d.initialization&&(d.initialization={sourceURL:d.initialization});var a={template:d,timeline:b&&
na(b,"S").map(function(c){return Aa(c)}),list:n&&Ka(Aa(n),{segmentUrls:f,initialization:Aa(g)}),base:c&&Ka(Aa(c),{initialization:Aa(g)})};Object.keys(a).forEach(function(c){a[c]||delete a[c]});return a},Jk=function(c,d,n){return function(f){var b=na(f,"BaseURL");b=ld(d,b);var g=Ka(c,Aa(f)),a=Ie(f);return b.map(function(c){return{segmentInfo:Ka(n,a),attributes:Ka(g,{baseUrl:c})}})}},Kk=function(c){return c.reduce(function(c,n){var d=Aa(n),b=Ik[d.schemeIdUri];if(b&&(c[b]={attributes:d},n=na(n,"cenc:pssh")[0])){if(d=
n=n.textContent.trim()){n=E.atob(n);d=new Uint8Array(n.length);for(var g=0;g<n.length;g++)d[g]=n.charCodeAt(g)}c[b].pssh=d}return c},{})},Lk=function(c,d,n){return function(f){var b=Aa(f),g=ld(d,na(f,"BaseURL")),a=na(f,"Role")[0];a={role:Aa(a)};b=Ka(c,b,a);a=Kk(na(f,"ContentProtection"));Object.keys(a).length&&(b=Ka(b,{contentProtection:a}));a=Ie(f);f=na(f,"Representation");a=Ka(n,a);return kd(f.map(Jk(b,g,a)))}},Mk=function(c,d){return function(n,f){var b=ld(d,na(n,"BaseURL")),g=Aa(n);f=Ka(c,g,{periodIndex:f});
g=na(n,"AdaptationSet");n=Ie(n);return kd(g.map(Lk(f,b,n)))}},Nk=function(c){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=d.manifestUri;n=void 0===n?"":n;var f=d.NOW;f=void 0===f?Date.now():f;d=d.clientOffset;d=void 0===d?0:d;var b=na(c,"Period");if(1!==b.length)throw Error("INVALID_NUMBER_OF_PERIOD");var g=Aa(c);n=ld([n],na(c,"BaseURL"));g.sourceDuration=g.mediaPresentationDuration||0;g.NOW=f;g.clientOffset=d;return kd(b.map(Mk(g,n)))},fh=function(c){if(""===c)throw Error("DASH_EMPTY_MANIFEST");
c=(c=(new E.DOMParser).parseFromString(c,"application/xml"))&&"MPD"===c.documentElement.tagName?c.documentElement:null;if(!c||c&&0<c.getElementsByTagName("parsererror").length)throw Error("DASH_INVALID_XML");return c},Ok=function(c){c=na(c,"UTCTiming")[0];if(!c)return null;c=Aa(c);switch(c.schemeIdUri){case "urn:mpeg:dash:utc:http-head:2014":case "urn:mpeg:dash:utc:http-head:2012":c.method="HEAD";break;case "urn:mpeg:dash:utc:http-xsdate:2014":case "urn:mpeg:dash:utc:http-iso:2014":case "urn:mpeg:dash:utc:http-xsdate:2012":case "urn:mpeg:dash:utc:http-iso:2012":c.method=
"GET";break;case "urn:mpeg:dash:utc:direct:2014":case "urn:mpeg:dash:utc:direct:2012":c.method="DIRECT";c.value=Date.parse(c.value);break;default:throw Error("UNSUPPORTED_UTC_TIMING_SCHEME");}return c},Pk=function(c,d){return zk(Nk(fh(c),d).map(Hk))},md={toUnsigned:function(c){return c>>>0}},gh=Object.freeze({default:md,__moduleExports:md,toUnsigned:md.toUnsigned}),Yb=(gh&&md||gh).toUnsigned;var Ta=function(c,d){var n=[],f;if(!d.length)return null;for(f=0;f<c.byteLength;){var b=Yb(c[f]<<24|c[f+1]<<
16|c[f+2]<<8|c[f+3]);var g=Je(c.subarray(f+4,f+8));b=1<b?f+b:c.byteLength;g===d[0]&&(1===d.length?n.push(c.subarray(f+8,b)):(f=Ta(c.subarray(f+8,b),d.slice(1)),f.length&&(n=n.concat(f))));f=b}return n};var Je=function(c){var d=""+String.fromCharCode(c[0]);d+=String.fromCharCode(c[1]);d+=String.fromCharCode(c[2]);return d+=String.fromCharCode(c[3])};var Za={findBox:Ta,parseType:Je,timescale:function(c){return Ta(c,["moov","trak"]).reduce(function(c,n){var d=Ta(n,["tkhd"])[0];if(!d)return null;var b=
d[0];b=0===b?12:20;d=Yb(d[b]<<24|d[b+1]<<16|d[b+2]<<8|d[b+3]);n=Ta(n,["mdia","mdhd"])[0];if(!n)return null;b=n[0];b=0===b?12:20;c[d]=Yb(n[b]<<24|n[b+1]<<16|n[b+2]<<8|n[b+3]);return c},{})},startTime:function(c,d){d=Ta(d,["moof","traf"]);d=[].concat.apply([],d.map(function(d){return Ta(d,["tfhd"]).map(function(f){f=Yb(f[4]<<24|f[5]<<16|f[6]<<8|f[7]);f=c[f]||9E4;var b=(b=Ta(d,["tfdt"]).map(function(c){var d=c[0];var f=Yb(c[4]<<24|c[5]<<16|c[6]<<8|c[7]);1===d&&(f*=Math.pow(2,32),f+=Yb(c[8]<<24|c[9]<<
16|c[10]<<8|c[11]));return f})[0])||Infinity;return b/f})}));d=Math.min.apply(null,d);return isFinite(d)?d:0},videoTrackIds:function(c){var d=[];Ta(c,["moov","trak"]).forEach(function(c){var f=Ta(c,["mdia","hdlr"]),b=Ta(c,["tkhd"]);f.forEach(function(c,a){c=Je(c.subarray(8,12));a=b[a];"vide"===c&&(a=new DataView(a.buffer,a.byteOffset,a.byteLength),c=a.getUint8(0),a=0===c?a.getUint32(12):a.getUint32(20),d.push(a))})});return d}},hh=Math.pow(2,32)-1,ih,Ke,T,Le,jh,kh,lh,mh,nh,oh,ph,qh,Me,rh,sh,th;(function(){var c;
T={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]};if("undefined"!==typeof Uint8Array){for(c in T)T.hasOwnProperty(c)&&(T[c]=[c.charCodeAt(0),c.charCodeAt(1),c.charCodeAt(2),c.charCodeAt(3)]);Le=new Uint8Array([105,115,111,109]);kh=new Uint8Array([97,118,99,49]);jh=new Uint8Array([0,
0,0,1]);lh=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]);mh=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);nh={video:lh,audio:mh};qh=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);ph=new Uint8Array([0,0,0,0,0,0,0,0]);rh=Me=new Uint8Array([0,0,0,0,0,0,0,0]);sh=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);th=Me;oh=new Uint8Array([0,0,0,
1,0,0,0,0,0,0,0,0])}})();var W=function(c){var d=[],n=0,f;for(f=1;f<arguments.length;f++)d.push(arguments[f]);for(f=d.length;f--;)n+=d[f].byteLength;var b=new Uint8Array(n+8);(new DataView(b.buffer,b.byteOffset,b.byteLength)).setUint32(0,b.byteLength);b.set(c,4);f=0;for(n=8;f<d.length;f++)b.set(d[f],n),n+=d[f].byteLength;return b};var Qk=function(){return W(T.dinf,W(T.dref,qh))};var Rk=function(c){return W(T.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,c.audioobjecttype<<
3|c.samplingfrequencyindex>>>1,c.samplingfrequencyindex<<7|c.channelcount<<3,6,1,2]))};var uh=function(){return W(T.ftyp,Le,jh,Le,kh)};var Sk=function(c){return W(T.hdlr,nh[c])};var Tk=function(c){var d=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,c.duration>>>24&255,c.duration>>>16&255,c.duration>>>8&255,c.duration&255,85,196,0,0]);c.samplerate&&(d[12]=c.samplerate>>>24&255,d[13]=c.samplerate>>>16&255,d[14]=c.samplerate>>>8&255,d[15]=c.samplerate&255);return W(T.mdhd,d)};var Vk=function(c){return W(T.mdia,
Tk(c),Sk(c.type),Uk(c))};var Wk=function(c){return W(T.mfhd,new Uint8Array([0,0,0,0,(c&4278190080)>>24,(c&16711680)>>16,(c&65280)>>8,c&255]))};var Uk=function(c){return W(T.minf,"video"===c.type?W(T.vmhd,oh):W(T.smhd,ph),Qk(),Xk(c))};var vh=function(c){for(var d=c.length,n=[];d--;)n[d]=Yk(c[d]);return W.apply(null,[T.moov,Zk(4294967295)].concat(n).concat($k(c)))};var $k=function(c){for(var d=c.length,n=[];d--;)n[d]=al(c[d]);return W.apply(null,[T.mvex].concat(n))};var Zk=function(c){c=new Uint8Array([0,
0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(c&4278190080)>>24,(c&16711680)>>16,(c&65280)>>8,c&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return W(T.mvhd,c)};var bl=function(c){c=c.samples||[];var d=new Uint8Array(4+c.length),n;for(n=0;n<c.length;n++){var f=c[n].flags;d[n+4]=f.dependsOn<<4|f.isDependedOn<<2|f.hasRedundancy}return W(T.sdtp,d)};var Xk=function(c){return W(T.stbl,
ih(c),W(T.stts,th),W(T.stsc,rh),W(T.stsz,sh),W(T.stco,Me))};(function(){ih=function(n){return W(T.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===n.type?c(n):d(n))};var c=function(c){var d=c.sps||[],b=c.pps||[],g=[],a=[],l;for(l=0;l<d.length;l++)g.push((d[l].byteLength&65280)>>>8),g.push(d[l].byteLength&255),g=g.concat(Array.prototype.slice.call(d[l]));for(l=0;l<b.length;l++)a.push((b[l].byteLength&65280)>>>8),a.push(b[l].byteLength&255),a=a.concat(Array.prototype.slice.call(b[l]));return W(T.avc1,
new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(c.width&65280)>>8,c.width&255,(c.height&65280)>>8,c.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),W(T.avcC,new Uint8Array([1,c.profileIdc,c.profileCompatibility,c.levelIdc,255].concat([d.length]).concat(g).concat([b.length]).concat(a))),W(T.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))};var d=function(c){return W(T.mp4a,
new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(c.channelcount&65280)>>8,c.channelcount&255,(c.samplesize&65280)>>8,c.samplesize&255,0,0,0,0,(c.samplerate&65280)>>8,c.samplerate&255,0,0]),Rk(c))}})();var cl=function(c){c=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(c.id&4278190080)>>24,(c.id&16711680)>>16,(c.id&65280)>>8,c.id&255,0,0,0,0,(c.duration&4278190080)>>24,(c.duration&16711680)>>16,(c.duration&65280)>>8,c.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(c.width&65280)>>8,c.width&255,0,0,(c.height&65280)>>8,c.height&255,0,0]);return W(T.tkhd,c)};var dl=function(c){var d=W(T.tfhd,new Uint8Array([0,0,0,58,(c.id&4278190080)>>24,(c.id&16711680)>>16,(c.id&65280)>>8,c.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]));var n=Math.floor(c.baseMediaDecodeTime/(hh+1));var f=Math.floor(c.baseMediaDecodeTime%(hh+1));n=W(T.tfdt,new Uint8Array([1,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,n&255,f>>>24&255,f>>>16&255,f>>>8&255,f&255]));if("audio"===
c.type)return c=Ke(c,92),W(T.traf,d,n,c);f=bl(c);c=Ke(c,f.length+92);return W(T.traf,d,n,c,f)};var Yk=function(c){c.duration=c.duration||4294967295;return W(T.trak,cl(c),Vk(c))};var al=function(c){var d=new Uint8Array([0,0,0,0,(c.id&4278190080)>>24,(c.id&16711680)>>16,(c.id&65280)>>8,c.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);"video"!==c.type&&(d[d.length-1]=0);return W(T.trex,d)};(function(){var c=function(c,d){var f=0,a=0,b=0,n=0;c.length&&(void 0!==c[0].duration&&(f=1),void 0!==c[0].size&&(a=2),
void 0!==c[0].flags&&(b=4),void 0!==c[0].compositionTimeOffset&&(n=8));return[0,0,f|a|b|n,1,(c.length&4278190080)>>>24,(c.length&16711680)>>>16,(c.length&65280)>>>8,c.length&255,(d&4278190080)>>>24,(d&16711680)>>>16,(d&65280)>>>8,d&255]};var d=function(d,b){var f;d=d.samples||[];b+=20+16*d.length;b=c(d,b);for(f=0;f<d.length;f++){var a=d[f];b=b.concat([(a.duration&4278190080)>>>24,(a.duration&16711680)>>>16,(a.duration&65280)>>>8,a.duration&255,(a.size&4278190080)>>>24,(a.size&16711680)>>>16,(a.size&
65280)>>>8,a.size&255,a.flags.isLeading<<2|a.flags.dependsOn,a.flags.isDependedOn<<6|a.flags.hasRedundancy<<4|a.flags.paddingValue<<1|a.flags.isNonSyncSample,a.flags.degradationPriority&61440,a.flags.degradationPriority&15,(a.compositionTimeOffset&4278190080)>>>24,(a.compositionTimeOffset&16711680)>>>16,(a.compositionTimeOffset&65280)>>>8,a.compositionTimeOffset&255])}return W(T.trun,new Uint8Array(b))};var n=function(d,b){var f;d=d.samples||[];b+=20+8*d.length;b=c(d,b);for(f=0;f<d.length;f++){var a=
d[f];b=b.concat([(a.duration&4278190080)>>>24,(a.duration&16711680)>>>16,(a.duration&65280)>>>8,a.duration&255,(a.size&4278190080)>>>24,(a.size&16711680)>>>16,(a.size&65280)>>>8,a.size&255])}return W(T.trun,new Uint8Array(b))};Ke=function(c,b){return"audio"===c.type?n(c,b):d(c,b)}})();var tb={ftyp:uh,mdat:function(c){return W(T.mdat,c)},moof:function(c,d){for(var n=[],f=d.length;f--;)n[f]=dl(d[f]);return W.apply(null,[T.moof,Wk(c)].concat(n))},moov:vh,initSegment:function(c){var d=uh();c=vh(c);var n=
new Uint8Array(d.byteLength+c.byteLength);n.set(d);n.set(c,d.byteLength);return n}},wh=Object.freeze({default:tb,__moduleExports:tb,ftyp:tb.ftyp,mdat:tb.mdat,moof:tb.moof,moov:tb.moov,initSegment:tb.initSegment}),Zb=function(){this.init=function(){var c={};this.on=function(d,n){c[d]||(c[d]=[]);c[d]=c[d].concat(n)};this.off=function(d,n){if(!c[d])return!1;n=c[d].indexOf(n);c[d]=c[d].slice();c[d].splice(n,1);return-1<n};this.trigger=function(d){var n,f;if(n=c[d])if(2===arguments.length){var b=n.length;
for(f=0;f<b;++f)n[f].call(this,arguments[1])}else{var g=[];for(f=1;f<arguments.length;++f)g.push(arguments[f]);b=n.length;for(f=0;f<b;++f)n[f].apply(this,g)}};this.dispose=function(){c={}}}};Zb.prototype.pipe=function(c){this.on("data",function(d){c.push(d)});this.on("done",function(d){c.flush(d)});return c};Zb.prototype.push=function(c){this.trigger("data",c)};Zb.prototype.flush=function(c){this.trigger("done",c)};var xh=Object.freeze({default:Zb,__moduleExports:Zb}),ub={groupNalsIntoFrames:function(c){var d,
n=[],f=[];for(d=n.byteLength=0;d<c.length;d++){var b=c[d];"access_unit_delimiter_rbsp"===b.nalUnitType?(n.length&&(n.duration=b.dts-n.dts,f.push(n)),n=[b],n.byteLength=b.data.byteLength,n.pts=b.pts,n.dts=b.dts):("slice_layer_without_partitioning_rbsp_idr"===b.nalUnitType&&(n.keyFrame=!0),n.duration=b.dts-n.dts,n.byteLength+=b.data.byteLength,n.push(b))}f.length&&(!n.duration||0>=n.duration)&&(n.duration=f[f.length-1].duration);f.push(n);return f},groupFramesIntoGops:function(c){var d,n=[],f=[];n.byteLength=
0;n.nalCount=0;n.duration=0;n.pts=c[0].pts;n.dts=c[0].dts;f.byteLength=0;f.nalCount=0;f.duration=0;f.pts=c[0].pts;f.dts=c[0].dts;for(d=0;d<c.length;d++){var b=c[d];b.keyFrame?(n.length&&(f.push(n),f.byteLength+=n.byteLength,f.nalCount+=n.nalCount,f.duration+=n.duration),n=[b],n.nalCount=b.length,n.byteLength=b.byteLength,n.pts=b.pts,n.dts=b.dts,n.duration=b.duration):(n.duration+=b.duration,n.nalCount+=b.length,n.byteLength+=b.byteLength,n.push(b))}f.length&&0>=n.duration&&(n.duration=f[f.length-
1].duration);f.byteLength+=n.byteLength;f.nalCount+=n.nalCount;f.duration+=n.duration;f.push(n);return f},extendFirstKeyFrame:function(c){if(!c[0][0].keyFrame&&1<c.length){var d=c.shift();c.byteLength-=d.byteLength;c.nalCount-=d.nalCount;c[0][0].dts=d.dts;c[0][0].pts=d.pts;c[0][0].duration+=d.duration}return c},generateSampleTable:function(c,d){var n,f=d||0,b=[];for(d=0;d<c.length;d++){var g=c[d];for(n=0;n<g.length;n++){var a=g[n];var l={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,
degradationPriority:0,isNonSyncSample:1}};l.dataOffset=f;l.compositionTimeOffset=a.pts-a.dts;l.duration=a.duration;l.size=4*a.length;l.size+=a.byteLength;a.keyFrame&&(l.flags.dependsOn=2,l.flags.isNonSyncSample=0);a=l;f+=a.size;b.push(a)}}return b},concatenateNalData:function(c){var d,n,f,b=0,g=new Uint8Array(c.byteLength+4*c.nalCount),a=new DataView(g.buffer);for(d=0;d<c.length;d++){var l=c[d];for(n=0;n<l.length;n++){var t=l[n];for(f=0;f<t.length;f++){var z=t[f];a.setUint32(b,z.data.byteLength);
b+=4;g.set(z.data,b);b+=z.data.byteLength}}}return g}},yh=Object.freeze({default:ub,__moduleExports:ub,groupNalsIntoFrames:ub.groupNalsIntoFrames,groupFramesIntoGops:ub.groupFramesIntoGops,extendFirstKeyFrame:ub.extendFirstKeyFrame,generateSampleTable:ub.generateSampleTable,concatenateNalData:ub.concatenateNalData}),$b={clearDtsInfo:function(c){delete c.minSegmentDts;delete c.maxSegmentDts;delete c.minSegmentPts;delete c.maxSegmentPts},calculateTrackBaseMediaDecodeTime:function(c,d){var n=c.minSegmentDts;
d||(n-=c.timelineStartInfo.dts);d=c.timelineStartInfo.baseMediaDecodeTime;d=Math.max(0,d+n);"audio"===c.type&&(c=c.samplerate/9E4,d=Math.floor(d*c));return d},collectDtsInfo:function(c,d){"number"===typeof d.pts&&(void 0===c.timelineStartInfo.pts&&(c.timelineStartInfo.pts=d.pts),c.minSegmentPts=void 0===c.minSegmentPts?d.pts:Math.min(c.minSegmentPts,d.pts),c.maxSegmentPts=void 0===c.maxSegmentPts?d.pts:Math.max(c.maxSegmentPts,d.pts));"number"===typeof d.dts&&(void 0===c.timelineStartInfo.dts&&(c.timelineStartInfo.dts=
d.dts),c.minSegmentDts=void 0===c.minSegmentDts?d.dts:Math.min(c.minSegmentDts,d.dts),c.maxSegmentDts=void 0===c.maxSegmentDts?d.dts:Math.max(c.maxSegmentDts,d.dts))}},zh=Object.freeze({default:$b,__moduleExports:$b,clearDtsInfo:$b.clearDtsInfo,calculateTrackBaseMediaDecodeTime:$b.calculateTrackBaseMediaDecodeTime,collectDtsInfo:$b.collectDtsInfo}),vb={parseSei:function(c){for(var d=0,n={payloadType:-1,payloadSize:0},f=0,b=0;d<c.byteLength&&128!==c[d];){for(;255===c[d];)f+=255,d++;for(f+=c[d++];255===
c[d];)b+=255,d++;b+=c[d++];if(!n.payload&&4===f){n.payloadType=f;n.payloadSize=b;n.payload=c.subarray(d,d+b);break}d+=b;b=f=0}return n},parseUserData:function(c){return 181!==c.payload[0]||49!==(c.payload[1]<<8|c.payload[2])||"GA94"!==String.fromCharCode(c.payload[3],c.payload[4],c.payload[5],c.payload[6])||3!==c.payload[7]?null:c.payload.subarray(8,c.payload.length-1)},parseCaptionPackets:function(c,d){var n=[],f;if(!(d[0]&64))return n;var b=d[0]&31;for(f=0;f<b;f++){var g=3*f;var a={type:d[g+2]&
3,pts:c};d[g+2]&4&&(a.ccData=d[g+3]<<8|d[g+4],n.push(a))}return n},discardEmulationPreventionBytes:function(c){for(var d=c.byteLength,n=[],f=1,b;f<d-2;)0===c[f]&&0===c[f+1]&&3===c[f+2]?(n.push(f+2),f+=2):f++;if(0===n.length)return c;d-=n.length;b=new Uint8Array(d);var g=0;for(f=0;f<d;g++,f++)g===n[0]&&(g++,n.shift()),b[f]=c[g];return b},USER_DATA_REGISTERED_ITU_T_T35:4},Ah=Object.freeze({default:vb,__moduleExports:vb,parseSei:vb.parseSei,parseUserData:vb.parseUserData,parseCaptionPackets:vb.parseCaptionPackets,
discardEmulationPreventionBytes:vb.discardEmulationPreventionBytes,USER_DATA_REGISTERED_ITU_T_T35:vb.USER_DATA_REGISTERED_ITU_T_T35}),ra=xh&&Zb||xh,yc=Ah&&vb||Ah,wb=function d(){d.prototype.init.call(this);this.captionPackets_=[];this.ccStreams_=[new ha(0,0),new ha(0,1),new ha(1,0),new ha(1,1)];this.reset();this.ccStreams_.forEach(function(d){d.on("data",this.trigger.bind(this,"data"));d.on("done",this.trigger.bind(this,"done"))},this)};wb.prototype=new ra;wb.prototype.push=function(d){if("sei_rbsp"===
d.nalUnitType){var n=yc.parseSei(d.escapedRBSP);n.payloadType===yc.USER_DATA_REGISTERED_ITU_T_T35&&(n=yc.parseUserData(n))&&(d.dts<this.latestDts_?this.ignoreNextEqualDts_=!0:d.dts===this.latestDts_&&this.ignoreNextEqualDts_?(this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1)):(n=yc.parseCaptionPackets(d.pts,n),this.captionPackets_=this.captionPackets_.concat(n),this.latestDts_!==d.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=d.dts))}};wb.prototype.flush=function(){this.captionPackets_.length?
(this.captionPackets_.forEach(function(d,n){d.presortIndex=n}),this.captionPackets_.sort(function(d,n){return d.pts===n.pts?d.presortIndex-n.presortIndex:d.pts-n.pts}),this.captionPackets_.forEach(function(d){2>d.type&&this.dispatchCea608Packet(d)},this),this.captionPackets_.length=0,this.ccStreams_.forEach(function(d){d.flush()},this)):this.ccStreams_.forEach(function(d){d.flush()},this)};wb.prototype.reset=function(){this.latestDts_=null;this.ignoreNextEqualDts_=!1;this.numSameDts_=0;this.activeCea608Channel_=
[null,null];this.ccStreams_.forEach(function(d){d.reset()})};wb.prototype.dispatchCea608Packet=function(d){this.setsChannel1Active(d)?this.activeCea608Channel_[d.type]=0:this.setsChannel2Active(d)&&(this.activeCea608Channel_[d.type]=1);null!==this.activeCea608Channel_[d.type]&&this.ccStreams_[(d.type<<1)+this.activeCea608Channel_[d.type]].push(d)};wb.prototype.setsChannel1Active=function(d){return 4096===(d.ccData&30720)};wb.prototype.setsChannel2Active=function(d){return 6144===(d.ccData&30720)};
var el={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,
804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},nd=function(d){if(null===d)return"";d=el[d]||d;return String.fromCharCode(d)},fl=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Ib=function(){for(var d=[],n=15;n--;)d.push("");return d},ha=function b(n,f){b.prototype.init.call(this);this.field_=
n||0;this.dataChannel_=f||0;this.name_="CC"+((this.field_<<1|this.dataChannel_)+1);this.setConstants();this.reset();this.push=function(f){var a=f.ccData&32639;if(a===this.lastControlCode_)this.lastControlCode_=null;else{4096===(a&61440)?this.lastControlCode_=a:a!==this.PADDING_&&(this.lastControlCode_=null);var b=a>>>8;var g=a&255;a!==this.PADDING_&&(a===this.RESUME_CAPTION_LOADING_?this.mode_="popOn":a===this.END_OF_CAPTION_?(this.mode_="popOn",this.clearFormatting(f.pts),this.flushDisplayed(f.pts),
g=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=g,this.startPts_=f.pts):a===this.ROLL_UP_2_ROWS_?(this.rollUpRows_=2,this.setRollUp(f.pts)):a===this.ROLL_UP_3_ROWS_?(this.rollUpRows_=3,this.setRollUp(f.pts)):a===this.ROLL_UP_4_ROWS_?(this.rollUpRows_=4,this.setRollUp(f.pts)):a===this.CARRIAGE_RETURN_?(this.clearFormatting(f.pts),this.flushDisplayed(f.pts),this.shiftRowsUp_(),this.startPts_=f.pts):a===this.BACKSPACE_?"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,
-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1):a===this.ERASE_DISPLAYED_MEMORY_?(this.flushDisplayed(f.pts),this.displayed_=Ib()):a===this.ERASE_NON_DISPLAYED_MEMORY_?this.nonDisplayed_=Ib():a===this.RESUME_DIRECT_CAPTIONING_?("paintOn"!==this.mode_&&(this.flushDisplayed(f.pts),this.displayed_=Ib()),this.mode_="paintOn",this.startPts_=f.pts):this.isSpecialCharacter(b,g)?(a=nd((b&3)<<8|g),this[this.mode_](f.pts,a),this.column_++):this.isExtCharacter(b,g)?("popOn"===this.mode_?
this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),a=nd((b&3)<<8|g),this[this.mode_](f.pts,a),this.column_++):this.isMidRowCode(b,g)?(this.clearFormatting(f.pts),this[this.mode_](f.pts," "),this.column_++,14===(g&14)&&this.addFormatting(f.pts,["i"]),1===(g&1)&&this.addFormatting(f.pts,["u"])):this.isOffsetControlCode(b,g)?this.column_+=g&3:this.isPAC(b,g)?(b=fl.indexOf(a&7968),"rollUp"===this.mode_&&this.setRollUp(f.pts,
b),b!==this.row_&&(this.clearFormatting(f.pts),this.row_=b),g&1&&-1===this.formatting_.indexOf("u")&&this.addFormatting(f.pts,["u"]),16===(a&16)&&(this.column_=4*((a&14)>>1)),this.isColorPAC(g)&&14===(g&14)&&this.addFormatting(f.pts,["i"])):this.isNormalChar(b)&&(0===g&&(g=null),a=nd(b),a+=nd(g),this[this.mode_](f.pts,a),this.column_+=a.length))}}};ha.prototype=new ra;ha.prototype.flushDisplayed=function(n){var f=this.displayed_.map(function(f){return f.trim()}).join("\n").replace(/^\n+|\n+$/g,"");
f.length&&this.trigger("data",{startPts:this.startPts_,endPts:n,text:f,stream:this.name_})};ha.prototype.reset=function(){this.mode_="popOn";this.startPts_=this.topRow_=0;this.displayed_=Ib();this.nonDisplayed_=Ib();this.lastControlCode_=null;this.column_=0;this.row_=14;this.rollUpRows_=2;this.formatting_=[]};ha.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=
(28|this.field_)<<8,this.OFFSET_=31);this.PADDING_=0;this.RESUME_CAPTION_LOADING_=this.CONTROL_|32;this.END_OF_CAPTION_=this.CONTROL_|47;this.ROLL_UP_2_ROWS_=this.CONTROL_|37;this.ROLL_UP_3_ROWS_=this.CONTROL_|38;this.ROLL_UP_4_ROWS_=this.CONTROL_|39;this.CARRIAGE_RETURN_=this.CONTROL_|45;this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41;this.BACKSPACE_=this.CONTROL_|33;this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44;this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46};ha.prototype.isSpecialCharacter=function(n,
f){return n===this.EXT_&&48<=f&&63>=f};ha.prototype.isExtCharacter=function(n,f){return(n===this.EXT_+1||n===this.EXT_+2)&&32<=f&&63>=f};ha.prototype.isMidRowCode=function(n,f){return n===this.EXT_&&32<=f&&47>=f};ha.prototype.isOffsetControlCode=function(n,f){return n===this.OFFSET_&&33<=f&&35>=f};ha.prototype.isPAC=function(n,f){return n>=this.BASE_&&n<this.BASE_+8&&64<=f&&127>=f};ha.prototype.isColorPAC=function(n){return 64<=n&&79>=n||96<=n&&127>=n};ha.prototype.isNormalChar=function(n){return 32<=
n&&127>=n};ha.prototype.setRollUp=function(n,f){"rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(n),this.nonDisplayed_=Ib(),this.displayed_=Ib());if(void 0!==f&&f!==this.row_)for(n=0;n<this.rollUpRows_;n++)this.displayed_[f-n]=this.displayed_[this.row_-n],this.displayed_[this.row_-n]="";void 0===f&&(f=this.row_);this.topRow_=f-this.rollUpRows_+1};ha.prototype.addFormatting=function(n,f){this.formatting_=this.formatting_.concat(f);f=f.reduce(function(f,g){return f+"<"+g+
">"},"");this[this.mode_](n,f)};ha.prototype.clearFormatting=function(n){if(this.formatting_.length){var f=this.formatting_.reverse().reduce(function(f,g){return f+"</"+g+">"},"");this.formatting_=[];this[this.mode_](n,f)}};ha.prototype.popOn=function(n,f){this.nonDisplayed_[this.row_]+=f};ha.prototype.rollUp=function(n,f){this.displayed_[this.row_]+=f};ha.prototype.shiftRowsUp_=function(){var n;for(n=0;n<this.topRow_;n++)this.displayed_[n]="";for(n=this.row_+1;15>n;n++)this.displayed_[n]="";for(n=
this.topRow_;n<this.row_;n++)this.displayed_[n]=this.displayed_[n+1];this.displayed_[this.row_]=""};ha.prototype.paintOn=function(n,f){this.displayed_[this.row_]+=f};var zc={CaptionStream:wb,Cea608Stream:ha},Bh=Object.freeze({default:zc,__moduleExports:zc,CaptionStream:zc.CaptionStream,Cea608Stream:zc.Cea608Stream}),ac={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Ch=Object.freeze({default:ac,__moduleExports:ac,H264_STREAM_TYPE:ac.H264_STREAM_TYPE,ADTS_STREAM_TYPE:ac.ADTS_STREAM_TYPE,
METADATA_STREAM_TYPE:ac.METADATA_STREAM_TYPE}),Ne=function(n,f){var b=1;for(n>f&&(b=-1);4294967296<Math.abs(f-n);)n+=8589934592*b;return n},Dh=function b(f){var g,a;b.prototype.init.call(this);this.type_=f;this.push=function(f){f.type===this.type_&&(void 0===a&&(a=f.dts),f.dts=Ne(f.dts,a),f.pts=Ne(f.pts,a),g=f.dts,this.trigger("data",f))};this.flush=function(){a=g;this.trigger("done")};this.discontinuity=function(){g=a=void 0}};Dh.prototype=new ra;var Ac={TimestampRolloverStream:Dh,handleRollover:Ne},
Eh=Object.freeze({default:Ac,__moduleExports:Ac,TimestampRolloverStream:Ac.TimestampRolloverStream,handleRollover:Ac.handleRollover}),oa=Ch&&ac||Ch,Bc=function(f,b,g){for(var a="";b<g;b++)a+="%"+("00"+f[b].toString(16)).slice(-2);return a},od=function(f){return f[0]<<21|f[1]<<14|f[2]<<7|f[3]},Fh={TXXX:function(f){var b;if(3===f.data[0]){for(b=1;b<f.data.length;b++)if(0===f.data[b]){f.description=decodeURIComponent(Bc(f.data,1,b));f.value=decodeURIComponent(Bc(f.data,b+1,f.data.length)).replace(/\0*$/,
"");break}f.data=f.value}},WXXX:function(f){var b;if(3===f.data[0])for(b=1;b<f.data.length;b++)if(0===f.data[b]){f.description=decodeURIComponent(Bc(f.data,1,b));f.url=decodeURIComponent(Bc(f.data,b+1,f.data.length));break}},PRIV:function(f){var b;for(b=0;b<f.data.length;b++)if(0===f.data[b]){f.owner=unescape(Bc(f.data,0,b));break}f.privateData=f.data.subarray(b+1);f.data=f.privateData}};var Cc=function(f){var b=!(!f||!f.debug);f=f&&f.descriptor;var g=0,a=[],l=0,t;Cc.prototype.init.call(this);this.dispatchType=
oa.METADATA_STREAM_TYPE.toString(16);if(f)for(t=0;t<f.length;t++)this.dispatchType+=("00"+f[t].toString(16)).slice(-2);this.push=function(f){var t;if("timed-metadata"===f.type)if(f.dataAlignmentIndicator&&(l=0,a.length=0),0===a.length&&(10>f.data.length||73!==f.data[0]||68!==f.data[1]||51!==f.data[2]))b&&console.log("Skipping unrecognized metadata packet");else if(a.push(f),l+=f.data.byteLength,1===a.length&&(g=od(f.data.subarray(6,10)),g+=10),!(l<g)){f={data:new Uint8Array(g),frames:[],pts:a[0].pts,
dts:a[0].dts};for(t=0;t<g;)f.data.set(a[0].data.subarray(0,g-t),t),t+=a[0].data.byteLength,l-=a[0].data.byteLength,a.shift();t=10;f.data[5]&64&&(t=t+4+od(f.data.subarray(10,14)),g-=od(f.data.subarray(16,20)));do{var z=od(f.data.subarray(t+4,t+8));if(1>z)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");var e=String.fromCharCode(f.data[t],f.data[t+1],f.data[t+2],f.data[t+3]);e={id:e,data:f.data.subarray(t+10,t+z+10)};e.key=e.id;if(Fh[e.id]&&(Fh[e.id](e),"com.apple.streaming.transportStreamTimestamp"===
e.owner)){var h=e.data,m=(h[3]&1)<<30|h[4]<<22|h[5]<<14|h[6]<<6|h[7]>>>2;m*=4;m+=h[7]&3;e.timeStamp=m;void 0===f.pts&&void 0===f.dts&&(f.pts=e.timeStamp,f.dts=e.timeStamp);this.trigger("timestamp",e)}f.frames.push(e);t+=10;t+=z}while(t<g);this.trigger("data",f)}}};Cc.prototype=new ra;var Gh=Object.freeze({default:Cc,__moduleExports:Cc}),Oe=Bh&&zc||Bh,Hh=Eh&&Ac||Eh,gl=Gh&&Cc||Gh,hl=Hh.TimestampRolloverStream;var Pe=function(){var f=new Uint8Array(188),b=0;Pe.prototype.init.call(this);this.push=function(g){var a=
0,l=188;if(b){var t=new Uint8Array(g.byteLength+b);t.set(f.subarray(0,b));t.set(g,b);b=0}else t=g;for(;l<t.byteLength;)71===t[a]&&71===t[l]?(this.trigger("data",t.subarray(a,l)),a+=188,l+=188):(a++,l++);a<t.byteLength&&(f.set(t.subarray(a),0),b=t.byteLength-a)};this.flush=function(){188===b&&71===f[0]&&(this.trigger("data",f),b=0);this.trigger("done")}};Pe.prototype=new ra;var pd=function(){pd.prototype.init.call(this);var f=this;this.packetsWaitingForPmt=[];this.programMapTable=void 0;var b=function(f,
b){var l=0;b.payloadUnitStartIndicator&&(l+=f[l]+1);"pat"===b.type?g(f.subarray(l),b):a(f.subarray(l),b)};var g=function(a,b){b.section_number=a[7];b.last_section_number=a[8];f.pmtPid=(a[10]&31)<<8|a[11];b.pmtPid=f.pmtPid};var a=function(a,b){var l;if(a[5]&1){f.programMapTable={video:null,audio:null,"timed-metadata":{}};var g=3+((a[1]&15)<<8|a[2])-4;for(l=12+((a[10]&15)<<8|a[11]);l<g;){var t=a[l],e=(a[l+1]&31)<<8|a[l+2];t===oa.H264_STREAM_TYPE&&null===f.programMapTable.video?f.programMapTable.video=
e:t===oa.ADTS_STREAM_TYPE&&null===f.programMapTable.audio?f.programMapTable.audio=e:t===oa.METADATA_STREAM_TYPE&&(f.programMapTable["timed-metadata"][e]=t);l+=((a[l+3]&15)<<8|a[l+4])+5}b.programMapTable=f.programMapTable}};this.push=function(a){var f={},l=4;f.payloadUnitStartIndicator=!!(a[1]&64);f.pid=a[1]&31;f.pid<<=8;f.pid|=a[2];1<(a[3]&48)>>>4&&(l+=a[l]+1);if(0===f.pid)f.type="pat",b(a.subarray(l),f),this.trigger("data",f);else if(f.pid===this.pmtPid)for(f.type="pmt",b(a.subarray(l),f),this.trigger("data",
f);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([a,l,f]):this.processPes_(a,l,f)};this.processPes_=function(a,f,b){b.streamType=b.pid===this.programMapTable.video?oa.H264_STREAM_TYPE:b.pid===this.programMapTable.audio?oa.ADTS_STREAM_TYPE:this.programMapTable["timed-metadata"][b.pid];b.type="pes";b.data=a.subarray(f);this.trigger("data",b)}};pd.prototype=new ra;pd.STREAM_TYPES={h264:27,
adts:15};var Qe=function(){var f=this,b={data:[],size:0},g={data:[],size:0},a={data:[],size:0},l=function(a,b,l){var g=new Uint8Array(a.size),t={type:b},z,Q=0;if(a.data.length&&!(9>a.size)){t.trackId=a.data[0].pid;for(z=0;z<a.data.length;z++){var e=a.data[z];g.set(e.data,Q);Q+=e.data.byteLength}t.packetLength=6+(g[4]<<8|g[5]);t.dataAlignmentIndicator=0!==(g[6]&4);z=g[7];z&192&&(t.pts=(g[9]&14)<<27|(g[10]&255)<<20|(g[11]&254)<<12|(g[12]&255)<<5|(g[13]&254)>>>3,t.pts*=4,t.pts+=(g[13]&6)>>>1,t.dts=t.pts,
z&64&&(t.dts=(g[14]&14)<<27|(g[15]&255)<<20|(g[16]&254)<<12|(g[17]&255)<<5|(g[18]&254)>>>3,t.dts*=4,t.dts+=(g[18]&6)>>>1));t.data=g.subarray(9+g[8]);b="video"===b||t.packetLength<=a.size;if(l||b)a.size=0,a.data.length=0;b&&f.trigger("data",t)}};Qe.prototype.init.call(this);this.push=function(t){({pat:function(){},pes:function(){switch(t.streamType){case oa.H264_STREAM_TYPE:case oa.H264_STREAM_TYPE:var f=b;var Q="video";break;case oa.ADTS_STREAM_TYPE:f=g;Q="audio";break;case oa.METADATA_STREAM_TYPE:f=
a;Q="timed-metadata";break;default:return}t.payloadUnitStartIndicator&&l(f,Q,!0);f.data.push(t);f.size+=t.data.byteLength},pmt:function(){var a={type:"metadata",tracks:[]},b=t.programMapTable;null!==b.video&&a.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+b.video,codec:"avc",type:"video"});null!==b.audio&&a.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+b.audio,codec:"adts",type:"audio"});f.trigger("data",a)}})[t.type]()};this.flush=function(){l(b,"video");l(g,"audio");l(a,
"timed-metadata");this.trigger("done")}};Qe.prototype=new ra;var qd={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:Pe,TransportParseStream:pd,ElementaryStream:Qe,TimestampRolloverStream:hl,CaptionStream:Oe.CaptionStream,Cea608Stream:Oe.Cea608Stream,MetadataStream:gl},rd;for(rd in oa)oa.hasOwnProperty(rd)&&(qd[rd]=oa[rd]);var Ih=Object.freeze({default:qd,__moduleExports:qd}),Jh=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350];var Dc=function(){var f;Dc.prototype.init.call(this);
this.push=function(b){var g=0,a=0;if("audio"===b.type){if(f){var l=f;f=new Uint8Array(l.byteLength+b.data.byteLength);f.set(l);f.set(b.data,l.byteLength)}else f=b.data;for(;g+5<f.length;)if(255!==f[g]||240!==(f[g+1]&246))g++;else{l=2*(~f[g+1]&1);var t=(f[g+3]&3)<<11|f[g+4]<<3|(f[g+5]&224)>>5;var z=1024*((f[g+6]&3)+1);var Q=9E4*z/Jh[(f[g+2]&60)>>>2];t=g+t;if(f.byteLength<t)break;this.trigger("data",{pts:b.pts+a*Q,dts:b.dts+a*Q,sampleCount:z,audioobjecttype:(f[g+2]>>>6&3)+1,channelcount:(f[g+2]&1)<<
2|(f[g+3]&192)>>>6,samplerate:Jh[(f[g+2]&60)>>>2],samplingfrequencyindex:(f[g+2]&60)>>>2,samplesize:16,data:f.subarray(g+7+l,t)});if(f.byteLength===t){f=void 0;break}a++;f=f.subarray(t)}}};this.flush=function(){this.trigger("done")}};Dc.prototype=new ra;var Kh=Object.freeze({default:Dc,__moduleExports:Dc}),Re=function(f){var b=f.byteLength,g=0,a=0;this.length=function(){return 8*b};this.bitsAvailable=function(){return 8*b+a};this.loadWord=function(){var l=f.byteLength-b,t=new Uint8Array(4),z=Math.min(4,
b);if(0===z)throw Error("no bytes available");t.set(f.subarray(l,l+z));g=(new DataView(t.buffer)).getUint32(0);a=8*z;b-=z};this.skipBits=function(f){if(!(a>f)){f-=a;var l=Math.floor(f/8);f-=8*l;b-=l;this.loadWord()}g<<=f;a-=f};this.readBits=function(f){var l=Math.min(a,f),z=g>>>32-l;a-=l;0<a?g<<=l:0<b&&this.loadWord();l=f-l;return 0<l?z<<l|this.readBits(l):z};this.skipLeadingZeros=function(){var f;for(f=0;f<a;++f)if(0!==(g&2147483648>>>f))return g<<=f,a-=f,f;this.loadWord();return f+this.skipLeadingZeros()};
this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.readUnsignedExpGolomb=function(){var a=this.skipLeadingZeros();return this.readBits(a+1)-1};this.readExpGolomb=function(){var a=this.readUnsignedExpGolomb();return 1&a?1+a>>>1:-1*(a>>>1)};this.readBoolean=function(){return 1===this.readBits(1)};this.readUnsignedByte=function(){return this.readBits(8)};this.loadWord()},Lh=Object.freeze({default:Re,
__moduleExports:Re}),il=Lh&&Re||Lh;var sd=function(){var f=0,b,g;sd.prototype.init.call(this);this.push=function(a){if(g){var l=new Uint8Array(g.byteLength+a.data.byteLength);l.set(g);l.set(a.data,g.byteLength);g=l}else g=a.data;for(;f<g.byteLength-3;f++)if(1===g[f+2]){b=f+5;break}for(;b<g.byteLength;)switch(g[b]){case 0:if(0!==g[b-1]){b+=2;break}else if(0!==g[b-2]){b++;break}f+3!==b-2&&this.trigger("data",g.subarray(f+3,b-2));do b++;while(1!==g[b]&&b<g.length);f=b-2;b+=3;break;case 1:if(0!==g[b-
1]||0!==g[b-2]){b+=3;break}this.trigger("data",g.subarray(f+3,b-2));f=b-2;b+=3;break;default:b+=3}g=g.subarray(f);b-=f;f=0};this.flush=function(){g&&3<g.byteLength&&this.trigger("data",g.subarray(f+3));g=null;f=0;this.trigger("done")}};sd.prototype=new ra;var jl={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0};var Se=function(){var f=new sd,b,g,a;Se.prototype.init.call(this);var l=this;this.push=function(l){"video"===l.type&&(b=l.trackId,g=l.pts,a=l.dts,f.push(l))};
f.on("data",function(f){var t={trackId:b,pts:g,dts:a,data:f};switch(f[0]&31){case 5:t.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:t.nalUnitType="sei_rbsp";t.escapedRBSP=z(f.subarray(1));break;case 7:t.nalUnitType="seq_parameter_set_rbsp";t.escapedRBSP=z(f.subarray(1));t.config=Q(t.escapedRBSP);break;case 8:t.nalUnitType="pic_parameter_set_rbsp";break;case 9:t.nalUnitType="access_unit_delimiter_rbsp"}l.trigger("data",t)});f.on("done",function(){l.trigger("done")});this.flush=
function(){f.flush()};var t=function(a,f){var b=8,l=8,g;for(g=0;g<a;g++)0!==l&&(l=f.readExpGolomb(),l=(b+l+256)%256),b=0===l?b:l};var z=function(a){for(var f=a.byteLength,b=[],l=1,g;l<f-2;)0===a[l]&&0===a[l+1]&&3===a[l+2]?(b.push(l+2),l+=2):l++;if(0===b.length)return a;f-=b.length;g=new Uint8Array(f);var t=0;for(l=0;l<f;t++,l++)t===b[0]&&(t++,b.shift()),g[l]=a[t];return g};var Q=function(a){var f=0,b=0,l=0,g=0,z=1;a=new il(a);var Q=a.readUnsignedByte();var e=a.readUnsignedByte();var h=a.readUnsignedByte();
a.skipUnsignedExpGolomb();if(jl[Q]){var m=a.readUnsignedExpGolomb();3===m&&a.skipBits(1);a.skipUnsignedExpGolomb();a.skipUnsignedExpGolomb();a.skipBits(1);if(a.readBoolean()){var p=3!==m?8:12;for(m=0;m<p;m++)a.readBoolean()&&(6>m?t(16,a):t(64,a))}}a.skipUnsignedExpGolomb();m=a.readUnsignedExpGolomb();if(0===m)a.readUnsignedExpGolomb();else if(1===m)for(a.skipBits(1),a.skipExpGolomb(),a.skipExpGolomb(),p=a.readUnsignedExpGolomb(),m=0;m<p;m++)a.skipExpGolomb();a.skipUnsignedExpGolomb();a.skipBits(1);
m=a.readUnsignedExpGolomb();p=a.readUnsignedExpGolomb();var r=a.readBits(1);0===r&&a.skipBits(1);a.skipBits(1);a.readBoolean()&&(f=a.readUnsignedExpGolomb(),b=a.readUnsignedExpGolomb(),l=a.readUnsignedExpGolomb(),g=a.readUnsignedExpGolomb());if(a.readBoolean()&&a.readBoolean()){var v=a.readUnsignedByte();switch(v){case 1:var ua=[1,1];break;case 2:ua=[12,11];break;case 3:ua=[10,11];break;case 4:ua=[16,11];break;case 5:ua=[40,33];break;case 6:ua=[24,11];break;case 7:ua=[20,11];break;case 8:ua=[32,11];
break;case 9:ua=[80,33];break;case 10:ua=[18,11];break;case 11:ua=[15,11];break;case 12:ua=[64,33];break;case 13:ua=[160,99];break;case 14:ua=[4,3];break;case 15:ua=[3,2];break;case 16:ua=[2,1];break;case 255:ua=[a.readUnsignedByte()<<8|a.readUnsignedByte(),a.readUnsignedByte()<<8|a.readUnsignedByte()]}ua&&(z=ua[0]/ua[1])}return{profileIdc:Q,levelIdc:h,profileCompatibility:e,width:Math.ceil((16*(m+1)-2*f-2*b)*z),height:(2-r)*(p+1)*16-2*l-2*g}}};Se.prototype=new ra;var Ec={H264Stream:Se,NalByteStream:sd},
Mh=Object.freeze({default:Ec,__moduleExports:Ec,H264Stream:Ec.H264Stream,NalByteStream:Ec.NalByteStream});var Fc=function(){var f=new Uint8Array,b=0;Fc.prototype.init.call(this);this.setTimestamp=function(f){b=f};this.parseId3TagSize=function(f,a){var b=f[a+6]<<21|f[a+7]<<14|f[a+8]<<7|f[a+9];return(f[a+5]&16)>>4?b+20:b+10};this.parseAdtsSize=function(f,a){return f[a+3]&6144|f[a+4]<<3|(f[a+5]&224)>>5};this.push=function(g){var a=0;if(f.length){var l=f.length;f=new Uint8Array(g.byteLength+l);f.set(f.subarray(0,
l));f.set(g,l)}else f=g;for(;3<=f.length-a;)if(73===f[a]&&68===f[a+1]&&51===f[a+2]){if(10>f.length-a)break;g=this.parseId3TagSize(f,a);if(g>f.length)break;l={type:"timed-metadata",data:f.subarray(a,a+g)};this.trigger("data",l);a+=g}else if(f[a]&1&&240===(f[a+1]&240)){if(7>f.length-a)break;g=this.parseAdtsSize(f,a);if(g>f.length)break;l={type:"audio",data:f.subarray(a,a+g),pts:b,dts:b};this.trigger("data",l);a+=g}else a++;f=0<f.length-a?f.subarray(a):new Uint8Array}};Fc.prototype=new ra;var Nh=Object.freeze({default:Fc,
__moduleExports:Fc}),xb=[33,16,5,32,164,27],Te=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],ca=function(f){for(var b=[];f--;)b.push(0);return b},Ue=function(f){return Object.keys(f).reduce(function(b,g){b[g]=new Uint8Array(f[g].reduce(function(a,f){return a.concat(f)},[]));return b},{})}({96E3:[xb,[227,64],ca(154),[56]],88200:[xb,[231],ca(170),[56]],64E3:[xb,[248,192],ca(240),[56]],48E3:[xb,[255,192],ca(268),[55,148,128],ca(54),[112]],44100:[xb,[255,192],ca(268),[55,163,128],ca(84),[112]],32E3:[xb,
[255,192],ca(268),[55,234],ca(226),[112]],24E3:[xb,[255,192],ca(268),[55,255,128],ca(268),[111,112],ca(126),[224]],16E3:[xb,[255,192],ca(268),[55,255,128],ca(268),[111,255],ca(269),[223,108],ca(195),[1,192]],12E3:[Te,ca(268),[3,127,248],ca(268),[6,255,240],ca(268),[13,255,224],ca(268),[27,253,128],ca(259),[56]],11025:[Te,ca(268),[3,127,248],ca(268),[6,255,240],ca(268),[13,255,224],ca(268),[27,255,192],ca(268),[55,175,128],ca(108),[112]],8E3:[Te,ca(268),[3,121,16],ca(47),[7]]}),Oh=Object.freeze({default:Ue,
__moduleExports:Ue});var Ph=function(f){return 9E4*f};var Qh=function(f,b){return f*b};var Rh=function(f){return f/9E4};var Sh=function(f,b){return f/b};var jb={secondsToVideoTs:Ph,secondsToAudioTs:Qh,videoTsToSeconds:Rh,audioTsToSeconds:Sh,audioTsToVideoTs:function(f,b){return Ph(Sh(f,b))},videoTsToAudioTs:function(f,b){return Qh(Rh(f),b)}},Th=Object.freeze({default:jb,__moduleExports:jb,secondsToVideoTs:jb.secondsToVideoTs,secondsToAudioTs:jb.secondsToAudioTs,videoTsToSeconds:jb.videoTsToSeconds,
audioTsToSeconds:jb.audioTsToSeconds,audioTsToVideoTs:jb.audioTsToVideoTs,videoTsToAudioTs:jb.videoTsToAudioTs}),Gc=wh&&tb||wh,Hc=yh&&ub||yh,$a=zh&&$b||zh,Ua=Ih&&qd||Ih,Uh=Kh&&Dc||Kh,kl=Nh&&Fc||Nh,ll=Oh&&Ue||Oh,Vh=Th&&jb||Th,ml=(Mh&&Ec||Mh).H264Stream,Ve=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],We=["width","height","profileIdc","levelIdc","profileCompatibility"];var nl=function(f){return 73===f[0]&&68===f[1]&&51===f[2]?!0:!1};var Wh=function(f,b){var g;
if(f.length!==b.length)return!1;for(g=0;g<f.length;g++)if(f[g]!==b[g])return!1;return!0};var ol=function(f){var b,g=0;for(b=0;b<f.length;b++){var a=f[b];g+=a.data.byteLength}return g};var Ic=function(f,b){var g=[],a=0,l=0,t=0,z=Infinity;b=b||{};Ic.prototype.init.call(this);this.push=function(a){$a.collectDtsInfo(f,a);f&&Ve.forEach(function(b){f[b]=a[b]});g.push(a)};this.setEarliestDts=function(a){l=a-f.timelineStartInfo.baseMediaDecodeTime};this.setVideoBaseMediaDecodeTime=function(a){z=a};this.setAudioAppendStart=
function(a){t=a};this.flush=function(){if(0!==g.length){var l=this.trimAdtsFramesByEarliestDts_(g);f.baseMediaDecodeTime=$a.calculateTrackBaseMediaDecodeTime(f,b.keepOriginalTimestamps);this.prefixWithSilence_(f,l);f.samples=this.generateSampleTable_(l);var t=Gc.mdat(this.concatenateFrameData_(l));g=[];l=Gc.moof(a,[f]);var z=new Uint8Array(l.byteLength+t.byteLength);a++;z.set(l);z.set(t,l.byteLength);$a.clearDtsInfo(f);this.trigger("data",{track:f,boxes:z})}this.trigger("done","AudioSegmentStream")};
this.prefixWithSilence_=function(a,f){var b,l=b=0;if(f.length){var g=Vh.audioTsToVideoTs(a.baseMediaDecodeTime,a.samplerate);var Q=Math.ceil(9E4/(a.samplerate/1024));t&&z&&(b=g-Math.max(t,z),b=Math.floor(b/Q),l=b*Q);if(!(1>b||45E3<l)){Q=ll[a.samplerate];Q||(Q=f[0].data);for(g=0;g<b;g++)f.splice(g,0,{data:Q});a.baseMediaDecodeTime-=Math.floor(Vh.videoTsToAudioTs(l,a.samplerate))}}};this.trimAdtsFramesByEarliestDts_=function(a){if(f.minSegmentDts>=l)return a;f.minSegmentDts=Infinity;return a.filter(function(a){return a.dts>=
l?(f.minSegmentDts=Math.min(f.minSegmentDts,a.dts),f.minSegmentPts=f.minSegmentDts,!0):!1})};this.generateSampleTable_=function(a){var f,b=[];for(f=0;f<a.length;f++){var l=a[f];b.push({size:l.data.byteLength,duration:1024})}return b};this.concatenateFrameData_=function(a){var f,b=0,l=new Uint8Array(ol(a));for(f=0;f<a.length;f++){var g=a[f];l.set(g.data,b);b+=g.data.byteLength}return l}};Ic.prototype=new ra;var td=function(f,b){var g=0,a=[],l=[],t,z;b=b||{};td.prototype.init.call(this);delete f.minPTS;
this.gopCache_=[];this.push=function(b){$a.collectDtsInfo(f,b);"seq_parameter_set_rbsp"!==b.nalUnitType||t||(t=b.config,f.sps=[b.data],We.forEach(function(a){f[a]=t[a]},this));"pic_parameter_set_rbsp"!==b.nalUnitType||z||(z=b.data,f.pps=[b.data]);a.push(b)};this.flush=function(){for(var t,z,e;a.length&&"access_unit_delimiter_rbsp"!==a[0].nalUnitType;)a.shift();if(0!==a.length){t=Hc.groupNalsIntoFrames(a);t=Hc.groupFramesIntoGops(t);t[0][0].keyFrame||((z=this.getGopForFusion_(a[0],f))?(t.unshift(z),
t.byteLength+=z.byteLength,t.nalCount+=z.nalCount,t.pts=z.pts,t.dts=z.dts,t.duration+=z.duration):t=Hc.extendFirstKeyFrame(t));if(l.length){z=b.alignGopsAtEnd?this.alignGopsAtEnd_(t):this.alignGopsAtStart_(t);if(!z){this.gopCache_.unshift({gop:t.pop(),pps:f.pps,sps:f.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);a=[];this.resetStream_();this.trigger("done","VideoSegmentStream");return}$a.clearDtsInfo(f);t=z}$a.collectDtsInfo(f,t);f.samples=Hc.generateSampleTable(t);z=Gc.mdat(Hc.concatenateNalData(t));
f.baseMediaDecodeTime=$a.calculateTrackBaseMediaDecodeTime(f,b.keepOriginalTimestamps);this.trigger("processedGopsInfo",t.map(function(a){return{pts:a.pts,dts:a.dts,byteLength:a.byteLength}}));this.gopCache_.unshift({gop:t.pop(),pps:f.pps,sps:f.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);a=[];this.trigger("baseMediaDecodeTime",f.baseMediaDecodeTime);this.trigger("timelineStartInfo",f.timelineStartInfo);t=Gc.moof(g,[f]);e=new Uint8Array(t.byteLength+z.byteLength);g++;e.set(t);e.set(z,
t.byteLength);this.trigger("data",{track:f,boxes:e})}this.resetStream_();this.trigger("done","VideoSegmentStream")};this.resetStream_=function(){$a.clearDtsInfo(f);z=t=void 0};this.getGopForFusion_=function(a){var b=Infinity,l;for(l=0;l<this.gopCache_.length;l++){var g=this.gopCache_[l];var t=g.gop;if(f.pps&&Wh(f.pps[0],g.pps[0])&&f.sps&&Wh(f.sps[0],g.sps[0])&&!(t.dts<f.timelineStartInfo.dts)&&(t=a.dts-t.dts-t.duration,-1E4<=t&&45E3>=t&&(!z||b>t))){var z=g;b=t}}return z?z.gop:null};this.alignGopsAtStart_=
function(a){var f,b;var g=a.byteLength;var t=a.nalCount;var z=a.duration;for(f=b=0;f<l.length&&b<a.length;){var e=l[f];var Q=a[b];if(e.pts===Q.pts)break;Q.pts>e.pts?f++:(b++,g-=Q.byteLength,t-=Q.nalCount,z-=Q.duration)}if(0===b)return a;if(b===a.length)return null;a=a.slice(b);a.byteLength=g;a.duration=z;a.nalCount=t;a.pts=a[0].pts;a.dts=a[0].dts;return a};this.alignGopsAtEnd_=function(a){var f;var b=l.length-1;var g=a.length-1;var t=null;for(f=!1;0<=b&&0<=g;){var z=l[b];var e=a[g];if(z.pts===e.pts){f=
!0;break}z.pts>e.pts?b--:(b===l.length-1&&(t=g),g--)}if(!f&&null===t)return null;b=f?g:t;if(0===b)return a;a=a.slice(b);b=a.reduce(function(a,f){a.byteLength+=f.byteLength;a.duration+=f.duration;a.nalCount+=f.nalCount;return a},{byteLength:0,duration:0,nalCount:0});a.byteLength=b.byteLength;a.duration=b.duration;a.nalCount=b.nalCount;a.pts=a[0].pts;a.dts=a[0].dts;return a};this.alignGopsWith=function(a){l=a}};td.prototype=new ra;var Jc=function(f,b){this.numberOfTracks=0;this.metadataStream=b;this.remuxTracks=
"undefined"!==typeof f.remux?!!f.remux:!0;this.pendingTracks=[];this.videoTrack=null;this.pendingBoxes=[];this.pendingCaptions=[];this.pendingMetadata=[];this.emittedTracks=this.pendingBytes=0;Jc.prototype.init.call(this);this.push=function(f){if(f.text)return this.pendingCaptions.push(f);if(f.frames)return this.pendingMetadata.push(f);this.pendingTracks.push(f.track);this.pendingBoxes.push(f.boxes);this.pendingBytes+=f.boxes.byteLength;"video"===f.track.type&&(this.videoTrack=f.track);"audio"===
f.track.type&&(this.audioTrack=f.track)}};Jc.prototype=new ra;Jc.prototype.flush=function(f){var b=0,g={captions:[],captionStreams:{},metadata:[],info:{}},a=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==f&&"AudioSegmentStream"!==f||this.remuxTracks)return;if(0===this.pendingTracks.length){this.emittedTracks++;this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}this.videoTrack?(a=this.videoTrack.timelineStartInfo.pts,We.forEach(function(a){g.info[a]=
this.videoTrack[a]},this)):this.audioTrack&&(a=this.audioTrack.timelineStartInfo.pts,Ve.forEach(function(a){g.info[a]=this.audioTrack[a]},this));g.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined";this.emittedTracks+=this.pendingTracks.length;f=Gc.initSegment(this.pendingTracks);g.initSegment=new Uint8Array(f.byteLength);g.initSegment.set(f);g.data=new Uint8Array(this.pendingBytes);for(f=0;f<this.pendingBoxes.length;f++)g.data.set(this.pendingBoxes[f],b),b+=this.pendingBoxes[f].byteLength;
for(f=0;f<this.pendingCaptions.length;f++)b=this.pendingCaptions[f],b.startTime=b.startPts-a,b.startTime/=9E4,b.endTime=b.endPts-a,b.endTime/=9E4,g.captionStreams[b.stream]=!0,g.captions.push(b);for(f=0;f<this.pendingMetadata.length;f++)b=this.pendingMetadata[f],b.cueTime=b.pts-a,b.cueTime/=9E4,g.metadata.push(b);g.metadata.dispatchType=this.metadataStream.dispatchType;this.pendingTracks.length=0;this.videoTrack=null;this.pendingBoxes.length=0;this.pendingBytes=this.pendingCaptions.length=0;this.pendingMetadata.length=
0;this.trigger("data",g);this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)};var Xe=function(f){var b=this,g=!0,a,l;Xe.prototype.init.call(this);f=f||{};this.baseMediaDecodeTime=f.baseMediaDecodeTime||0;this.transmuxPipeline_={};this.setupAacPipeline=function(){var a={};this.transmuxPipeline_=a;a.type="aac";a.metadataStream=new Ua.MetadataStream;a.aacStream=new kl;a.audioTimestampRolloverStream=new Ua.TimestampRolloverStream("audio");a.timedMetadataTimestampRolloverStream=
new Ua.TimestampRolloverStream("timed-metadata");a.adtsStream=new Uh;a.coalesceStream=new Jc(f,a.metadataStream);a.headOfPipeline=a.aacStream;a.aacStream.pipe(a.audioTimestampRolloverStream).pipe(a.adtsStream);a.aacStream.pipe(a.timedMetadataTimestampRolloverStream).pipe(a.metadataStream).pipe(a.coalesceStream);a.metadataStream.on("timestamp",function(f){a.aacStream.setTimestamp(f.timeStamp)});a.aacStream.on("data",function(g){"timed-metadata"!==g.type||a.audioSegmentStream||(l=l||{timelineStartInfo:{baseMediaDecodeTime:b.baseMediaDecodeTime},
codec:"adts",type:"audio"},a.coalesceStream.numberOfTracks++,a.audioSegmentStream=new Ic(l,f),a.adtsStream.pipe(a.audioSegmentStream).pipe(a.coalesceStream))});a.coalesceStream.on("data",this.trigger.bind(this,"data"));a.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setupTsPipeline=function(){var g={};this.transmuxPipeline_=g;g.type="ts";g.metadataStream=new Ua.MetadataStream;g.packetStream=new Ua.TransportPacketStream;g.parseStream=new Ua.TransportParseStream;g.elementaryStream=
new Ua.ElementaryStream;g.videoTimestampRolloverStream=new Ua.TimestampRolloverStream("video");g.audioTimestampRolloverStream=new Ua.TimestampRolloverStream("audio");g.timedMetadataTimestampRolloverStream=new Ua.TimestampRolloverStream("timed-metadata");g.adtsStream=new Uh;g.h264Stream=new ml;g.captionStream=new Ua.CaptionStream;g.coalesceStream=new Jc(f,g.metadataStream);g.headOfPipeline=g.packetStream;g.packetStream.pipe(g.parseStream).pipe(g.elementaryStream);g.elementaryStream.pipe(g.videoTimestampRolloverStream).pipe(g.h264Stream);
g.elementaryStream.pipe(g.audioTimestampRolloverStream).pipe(g.adtsStream);g.elementaryStream.pipe(g.timedMetadataTimestampRolloverStream).pipe(g.metadataStream).pipe(g.coalesceStream);g.h264Stream.pipe(g.captionStream).pipe(g.coalesceStream);g.elementaryStream.on("data",function(t){var z;if("metadata"===t.type){for(z=t.tracks.length;z--;)a||"video"!==t.tracks[z].type?l||"audio"!==t.tracks[z].type||(l=t.tracks[z],l.timelineStartInfo.baseMediaDecodeTime=b.baseMediaDecodeTime):(a=t.tracks[z],a.timelineStartInfo.baseMediaDecodeTime=
b.baseMediaDecodeTime);a&&!g.videoSegmentStream&&(g.coalesceStream.numberOfTracks++,g.videoSegmentStream=new td(a,f),g.videoSegmentStream.on("timelineStartInfo",function(a){l&&(l.timelineStartInfo=a,g.audioSegmentStream.setEarliestDts(a.dts))}),g.videoSegmentStream.on("processedGopsInfo",b.trigger.bind(b,"gopInfo")),g.videoSegmentStream.on("baseMediaDecodeTime",function(a){l&&g.audioSegmentStream.setVideoBaseMediaDecodeTime(a)}),g.h264Stream.pipe(g.videoSegmentStream).pipe(g.coalesceStream));l&&!g.audioSegmentStream&&
(g.coalesceStream.numberOfTracks++,g.audioSegmentStream=new Ic(l,f),g.adtsStream.pipe(g.audioSegmentStream).pipe(g.coalesceStream))}});g.coalesceStream.on("data",this.trigger.bind(this,"data"));g.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setBaseMediaDecodeTime=function(f){var b=this.transmuxPipeline_;this.baseMediaDecodeTime=f;l&&(l.timelineStartInfo.dts=void 0,l.timelineStartInfo.pts=void 0,$a.clearDtsInfo(l),l.timelineStartInfo.baseMediaDecodeTime=f,b.audioTimestampRolloverStream&&
b.audioTimestampRolloverStream.discontinuity());a&&(b.videoSegmentStream&&(b.videoSegmentStream.gopCache_=[],b.videoTimestampRolloverStream.discontinuity()),a.timelineStartInfo.dts=void 0,a.timelineStartInfo.pts=void 0,$a.clearDtsInfo(a),b.captionStream.reset(),a.timelineStartInfo.baseMediaDecodeTime=f);b.timedMetadataTimestampRolloverStream&&b.timedMetadataTimestampRolloverStream.discontinuity()};this.setAudioAppendStart=function(a){l&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(a)};
this.alignGopsWith=function(f){a&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(f)};this.push=function(a){if(g){var f=nl(a);f&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():f||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline();g=!1}this.transmuxPipeline_.headOfPipeline.push(a)};this.flush=function(){g=!0;this.transmuxPipeline_.headOfPipeline.flush()};this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}};
Xe.prototype=new ra;var Jb={Transmuxer:Xe,VideoSegmentStream:td,AudioSegmentStream:Ic,AUDIO_PROPERTIES:Ve,VIDEO_PROPERTIES:We};Object.freeze({default:Jb,__moduleExports:Jb,Transmuxer:Jb.Transmuxer,VideoSegmentStream:Jb.VideoSegmentStream,AudioSegmentStream:Jb.AudioSegmentStream,AUDIO_PROPERTIES:Jb.AUDIO_PROPERTIES,VIDEO_PROPERTIES:Jb.VIDEO_PROPERTIES});var ud=Za.parseType,Oa=function(f){return new Date(1E3*f-20828448E5)},Xh=function(f){return{isLeading:(f[0]&12)>>>2,dependsOn:f[0]&3,isDependedOn:(f[1]&
192)>>>6,hasRedundancy:(f[1]&48)>>>4,paddingValue:(f[1]&14)>>>1,isNonSyncSample:f[1]&1,degradationPriority:f[2]<<8|f[3]}},bc={avc1:function(f){var b=new DataView(f.buffer,f.byteOffset,f.byteLength);return{dataReferenceIndex:b.getUint16(6),width:b.getUint16(24),height:b.getUint16(26),horizresolution:b.getUint16(28)+b.getUint16(30)/16,vertresolution:b.getUint16(32)+b.getUint16(34)/16,frameCount:b.getUint16(40),depth:b.getUint16(74),config:sa(f.subarray(78,f.byteLength))}},avcC:function(f){var b=new DataView(f.buffer,
f.byteOffset,f.byteLength),g={configurationVersion:f[0],avcProfileIndication:f[1],profileCompatibility:f[2],avcLevelIndication:f[3],lengthSizeMinusOne:f[4]&3,sps:[],pps:[]},a=f[5]&31,l;var t=6;for(l=0;l<a;l++){var z=b.getUint16(t);t+=2;g.sps.push(new Uint8Array(f.subarray(t,t+z)));t+=z}a=f[t];t++;for(l=0;l<a;l++)z=b.getUint16(t),t+=2,g.pps.push(new Uint8Array(f.subarray(t,t+z))),t+=z;return g},btrt:function(f){f=new DataView(f.buffer,f.byteOffset,f.byteLength);return{bufferSizeDB:f.getUint32(0),maxBitrate:f.getUint32(4),
avgBitrate:f.getUint32(8)}},esds:function(f){return{version:f[0],flags:new Uint8Array(f.subarray(1,4)),esId:f[6]<<8|f[7],streamPriority:f[8]&31,decoderConfig:{objectProfileIndication:f[11],streamType:f[12]>>>2&63,bufferSize:f[13]<<16|f[14]<<8|f[15],maxBitrate:f[16]<<24|f[17]<<16|f[18]<<8|f[19],avgBitrate:f[20]<<24|f[21]<<16|f[22]<<8|f[23],decoderConfigDescriptor:{tag:f[24],length:f[25],audioObjectType:f[26]>>>3&31,samplingFrequencyIndex:(f[26]&7)<<1|f[27]>>>7&1,channelConfiguration:f[27]>>>3&15}}}},
ftyp:function(f){var b=new DataView(f.buffer,f.byteOffset,f.byteLength);b={majorBrand:ud(f.subarray(0,4)),minorVersion:b.getUint32(4),compatibleBrands:[]};for(var g=8;g<f.byteLength;)b.compatibleBrands.push(ud(f.subarray(g,g+4))),g+=4;return b},dinf:function(f){return{boxes:sa(f)}},dref:function(f){return{version:f[0],flags:new Uint8Array(f.subarray(1,4)),dataReferences:sa(f.subarray(8))}},hdlr:function(f){var b={version:(new DataView(f.buffer,f.byteOffset,f.byteLength)).getUint8(0),flags:new Uint8Array(f.subarray(1,
4)),handlerType:ud(f.subarray(8,12)),name:""},g;for(g=24;g<f.byteLength&&0!==f[g];g++)b.name+=String.fromCharCode(f[g]);b.name=decodeURIComponent(escape(b.name));return b},mdat:function(f){var b=f.byteLength,g=new DataView(f.buffer,f.byteOffset,f.byteLength),a=[],l;for(l=0;l+4<f.length;l+=t){var t=g.getUint32(l);l+=4;if(0>=t)a.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(f[l]&31){case 1:a.push("slice_layer_without_partitioning_rbsp");break;case 5:a.push("slice_layer_without_partitioning_rbsp_idr");
break;case 6:a.push("sei_rbsp");break;case 7:a.push("seq_parameter_set_rbsp");break;case 8:a.push("pic_parameter_set_rbsp");break;case 9:a.push("access_unit_delimiter_rbsp");break;default:a.push("UNKNOWN NAL - "+f[l]&31)}}return{byteLength:b,nals:a}},mdhd:function(f){var b=new DataView(f.buffer,f.byteOffset,f.byteLength),g=4;f={version:b.getUint8(0),flags:new Uint8Array(f.subarray(1,4)),language:""};1===f.version?(g+=4,f.creationTime=Oa(b.getUint32(g)),g+=8,f.modificationTime=Oa(b.getUint32(g)),g+=
4,f.timescale=b.getUint32(g),g+=8):(f.creationTime=Oa(b.getUint32(g)),g+=4,f.modificationTime=Oa(b.getUint32(g)),g+=4,f.timescale=b.getUint32(g),g+=4);f.duration=b.getUint32(g);b=b.getUint16(g+4);f.language+=String.fromCharCode((b>>10)+96);f.language+=String.fromCharCode(((b&992)>>5)+96);f.language+=String.fromCharCode((b&31)+96);return f},mdia:function(f){return{boxes:sa(f)}},mfhd:function(f){return{version:f[0],flags:new Uint8Array(f.subarray(1,4)),sequenceNumber:f[4]<<24|f[5]<<16|f[6]<<8|f[7]}},
minf:function(f){return{boxes:sa(f)}},mp4a:function(f){var b=new DataView(f.buffer,f.byteOffset,f.byteLength);b={dataReferenceIndex:b.getUint16(6),channelcount:b.getUint16(16),samplesize:b.getUint16(18),samplerate:b.getUint16(24)+b.getUint16(26)/65536};28<f.byteLength&&(b.streamDescriptor=sa(f.subarray(28))[0]);return b},moof:function(f){return{boxes:sa(f)}},moov:function(f){return{boxes:sa(f)}},mvex:function(f){return{boxes:sa(f)}},mvhd:function(f){var b=new DataView(f.buffer,f.byteOffset,f.byteLength),
g=4,a={version:b.getUint8(0),flags:new Uint8Array(f.subarray(1,4))};1===a.version?(g+=4,a.creationTime=Oa(b.getUint32(g)),g+=8,a.modificationTime=Oa(b.getUint32(g)),g+=4,a.timescale=b.getUint32(g),g+=8):(a.creationTime=Oa(b.getUint32(g)),g+=4,a.modificationTime=Oa(b.getUint32(g)),g+=4,a.timescale=b.getUint32(g),g+=4);a.duration=b.getUint32(g);g+=4;a.rate=b.getUint16(g)+b.getUint16(g+2)/16;g+=4;a.volume=b.getUint8(g)+b.getUint8(g+1)/8;g=g+2+2+8;a.matrix=new Uint32Array(f.subarray(g,g+36));a.nextTrackId=
b.getUint32(g+36+24);return a},pdin:function(f){var b=new DataView(f.buffer,f.byteOffset,f.byteLength);return{version:b.getUint8(0),flags:new Uint8Array(f.subarray(1,4)),rate:b.getUint32(4),initialDelay:b.getUint32(8)}},sdtp:function(f){var b={version:f[0],flags:new Uint8Array(f.subarray(1,4)),samples:[]},g;for(g=4;g<f.byteLength;g++)b.samples.push({dependsOn:(f[g]&48)>>4,isDependedOn:(f[g]&12)>>2,hasRedundancy:f[g]&3});return b},sidx:function(f){var b=new DataView(f.buffer,f.byteOffset,f.byteLength),
g={version:f[0],flags:new Uint8Array(f.subarray(1,4)),references:[],referenceId:b.getUint32(4),timescale:b.getUint32(8),earliestPresentationTime:b.getUint32(12),firstOffset:b.getUint32(16)},a=b.getUint16(22),l;for(l=24;a;l+=12,a--)g.references.push({referenceType:(f[l]&128)>>>7,referencedSize:b.getUint32(l)&2147483647,subsegmentDuration:b.getUint32(l+4),startsWithSap:!!(f[l+8]&128),sapType:(f[l+8]&112)>>>4,sapDeltaTime:b.getUint32(l+8)&268435455});return g},smhd:function(f){return{version:f[0],flags:new Uint8Array(f.subarray(1,
4)),balance:f[4]+f[5]/256}},stbl:function(f){return{boxes:sa(f)}},stco:function(f){var b=new DataView(f.buffer,f.byteOffset,f.byteLength);f={version:f[0],flags:new Uint8Array(f.subarray(1,4)),chunkOffsets:[]};var g=b.getUint32(4),a;for(a=8;g;a+=4,g--)f.chunkOffsets.push(b.getUint32(a));return f},stsc:function(f){var b=new DataView(f.buffer,f.byteOffset,f.byteLength),g=b.getUint32(4);f={version:f[0],flags:new Uint8Array(f.subarray(1,4)),sampleToChunks:[]};var a;for(a=8;g;a+=12,g--)f.sampleToChunks.push({firstChunk:b.getUint32(a),
samplesPerChunk:b.getUint32(a+4),sampleDescriptionIndex:b.getUint32(a+8)});return f},stsd:function(f){return{version:f[0],flags:new Uint8Array(f.subarray(1,4)),sampleDescriptions:sa(f.subarray(8))}},stsz:function(f){var b=new DataView(f.buffer,f.byteOffset,f.byteLength),g={version:f[0],flags:new Uint8Array(f.subarray(1,4)),sampleSize:b.getUint32(4),entries:[]},a;for(a=12;a<f.byteLength;a+=4)g.entries.push(b.getUint32(a));return g},stts:function(f){var b=new DataView(f.buffer,f.byteOffset,f.byteLength);
f={version:f[0],flags:new Uint8Array(f.subarray(1,4)),timeToSamples:[]};var g=b.getUint32(4),a;for(a=8;g;a+=8,g--)f.timeToSamples.push({sampleCount:b.getUint32(a),sampleDelta:b.getUint32(a+4)});return f},styp:function(f){return bc.ftyp(f)},tfdt:function(f){var b={version:f[0],flags:new Uint8Array(f.subarray(1,4)),baseMediaDecodeTime:f[4]<<24|f[5]<<16|f[6]<<8|f[7]};1===b.version&&(b.baseMediaDecodeTime*=Math.pow(2,32),b.baseMediaDecodeTime+=f[8]<<24|f[9]<<16|f[10]<<8|f[11]);return b},tfhd:function(f){var b=
new DataView(f.buffer,f.byteOffset,f.byteLength);f={version:f[0],flags:new Uint8Array(f.subarray(1,4)),trackId:b.getUint32(4)};var g=f.flags[2]&1,a=f.flags[2]&2,l=f.flags[2]&8,t=f.flags[2]&16,z=f.flags[2]&32,e=f.flags[0]&65536,h=f.flags[0]&131072;var m=8;g&&(m+=4,f.baseDataOffset=b.getUint32(12),m+=4);a&&(f.sampleDescriptionIndex=b.getUint32(m),m+=4);l&&(f.defaultSampleDuration=b.getUint32(m),m+=4);t&&(f.defaultSampleSize=b.getUint32(m),m+=4);z&&(f.defaultSampleFlags=b.getUint32(m));e&&(f.durationIsEmpty=
!0);!g&&h&&(f.baseDataOffsetIsMoof=!0);return f},tkhd:function(f){var b=new DataView(f.buffer,f.byteOffset,f.byteLength),g=4,a={version:b.getUint8(0),flags:new Uint8Array(f.subarray(1,4))};1===a.version?(g+=4,a.creationTime=Oa(b.getUint32(g)),g+=8,a.modificationTime=Oa(b.getUint32(g)),g+=4,a.trackId=b.getUint32(g),g=g+4+8):(a.creationTime=Oa(b.getUint32(g)),g+=4,a.modificationTime=Oa(b.getUint32(g)),g+=4,a.trackId=b.getUint32(g),g=g+4+4);a.duration=b.getUint32(g);g=g+4+8;a.layer=b.getUint16(g);g+=
2;a.alternateGroup=b.getUint16(g);g+=2;a.volume=b.getUint8(g)+b.getUint8(g+1)/8;g=g+2+2;a.matrix=new Uint32Array(f.subarray(g,g+36));g+=36;a.width=b.getUint16(g)+b.getUint16(g+2)/16;g+=4;a.height=b.getUint16(g)+b.getUint16(g+2)/16;return a},traf:function(f){return{boxes:sa(f)}},trak:function(f){return{boxes:sa(f)}},trex:function(f){var b=new DataView(f.buffer,f.byteOffset,f.byteLength);return{version:f[0],flags:new Uint8Array(f.subarray(1,4)),trackId:b.getUint32(4),defaultSampleDescriptionIndex:b.getUint32(8),
defaultSampleDuration:b.getUint32(12),defaultSampleSize:b.getUint32(16),sampleDependsOn:f[20]&3,sampleIsDependedOn:(f[21]&192)>>6,sampleHasRedundancy:(f[21]&48)>>4,samplePaddingValue:(f[21]&14)>>1,sampleIsDifferenceSample:!!(f[21]&1),sampleDegradationPriority:b.getUint16(22)}},trun:function(f){var b={version:f[0],flags:new Uint8Array(f.subarray(1,4)),samples:[]},g=new DataView(f.buffer,f.byteOffset,f.byteLength),a=b.flags[2]&1,l=b.flags[2]&4,t=b.flags[1]&1,z=b.flags[1]&2,e=b.flags[1]&4,h=b.flags[1]&
8,m=g.getUint32(4),p=8;a&&(b.dataOffset=g.getInt32(p),p+=4);l&&m&&(a={flags:Xh(f.subarray(p,p+4))},p+=4,t&&(a.duration=g.getUint32(p),p+=4),z&&(a.size=g.getUint32(p),p+=4),h&&(a.compositionTimeOffset=g.getUint32(p),p+=4),b.samples.push(a),m--);for(;m--;)a={},t&&(a.duration=g.getUint32(p),p+=4),z&&(a.size=g.getUint32(p),p+=4),e&&(a.flags=Xh(f.subarray(p,p+4)),p+=4),h&&(a.compositionTimeOffset=g.getUint32(p),p+=4),b.samples.push(a);return b},"url ":function(f){return{version:f[0],flags:new Uint8Array(f.subarray(1,
4))}},vmhd:function(f){var b=new DataView(f.buffer,f.byteOffset,f.byteLength);return{version:f[0],flags:new Uint8Array(f.subarray(1,4)),graphicsmode:b.getUint16(4),opcolor:new Uint16Array([b.getUint16(6),b.getUint16(8),b.getUint16(10)])}}};var sa=function(f){var b=0,g=[],a;var l=new ArrayBuffer(f.length);var t=new Uint8Array(l);for(a=0;a<f.length;++a)t[a]=f[a];for(l=new DataView(l);b<f.byteLength;){t=l.getUint32(b);a=ud(f.subarray(b+4,b+8));var z=1<t?b+t:f.byteLength;b=(bc[a]||function(a){return{data:a}})(f.subarray(b+
8,z));b.size=t;b.type=a;g.push(b);b=z}return g};var Yh=function(f,b){b=b||0;var g=Array(2*b+1).join(" ");return f.map(function(a,f){return g+a.type+"\n"+Object.keys(a).filter(function(a){return"type"!==a&&"boxes"!==a}).map(function(f){var b=g+"  "+f+": ";f=a[f];return f instanceof Uint8Array||f instanceof Uint32Array?(f=Array.prototype.slice.call(new Uint8Array(f.buffer,f.byteOffset,f.byteLength)).map(function(a){return" "+("00"+a.toString(16)).slice(-2)}).join("").match(/.{1,24}/g))?1===f.length?
b+"<"+f.join("").slice(1)+">":b+"<\n"+f.map(function(a){return g+"  "+a}).join("\n")+"\n"+g+"  >":b+"<>":b+JSON.stringify(f,null,2).split("\n").map(function(a,f){return 0===f?a:g+"  "+a}).join("\n")}).join("\n")+(a.boxes?"\n"+Yh(a.boxes,b+1):"")}).join("\n")};var kb={inspect:sa,textify:Yh,parseTfdt:bc.tfdt,parseHdlr:bc.hdlr,parseTfhd:bc.tfhd,parseTrun:bc.trun},Zh=Object.freeze({default:kb,__moduleExports:kb,inspect:kb.inspect,textify:kb.textify,parseTfdt:kb.parseTfdt,parseHdlr:kb.parseHdlr,parseTfhd:kb.parseTfhd,
parseTrun:kb.parseTrun}),Ye=Zh&&kb||Zh,pl=yc.discardEmulationPreventionBytes,ql=Oe.CaptionStream,rl=function(f,b,g){var a=b,l=g.defaultSampleDuration||0,t=g.defaultSampleSize||0,z=g.trackId,e=[];f.forEach(function(f){f=Ye.parseTrun(f).samples;f.forEach(function(f){void 0===f.duration&&(f.duration=l);void 0===f.size&&(f.size=t);f.trackId=z;f.dts=a;void 0===f.compositionTimeOffset&&(f.compositionTimeOffset=0);f.pts=a+f.compositionTimeOffset;a+=f.duration});e=e.concat(f)});return e},sl=function(f,b){var g=
Za.findBox(f,["moof","traf"]),a={},l=[];Za.findBox(f,["mdat"]).forEach(function(a,f){l.push({mdat:a,traf:g[f]})});l.forEach(function(f){var l=f.mdat,g=f.traf;f=Za.findBox(g,["tfhd"]);var t=Ye.parseTfhd(f[0]);f=t.trackId;var e=Za.findBox(g,["tfdt"]);e=0<e.length?Ye.parseTfdt(e[0]).baseMediaDecodeTime:0;g=Za.findBox(g,["trun"]);if(b===f&&0<g.length){g=rl(g,e,t);t=new DataView(l.buffer,l.byteOffset,l.byteLength);e=[];var h;for(h=0;h+4<l.length;h+=m){var m=t.getUint32(h);h+=4;if(!(0>=m))switch(l[h]&31){case 6:var p=
l.subarray(h+1,h+1+m);a:{var r=h;for(var v=0;v<g.length;v++){var x=g[v];if(r<x.size){r=x;break a}r-=x.size}r=null}p={nalUnitType:"sei_rbsp",size:m,data:p,escapedRBSP:pl(p),trackId:f};if(r){p.pts=r.pts;p.dts=r.dts;var C=r}else p.pts=C.pts,p.dts=C.dts;e.push(p)}}a[f]||(a[f]=[]);a[f]=a[f].concat(e)}});return a},Ze=function(){var f=!1,b,g,a,l,t;this.isInitialized=function(){return f};this.init=function(){b=new ql;f=!0;b.on("data",function(a){a.startTime=a.startPts/l;a.endTime=a.endPts/l;t.captions.push(a);
t.captionStreams[a.stream]=!0})};this.isNewInit=function(f,b){return f&&0===f.length||b&&"object"===("undefined"===typeof b?"undefined":la(b))&&0===Object.keys(b).length?!1:a!==f[0]||l!==b[a]};this.parse=function(f,b,e){if(this.isInitialized()){if(!b||!e)return null;if(this.isNewInit(b,e))a=b[0],l=e[a];else if(!a||!l)return g.push(f),null}else return null;for(;0<g.length;){var z=g.shift();this.parse(z,b,e)}b=a;e=l;f=b?{seiNals:sl(f,b)[b],timescale:e}:null;if(null===f||!f.seiNals)return null;this.pushNals(f.seiNals);
this.flushStream();return t};this.pushNals=function(a){if(!this.isInitialized()||!a||0===a.length)return null;a.forEach(function(a){b.push(a)})};this.flushStream=function(){if(!this.isInitialized())return null;b.flush()};this.clearParsedCaptions=function(){t.captions=[];t.captionStreams={}};this.resetCaptionStream=function(){if(!this.isInitialized())return null;b.reset()};this.clearAllCaptions=function(){this.clearParsedCaptions();this.resetCaptionStream()};this.reset=function(){g=[];l=a=null;t?this.clearParsedCaptions():
t={captions:[],captionStreams:{}};this.resetCaptionStream()};this.reset()},$h=Object.freeze({default:Ze,__moduleExports:Ze}),tl=$h&&Ze||$h,ai=function(f){var b=f[1]&31;return b=b<<8|f[2]},vd=function(f){return!!(f[1]&64)},wd=function(f){var b=0;1<(f[3]&48)>>>4&&(b+=f[4]+1);return b},$e=function(f){switch(f){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";
default:return null}},ab={parseType:function(f,b){f=ai(f);return 0===f?"pat":f===b?"pmt":b?"pes":null},parsePat:function(f){var b=vd(f),g=4+wd(f);b&&(g+=f[g]+1);return(f[g+10]&31)<<8|f[g+11]},parsePmt:function(f){var b={},g=vd(f),a=4+wd(f);g&&(a+=f[a]+1);if(f[a+5]&1){g=3+((f[a+1]&15)<<8|f[a+2])-4;for(var l=12+((f[a+10]&15)<<8|f[a+11]);l<g;){var t=a+l;b[(f[t+1]&31)<<8|f[t+2]]=f[t];l+=((f[t+3]&15)<<8|f[t+4])+5}return b}},parsePayloadUnitStartIndicator:vd,parsePesType:function(f,b){f=ai(f);switch(b[f]){case oa.H264_STREAM_TYPE:return"video";
case oa.ADTS_STREAM_TYPE:return"audio";case oa.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(f){if(!vd(f))return null;var b=4+wd(f);if(b>=f.byteLength)return null;var g=null;var a=f[b+7];a&192&&(g={},g.pts=(f[b+9]&14)<<27|(f[b+10]&255)<<20|(f[b+11]&254)<<12|(f[b+12]&255)<<5|(f[b+13]&254)>>>3,g.pts*=4,g.pts+=(f[b+13]&6)>>>1,g.dts=g.pts,a&64&&(g.dts=(f[b+14]&14)<<27|(f[b+15]&255)<<20|(f[b+16]&254)<<12|(f[b+17]&255)<<5|(f[b+18]&254)>>>3,g.dts*=4,g.dts+=(f[b+
18]&6)>>>1));return g},videoPacketContainsKeyFrame:function(f){var b=4+wd(f);f=f.subarray(b);for(var g=b=0,a=!1;g<f.byteLength-3;g++)if(1===f[g+2]){b=g+5;break}for(;b<f.byteLength;)switch(f[b]){case 0:if(0!==f[b-1]){b+=2;break}else if(0!==f[b-2]){b++;break}g+3!==b-2&&(g=$e(f[g+3]&31),"slice_layer_without_partitioning_rbsp_idr"===g&&(a=!0));do b++;while(1!==f[b]&&b<f.length);g=b-2;b+=3;break;case 1:if(0!==f[b-1]||0!==f[b-2]){b+=3;break}g=$e(f[g+3]&31);"slice_layer_without_partitioning_rbsp_idr"===
g&&(a=!0);g=b-2;b+=3;break;default:b+=3}(f=f.subarray(g))&&3<f.byteLength&&(g=$e(f[3]&31),"slice_layer_without_partitioning_rbsp_idr"===g&&(a=!0));return a}},bi=Object.freeze({default:ab,__moduleExports:ab,parseType:ab.parseType,parsePat:ab.parsePat,parsePmt:ab.parsePmt,parsePayloadUnitStartIndicator:ab.parsePayloadUnitStartIndicator,parsePesType:ab.parsePesType,parsePesTime:ab.parsePesTime,videoPacketContainsKeyFrame:ab.videoPacketContainsKeyFrame}),ul=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,
16E3,12E3,11025,8E3,7350],ci=function(f){return f[0]<<21|f[1]<<14|f[2]<<7|f[3]},yb={parseId3TagSize:function(f,b){var g=f[b+6]<<21|f[b+7]<<14|f[b+8]<<7|f[b+9];return(f[b+5]&16)>>4?g+20:g+10},parseAdtsSize:function(f,b){return f[b+3]&6144|f[b+4]<<3|(f[b+5]&224)>>5},parseType:function(f,b){return 73===f[b]&&68===f[b+1]&&51===f[b+2]?"timed-metadata":f[b]&1&&240===(f[b+1]&240)?"audio":null},parseSampleRate:function(f){for(var b=0;b+5<f.length;)if(255!==f[b]||240!==(f[b+1]&246))b++;else return ul[(f[b+
2]&60)>>>2];return null},parseAacTimestamp:function(f){var b=10;f[5]&64&&(b=b+4+ci(f.subarray(10,14)));do{var g=ci(f.subarray(b+4,b+8));if(1>g)break;var a=String.fromCharCode(f[b],f[b+1],f[b+2],f[b+3]);if("PRIV"===a){a=f.subarray(b+10,b+g+10);for(var l=0;l<a.byteLength;l++)if(0===a[l]){var t=unescape,z,e=a,h=l,m="";for(z=0;z<h;z++)m+="%"+("00"+e[z].toString(16)).slice(-2);if("com.apple.streaming.transportStreamTimestamp"===t(m))return f=a.subarray(l+1),b=(f[3]&1)<<30|f[4]<<22|f[5]<<14|f[6]<<6|f[7]>>>
2,b*=4,b+=f[7]&3;break}}b+=10;b+=g}while(b<f.byteLength);return null}},di=Object.freeze({default:yb,__moduleExports:yb,parseId3TagSize:yb.parseId3TagSize,parseAdtsSize:yb.parseAdtsSize,parseType:yb.parseType,parseSampleRate:yb.parseSampleRate,parseAacTimestamp:yb.parseAacTimestamp}),Kc=di&&yb||di,cc=Hh.handleRollover;var ka=bi&&ab||bi;var vl=function(f,b){if(f.audio&&f.audio.length){var g=b;"undefined"===typeof g&&(g=f.audio[0].dts);f.audio.forEach(function(a){a.dts=cc(a.dts,g);a.pts=cc(a.pts,g);
a.dtsTime=a.dts/9E4;a.ptsTime=a.pts/9E4})}if(f.video&&f.video.length){var a=b;"undefined"===typeof a&&(a=f.video[0].dts);f.video.forEach(function(f){f.dts=cc(f.dts,a);f.pts=cc(f.pts,a);f.dtsTime=f.dts/9E4;f.ptsTime=f.pts/9E4});f.firstKeyFrame&&(f=f.firstKeyFrame,f.dts=cc(f.dts,a),f.pts=cc(f.pts,a),f.dtsTime=f.dts/9E4,f.ptsTime=f.dts/9E4)}},xd=function(f,b){if(!(f instanceof b))throw new TypeError("Cannot call a class as a function");},wl=function(){function f(f,g){for(var a=0;a<g.length;a++){var b=
g[a];b.enumerable=b.enumerable||!1;b.configurable=!0;"value"in b&&(b.writable=!0);Object.defineProperty(f,b.key,b)}}return function(b,g,a){g&&f(b.prototype,g);a&&f(b,a);return b}}(),xl=function(f,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof b?"undefined":la(b)));f.prototype=Object.create(b&&b.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(f,
b):f.__proto__=b)},Pa=null,yl=function(){function f(b){xd(this,f);if(!Pa){var g=[[[],[],[],[],[]],[[],[],[],[],[]]],a=g[0],l=g[1],t=a[4],z=l[4],e,h,m,p=[],r=[],v;for(e=0;256>e;e++)r[(p[e]=e<<1^283*(e>>7))^e]=e;for(h=m=0;!t[h];h^=v||1,m=r[m]||1){var x=m^m<<1^m<<2^m<<3^m<<4;x=x>>8^x&255^99;t[h]=x;z[x]=h;var C=p[e=p[v=p[h]]];var u=16843009*C^65537*e^257*v^16843008*h;C=257*p[x]^16843008*x;for(e=0;4>e;e++)a[e][h]=C=C<<24^C>>>8,l[e][x]=u=u<<24^u>>>8}for(e=0;5>e;e++)a[e]=a[e].slice(0),l[e]=l[e].slice(0);
Pa=g}this._tables=[[Pa[0][0].slice(),Pa[0][1].slice(),Pa[0][2].slice(),Pa[0][3].slice(),Pa[0][4].slice()],[Pa[1][0].slice(),Pa[1][1].slice(),Pa[1][2].slice(),Pa[1][3].slice(),Pa[1][4].slice()]];g=this._tables[0][4];a=this._tables[1];h=b.length;m=1;if(4!==h&&6!==h&&8!==h)throw Error("Invalid aes key size");t=b.slice(0);z=[];this._key=[t,z];for(b=h;b<4*h+28;b++){l=t[b-1];if(0===b%h||8===h&&4===b%h)l=g[l>>>24]<<24^g[l>>16&255]<<16^g[l>>8&255]<<8^g[l&255],0===b%h&&(l=l<<8^l>>>24^m<<24,m=m<<1^283*(m>>
7));t[b]=t[b-h]^l}for(h=0;b;h++,b--)l=t[h&3?b:b-4],z[h]=4>=b||4>h?l:a[0][g[l>>>24]]^a[1][g[l>>16&255]]^a[2][g[l>>8&255]]^a[3][g[l&255]]}f.prototype.decrypt=function(f,g,a,l,t,z){var b=this._key[1];f^=b[0];l^=b[1];a^=b[2];g^=b[3];var e=b.length/4-2,h,m=4;var p=this._tables[1];var r=p[0],v=p[1],x=p[2],C=p[3],u=p[4];for(h=0;h<e;h++){p=r[f>>>24]^v[l>>16&255]^x[a>>8&255]^C[g&255]^b[m];var F=r[l>>>24]^v[a>>16&255]^x[g>>8&255]^C[f&255]^b[m+1];var w=r[a>>>24]^v[g>>16&255]^x[f>>8&255]^C[l&255]^b[m+2];g=r[g>>>
24]^v[f>>16&255]^x[l>>8&255]^C[a&255]^b[m+3];m+=4;f=p;l=F;a=w}for(h=0;4>h;h++)t[(3&-h)+z]=u[f>>>24]<<24^u[l>>16&255]<<16^u[a>>8&255]<<8^u[g&255]^b[m++],p=f,f=l,l=a,a=g,g=p};return f}(),ei=function(){function f(){xd(this,f);this.listeners={}}f.prototype.on=function(f,g){this.listeners[f]||(this.listeners[f]=[]);this.listeners[f].push(g)};f.prototype.off=function(f,g){if(!this.listeners[f])return!1;g=this.listeners[f].indexOf(g);this.listeners[f].splice(g,1);return-1<g};f.prototype.trigger=function(f){var b=
this.listeners[f];if(b)if(2===arguments.length)for(var a=b.length,l=0;l<a;++l)b[l].call(this,arguments[1]);else{a=Array.prototype.slice.call(arguments,1);l=b.length;for(var t=0;t<l;++t)b[t].apply(this,a)}};f.prototype.dispose=function(){this.listeners={}};f.prototype.pipe=function(f){this.on("data",function(b){f.push(b)})};return f}(),fi=function(f){function b(){xd(this,b);var g=f.call(this,ei);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");g=!g||"object"!==
("undefined"===typeof g?"undefined":la(g))&&"function"!==typeof g?this:g;g.jobs=[];g.delay=1;g.timeout_=null;return g}xl(b,f);b.prototype.processJob_=function(){this.jobs.shift()();this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null};b.prototype.push=function(f){this.jobs.push(f);this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))};return b}(ei),Qa=function(f){return f<<24|(f&65280)<<8|(f&16711680)>>8|f>>>24},gi=function(f,b,g){var a=
new Int32Array(f.buffer,f.byteOffset,f.byteLength>>2);b=new yl(Array.prototype.slice.call(b));f=new Uint8Array(f.byteLength);var l=new Int32Array(f.buffer),t;var z=g[0];var e=g[1];var h=g[2];g=g[3];for(t=0;t<a.length;t+=4){var m=Qa(a[t]);var p=Qa(a[t+1]);var r=Qa(a[t+2]);var v=Qa(a[t+3]);b.decrypt(m,p,r,v,l,t);l[t]=Qa(l[t]^z);l[t+1]=Qa(l[t+1]^e);l[t+2]=Qa(l[t+2]^h);l[t+3]=Qa(l[t+3]^g);z=m;e=p;h=r;g=v}return f},zl=function(){function f(b,g,a,l){xd(this,f);var t=f.STEP,z=new Int32Array(b.buffer),e=
new Uint8Array(b.byteLength);b=0;this.asyncStream_=new fi;this.asyncStream_.push(this.decryptChunk_(z.subarray(b,b+t),g,a,e));for(b=t;b<z.length;b+=t)a=new Uint32Array([Qa(z[b-4]),Qa(z[b-3]),Qa(z[b-2]),Qa(z[b-1])]),this.asyncStream_.push(this.decryptChunk_(z.subarray(b,b+t),g,a,e));this.asyncStream_.push(function(){l(null,e.subarray(0,e.byteLength-e[e.byteLength-1]))})}f.prototype.decryptChunk_=function(f,g,a,l){return function(){var b=gi(f,g,a);l.set(b,f.byteOffset)}};wl(f,null,[{key:"STEP",get:function(){return 32E3}}]);
return f}(),lb=function(f,b){if(/^[a-z]+:/i.test(b))return b;/\/\//i.test(f)||(f=id.buildAbsoluteURL(E.location.href,f));return id.buildAbsoluteURL(f,b)},Ra=function(f,b){if(!(f instanceof b))throw new TypeError("Cannot call a class as a function");},Va=function(){function f(f,g){for(var a=0;a<g.length;a++){var b=g[a];b.enumerable=b.enumerable||!1;b.configurable=!0;"value"in b&&(b.writable=!0);Object.defineProperty(f,b.key,b)}}return function(b,g,a){g&&f(b.prototype,g);a&&f(b,a);return b}}(),Al=function l(b,
g,a){null===b&&(b=Function.prototype);var t=Object.getOwnPropertyDescriptor(b,g);if(void 0===t){if(b=Object.getPrototypeOf(b),null!==b)return l(b,g,a)}else{if("value"in t)return t.value;g=t.get;return void 0===g?void 0:g.call(a)}},mb=function(b,g){if("function"!==typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof g?"undefined":la(g)));b.prototype=Object.create(g&&g.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});
g&&(Object.setPrototypeOf?Object.setPrototypeOf(b,g):b.__proto__=g)},bb=function(b,g){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!g||"object"!==("undefined"===typeof g?"undefined":la(g))&&"function"!==typeof g?b:g},Bl=function(){return function(b,g){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b)){var a=[],l=!0,t=!1,z=void 0;try{for(var e=b[Symbol.iterator](),h;!(l=(h=e.next()).done)&&(a.push(h.value),!g||a.length!==g);l=!0);}catch(Fd){t=
!0,z=Fd}finally{try{if(!l&&e["return"])e["return"]()}finally{if(t)throw z;}}return a}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),af=D.mergeOptions,Cl=D.log,bf=function(b,g){["AUDIO","SUBTITLES"].forEach(function(a){for(var l in b.mediaGroups[a])for(var t in b.mediaGroups[a][l])g(b.mediaGroups[a][l][t],a,l,t)})},Dl=function(b,g,a){var l=g.slice();a=a||0;g=Math.min(b.length,g.length+a);for(var t=a;t<g;t++)l[t-a]=af(b[t],l[t-a]);return l},cf=function(b,g){b=af(b,
{});var a=b.playlists[g.uri];if(!a||a.segments&&g.segments&&a.segments.length===g.segments.length&&a.mediaSequence===g.mediaSequence)return null;var l=af(a,g);a.segments&&(l.segments=Dl(a.segments,g.segments,g.mediaSequence-a.mediaSequence));l.segments.forEach(function(a){var b=l.resolvedUri;a.resolvedUri||(a.resolvedUri=lb(b,a.uri));a.key&&!a.key.resolvedUri&&(a.key.resolvedUri=lb(b,a.key.uri));a.map&&!a.map.resolvedUri&&(a.map.resolvedUri=lb(b,a.map.uri))});for(a=0;a<b.playlists.length;a++)b.playlists[a].uri===
g.uri&&(b.playlists[a]=l);b.playlists[g.uri]=l;return b},hi=function(b){for(var g=b.playlists.length;g--;){var a=b.playlists[g];b.playlists[a.uri]=a;a.resolvedUri=lb(b.uri,a.uri);a.id=g;a.attributes||(a.attributes={},Cl.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute."))}},ii=function(b){bf(b,function(g){g.uri&&(g.resolvedUri=lb(b.uri,g.uri))})},ji=function(b,g){var a=b.segments[b.segments.length-1];return g&&a&&a.duration?1E3*a.duration:500*(b.targetDuration||10)},yd=function(b){function g(a,
b,t){Ra(this,g);var l=bb(this,(g.__proto__||Object.getPrototypeOf(g)).call(this));l.srcUrl=a;l.hls_=b;l.withCredentials=t;if(!l.srcUrl)throw Error("A non-empty playlist URL is required");l.state="HAVE_NOTHING";l.on("mediaupdatetimeout",function(){"HAVE_METADATA"===l.state&&(l.state="HAVE_CURRENT_METADATA",l.request=l.hls_.xhr({uri:lb(l.master.uri,l.media().uri),withCredentials:l.withCredentials},function(a,b){if(l.request){if(a)return l.playlistRequestError(l.request,l.media().uri,"HAVE_METADATA");
l.haveMetadata(l.request,l.media().uri)}}))});return l}mb(g,b);Va(g,[{key:"playlistRequestError",value:function(a,b,g){this.request=null;g&&(this.state=g);this.error={playlist:this.master.playlists[b],status:a.status,message:"HLS playlist request error at URL: "+b,responseText:a.responseText,code:500<=a.status?4:2};this.trigger("error")}},{key:"haveMetadata",value:function(a,b){var l=this;this.request=null;this.state="HAVE_METADATA";var g=new Zg;g.push(a.responseText);g.end();g.manifest.uri=b;g.manifest.attributes=
g.manifest.attributes||{};a=cf(this.master,g.manifest);this.targetDuration=g.manifest.targetDuration;a?(this.master=a,this.media_=this.master.playlists[g.manifest.uri]):this.trigger("playlistunchanged");this.media().endList||(E.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=E.setTimeout(function(){l.trigger("mediaupdatetimeout")},ji(this.media(),!!a)));this.trigger("loadedplaylist")}},{key:"dispose",value:function(){this.stopRequest();E.clearTimeout(this.mediaUpdateTimeout)}},{key:"stopRequest",
value:function(){if(this.request){var a=this.request;this.request=null;a.onreadystatechange=null;a.abort()}}},{key:"media",value:function(a){var b=this;if(!a)return this.media_;if("HAVE_NOTHING"===this.state)throw Error("Cannot switch media playlist from "+this.state);var g=this.state;if("string"===typeof a){if(!this.master.playlists[a])throw Error("Unknown playlist URI: "+a);a=this.master.playlists[a]}var z=!this.media_||a.uri!==this.media_.uri;if(this.master.playlists[a.uri].endList)this.request&&
(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=a,z&&(this.trigger("mediachanging"),this.trigger("mediachange"));else if(z){this.state="SWITCHING_MEDIA";if(this.request){if(lb(this.master.uri,a.uri)===this.request.url)return;this.request.onreadystatechange=null;this.request.abort();this.request=null}this.media_&&this.trigger("mediachanging");this.request=this.hls_.xhr({uri:lb(this.master.uri,a.uri),withCredentials:this.withCredentials},
function(l,t){if(b.request){if(l)return b.playlistRequestError(b.request,a.uri,g);b.haveMetadata(t,a.uri);"HAVE_MASTER"===g?b.trigger("loadedmetadata"):b.trigger("mediachange")}})}}},{key:"pause",value:function(){this.stopRequest();E.clearTimeout(this.mediaUpdateTimeout);"HAVE_NOTHING"===this.state&&(this.started=!1);"SWITCHING_MEDIA"===this.state?this.state=this.media_?"HAVE_METADATA":"HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}},{key:"load",value:function(a){var b=
this;E.clearTimeout(this.mediaUpdateTimeout);var g=this.media();a?this.mediaUpdateTimeout=E.setTimeout(function(){return b.load()},g?g.targetDuration/2*1E3:5E3):this.started?g&&!g.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}},{key:"start",value:function(){var a=this;this.started=!0;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(b,g){if(a.request){a.request=null;if(b)return a.error={status:g.status,message:"HLS playlist request error at URL: "+
a.srcUrl,responseText:g.responseText,code:2},"HAVE_NOTHING"===a.state&&(a.started=!1),a.trigger("error");b=new Zg;b.push(g.responseText);b.end();a.state="HAVE_MASTER";b.manifest.uri=a.srcUrl;if(b.manifest.playlists)a.master=b.manifest,hi(a.master),ii(a.master),a.trigger("loadedplaylist"),a.request||a.media(b.manifest.playlists[0]);else return a.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:E.location.href,playlists:[{uri:a.srcUrl,id:0}]},a.master.playlists[a.srcUrl]=
a.master.playlists[0],a.master.playlists[0].resolvedUri=a.srcUrl,a.master.playlists[0].attributes=a.master.playlists[0].attributes||{},a.haveMetadata(g,a.srcUrl),a.trigger("loadedmetadata")}})}}]);return g}(D.EventTarget),ki=D.createTimeRange,El=function(b,g){var a=0;g-=b.mediaSequence;var l=b.segments[g];if(l){if("undefined"!==typeof l.start)return{result:l.start,precise:!0};if("undefined"!==typeof l.end)return{result:l.end-l.duration,precise:!0}}for(;g--;){l=b.segments[g];if("undefined"!==typeof l.end)return{result:a+
l.end,precise:!0};a+=l.duration;if("undefined"!==typeof l.start)return{result:a+l.start,precise:!0}}return{result:a,precise:!1}},li=function(b,g,a){"undefined"===typeof g&&(g=b.mediaSequence+b.segments.length);if(g<b.mediaSequence)return 0;var l=El(b,g);if(l.precise)return l.result;a:{var t=0;for(var z=g-b.mediaSequence;z<b.segments.length;z++){g=b.segments[z];if("undefined"!==typeof g.start){b=g.start-t;t=!0;break a}t+=g.duration;if("undefined"!==typeof g.end){b=g.end-t;t=!0;break a}}b=-1;t=!1}return t?
b:l.result+a},mi=function(b,g,a){if(!b)return 0;"number"!==typeof a&&(a=0);if("undefined"===typeof g){if(b.totalDuration)return b.totalDuration;if(!b.endList)return E.Infinity}return li(b,g,a)},Lc=function(b,g,a){var l=0;g>a&&(a=[a,g],g=a[0],a=a[1]);if(0>g){for(;g<Math.min(0,a);g++)l+=b.targetDuration;g=0}for(;g<a;g++)l+=b.segments[g].duration;return l},ni=function(b){if(!b.segments.length)return 0;for(var g=b.segments.length-1,a=b.segments[g].duration||b.targetDuration,l=a+2*b.targetDuration;g--&&
!(a+=b.segments[g].duration,a>=l););return Math.max(0,g)},oi=function(b,g,a){if(!b||!b.segments)return null;if(b.endList)return mi(b);if(null===g)return null;g=g||0;a=a?ni(b):b.segments.length;return li(b,b.mediaSequence+a,g)},pi=function(b,g){if(0===g-Math.floor(g))return g+.1*b;for(var a=g.toString().split(".")[1].length,l=1;l<=a;l++){var t=Math.pow(10,l),z=g*t;if(0===z-Math.floor(z)||l===a)return(z+b)/t}},Fl=pi.bind(null,1),Gl=pi.bind(null,-1),qi=function(b){return b.excludeUntil&&b.excludeUntil>
Date.now()},df=function(b){return b.excludeUntil&&Infinity===b.excludeUntil},zd=function(b){var g=qi(b);return!b.disabled&&!g},ri=function(b,g){return g.attributes&&g.attributes[b]},ef=function(b,g){if(1===b.playlists.length)return!0;var a=g.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===b.playlists.filter(function(b){return zd(b)?(b.attributes.BANDWIDTH||0)<a:!1}).length},La={duration:mi,seekable:function(b,g){var a=g||0;b=oi(b,g,!0);return null===b?ki():ki(a,b)},safeLiveIndex:ni,getMediaInfoForTime:function(b,
g,a,l){var t,z=b.segments.length,e=g-l;if(0>e){if(0<a)for(t=a-1;0<=t;t--){var h=b.segments[t];e+=Gl(h.duration);if(0<e)return{mediaIndex:t,startTime:l-Lc(b,a,t)}}return{mediaIndex:0,startTime:g}}if(0>a){for(t=a;0>t;t++)if(e-=b.targetDuration,0>e)return{mediaIndex:0,startTime:g};a=0}for(t=a;t<z;t++)if(h=b.segments[t],e-=Fl(h.duration),0>e)return{mediaIndex:t,startTime:l+Lc(b,a,t)};return{mediaIndex:z-1,startTime:g}},isEnabled:zd,isDisabled:function(b){return b.disabled},isBlacklisted:qi,isIncompatible:df,
playlistEnd:oi,isAes:function(b){for(var g=0;g<b.segments.length;g++)if(b.segments[g].key)return!0;return!1},isFmp4:function(b){for(var g=0;g<b.segments.length;g++)if(b.segments[g].map)return!0;return!1},hasAttribute:ri,estimateSegmentRequestTime:function(b,g,a){var l=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;return ri("BANDWIDTH",a)?(b*a.attributes.BANDWIDTH-8*l)/g:NaN},isLowestEnabledRendition:ef},Hl=D.xhr,Il=D.mergeOptions,si=function(){return function l(g,a){g=Il({timeout:45E3},
g);var t=l.beforeRequest||D.Hls.xhr.beforeRequest;t&&"function"===typeof t&&(t=t(g))&&(g=t);var e=Hl(g,function(l,g){var t=e.response;!l&&t&&(e.responseTime=Date.now(),e.roundTripTime=e.responseTime-e.requestTime,e.bytesReceived=t.byteLength||t.length,e.bandwidth||(e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8E3)));g.headers&&(e.responseHeaders=g.headers);l&&"ETIMEDOUT"===l.code&&(e.timedout=!0);l||e.aborted||200===g.statusCode||206===g.statusCode||0===g.statusCode||(l=Error("XHR Failed with a response of: "+
(e&&(t||e.responseText))));a(l,e)}),h=e.abort;e.abort=function(){e.aborted=!0;return h.apply(e,arguments)};e.uri=g.uri;e.requestTime=Date.now();return e}},Jl=function(b,g){b=b.toString(16);return"00".substring(0,2-b.length)+b+(g%2?" ":"")},Kl=function(b){return 32<=b&&126>b?String.fromCharCode(b):"."},ti=function(b){var g={};Object.keys(b).forEach(function(a){var l=b[a];ArrayBuffer.isView(l)?g[a]={bytes:l.buffer,byteOffset:l.byteOffset,byteLength:l.byteLength}:g[a]=l});return g},Ad=function(b){var g=
b.byterange||{length:Infinity,offset:0};return[g.length,g.offset,b.resolvedUri].join()},ui=function(b){b=Array.prototype.slice.call(b);for(var g="",a,l,t=0;t<b.length/16;t++)a=b.slice(16*t,16*t+16).map(Jl).join(""),l=b.slice(16*t,16*t+16).map(Kl).join(""),g+=a+" "+l+"\n";return g},Ll=Object.freeze({createTransferableMessage:ti,initSegmentId:Ad,hexDump:ui,tagDump:function(b){return ui(b.bytes)},textRanges:function(b){var g="",a;for(a=0;a<b.length;a++){var l=b;var t=a;l=l.start(t)+"-"+l.end(t);g+=l+
" "}return g}}),dc=1/30,Kb=3*dc,vi=function(b,g){var a=[],l;if(b&&b.length)for(l=0;l<b.length;l++)g(b.start(l),b.end(l))&&a.push([b.start(l),b.end(l)]);return D.createTimeRanges(a)},wi=function(b,g){return vi(b,function(a,b){return a-dc<=g&&b+dc>=g})},xi=function(b,g){return vi(b,function(a){return a-dc>=g})},ff=function(b){var g=[];if(!b||!b.length)return"";for(var a=0;a<b.length;a++)g.push(b.start(a)+" => "+b.end(a));return g.join(", ")},Ml=function(b,g){var a=2<arguments.length&&void 0!==arguments[2]?
arguments[2]:1;return((b.length?b.end(b.length-1):0)-g)/a},yi=function(b){for(var g=[],a=0;a<b.length;a++)g.push({start:b.start(a),end:b.end(a)});return g},ec=function(b,g,a){var l;if(a&&a.cues)for(l=a.cues.length;l--;){var t=a.cues[l];t.startTime<=g&&t.endTime>=b&&a.removeCue(t)}},Nl=function(b){Object.defineProperties(b.frame,{id:{get:function(){D.log.warn("cue.frame.id is deprecated. Use cue.value.key instead.");return b.value.key}},value:{get:function(){D.log.warn("cue.frame.value is deprecated. Use cue.value.data instead.");
return b.value.data}},privateData:{get:function(){D.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead.");return b.value.data}}})},zi=function(b){return isNaN(b)||Infinity===Math.abs(b)?Number.MAX_VALUE:b},Ol=function(b,g,a){var l=E.WebKitDataCue||E.VTTCue;g&&g.forEach(function(a){this.inbandTextTracks_[a.stream].addCue(new l(a.startTime+this.timestampOffset,a.endTime+this.timestampOffset,a.text))},b);if(a){var t=zi(b.mediaSource_.duration);a.forEach(function(a){var b=a.cueTime+
this.timestampOffset;a.frames.forEach(function(a){var g=new l(b,b,a.value||a.url||a.data||"");g.frame=a;g.value=a;Nl(g);this.metadataTrack_.addCue(g)},this)},b);if(b.metadataTrack_&&b.metadataTrack_.cues&&b.metadataTrack_.cues.length){b=b.metadataTrack_.cues;g=[];for(a=0;a<b.length;a++)b[a]&&g.push(b[a]);var e=g.reduce(function(a,b){var l=a[b.startTime]||[];l.push(b);a[b.startTime]=l;return a},{}),h=Object.keys(e).sort(function(a,b){return Number(a)-Number(b)});h.forEach(function(a,b){var l=Number(h[b+
1])||t;e[a].forEach(function(a){a.endTime=l})})}}},Lb="undefined"!==typeof window?window:{},Od="undefined"===typeof Symbol?"__target":Symbol(),qj=Lb.BlobBuilder||Lb.WebKitBlobBuilder||Lb.MozBlobBuilder||Lb.MSBlobBuilder,Qb=Lb.URL||Lb.webkitURL||Qb&&Qb.msURL,Pb=Lb.Worker;if(Pb){var Ai=Hf("self.onmessage = function () {}"),Bi=new Uint8Array(1);try{var gf=new Pb(Ai);gf.postMessage(Bi,[Bi.buffer])}catch(b){Pb=null}finally{Qb.revokeObjectURL(Ai),gf&&gf.terminate()}}var Ql=new Gf("./transmuxer-worker.worker.js",
function(b,g){var a=this;(function(){var b=Math.pow(2,32)-1,g,e,h,m,p,r,v,x,C,u,F,w,S,A,G,P;(function(){var a;h={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]};if("undefined"!==typeof Uint8Array){for(a in h)h.hasOwnProperty(a)&&(h[a]=[a.charCodeAt(0),a.charCodeAt(1),
a.charCodeAt(2),a.charCodeAt(3)]);m=new Uint8Array([105,115,111,109]);r=new Uint8Array([97,118,99,49]);p=new Uint8Array([0,0,0,1]);v=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]);x=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);C={video:v,audio:x};w=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);F=new Uint8Array([0,0,0,0,0,0,0,0]);
A=S=new Uint8Array([0,0,0,0,0,0,0,0]);G=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);P=S;u=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})();var H=function(a){var b=[],l=0,g;for(g=1;g<arguments.length;g++)b.push(arguments[g]);for(g=b.length;g--;)l+=b[g].byteLength;var t=new Uint8Array(l+8);(new DataView(t.buffer,t.byteOffset,t.byteLength)).setUint32(0,t.byteLength);t.set(a,4);g=0;for(l=8;g<b.length;g++)t.set(b[g],l),l+=b[g].byteLength;return t};var aa=function(){return H(h.dinf,H(h.dref,w))};var ba=function(a){return H(h.esds,
new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,a.audioobjecttype<<3|a.samplingfrequencyindex>>>1,a.samplingfrequencyindex<<7|a.channelcount<<3,6,1,2]))};var R=function(){return H(h.ftyp,m,p,m,r)};var y=function(a){return H(h.hdlr,C[a])};var M=function(a){var b=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,a.duration>>>24&255,a.duration>>>16&255,a.duration>>>8&255,a.duration&255,85,196,0,0]);a.samplerate&&(b[12]=a.samplerate>>>24&255,b[13]=a.samplerate>>>16&255,
b[14]=a.samplerate>>>8&255,b[15]=a.samplerate&255);return H(h.mdhd,b)};var ja=function(a){return H(h.mdia,M(a),y(a.type),B(a))};var za=function(a){return H(h.mfhd,new Uint8Array([0,0,0,0,(a&4278190080)>>24,(a&16711680)>>16,(a&65280)>>8,a&255]))};var B=function(a){return H(h.minf,"video"===a.type?H(h.vmhd,u):H(h.smhd,F),aa(),cb(a))};var X=function(a){for(var b=a.length,g=[];b--;)g[b]=Ea(a[b]);return H.apply(null,[h.moov,E(4294967295)].concat(g).concat(D(a)))};var D=function(a){for(var b=a.length,g=
[];b--;)g[b]=I(a[b]);return H.apply(null,[h.mvex].concat(g))};var E=function(a){a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(a&4278190080)>>24,(a&16711680)>>16,(a&65280)>>8,a&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return H(h.mvhd,a)};var Mb=function(a){a=a.samples||[];var b=new Uint8Array(4+a.length),g;for(g=0;g<a.length;g++){var l=a[g].flags;b[g+4]=l.dependsOn<<
4|l.isDependedOn<<2|l.hasRedundancy}return H(h.sdtp,b)};var cb=function(a){return H(h.stbl,g(a),H(h.stts,P),H(h.stsc,A),H(h.stsz,G),H(h.stco,S))};(function(){g=function(g){return H(h.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===g.type?a(g):b(g))};var a=function(a){var b=a.sps||[],g=a.pps||[],l=[],t=[],e;for(e=0;e<b.length;e++)l.push((b[e].byteLength&65280)>>>8),l.push(b[e].byteLength&255),l=l.concat(Array.prototype.slice.call(b[e]));for(e=0;e<g.length;e++)t.push((g[e].byteLength&65280)>>>8),t.push(g[e].byteLength&
255),t=t.concat(Array.prototype.slice.call(g[e]));return H(h.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(a.width&65280)>>8,a.width&255,(a.height&65280)>>8,a.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),H(h.avcC,new Uint8Array([1,a.profileIdc,a.profileCompatibility,a.levelIdc,255].concat([b.length]).concat(l).concat([g.length]).concat(t))),H(h.btrt,new Uint8Array([0,
28,156,128,0,45,198,192,0,45,198,192])))};var b=function(a){return H(h.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(a.channelcount&65280)>>8,a.channelcount&255,(a.samplesize&65280)>>8,a.samplesize&255,0,0,0,0,(a.samplerate&65280)>>8,a.samplerate&255,0,0]),ba(a))}})();var ea=function(a){a=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(a.id&4278190080)>>24,(a.id&16711680)>>16,(a.id&65280)>>8,a.id&255,0,0,0,0,(a.duration&4278190080)>>24,(a.duration&16711680)>>16,(a.duration&65280)>>8,a.duration&255,
0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(a.width&65280)>>8,a.width&255,0,0,(a.height&65280)>>8,a.height&255,0,0]);return H(h.tkhd,a)};var Ba=function(a){var g=H(h.tfhd,new Uint8Array([0,0,0,58,(a.id&4278190080)>>24,(a.id&16711680)>>16,(a.id&65280)>>8,a.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]));var l=Math.floor(a.baseMediaDecodeTime/(b+1));var t=Math.floor(a.baseMediaDecodeTime%(b+1));l=H(h.tfdt,new Uint8Array([1,0,0,0,l>>>24&255,l>>>
16&255,l>>>8&255,l&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255]));if("audio"===a.type)return a=e(a,92),H(h.traf,g,l,a);t=Mb(a);a=e(a,t.length+92);return H(h.traf,g,l,a,t)};var Ea=function(a){a.duration=a.duration||4294967295;return H(h.trak,ea(a),ja(a))};var I=function(a){var b=new Uint8Array([0,0,0,0,(a.id&4278190080)>>24,(a.id&16711680)>>16,(a.id&65280)>>8,a.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);"video"!==a.type&&(b[b.length-1]=0);return H(h.trex,b)};(function(){var a=function(a,b){var g=0,l=0,
t=0,e=0;a.length&&(void 0!==a[0].duration&&(g=1),void 0!==a[0].size&&(l=2),void 0!==a[0].flags&&(t=4),void 0!==a[0].compositionTimeOffset&&(e=8));return[0,0,g|l|t|e,1,(a.length&4278190080)>>>24,(a.length&16711680)>>>16,(a.length&65280)>>>8,a.length&255,(b&4278190080)>>>24,(b&16711680)>>>16,(b&65280)>>>8,b&255]};var b=function(b,g){var l;b=b.samples||[];g+=20+16*b.length;g=a(b,g);for(l=0;l<b.length;l++){var t=b[l];g=g.concat([(t.duration&4278190080)>>>24,(t.duration&16711680)>>>16,(t.duration&65280)>>>
8,t.duration&255,(t.size&4278190080)>>>24,(t.size&16711680)>>>16,(t.size&65280)>>>8,t.size&255,t.flags.isLeading<<2|t.flags.dependsOn,t.flags.isDependedOn<<6|t.flags.hasRedundancy<<4|t.flags.paddingValue<<1|t.flags.isNonSyncSample,t.flags.degradationPriority&61440,t.flags.degradationPriority&15,(t.compositionTimeOffset&4278190080)>>>24,(t.compositionTimeOffset&16711680)>>>16,(t.compositionTimeOffset&65280)>>>8,t.compositionTimeOffset&255])}return H(h.trun,new Uint8Array(g))};var g=function(b,g){var l;
b=b.samples||[];g+=20+8*b.length;g=a(b,g);for(l=0;l<b.length;l++){var t=b[l];g=g.concat([(t.duration&4278190080)>>>24,(t.duration&16711680)>>>16,(t.duration&65280)>>>8,t.duration&255,(t.size&4278190080)>>>24,(t.size&16711680)>>>16,(t.size&65280)>>>8,t.size&255])}return H(h.trun,new Uint8Array(g))};e=function(a,l){return"audio"===a.type?g(a,l):b(a,l)}})();var ob={ftyp:R,mdat:function(a){return H(h.mdat,a)},moof:function(a,b){for(var g=[],l=b.length;l--;)g[l]=Ba(b[l]);return H.apply(null,[h.moof,za(a)].concat(g))},
moov:X,initSegment:function(a){var b=R();a=X(a);var g=new Uint8Array(b.byteLength+a.byteLength);g.set(b);g.set(a,b.byteLength);return g}},ia=function(){this.init=function(){var a={};this.on=function(b,g){a[b]||(a[b]=[]);a[b]=a[b].concat(g)};this.off=function(b,g){if(!a[b])return!1;g=a[b].indexOf(g);a[b]=a[b].slice();a[b].splice(g,1);return-1<g};this.trigger=function(b){var g,l;if(g=a[b])if(2===arguments.length){var t=g.length;for(l=0;l<t;++l)g[l].call(this,arguments[1])}else{var e=[];for(l=1;l<arguments.length;++l)e.push(arguments[l]);
t=g.length;for(l=0;l<t;++l)g[l].apply(this,e)}};this.dispose=function(){a={}}}};ia.prototype.pipe=function(a){this.on("data",function(b){a.push(b)});this.on("done",function(b){a.flush(b)});return a};ia.prototype.push=function(a){this.trigger("data",a)};ia.prototype.flush=function(a){this.trigger("done",a)};var L={groupNalsIntoFrames:function(a){var b,g=[],l=[];for(b=g.byteLength=0;b<a.length;b++){var t=a[b];"access_unit_delimiter_rbsp"===t.nalUnitType?(g.length&&(g.duration=t.dts-g.dts,l.push(g)),
g=[t],g.byteLength=t.data.byteLength,g.pts=t.pts,g.dts=t.dts):("slice_layer_without_partitioning_rbsp_idr"===t.nalUnitType&&(g.keyFrame=!0),g.duration=t.dts-g.dts,g.byteLength+=t.data.byteLength,g.push(t))}l.length&&(!g.duration||0>=g.duration)&&(g.duration=l[l.length-1].duration);l.push(g);return l},groupFramesIntoGops:function(a){var b,g=[],l=[];g.byteLength=0;g.nalCount=0;g.duration=0;g.pts=a[0].pts;g.dts=a[0].dts;l.byteLength=0;l.nalCount=0;l.duration=0;l.pts=a[0].pts;l.dts=a[0].dts;for(b=0;b<
a.length;b++){var t=a[b];t.keyFrame?(g.length&&(l.push(g),l.byteLength+=g.byteLength,l.nalCount+=g.nalCount,l.duration+=g.duration),g=[t],g.nalCount=t.length,g.byteLength=t.byteLength,g.pts=t.pts,g.dts=t.dts,g.duration=t.duration):(g.duration+=t.duration,g.nalCount+=t.length,g.byteLength+=t.byteLength,g.push(t))}l.length&&0>=g.duration&&(g.duration=l[l.length-1].duration);l.byteLength+=g.byteLength;l.nalCount+=g.nalCount;l.duration+=g.duration;l.push(g);return l},extendFirstKeyFrame:function(a){if(!a[0][0].keyFrame&&
1<a.length){var b=a.shift();a.byteLength-=b.byteLength;a.nalCount-=b.nalCount;a[0][0].dts=b.dts;a[0][0].pts=b.pts;a[0][0].duration+=b.duration}return a},generateSampleTable:function(a,b){var g,l=b||0,t=[];for(b=0;b<a.length;b++){var e=a[b];for(g=0;g<e.length;g++){var h=e[g];var z={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};z.dataOffset=l;z.compositionTimeOffset=h.pts-h.dts;z.duration=h.duration;z.size=4*h.length;z.size+=h.byteLength;
h.keyFrame&&(z.flags.dependsOn=2,z.flags.isNonSyncSample=0);h=z;l+=h.size;t.push(h)}}return t},concatenateNalData:function(a){var b,g,l,t=0,e=new Uint8Array(a.byteLength+4*a.nalCount),h=new DataView(e.buffer);for(b=0;b<a.length;b++){var z=a[b];for(g=0;g<z.length;g++){var m=z[g];for(l=0;l<m.length;l++){var p=m[l];h.setUint32(t,p.data.byteLength);t+=4;e.set(p.data,t);t+=p.data.byteLength}}}return e}},ta={clearDtsInfo:function(a){delete a.minSegmentDts;delete a.maxSegmentDts;delete a.minSegmentPts;delete a.maxSegmentPts},
calculateTrackBaseMediaDecodeTime:function(a,b){var g=a.minSegmentDts;b||(g-=a.timelineStartInfo.dts);b=a.timelineStartInfo.baseMediaDecodeTime;b=Math.max(0,b+g);"audio"===a.type&&(a=a.samplerate/9E4,b=Math.floor(b*a));return b},collectDtsInfo:function(a,b){"number"===typeof b.pts&&(void 0===a.timelineStartInfo.pts&&(a.timelineStartInfo.pts=b.pts),a.minSegmentPts=void 0===a.minSegmentPts?b.pts:Math.min(a.minSegmentPts,b.pts),a.maxSegmentPts=void 0===a.maxSegmentPts?b.pts:Math.max(a.maxSegmentPts,
b.pts));"number"===typeof b.dts&&(void 0===a.timelineStartInfo.dts&&(a.timelineStartInfo.dts=b.dts),a.minSegmentDts=void 0===a.minSegmentDts?b.dts:Math.min(a.minSegmentDts,b.dts),a.maxSegmentDts=void 0===a.maxSegmentDts?b.dts:Math.max(a.maxSegmentDts,b.dts))}},Ma={parseSei:function(a){for(var b=0,g={payloadType:-1,payloadSize:0},l=0,t=0;b<a.byteLength&&128!==a[b];){for(;255===a[b];)l+=255,b++;for(l+=a[b++];255===a[b];)t+=255,b++;t+=a[b++];if(!g.payload&&4===l){g.payloadType=l;g.payloadSize=t;g.payload=
a.subarray(b,b+t);break}b+=t;t=l=0}return g},parseUserData:function(a){return 181!==a.payload[0]||49!==(a.payload[1]<<8|a.payload[2])||"GA94"!==String.fromCharCode(a.payload[3],a.payload[4],a.payload[5],a.payload[6])||3!==a.payload[7]?null:a.payload.subarray(8,a.payload.length-1)},parseCaptionPackets:function(a,b){var g=[],l;if(!(b[0]&64))return g;var t=b[0]&31;for(l=0;l<t;l++){var e=3*l;var h={type:b[e+2]&3,pts:a};b[e+2]&4&&(h.ccData=b[e+3]<<8|b[e+4],g.push(h))}return g},discardEmulationPreventionBytes:function(a){for(var b=
a.byteLength,g=[],l=1,t;l<b-2;)0===a[l]&&0===a[l+1]&&3===a[l+2]?(g.push(l+2),l+=2):l++;if(0===g.length)return a;b-=g.length;t=new Uint8Array(b);var e=0;for(l=0;l<b;e++,l++)e===g[0]&&(e++,g.shift()),t[l]=a[e];return t},USER_DATA_REGISTERED_ITU_T_T35:4},K=function Pl(){Pl.prototype.init.call(this);this.captionPackets_=[];this.ccStreams_=[new J(0,0),new J(0,1),new J(1,0),new J(1,1)];this.reset();this.ccStreams_.forEach(function(a){a.on("data",this.trigger.bind(this,"data"));a.on("done",this.trigger.bind(this,
"done"))},this)};K.prototype=new ia;K.prototype.push=function(a){if("sei_rbsp"===a.nalUnitType){var b=Ma.parseSei(a.escapedRBSP);b.payloadType===Ma.USER_DATA_REGISTERED_ITU_T_T35&&(b=Ma.parseUserData(b))&&(a.dts<this.latestDts_?this.ignoreNextEqualDts_=!0:a.dts===this.latestDts_&&this.ignoreNextEqualDts_?(this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1)):(b=Ma.parseCaptionPackets(a.pts,b),this.captionPackets_=this.captionPackets_.concat(b),this.latestDts_!==a.dts&&(this.numSameDts_=
0),this.numSameDts_++,this.latestDts_=a.dts))}};K.prototype.flush=function(){this.captionPackets_.length?(this.captionPackets_.forEach(function(a,b){a.presortIndex=b}),this.captionPackets_.sort(function(a,b){return a.pts===b.pts?a.presortIndex-b.presortIndex:a.pts-b.pts}),this.captionPackets_.forEach(function(a){2>a.type&&this.dispatchCea608Packet(a)},this),this.captionPackets_.length=0,this.ccStreams_.forEach(function(a){a.flush()},this)):this.ccStreams_.forEach(function(a){a.flush()},this)};K.prototype.reset=
function(){this.latestDts_=null;this.ignoreNextEqualDts_=!1;this.numSameDts_=0;this.activeCea608Channel_=[null,null];this.ccStreams_.forEach(function(a){a.reset()})};K.prototype.dispatchCea608Packet=function(a){this.setsChannel1Active(a)?this.activeCea608Channel_[a.type]=0:this.setsChannel2Active(a)&&(this.activeCea608Channel_[a.type]=1);null!==this.activeCea608Channel_[a.type]&&this.ccStreams_[(a.type<<1)+this.activeCea608Channel_[a.type]].push(a)};K.prototype.setsChannel1Active=function(a){return 4096===
(a.ccData&30720)};K.prototype.setsChannel2Active=function(a){return 6144===(a.ccData&30720)};var N={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,
568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},O=function(a){if(null===a)return"";a=N[a]||a;return String.fromCharCode(a)},nb=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Ja=function(){for(var a=
[],b=15;b--;)a.push("");return a},J=function hf(a,b){hf.prototype.init.call(this);this.field_=a||0;this.dataChannel_=b||0;this.name_="CC"+((this.field_<<1|this.dataChannel_)+1);this.setConstants();this.reset();this.push=function(a){var b=a.ccData&32639;if(b===this.lastControlCode_)this.lastControlCode_=null;else{4096===(b&61440)?this.lastControlCode_=b:b!==this.PADDING_&&(this.lastControlCode_=null);var g=b>>>8;var l=b&255;b!==this.PADDING_&&(b===this.RESUME_CAPTION_LOADING_?this.mode_="popOn":b===
this.END_OF_CAPTION_?(this.mode_="popOn",this.clearFormatting(a.pts),this.flushDisplayed(a.pts),l=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=l,this.startPts_=a.pts):b===this.ROLL_UP_2_ROWS_?(this.rollUpRows_=2,this.setRollUp(a.pts)):b===this.ROLL_UP_3_ROWS_?(this.rollUpRows_=3,this.setRollUp(a.pts)):b===this.ROLL_UP_4_ROWS_?(this.rollUpRows_=4,this.setRollUp(a.pts)):b===this.CARRIAGE_RETURN_?(this.clearFormatting(a.pts),this.flushDisplayed(a.pts),this.shiftRowsUp_(),this.startPts_=
a.pts):b===this.BACKSPACE_?"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1):b===this.ERASE_DISPLAYED_MEMORY_?(this.flushDisplayed(a.pts),this.displayed_=Ja()):b===this.ERASE_NON_DISPLAYED_MEMORY_?this.nonDisplayed_=Ja():b===this.RESUME_DIRECT_CAPTIONING_?("paintOn"!==this.mode_&&(this.flushDisplayed(a.pts),this.displayed_=Ja()),this.mode_="paintOn",this.startPts_=a.pts):this.isSpecialCharacter(g,
l)?(b=O((g&3)<<8|l),this[this.mode_](a.pts,b),this.column_++):this.isExtCharacter(g,l)?("popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),b=O((g&3)<<8|l),this[this.mode_](a.pts,b),this.column_++):this.isMidRowCode(g,l)?(this.clearFormatting(a.pts),this[this.mode_](a.pts," "),this.column_++,14===(l&14)&&this.addFormatting(a.pts,["i"]),1===(l&1)&&this.addFormatting(a.pts,["u"])):this.isOffsetControlCode(g,
l)?this.column_+=l&3:this.isPAC(g,l)?(g=nb.indexOf(b&7968),"rollUp"===this.mode_&&this.setRollUp(a.pts,g),g!==this.row_&&(this.clearFormatting(a.pts),this.row_=g),l&1&&-1===this.formatting_.indexOf("u")&&this.addFormatting(a.pts,["u"]),16===(b&16)&&(this.column_=4*((b&14)>>1)),this.isColorPAC(l)&&14===(l&14)&&this.addFormatting(a.pts,["i"])):this.isNormalChar(g)&&(0===l&&(l=null),b=O(g),b+=O(l),this[this.mode_](a.pts,b),this.column_+=b.length))}}};J.prototype=new ia;J.prototype.flushDisplayed=function(a){var b=
this.displayed_.map(function(a){return a.trim()}).join("\n").replace(/^\n+|\n+$/g,"");b.length&&this.trigger("data",{startPts:this.startPts_,endPts:a,text:b,stream:this.name_})};J.prototype.reset=function(){this.mode_="popOn";this.startPts_=this.topRow_=0;this.displayed_=Ja();this.nonDisplayed_=Ja();this.lastControlCode_=null;this.column_=0;this.row_=14;this.rollUpRows_=2;this.formatting_=[]};J.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<
8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31);this.PADDING_=0;this.RESUME_CAPTION_LOADING_=this.CONTROL_|32;this.END_OF_CAPTION_=this.CONTROL_|47;this.ROLL_UP_2_ROWS_=this.CONTROL_|37;this.ROLL_UP_3_ROWS_=this.CONTROL_|38;this.ROLL_UP_4_ROWS_=this.CONTROL_|39;this.CARRIAGE_RETURN_=this.CONTROL_|45;this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41;this.BACKSPACE_=this.CONTROL_|33;this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44;
this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46};J.prototype.isSpecialCharacter=function(a,b){return a===this.EXT_&&48<=b&&63>=b};J.prototype.isExtCharacter=function(a,b){return(a===this.EXT_+1||a===this.EXT_+2)&&32<=b&&63>=b};J.prototype.isMidRowCode=function(a,b){return a===this.EXT_&&32<=b&&47>=b};J.prototype.isOffsetControlCode=function(a,b){return a===this.OFFSET_&&33<=b&&35>=b};J.prototype.isPAC=function(a,b){return a>=this.BASE_&&a<this.BASE_+8&&64<=b&&127>=b};J.prototype.isColorPAC=function(a){return 64<=
a&&79>=a||96<=a&&127>=a};J.prototype.isNormalChar=function(a){return 32<=a&&127>=a};J.prototype.setRollUp=function(a,b){"rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(a),this.nonDisplayed_=Ja(),this.displayed_=Ja());if(void 0!==b&&b!==this.row_)for(a=0;a<this.rollUpRows_;a++)this.displayed_[b-a]=this.displayed_[this.row_-a],this.displayed_[this.row_-a]="";void 0===b&&(b=this.row_);this.topRow_=b-this.rollUpRows_+1};J.prototype.addFormatting=function(a,b){this.formatting_=
this.formatting_.concat(b);b=b.reduce(function(a,b){return a+"<"+b+">"},"");this[this.mode_](a,b)};J.prototype.clearFormatting=function(a){if(this.formatting_.length){var b=this.formatting_.reverse().reduce(function(a,b){return a+"</"+b+">"},"");this.formatting_=[];this[this.mode_](a,b)}};J.prototype.popOn=function(a,b){this.nonDisplayed_[this.row_]+=b};J.prototype.rollUp=function(a,b){this.displayed_[this.row_]+=b};J.prototype.shiftRowsUp_=function(){var a;for(a=0;a<this.topRow_;a++)this.displayed_[a]=
"";for(a=this.row_+1;15>a;a++)this.displayed_[a]="";for(a=this.topRow_;a<this.row_;a++)this.displayed_[a]=this.displayed_[a+1];this.displayed_[this.row_]=""};J.prototype.paintOn=function(a,b){this.displayed_[this.row_]+=b};var pb=J,Y={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Nb=function(a,b){var g=1;for(a>b&&(g=-1);4294967296<Math.abs(b-a);)a+=8589934592*g;return a},Z=function hf(a){var b,g;hf.prototype.init.call(this);this.type_=a;this.push=function(a){a.type===this.type_&&
(void 0===g&&(g=a.dts),a.dts=Nb(a.dts,g),a.pts=Nb(a.pts,g),b=a.dts,this.trigger("data",a))};this.flush=function(){g=b;this.trigger("done")};this.discontinuity=function(){b=g=void 0}};Z.prototype=new ia;var da=function(a,b,g){for(var l="";b<g;b++)l+="%"+("00"+a[b].toString(16)).slice(-2);return l},Ca=function(a){return a[0]<<21|a[1]<<14|a[2]<<7|a[3]},Cb={TXXX:function(a){var b;if(3===a.data[0]){for(b=1;b<a.data.length;b++)if(0===a.data[b]){a.description=decodeURIComponent(da(a.data,1,b));a.value=decodeURIComponent(da(a.data,
b+1,a.data.length)).replace(/\0*$/,"");break}a.data=a.value}},WXXX:function(a){var b;if(3===a.data[0])for(b=1;b<a.data.length;b++)if(0===a.data[b]){a.description=decodeURIComponent(da(a.data,1,b));a.url=decodeURIComponent(da(a.data,b+1,a.data.length));break}},PRIV:function(a){var b;for(b=0;b<a.data.length;b++)if(0===a.data[b]){a.owner=unescape(da(a.data,0,b));break}a.privateData=a.data.subarray(b+1);a.data=a.privateData}};var Fa=function(a){var b=!(!a||!a.debug);a=a&&a.descriptor;var g=0,l=[],t=0,
e;Fa.prototype.init.call(this);this.dispatchType=Y.METADATA_STREAM_TYPE.toString(16);if(a)for(e=0;e<a.length;e++)this.dispatchType+=("00"+a[e].toString(16)).slice(-2);this.push=function(a){var e;if("timed-metadata"===a.type)if(a.dataAlignmentIndicator&&(t=0,l.length=0),0===l.length&&(10>a.data.length||73!==a.data[0]||68!==a.data[1]||51!==a.data[2]))b&&console.log("Skipping unrecognized metadata packet");else if(l.push(a),t+=a.data.byteLength,1===l.length&&(g=Ca(a.data.subarray(6,10)),g+=10),!(t<g)){a=
{data:new Uint8Array(g),frames:[],pts:l[0].pts,dts:l[0].dts};for(e=0;e<g;)a.data.set(l[0].data.subarray(0,g-e),e),e+=l[0].data.byteLength,t-=l[0].data.byteLength,l.shift();e=10;a.data[5]&64&&(e=e+4+Ca(a.data.subarray(10,14)),g-=Ca(a.data.subarray(16,20)));do{var h=Ca(a.data.subarray(e+4,e+8));if(1>h)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");var z=String.fromCharCode(a.data[e],a.data[e+1],a.data[e+2],a.data[e+3]);z={id:z,data:a.data.subarray(e+10,e+h+10)};z.key=
z.id;if(Cb[z.id]&&(Cb[z.id](z),"com.apple.streaming.transportStreamTimestamp"===z.owner)){var m=z.data,p=(m[3]&1)<<30|m[4]<<22|m[5]<<14|m[6]<<6|m[7]>>>2;p*=4;p+=m[7]&3;z.timeStamp=p;void 0===a.pts&&void 0===a.dts&&(a.pts=z.timeStamp,a.dts=z.timeStamp);this.trigger("timestamp",z)}a.frames.push(z);e+=10;e+=h}while(e<g);this.trigger("data",a)}}};Fa.prototype=new ia;var db=function(){var a=new Uint8Array(188),b=0;db.prototype.init.call(this);this.push=function(g){var l=0,t=188;if(b){var e=new Uint8Array(g.byteLength+
b);e.set(a.subarray(0,b));e.set(g,b);b=0}else e=g;for(;t<e.byteLength;)71===e[l]&&71===e[t]?(this.trigger("data",e.subarray(l,t)),l+=188,t+=188):(l++,t++);l<e.byteLength&&(a.set(e.subarray(l),0),b=e.byteLength-l)};this.flush=function(){188===b&&71===a[0]&&(this.trigger("data",a),b=0);this.trigger("done")}};db.prototype=new ia;var pa=function(){pa.prototype.init.call(this);var a=this;this.packetsWaitingForPmt=[];this.programMapTable=void 0;var b=function(a,b){var t=0;b.payloadUnitStartIndicator&&(t+=
a[t]+1);"pat"===b.type?g(a.subarray(t),b):l(a.subarray(t),b)};var g=function(b,g){g.section_number=b[7];g.last_section_number=b[8];a.pmtPid=(b[10]&31)<<8|b[11];g.pmtPid=a.pmtPid};var l=function(b,g){var l;if(b[5]&1){a.programMapTable={video:null,audio:null,"timed-metadata":{}};var t=3+((b[1]&15)<<8|b[2])-4;for(l=12+((b[10]&15)<<8|b[11]);l<t;){var e=b[l],z=(b[l+1]&31)<<8|b[l+2];e===Y.H264_STREAM_TYPE&&null===a.programMapTable.video?a.programMapTable.video=z:e===Y.ADTS_STREAM_TYPE&&null===a.programMapTable.audio?
a.programMapTable.audio=z:e===Y.METADATA_STREAM_TYPE&&(a.programMapTable["timed-metadata"][z]=e);l+=((b[l+3]&15)<<8|b[l+4])+5}g.programMapTable=a.programMapTable}};this.push=function(a){var g={},l=4;g.payloadUnitStartIndicator=!!(a[1]&64);g.pid=a[1]&31;g.pid<<=8;g.pid|=a[2];1<(a[3]&48)>>>4&&(l+=a[l]+1);if(0===g.pid)g.type="pat",b(a.subarray(l),g),this.trigger("data",g);else if(g.pid===this.pmtPid)for(g.type="pmt",b(a.subarray(l),g),this.trigger("data",g);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,
this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([a,l,g]):this.processPes_(a,l,g)};this.processPes_=function(a,b,g){g.streamType=g.pid===this.programMapTable.video?Y.H264_STREAM_TYPE:g.pid===this.programMapTable.audio?Y.ADTS_STREAM_TYPE:this.programMapTable["timed-metadata"][g.pid];g.type="pes";g.data=a.subarray(b);this.trigger("data",g)}};pa.prototype=new ia;pa.STREAM_TYPES={h264:27,adts:15};var U=function(){var a=this,b={data:[],size:0},g={data:[],
size:0},l={data:[],size:0},t=function(b,g,l){var t=new Uint8Array(b.size),e={type:g},z,h=0;if(b.data.length&&!(9>b.size)){e.trackId=b.data[0].pid;for(z=0;z<b.data.length;z++){var m=b.data[z];t.set(m.data,h);h+=m.data.byteLength}e.packetLength=6+(t[4]<<8|t[5]);e.dataAlignmentIndicator=0!==(t[6]&4);z=t[7];z&192&&(e.pts=(t[9]&14)<<27|(t[10]&255)<<20|(t[11]&254)<<12|(t[12]&255)<<5|(t[13]&254)>>>3,e.pts*=4,e.pts+=(t[13]&6)>>>1,e.dts=e.pts,z&64&&(e.dts=(t[14]&14)<<27|(t[15]&255)<<20|(t[16]&254)<<12|(t[17]&
255)<<5|(t[18]&254)>>>3,e.dts*=4,e.dts+=(t[18]&6)>>>1));e.data=t.subarray(9+t[8]);g="video"===g||e.packetLength<=b.size;if(l||g)b.size=0,b.data.length=0;g&&a.trigger("data",e)}};U.prototype.init.call(this);this.push=function(e){({pat:function(){},pes:function(){switch(e.streamType){case Y.H264_STREAM_TYPE:case Y.H264_STREAM_TYPE:var a=b;var z="video";break;case Y.ADTS_STREAM_TYPE:a=g;z="audio";break;case Y.METADATA_STREAM_TYPE:a=l;z="timed-metadata";break;default:return}e.payloadUnitStartIndicator&&
t(a,z,!0);a.data.push(e);a.size+=e.data.byteLength},pmt:function(){var b={type:"metadata",tracks:[]},g=e.programMapTable;null!==g.video&&b.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+g.video,codec:"avc",type:"video"});null!==g.audio&&b.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+g.audio,codec:"adts",type:"audio"});a.trigger("data",b)}})[e.type]()};this.flush=function(){t(b,"video");t(g,"audio");t(l,"timed-metadata");this.trigger("done")}};U.prototype=new ia;var T={PAT_PID:0,
MP2T_PACKET_LENGTH:188,TransportPacketStream:db,TransportParseStream:pa,ElementaryStream:U,TimestampRolloverStream:Z,CaptionStream:K,Cea608Stream:pb,MetadataStream:Fa},Ia;for(Ia in Y)Y.hasOwnProperty(Ia)&&(T[Ia]=Y[Ia]);var W=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350];var V=function(){var a;V.prototype.init.call(this);this.push=function(b){var g=0,l=0;if("audio"===b.type){if(a){var t=a;a=new Uint8Array(t.byteLength+b.data.byteLength);a.set(t);a.set(b.data,t.byteLength)}else a=
b.data;for(;g+5<a.length;)if(255!==a[g]||240!==(a[g+1]&246))g++;else{t=2*(~a[g+1]&1);var e=(a[g+3]&3)<<11|a[g+4]<<3|(a[g+5]&224)>>5;var z=1024*((a[g+6]&3)+1);var h=9E4*z/W[(a[g+2]&60)>>>2];e=g+e;if(a.byteLength<e)break;this.trigger("data",{pts:b.pts+l*h,dts:b.dts+l*h,sampleCount:z,audioobjecttype:(a[g+2]>>>6&3)+1,channelcount:(a[g+2]&1)<<2|(a[g+3]&192)>>>6,samplerate:W[(a[g+2]&60)>>>2],samplingfrequencyindex:(a[g+2]&60)>>>2,samplesize:16,data:a.subarray(g+7+t,e)});if(a.byteLength===e){a=void 0;break}l++;
a=a.subarray(e)}}};this.flush=function(){this.trigger("done")}};V.prototype=new ia;var Rc=function(a){var b=a.byteLength,g=0,l=0;this.length=function(){return 8*b};this.bitsAvailable=function(){return 8*b+l};this.loadWord=function(){var t=a.byteLength-b,e=new Uint8Array(4),z=Math.min(4,b);if(0===z)throw Error("no bytes available");e.set(a.subarray(t,t+z));g=(new DataView(e.buffer)).getUint32(0);l=8*z;b-=z};this.skipBits=function(a){if(!(l>a)){a-=l;var t=Math.floor(a/8);a-=8*t;b-=t;this.loadWord()}g<<=
a;l-=a};this.readBits=function(a){var t=Math.min(l,a),e=g>>>32-t;l-=t;0<l?g<<=t:0<b&&this.loadWord();t=a-t;return 0<t?e<<t|this.readBits(t):e};this.skipLeadingZeros=function(){var a;for(a=0;a<l;++a)if(0!==(g&2147483648>>>a))return g<<=a,l-=a,a;this.loadWord();return a+this.skipLeadingZeros()};this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.readUnsignedExpGolomb=function(){var a=this.skipLeadingZeros();
return this.readBits(a+1)-1};this.readExpGolomb=function(){var a=this.readUnsignedExpGolomb();return 1&a?1+a>>>1:-1*(a>>>1)};this.readBoolean=function(){return 1===this.readBits(1)};this.readUnsignedByte=function(){return this.readBits(8)};this.loadWord()};var ca=function(){var a=0,b,g;ca.prototype.init.call(this);this.push=function(l){if(g){var t=new Uint8Array(g.byteLength+l.data.byteLength);t.set(g);t.set(l.data,g.byteLength);g=t}else g=l.data;for(;a<g.byteLength-3;a++)if(1===g[a+2]){b=a+5;break}for(;b<
g.byteLength;)switch(g[b]){case 0:if(0!==g[b-1]){b+=2;break}else if(0!==g[b-2]){b++;break}a+3!==b-2&&this.trigger("data",g.subarray(a+3,b-2));do b++;while(1!==g[b]&&b<g.length);a=b-2;b+=3;break;case 1:if(0!==g[b-1]||0!==g[b-2]){b+=3;break}this.trigger("data",g.subarray(a+3,b-2));a=b-2;b+=3;break;default:b+=3}g=g.subarray(a);b-=a;a=0};this.flush=function(){g&&3<g.byteLength&&this.trigger("data",g.subarray(a+3));g=null;a=0;this.trigger("done")}};ca.prototype=new ia;var fa={100:!0,110:!0,122:!0,244:!0,
44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0};var gc=function(){var a=new ca,b,g,l;gc.prototype.init.call(this);var t=this;this.push=function(t){"video"===t.type&&(b=t.trackId,g=t.pts,l=t.dts,a.push(t))};a.on("data",function(a){var e={trackId:b,pts:g,dts:l,data:a};switch(a[0]&31){case 5:e.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:e.nalUnitType="sei_rbsp";e.escapedRBSP=z(a.subarray(1));break;case 7:e.nalUnitType="seq_parameter_set_rbsp";e.escapedRBSP=z(a.subarray(1));
e.config=h(e.escapedRBSP);break;case 8:e.nalUnitType="pic_parameter_set_rbsp";break;case 9:e.nalUnitType="access_unit_delimiter_rbsp"}t.trigger("data",e)});a.on("done",function(){t.trigger("done")});this.flush=function(){a.flush()};var e=function(a,b){var g=8,l=8,t;for(t=0;t<a;t++)0!==l&&(l=b.readExpGolomb(),l=(g+l+256)%256),g=0===l?g:l};var z=function(a){for(var b=a.byteLength,g=[],l=1,t;l<b-2;)0===a[l]&&0===a[l+1]&&3===a[l+2]?(g.push(l+2),l+=2):l++;if(0===g.length)return a;b-=g.length;t=new Uint8Array(b);
var e=0;for(l=0;l<b;e++,l++)e===g[0]&&(e++,g.shift()),t[l]=a[e];return t};var h=function(a){var b=0,g=0,l=0,t=0,z=1;a=new Rc(a);var h=a.readUnsignedByte();var m=a.readUnsignedByte();var p=a.readUnsignedByte();a.skipUnsignedExpGolomb();if(fa[h]){var r=a.readUnsignedExpGolomb();3===r&&a.skipBits(1);a.skipUnsignedExpGolomb();a.skipUnsignedExpGolomb();a.skipBits(1);if(a.readBoolean()){var v=3!==r?8:12;for(r=0;r<v;r++)a.readBoolean()&&(6>r?e(16,a):e(64,a))}}a.skipUnsignedExpGolomb();r=a.readUnsignedExpGolomb();
if(0===r)a.readUnsignedExpGolomb();else if(1===r)for(a.skipBits(1),a.skipExpGolomb(),a.skipExpGolomb(),v=a.readUnsignedExpGolomb(),r=0;r<v;r++)a.skipExpGolomb();a.skipUnsignedExpGolomb();a.skipBits(1);r=a.readUnsignedExpGolomb();v=a.readUnsignedExpGolomb();var Q=a.readBits(1);0===Q&&a.skipBits(1);a.skipBits(1);a.readBoolean()&&(b=a.readUnsignedExpGolomb(),g=a.readUnsignedExpGolomb(),l=a.readUnsignedExpGolomb(),t=a.readUnsignedExpGolomb());if(a.readBoolean()&&a.readBoolean()){var x=a.readUnsignedByte();
switch(x){case 1:var C=[1,1];break;case 2:C=[12,11];break;case 3:C=[10,11];break;case 4:C=[16,11];break;case 5:C=[40,33];break;case 6:C=[24,11];break;case 7:C=[20,11];break;case 8:C=[32,11];break;case 9:C=[80,33];break;case 10:C=[18,11];break;case 11:C=[15,11];break;case 12:C=[64,33];break;case 13:C=[160,99];break;case 14:C=[4,3];break;case 15:C=[3,2];break;case 16:C=[2,1];break;case 255:C=[a.readUnsignedByte()<<8|a.readUnsignedByte(),a.readUnsignedByte()<<8|a.readUnsignedByte()]}C&&(z=C[0]/C[1])}return{profileIdc:h,
levelIdc:p,profileCompatibility:m,width:Math.ceil((16*(r+1)-2*b-2*g)*z),height:(2-Q)*(v+1)*16-2*l-2*t}}};gc.prototype=new ia;var ha=function(){var a=new Uint8Array,b=0;ha.prototype.init.call(this);this.setTimestamp=function(a){b=a};this.parseId3TagSize=function(a,b){var g=a[b+6]<<21|a[b+7]<<14|a[b+8]<<7|a[b+9];return(a[b+5]&16)>>4?g+20:g+10};this.parseAdtsSize=function(a,b){return a[b+3]&6144|a[b+4]<<3|(a[b+5]&224)>>5};this.push=function(g){var l=0;if(a.length){var t=a.length;a=new Uint8Array(g.byteLength+
t);a.set(a.subarray(0,t));a.set(g,t)}else a=g;for(;3<=a.length-l;)if(73===a[l]&&68===a[l+1]&&51===a[l+2]){if(10>a.length-l)break;g=this.parseId3TagSize(a,l);if(g>a.length)break;t={type:"timed-metadata",data:a.subarray(l,l+g)};this.trigger("data",t);l+=g}else if(a[l]&1&&240===(a[l+1]&240)){if(7>a.length-l)break;g=this.parseAdtsSize(a,l);if(g>a.length)break;t={type:"audio",data:a.subarray(l,l+g),pts:b,dts:b};this.trigger("data",t);l+=g}else l++;a=0<a.length-l?a.subarray(l):new Uint8Array}};ha.prototype=
new ia;K=[33,16,5,32,164,27];pb=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252];Z=function(a){for(var b=[];a--;)b.push(0);return b};var ka=function(a){return Object.keys(a).reduce(function(b,g){b[g]=new Uint8Array(a[g].reduce(function(a,b){return a.concat(b)},[]));return b},{})}({96E3:[K,[227,64],Z(154),[56]],88200:[K,[231],Z(170),[56]],64E3:[K,[248,192],Z(240),[56]],48E3:[K,[255,192],Z(268),[55,148,128],Z(54),[112]],44100:[K,[255,192],Z(268),[55,163,128],Z(84),[112]],32E3:[K,[255,192],Z(268),[55,234],
Z(226),[112]],24E3:[K,[255,192],Z(268),[55,255,128],Z(268),[111,112],Z(126),[224]],16E3:[K,[255,192],Z(268),[55,255,128],Z(268),[111,255],Z(269),[223,108],Z(195),[1,192]],12E3:[pb,Z(268),[3,127,248],Z(268),[6,255,240],Z(268),[13,255,224],Z(268),[27,253,128],Z(259),[56]],11025:[pb,Z(268),[3,127,248],Z(268),[6,255,240],Z(268),[13,255,224],Z(268),[27,255,192],Z(268),[55,175,128],Z(108),[112]],8E3:[pb,Z(268),[3,121,16],Z(47),[7]]});var Xa=function(a){return 9E4*a};var la=function(a,b){return a*b};var va=
function(a){return a/9E4};var ma=function(a,b){return a/b};var na={secondsToVideoTs:Xa,secondsToAudioTs:la,videoTsToSeconds:va,audioTsToSeconds:ma,audioTsToVideoTs:function(a,b){return Xa(ma(a,b))},videoTsToAudioTs:function(a,b){return la(va(a),b)}},oa=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],qa=["width","height","profileIdc","levelIdc","profileCompatibility"];var xa=function(a){return 73===a[0]&&68===a[1]&&51===a[2]?!0:!1};var wa=function(a,b){var g;if(a.length!==
b.length)return!1;for(g=0;g<a.length;g++)if(a[g]!==b[g])return!1;return!0};var Aa=function(a){var b,g=0;for(b=0;b<a.length;b++){var l=a[b];g+=l.data.byteLength}return g};var ra=function(a,b){var g=[],l=0,t=0,e=0,z=Infinity;b=b||{};ra.prototype.init.call(this);this.push=function(b){ta.collectDtsInfo(a,b);a&&oa.forEach(function(g){a[g]=b[g]});g.push(b)};this.setEarliestDts=function(b){t=b-a.timelineStartInfo.baseMediaDecodeTime};this.setVideoBaseMediaDecodeTime=function(a){z=a};this.setAudioAppendStart=
function(a){e=a};this.flush=function(){if(0!==g.length){var t=this.trimAdtsFramesByEarliestDts_(g);a.baseMediaDecodeTime=ta.calculateTrackBaseMediaDecodeTime(a,b.keepOriginalTimestamps);this.prefixWithSilence_(a,t);a.samples=this.generateSampleTable_(t);var e=ob.mdat(this.concatenateFrameData_(t));g=[];t=ob.moof(l,[a]);var z=new Uint8Array(t.byteLength+e.byteLength);l++;z.set(t);z.set(e,t.byteLength);ta.clearDtsInfo(a);this.trigger("data",{track:a,boxes:z})}this.trigger("done","AudioSegmentStream")};
this.prefixWithSilence_=function(a,b){var g,l=g=0;if(b.length){var t=na.audioTsToVideoTs(a.baseMediaDecodeTime,a.samplerate);var h=Math.ceil(9E4/(a.samplerate/1024));e&&z&&(g=t-Math.max(e,z),g=Math.floor(g/h),l=g*h);if(!(1>g||45E3<l)){h=ka[a.samplerate];h||(h=b[0].data);for(t=0;t<g;t++)b.splice(t,0,{data:h});a.baseMediaDecodeTime-=Math.floor(na.videoTsToAudioTs(l,a.samplerate))}}};this.trimAdtsFramesByEarliestDts_=function(b){if(a.minSegmentDts>=t)return b;a.minSegmentDts=Infinity;return b.filter(function(b){return b.dts>=
t?(a.minSegmentDts=Math.min(a.minSegmentDts,b.dts),a.minSegmentPts=a.minSegmentDts,!0):!1})};this.generateSampleTable_=function(a){var b,g=[];for(b=0;b<a.length;b++){var l=a[b];g.push({size:l.data.byteLength,duration:1024})}return g};this.concatenateFrameData_=function(a){var b,g=0,l=new Uint8Array(Aa(a));for(b=0;b<a.length;b++){var t=a[b];l.set(t.data,g);g+=t.data.byteLength}return l}};ra.prototype=new ia;var Db=function(a,b){var g=0,l=[],t=[],e,z;b=b||{};Db.prototype.init.call(this);delete a.minPTS;
this.gopCache_=[];this.push=function(b){ta.collectDtsInfo(a,b);"seq_parameter_set_rbsp"!==b.nalUnitType||e||(e=b.config,a.sps=[b.data],qa.forEach(function(b){a[b]=e[b]},this));"pic_parameter_set_rbsp"!==b.nalUnitType||z||(z=b.data,a.pps=[b.data]);l.push(b)};this.flush=function(){for(var e,z,h;l.length&&"access_unit_delimiter_rbsp"!==l[0].nalUnitType;)l.shift();if(0!==l.length){e=L.groupNalsIntoFrames(l);e=L.groupFramesIntoGops(e);e[0][0].keyFrame||((z=this.getGopForFusion_(l[0],a))?(e.unshift(z),
e.byteLength+=z.byteLength,e.nalCount+=z.nalCount,e.pts=z.pts,e.dts=z.dts,e.duration+=z.duration):e=L.extendFirstKeyFrame(e));if(t.length){z=b.alignGopsAtEnd?this.alignGopsAtEnd_(e):this.alignGopsAtStart_(e);if(!z){this.gopCache_.unshift({gop:e.pop(),pps:a.pps,sps:a.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);l=[];this.resetStream_();this.trigger("done","VideoSegmentStream");return}ta.clearDtsInfo(a);e=z}ta.collectDtsInfo(a,e);a.samples=L.generateSampleTable(e);z=ob.mdat(L.concatenateNalData(e));
a.baseMediaDecodeTime=ta.calculateTrackBaseMediaDecodeTime(a,b.keepOriginalTimestamps);this.trigger("processedGopsInfo",e.map(function(a){return{pts:a.pts,dts:a.dts,byteLength:a.byteLength}}));this.gopCache_.unshift({gop:e.pop(),pps:a.pps,sps:a.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);l=[];this.trigger("baseMediaDecodeTime",a.baseMediaDecodeTime);this.trigger("timelineStartInfo",a.timelineStartInfo);e=ob.moof(g,[a]);h=new Uint8Array(e.byteLength+z.byteLength);g++;h.set(e);h.set(z,
e.byteLength);this.trigger("data",{track:a,boxes:h})}this.resetStream_();this.trigger("done","VideoSegmentStream")};this.resetStream_=function(){ta.clearDtsInfo(a);z=e=void 0};this.getGopForFusion_=function(b){var g=Infinity,l;for(l=0;l<this.gopCache_.length;l++){var t=this.gopCache_[l];var e=t.gop;if(a.pps&&wa(a.pps[0],t.pps[0])&&a.sps&&wa(a.sps[0],t.sps[0])&&!(e.dts<a.timelineStartInfo.dts)&&(e=b.dts-e.dts-e.duration,-1E4<=e&&45E3>=e&&(!z||g>e))){var z=t;g=e}}return z?z.gop:null};this.alignGopsAtStart_=
function(a){var b,g;var l=a.byteLength;var e=a.nalCount;var z=a.duration;for(b=g=0;b<t.length&&g<a.length;){var h=t[b];var m=a[g];if(h.pts===m.pts)break;m.pts>h.pts?b++:(g++,l-=m.byteLength,e-=m.nalCount,z-=m.duration)}if(0===g)return a;if(g===a.length)return null;a=a.slice(g);a.byteLength=l;a.duration=z;a.nalCount=e;a.pts=a[0].pts;a.dts=a[0].dts;return a};this.alignGopsAtEnd_=function(a){var b;var g=t.length-1;var l=a.length-1;var e=null;for(b=!1;0<=g&&0<=l;){var z=t[g];var h=a[l];if(z.pts===h.pts){b=
!0;break}z.pts>h.pts?g--:(g===t.length-1&&(e=l),l--)}if(!b&&null===e)return null;g=b?l:e;if(0===g)return a;a=a.slice(g);g=a.reduce(function(a,b){a.byteLength+=b.byteLength;a.duration+=b.duration;a.nalCount+=b.nalCount;return a},{byteLength:0,duration:0,nalCount:0});a.byteLength=g.byteLength;a.duration=g.duration;a.nalCount=g.nalCount;a.pts=a[0].pts;a.dts=a[0].dts;return a};this.alignGopsWith=function(a){t=a}};Db.prototype=new ia;var sa=function(a,b){this.numberOfTracks=0;this.metadataStream=b;this.remuxTracks=
"undefined"!==typeof a.remux?!!a.remux:!0;this.pendingTracks=[];this.videoTrack=null;this.pendingBoxes=[];this.pendingCaptions=[];this.pendingMetadata=[];this.emittedTracks=this.pendingBytes=0;sa.prototype.init.call(this);this.push=function(a){if(a.text)return this.pendingCaptions.push(a);if(a.frames)return this.pendingMetadata.push(a);this.pendingTracks.push(a.track);this.pendingBoxes.push(a.boxes);this.pendingBytes+=a.boxes.byteLength;"video"===a.track.type&&(this.videoTrack=a.track);"audio"===
a.track.type&&(this.audioTrack=a.track)}};sa.prototype=new ia;sa.prototype.flush=function(a){var b=0,g={captions:[],captionStreams:{},metadata:[],info:{}},l=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==a&&"AudioSegmentStream"!==a||this.remuxTracks)return;if(0===this.pendingTracks.length){this.emittedTracks++;this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}this.videoTrack?(l=this.videoTrack.timelineStartInfo.pts,qa.forEach(function(a){g.info[a]=
this.videoTrack[a]},this)):this.audioTrack&&(l=this.audioTrack.timelineStartInfo.pts,oa.forEach(function(a){g.info[a]=this.audioTrack[a]},this));g.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined";this.emittedTracks+=this.pendingTracks.length;a=ob.initSegment(this.pendingTracks);g.initSegment=new Uint8Array(a.byteLength);g.initSegment.set(a);g.data=new Uint8Array(this.pendingBytes);for(a=0;a<this.pendingBoxes.length;a++)g.data.set(this.pendingBoxes[a],b),b+=this.pendingBoxes[a].byteLength;
for(a=0;a<this.pendingCaptions.length;a++)b=this.pendingCaptions[a],b.startTime=b.startPts-l,b.startTime/=9E4,b.endTime=b.endPts-l,b.endTime/=9E4,g.captionStreams[b.stream]=!0,g.captions.push(b);for(a=0;a<this.pendingMetadata.length;a++)b=this.pendingMetadata[a],b.cueTime=b.pts-l,b.cueTime/=9E4,g.metadata.push(b);g.metadata.dispatchType=this.metadataStream.dispatchType;this.pendingTracks.length=0;this.videoTrack=null;this.pendingBoxes.length=0;this.pendingBytes=this.pendingCaptions.length=0;this.pendingMetadata.length=
0;this.trigger("data",g);this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)};var ya=function(a){var b=this,g=!0,l,t;ya.prototype.init.call(this);a=a||{};this.baseMediaDecodeTime=a.baseMediaDecodeTime||0;this.transmuxPipeline_={};this.setupAacPipeline=function(){var g={};this.transmuxPipeline_=g;g.type="aac";g.metadataStream=new T.MetadataStream;g.aacStream=new ha;g.audioTimestampRolloverStream=new T.TimestampRolloverStream("audio");g.timedMetadataTimestampRolloverStream=
new T.TimestampRolloverStream("timed-metadata");g.adtsStream=new V;g.coalesceStream=new sa(a,g.metadataStream);g.headOfPipeline=g.aacStream;g.aacStream.pipe(g.audioTimestampRolloverStream).pipe(g.adtsStream);g.aacStream.pipe(g.timedMetadataTimestampRolloverStream).pipe(g.metadataStream).pipe(g.coalesceStream);g.metadataStream.on("timestamp",function(a){g.aacStream.setTimestamp(a.timeStamp)});g.aacStream.on("data",function(l){"timed-metadata"!==l.type||g.audioSegmentStream||(t=t||{timelineStartInfo:{baseMediaDecodeTime:b.baseMediaDecodeTime},
codec:"adts",type:"audio"},g.coalesceStream.numberOfTracks++,g.audioSegmentStream=new ra(t,a),g.adtsStream.pipe(g.audioSegmentStream).pipe(g.coalesceStream))});g.coalesceStream.on("data",this.trigger.bind(this,"data"));g.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setupTsPipeline=function(){var g={};this.transmuxPipeline_=g;g.type="ts";g.metadataStream=new T.MetadataStream;g.packetStream=new T.TransportPacketStream;g.parseStream=new T.TransportParseStream;g.elementaryStream=new T.ElementaryStream;
g.videoTimestampRolloverStream=new T.TimestampRolloverStream("video");g.audioTimestampRolloverStream=new T.TimestampRolloverStream("audio");g.timedMetadataTimestampRolloverStream=new T.TimestampRolloverStream("timed-metadata");g.adtsStream=new V;g.h264Stream=new gc;g.captionStream=new T.CaptionStream;g.coalesceStream=new sa(a,g.metadataStream);g.headOfPipeline=g.packetStream;g.packetStream.pipe(g.parseStream).pipe(g.elementaryStream);g.elementaryStream.pipe(g.videoTimestampRolloverStream).pipe(g.h264Stream);
g.elementaryStream.pipe(g.audioTimestampRolloverStream).pipe(g.adtsStream);g.elementaryStream.pipe(g.timedMetadataTimestampRolloverStream).pipe(g.metadataStream).pipe(g.coalesceStream);g.h264Stream.pipe(g.captionStream).pipe(g.coalesceStream);g.elementaryStream.on("data",function(e){var z;if("metadata"===e.type){for(z=e.tracks.length;z--;)l||"video"!==e.tracks[z].type?t||"audio"!==e.tracks[z].type||(t=e.tracks[z],t.timelineStartInfo.baseMediaDecodeTime=b.baseMediaDecodeTime):(l=e.tracks[z],l.timelineStartInfo.baseMediaDecodeTime=
b.baseMediaDecodeTime);l&&!g.videoSegmentStream&&(g.coalesceStream.numberOfTracks++,g.videoSegmentStream=new Db(l,a),g.videoSegmentStream.on("timelineStartInfo",function(a){t&&(t.timelineStartInfo=a,g.audioSegmentStream.setEarliestDts(a.dts))}),g.videoSegmentStream.on("processedGopsInfo",b.trigger.bind(b,"gopInfo")),g.videoSegmentStream.on("baseMediaDecodeTime",function(a){t&&g.audioSegmentStream.setVideoBaseMediaDecodeTime(a)}),g.h264Stream.pipe(g.videoSegmentStream).pipe(g.coalesceStream));t&&!g.audioSegmentStream&&
(g.coalesceStream.numberOfTracks++,g.audioSegmentStream=new ra(t,a),g.adtsStream.pipe(g.audioSegmentStream).pipe(g.coalesceStream))}});g.coalesceStream.on("data",this.trigger.bind(this,"data"));g.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setBaseMediaDecodeTime=function(a){var b=this.transmuxPipeline_;this.baseMediaDecodeTime=a;t&&(t.timelineStartInfo.dts=void 0,t.timelineStartInfo.pts=void 0,ta.clearDtsInfo(t),t.timelineStartInfo.baseMediaDecodeTime=a,b.audioTimestampRolloverStream&&
b.audioTimestampRolloverStream.discontinuity());l&&(b.videoSegmentStream&&(b.videoSegmentStream.gopCache_=[],b.videoTimestampRolloverStream.discontinuity()),l.timelineStartInfo.dts=void 0,l.timelineStartInfo.pts=void 0,ta.clearDtsInfo(l),b.captionStream.reset(),l.timelineStartInfo.baseMediaDecodeTime=a);b.timedMetadataTimestampRolloverStream&&b.timedMetadataTimestampRolloverStream.discontinuity()};this.setAudioAppendStart=function(a){t&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(a)};
this.alignGopsWith=function(a){l&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(a)};this.push=function(a){if(g){var b=xa(a);b&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():b||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline();g=!1}this.transmuxPipeline_.headOfPipeline.push(a)};this.flush=function(){g=!0;this.transmuxPipeline_.headOfPipeline.flush()};this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}};
ya.prototype=new ia;var Ga=function(){function a(a,b){for(var g=0;g<b.length;g++){var l=b[g];l.enumerable=l.enumerable||!1;l.configurable=!0;"value"in l&&(l.writable=!0);Object.defineProperty(a,l.key,l)}}return function(b,g,l){g&&a(b.prototype,g);l&&a(b,l);return b}}(),Ha=function(a,b){b.on("data",function(b){var g=b.initSegment;b.initSegment={data:g.buffer,byteOffset:g.byteOffset,byteLength:g.byteLength};g=b.data;b.data=g.buffer;a.postMessage({action:"data",segment:b,byteOffset:g.byteOffset,byteLength:g.byteLength},
[b.data])});if(b.captionStream)b.captionStream.on("data",function(b){a.postMessage({action:"caption",data:b})});b.on("done",function(b){a.postMessage({action:"done"})});b.on("gopInfo",function(b){a.postMessage({action:"gopInfo",gopInfo:b})})},Da=function(){function a(b,g){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.options=g||{};this.self=b;this.init()}Ga(a,[{key:"init",value:function(){this.transmuxer&&this.transmuxer.dispose();this.transmuxer=new ya(this.options);
Ha(this.self,this.transmuxer)}},{key:"push",value:function(a){a=new Uint8Array(a.data,a.byteOffset,a.byteLength);this.transmuxer.push(a)}},{key:"reset",value:function(){this.init()}},{key:"setTimestampOffset",value:function(a){this.transmuxer.setBaseMediaDecodeTime(Math.round(9E4*(a.timestampOffset||0)))}},{key:"setAudioAppendStart",value:function(a){this.transmuxer.setAudioAppendStart(Math.ceil(9E4*a.appendStart))}},{key:"flush",value:function(a){this.transmuxer.flush()}},{key:"resetCaptions",value:function(){this.transmuxer.resetCaptions()}},
{key:"alignGopsWith",value:function(a){this.transmuxer.alignGopsWith(a.gopsToAlignWith.slice())}}]);return a}();return new function(a){a.onmessage=function(b){if("init"===b.data.action&&b.data.options)this.messageHandlers=new Da(a,b.data.options);else if(this.messageHandlers||(this.messageHandlers=new Da(a)),b.data&&b.data.action&&"init"!==b.data.action&&this.messageHandlers[b.data.action])this.messageHandlers[b.data.action](b.data)}}(a)})()}),Ci={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",
audioProfile:"2"},Di=function(b){return b.map(function(b){return b.replace(/avc1\.(\d+)\.(\d+)/i,function(a,b,g){a=("00"+Number(b).toString(16)).slice(-2);g=("00"+Number(g).toString(16)).slice(-2);return"avc1."+a+"00"+g})})},Mc=function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",g={codecCount:0},a;g.codecCount=b.split(",").length;g.codecCount=g.codecCount||2;if(a=/(^|\s|,)+(avc[13])([^ ,]*)/i.exec(b))g.videoCodec=a[2],g.videoObjectTypeIndicator=a[3];g.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(b);
g.audioProfile=g.audioProfile&&g.audioProfile[2];return g},Rl=function(b){return b.replace(/avc1\.(\d+)\.(\d+)/i,function(b){return Di([b])[0]})},jf=function(b,g,a){return b+"/"+g+'; codecs="'+a.filter(function(a){return!!a}).join(", ")+'"'},Sl=function(b,g){if(!b.mediaGroups.AUDIO||!g)return null;b=b.mediaGroups.AUDIO[g];if(!b)return null;for(var a in b)if(g=b[a],g.default&&g.playlists)return Mc(g.playlists[0].attributes.CODECS).audioProfile;return null},Tl=function(b){var g={type:"",parameters:{}};
b=b.trim().split(";");g.type=b.shift().trim();b.forEach(function(a){var b=a.trim().split("=");1<b.length&&(a=b[0].replace(/"/g,"").trim(),b=b[1].replace(/"/g,"").trim(),g.parameters[a]=b)});return g},Ul=function(b,g,a){if("undefined"===typeof g||null===g||!b.length)return[];g=Math.ceil(9E4*(g-a+3));for(a=0;a<b.length&&!(b[a].pts>g);a++);return b.slice(a)},Vl=function(b,g,a){var l=null,t=null,e=0,h=[],m=[];if(!b&&!g)return D.createTimeRange();if(!b)return g.buffered;if(!g||a)return b.buffered;if(0===
b.buffered.length&&0===g.buffered.length)return D.createTimeRange();b=b.buffered;g=g.buffered;for(a=b.length;a--;)h.push({time:b.start(a),type:"start"}),h.push({time:b.end(a),type:"end"});for(a=g.length;a--;)h.push({time:g.start(a),type:"start"}),h.push({time:g.end(a),type:"end"});h.sort(function(a,b){return a.time-b.time});for(a=0;a<h.length;a++)"start"===h[a].type?(e++,2===e&&(l=h[a].time)):"end"===h[a].type&&(e--,1===e&&(t=h[a].time)),null!==l&&null!==t&&(m.push([l,t]),t=l=null);return D.createTimeRanges(m)},
Wl=function(b,g){var a=b.addSourceBuffer(g),l=Object.create(null);l.updating=!1;l.realBuffer_=a;b=function(b){"function"===typeof a[b]?l[b]=function(){return a[b].apply(a,arguments)}:"undefined"===typeof l[b]&&Object.defineProperty(l,b,{get:function(){return a[b]},set:function(g){return a[b]=g}})};for(var t in a)b(t);return l},Xl=function(b){function g(a,b){Ra(this,g);var l=bb(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,D.EventTarget));l.timestampOffset_=0;l.pendingBuffers_=[];l.bufferUpdating_=
!1;l.mediaSource_=a;l.codecs_=b;l.audioCodec_=null;l.videoCodec_=null;l.audioDisabled_=!1;l.appendAudioInitSegment_=!0;l.gopBuffer_=[];l.timeMapping_=0;l.safeAppend_=11<=D.browser.IE_VERSION;a={remux:!1,alignGopsAtEnd:l.safeAppend_};l.codecs_.forEach(function(a){/mp4a\.\d+.\d+/i.test(a)?l.audioCodec_=a:/avc1\.[\da-f]+/i.test(a)&&(l.videoCodec_=a)});l.transmuxer_=new Ql;l.transmuxer_.postMessage({action:"init",options:a});l.transmuxer_.onmessage=function(a){if("data"===a.data.action)return l.data_(a);
if("done"===a.data.action)return l.done_(a);if("gopInfo"===a.data.action)return l.appendGopInfo_(a)};Object.defineProperty(l,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(a){"number"===typeof a&&0<=a&&(this.timestampOffset_=a,this.appendAudioInitSegment_=!0,this.timeMapping_=this.gopBuffer_.length=0,this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:a}))}});Object.defineProperty(l,"appendWindowStart",{get:function(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},
set:function(a){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=a);this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=a)}});Object.defineProperty(l,"updating",{get:function(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}});Object.defineProperty(l,"buffered",{get:function(){return Vl(this.videoBuffer_,this.audioBuffer_,this.audioDisabled_)}});return l}mb(g,b);Va(g,[{key:"data_",value:function(a){var b=
a.data.segment;b.data=new Uint8Array(b.data,a.data.byteOffset,a.data.byteLength);b.initSegment=new Uint8Array(b.initSegment.data,b.initSegment.byteOffset,b.initSegment.byteLength);a=this.mediaSource_.player_;if(b.captions&&b.captions.length){this.inbandTextTracks_||(this.inbandTextTracks_={});for(var g in b.captionStreams)if(!this.inbandTextTracks_[g]){a.tech_.trigger({type:"usage",name:"hls-608"});var e=a.textTracks().getTrackById(g);this.inbandTextTracks_[g]=e?e:a.addRemoteTextTrack({kind:"captions",
id:g,label:g},!1).track}}b.metadata&&b.metadata.length&&!this.metadataTrack_&&(this.metadataTrack_=a.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,this.metadataTrack_.inBandMetadataTrackDispatchType=b.metadata.dispatchType);this.pendingBuffers_.push(b)}},{key:"done_",value:function(a){"closed"===this.mediaSource_.readyState?this.pendingBuffers_.length=0:this.processPendingSegments_()}},{key:"createRealSourceBuffers_",value:function(){var a=this,b=["audio","video"];b.forEach(function(g){if(a[g+
"Codec_"]&&!a[g+"Buffer_"]){var l=null;a.mediaSource_[g+"Buffer_"]?(l=a.mediaSource_[g+"Buffer_"],l.updating=!1):(l=Wl(a.mediaSource_.nativeMediaSource_,g+'/mp4;codecs="'+a[g+"Codec_"]+'"'),a.mediaSource_[g+"Buffer_"]=l);a[g+"Buffer_"]=l;["update","updatestart","updateend"].forEach(function(t){l.addEventListener(t,function(){if("audio"!==g||!a.audioDisabled_)if("updateend"===t&&(a[g+"Buffer_"].updating=!1),b.every(function(b){return"audio"===b&&a.audioDisabled_?!0:g!==b&&a[b+"Buffer_"]&&a[b+"Buffer_"].updating?
!1:!0}))return a.trigger(t)})})}})}},{key:"appendBuffer",value:function(a){this.bufferUpdating_=!0;if(this.audioBuffer_&&this.audioBuffer_.buffered.length){var b=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:b.end(b.length-1)})}this.videoBuffer_&&this.transmuxer_.postMessage({action:"alignGopsWith",gopsToAlignWith:Ul(this.gopBuffer_,this.mediaSource_.player_?this.mediaSource_.player_.currentTime():null,this.timeMapping_)});this.transmuxer_.postMessage({action:"push",
data:a.buffer,byteOffset:a.byteOffset,byteLength:a.byteLength},[a.buffer]);this.transmuxer_.postMessage({action:"flush"})}},{key:"appendGopInfo_",value:function(a){var b=this.gopBuffer_;a=a.data.gopInfo;if(a.length)if(this.safeAppend_)b=a.slice();else{var g=a[0].pts,e=0;for(e;e<b.length&&!(b[e].pts>=g);e++);b=b.slice(0,e).concat(a)}this.gopBuffer_=b}},{key:"remove",value:function(a,b){if(this.videoBuffer_){this.videoBuffer_.updating=!0;this.videoBuffer_.remove(a,b);var g=this.gopBuffer_,l=this.timeMapping_,
e=Math.ceil(9E4*(a-l)),h=Math.ceil(9E4*(b-l));l=g.slice();for(var m=g.length;m--&&!(g[m].pts<=h););if(-1!==m){for(h=m+1;h--&&!(g[h].pts<=e););h=Math.max(h,0);l.splice(h,m-h+1)}this.gopBuffer_=l}!this.audioDisabled_&&this.audioBuffer_&&(this.audioBuffer_.updating=!0,this.audioBuffer_.remove(a,b));ec(a,b,this.metadataTrack_);if(this.inbandTextTracks_)for(var p in this.inbandTextTracks_)ec(a,b,this.inbandTextTracks_[p])}},{key:"processPendingSegments_",value:function(){var a={video:{segments:[],bytes:0},
audio:{segments:[],bytes:0},captions:[],metadata:[]};a=this.pendingBuffers_.reduce(function(a,b){var g=b.type,l=b.data,t=b.initSegment;a[g].segments.push(l);a[g].bytes+=l.byteLength;a[g].initSegment=t;b.captions&&(a.captions=a.captions.concat(b.captions));b.info&&(a[g].info=b.info);b.metadata&&(a.metadata=a.metadata.concat(b.metadata));return a},a);this.videoBuffer_||this.audioBuffer_||(0===a.video.bytes&&(this.videoCodec_=null),0===a.audio.bytes&&(this.audioCodec_=null),this.createRealSourceBuffers_());
a.audio.info&&this.mediaSource_.trigger({type:"audioinfo",info:a.audio.info});a.video.info&&this.mediaSource_.trigger({type:"videoinfo",info:a.video.info});this.appendAudioInitSegment_&&(!this.audioDisabled_&&this.audioBuffer_&&(a.audio.segments.unshift(a.audio.initSegment),a.audio.bytes+=a.audio.initSegment.byteLength),this.appendAudioInitSegment_=!1);var b=!1;this.videoBuffer_&&a.video.bytes?(a.video.segments.unshift(a.video.initSegment),a.video.bytes+=a.video.initSegment.byteLength,this.concatAndAppendSegments_(a.video,
this.videoBuffer_),Ol(this,a.captions,a.metadata)):!this.videoBuffer_||!this.audioDisabled_&&this.audioBuffer_||(b=!0);!this.audioDisabled_&&this.audioBuffer_&&this.concatAndAppendSegments_(a.audio,this.audioBuffer_);this.pendingBuffers_.length=0;b&&this.trigger("updateend");this.bufferUpdating_=!1}},{key:"concatAndAppendSegments_",value:function(a,b){var g=0,l=void 0;if(a.bytes){l=new Uint8Array(a.bytes);a.segments.forEach(function(a){l.set(a,g);g+=a.byteLength});try{b.updating=!0,b.appendBuffer(l)}catch(Q){this.mediaSource_.player_&&
this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:Q.message,originalError:Q})}}}},{key:"abort",value:function(){this.videoBuffer_&&this.videoBuffer_.abort();!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.abort();this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"});this.pendingBuffers_.length=0;this.bufferUpdating_=!1}}]);return g}(D.EventTarget),kf=function(b){function g(){Ra(this,g);var a=bb(this,(g.__proto__||Object.getPrototypeOf(g)).call(this)),
b=void 0;a.nativeMediaSource_=new E.MediaSource;for(b in a.nativeMediaSource_)b in g.prototype||"function"!==typeof a.nativeMediaSource_[b]||(a[b]=a.nativeMediaSource_[b].bind(a.nativeMediaSource_));a.duration_=NaN;Object.defineProperty(a,"duration",{get:function(){return Infinity===this.duration_?this.duration_:this.nativeMediaSource_.duration},set:function(a){this.duration_=a;Infinity!==a&&(this.nativeMediaSource_.duration=a)}});Object.defineProperty(a,"seekable",{get:function(){return Infinity===
this.duration_?D.createTimeRanges([[0,this.nativeMediaSource_.duration]]):this.nativeMediaSource_.seekable}});Object.defineProperty(a,"readyState",{get:function(){return this.nativeMediaSource_.readyState}});Object.defineProperty(a,"activeSourceBuffers",{get:function(){return this.activeSourceBuffers_}});a.sourceBuffers=[];a.activeSourceBuffers_=[];a.updateActiveSourceBuffers_=function(){a.activeSourceBuffers_.length=0;if(1===a.sourceBuffers.length){var b=a.sourceBuffers[0];b.appendAudioInitSegment_=
!0;b.audioDisabled_=!b.audioCodec_;a.activeSourceBuffers_.push(b)}else{var g=!1,l=!0;for(b=0;b<a.player_.audioTracks().length;b++){var e=a.player_.audioTracks()[b];if(e.enabled&&"main"!==e.kind){g=!0;l=!1;break}}a.sourceBuffers.forEach(function(b,t){b.appendAudioInitSegment_=!0;if(b.videoCodec_&&b.audioCodec_)b.audioDisabled_=g;else if(b.videoCodec_&&!b.audioCodec_)b.audioDisabled_=!0,l=!1;else if(!b.videoCodec_&&b.audioCodec_&&(b.audioDisabled_=t?l:!l,b.audioDisabled_))return;a.activeSourceBuffers_.push(b)})}};
a.onPlayerMediachange_=function(){a.sourceBuffers.forEach(function(a){a.appendAudioInitSegment_=!0})};a.onHlsReset_=function(){a.sourceBuffers.forEach(function(a){a.transmuxer_&&a.transmuxer_.postMessage({action:"resetCaptions"})})};a.onHlsSegmentTimeMapping_=function(b){a.sourceBuffers.forEach(function(a){return a.timeMapping_=b.mapping})};["sourceopen","sourceclose","sourceended"].forEach(function(a){this.nativeMediaSource_.addEventListener(a,this.trigger.bind(this))},a);a.on("sourceopen",function(b){if(b=
K.querySelector('[src="'+a.url_+'"]'))a.player_=D(b.parentNode),a.player_.tech_.on("hls-reset",a.onHlsReset_),a.player_.tech_.on("hls-segment-time-mapping",a.onHlsSegmentTimeMapping_),a.player_.audioTracks&&a.player_.audioTracks()&&(a.player_.audioTracks().on("change",a.updateActiveSourceBuffers_),a.player_.audioTracks().on("addtrack",a.updateActiveSourceBuffers_),a.player_.audioTracks().on("removetrack",a.updateActiveSourceBuffers_)),a.player_.on("mediachange",a.onPlayerMediachange_)});a.on("sourceended",
function(b){b=zi(a.duration);for(var g=0;g<a.sourceBuffers.length;g++){var l=a.sourceBuffers[g];(l=l.metadataTrack_&&l.metadataTrack_.cues)&&l.length&&(l[l.length-1].endTime=b)}});a.on("sourceclose",function(a){this.sourceBuffers.forEach(function(a){a.transmuxer_&&a.transmuxer_.terminate()});this.sourceBuffers.length=0;this.player_&&(this.player_.audioTracks&&this.player_.audioTracks()&&(this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("addtrack",
this.updateActiveSourceBuffers_),this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)),this.player_.el_&&(this.player_.off("mediachange",this.onPlayerMediachange_),this.player_.tech_.off("hls-reset",this.onHlsReset_),this.player_.tech_.off("hls-segment-time-mapping",this.onHlsSegmentTimeMapping_)))});return a}mb(g,b);Va(g,[{key:"addSeekableRange_",value:function(a,b){if(Infinity!==this.duration)throw a=Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity"),
a.name="InvalidStateError",a.code=11,a;if(b>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration))this.nativeMediaSource_.duration=b}},{key:"addSourceBuffer",value:function(a){var b=void 0;b=Tl(a);/^(video|audio)\/mp2t$/i.test(b.type)?(a=[],b.parameters&&b.parameters.codecs&&(a=b.parameters.codecs.split(","),a=Di(a),a=a.filter(function(a){return/mp4a\.\d+.\d+/i.test(a)||/avc1\.[\da-f]+/i.test(a)})),0===a.length&&(a=["avc1.4d400d","mp4a.40.2"]),b=new Xl(this,a),0!==this.sourceBuffers.length&&
(this.sourceBuffers[0].createRealSourceBuffers_(),b.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)):b=this.nativeMediaSource_.addSourceBuffer(a);this.sourceBuffers.push(b);return b}}]);return g}(D.EventTarget),Ei=0;D.mediaSources={};var Fi=function(b,g){if(b=D.mediaSources[b])b.trigger({type:"sourceopen",swfId:g});else throw Error("Media Source not found (Video.js)");},lf=function(){return!!E.MediaSource&&!!E.MediaSource.isTypeSupported&&E.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')},
Nc=function(){this.MediaSource={open:Fi,supportsNativeMediaSources:lf};if(lf())return new kf;throw Error("Cannot use create a virtual MediaSource for this video");};Nc.open=Fi;Nc.supportsNativeMediaSources=lf;var Gi={createObjectURL:function(b){if(b instanceof kf){var g=E.URL.createObjectURL(b.nativeMediaSource_);return b.url_=g}if(!(b instanceof kf))return g=E.URL.createObjectURL(b),b.url_=g;g="blob:vjs-media-source/"+Ei;Ei++;D.mediaSources[g]=b;return g}};D.MediaSource=Nc;D.URL=Gi;var Yl=D.mergeOptions,
Hi=function(b,g){var a=Yl(b,{duration:g.duration,minimumUpdatePeriod:g.minimumUpdatePeriod});for(b=0;b<g.playlists.length;b++){var l=cf(a,g.playlists[b]);l&&(a=l)}bf(g,function(b,g,l,e){if(b.playlists&&b.playlists.length){var t=b.playlists[0].uri;if(b=cf(a,b.playlists[0]))a=b,a.mediaGroups[g][l][e].playlists[0]=a.playlists[t]}});return a},mf=function(b){function g(a,b,t,e){Ra(this,g);var l=bb(this,(g.__proto__||Object.getPrototypeOf(g)).call(this));l.hls_=b;l.withCredentials=t;if(!a)throw Error("A non-empty playlist URL or playlist is required");
l.on("minimumUpdatePeriod",function(){l.refreshXml_()});l.on("mediaupdatetimeout",function(){l.refreshMedia_()});if("string"===typeof a)return l.srcUrl=a,l.state="HAVE_NOTHING",bb(l);l.masterPlaylistLoader_=e;l.state="HAVE_METADATA";l.started=!0;l.media(a);E.setTimeout(function(){l.trigger("loadedmetadata")},0);return l}mb(g,b);Va(g,[{key:"dispose",value:function(){this.stopRequest();E.clearTimeout(this.mediaUpdateTimeout)}},{key:"stopRequest",value:function(){if(this.request){var a=this.request;
this.request=null;a.onreadystatechange=null;a.abort()}}},{key:"media",value:function(a){if(!a)return this.media_;if("HAVE_NOTHING"===this.state)throw Error("Cannot switch media playlist from "+this.state);var b=this.state;if("string"===typeof a){if(!this.master.playlists[a])throw Error("Unknown playlist URI: "+a);a=this.master.playlists[a]}var g=!this.media_||a.uri!==this.media_.uri;this.state="HAVE_METADATA";g&&(this.media_&&this.trigger("mediachanging"),this.media_=a,this.refreshMedia_(),"HAVE_MASTER"!==
b&&this.trigger("mediachange"))}},{key:"pause",value:function(){this.stopRequest();"HAVE_NOTHING"===this.state&&(this.started=!1)}},{key:"load",value:function(){this.started?this.trigger("loadedplaylist"):this.start()}},{key:"parseMasterXml",value:function(){var a=Pk(this.masterXml_,{manifestUri:this.srcUrl,clientOffset:this.clientOffset_});a.uri=this.srcUrl;for(var b=0;b<a.playlists.length;b++){var g="placeholder-uri-"+b;a.playlists[b].uri=g;a.playlists[g]=a.playlists[b]}bf(a,function(b,g,l,t){b.playlists&&
b.playlists.length&&(g="placeholder-uri-"+g+"-"+l+"-"+t,b.playlists[0].uri=g,a.playlists[g]=b.playlists[0])});hi(a);ii(a);return a}},{key:"start",value:function(){var a=this;this.started=!0;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(b,g){if(a.request){a.request=null;if(b)return a.error={status:g.status,message:"DASH playlist request error at URL: "+a.srcUrl,responseText:g.responseText,code:2},"HAVE_NOTHING"===a.state&&(a.started=!1),a.trigger("error");
a.masterXml_=g.responseText;a.masterLoaded_=g.responseHeaders&&g.responseHeaders.date?Date.parse(g.responseHeaders.date):Date.now();a.syncClientServerClock_(a.onClientServerClockSync_.bind(a))}})}},{key:"syncClientServerClock_",value:function(a){var b=this,g=Ok(fh(this.masterXml_));if(null===g)return this.clientOffset_=this.masterLoaded_-Date.now(),a();if("DIRECT"===g.method)return this.clientOffset_=g.value-Date.now(),a();this.request=this.hls_.xhr({uri:lb(this.srcUrl,g.value),method:g.method,withCredentials:this.withCredentials},
function(l,t){if(b.request){if(l)return b.clientOffset_=b.masterLoaded_-Date.now(),a();l="HEAD"===g.method?t.responseHeaders&&t.responseHeaders.date?Date.parse(t.responseHeaders.date):b.masterLoaded_:Date.parse(t.responseText);b.clientOffset_=l-Date.now();a()}})}},{key:"onClientServerClockSync_",value:function(){var a=this;this.master=this.parseMasterXml();this.state="HAVE_MASTER";this.trigger("loadedplaylist");this.media_||this.media(this.master.playlists[0]);E.setTimeout(function(){a.trigger("loadedmetadata")},
0);this.master.minimumUpdatePeriod&&E.setTimeout(function(){a.trigger("minimumUpdatePeriod")},this.master.minimumUpdatePeriod)}},{key:"refreshXml_",value:function(){var a=this;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(b,g){if(a.request){a.request=null;if(b)return a.error={status:g.status,message:"DASH playlist request error at URL: "+a.srcUrl,responseText:g.responseText,code:2},"HAVE_NOTHING"===a.state&&(a.started=!1),a.trigger("error");a.masterXml_=
g.responseText;b=a.parseMasterXml();a.master=Hi(a.master,b);E.setTimeout(function(){a.trigger("minimumUpdatePeriod")},a.master.minimumUpdatePeriod)}})}},{key:"refreshMedia_",value:function(){var a=this,b=void 0,g=void 0;this.masterPlaylistLoader_?(b=this.masterPlaylistLoader_.master,g=this.masterPlaylistLoader_.parseMasterXml()):(b=this.master,g=this.parseMasterXml());(b=Hi(b,g))?(this.masterPlaylistLoader_?this.masterPlaylistLoader_.master=b:this.master=b,this.media_=b.playlists[this.media_.uri]):
this.trigger("playlistunchanged");this.media().endList||(this.mediaUpdateTimeout=E.setTimeout(function(){a.trigger("mediaupdatetimeout")},ji(this.media(),!!b)));this.trigger("loadedplaylist")}}]);return g}(D.EventTarget),Oc=function(b){return D.log.debug?D.log.debug.bind(D,"VHS:",b+" >"):function(){}},Zl=function(){function b(g,a,l,t){Ra(this,b);this.callbacks_=[];this.pendingCallback_=null;this.timestampOffset_=0;this.mediaSource=g;this.processedAppend_=!1;this.type_=l;this.mimeType_=a;this.logger_=
Oc("SourceUpdater["+l+"]["+a+"]");"closed"===g.readyState?g.addEventListener("sourceopen",this.createSourceBuffer_.bind(this,a,t)):this.createSourceBuffer_(a,t)}Va(b,[{key:"createSourceBuffer_",value:function(b,a){var g=this;this.sourceBuffer_=this.mediaSource.addSourceBuffer(b);this.logger_("created SourceBuffer");if(a&&(a.trigger("sourcebufferadded"),2>this.mediaSource.sourceBuffers.length)){a.on("sourcebufferadded",function(){g.start_()});return}this.start_()}},{key:"start_",value:function(){var b=
this;this.started_=!0;this.onUpdateendCallback_=function(){var a=b.pendingCallback_;b.pendingCallback_=null;b.logger_("buffered ["+ff(b.buffered())+"]");a&&a();b.runCallback_()};this.sourceBuffer_.addEventListener("updateend",this.onUpdateendCallback_);this.runCallback_()}},{key:"abort",value:function(b){var a=this;this.processedAppend_&&this.queueCallback_(function(){a.sourceBuffer_.abort()},b)}},{key:"appendBuffer",value:function(b,a){var g=this;this.processedAppend_=!0;this.queueCallback_(function(){g.sourceBuffer_.appendBuffer(b)},
a)}},{key:"buffered",value:function(){return this.sourceBuffer_?this.sourceBuffer_.buffered:D.createTimeRanges()}},{key:"remove",value:function(b,a){var g=this,t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:lc;this.processedAppend_&&this.queueCallback_(function(){g.logger_("remove ["+b+" => "+a+"]");g.sourceBuffer_.remove(b,a)},t)}},{key:"updating",value:function(){return!this.sourceBuffer_||this.sourceBuffer_.updating||this.pendingCallback_}},{key:"timestampOffset",value:function(b){var a=
this;"undefined"!==typeof b&&(this.queueCallback_(function(){a.sourceBuffer_.timestampOffset=b}),this.timestampOffset_=b);return this.timestampOffset_}},{key:"queueCallback_",value:function(b,a){this.callbacks_.push([b.bind(this),a]);this.runCallback_()}},{key:"runCallback_",value:function(){if(!this.updating()&&this.callbacks_.length&&this.started_){var b=this.callbacks_.shift();this.pendingCallback_=b[1];b[0]()}}},{key:"dispose",value:function(){this.sourceBuffer_.removeEventListener("updateend",
this.onUpdateendCallback_);this.sourceBuffer_&&"open"===this.mediaSource.readyState&&this.sourceBuffer_.abort()}}]);return b}(),Wa={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1},Ii=function(b){var g={};b.byterange&&(b=b.byterange,g.Range="bytes="+b.offset+"-"+(b.offset+b.length-1));return g},Ji=function(b){b.forEach(function(b){b.abort()})},$l=function(b){var g=b.target;
g=Date.now()-g.requestTime;g={bandwidth:Infinity,bytesReceived:0,roundTripTime:g||0};g.bytesReceived=b.loaded;g.bandwidth=Math.floor(g.bytesReceived/g.roundTripTime*8E3);return g},nf=function(b,g){return g.timedout?{status:g.status,message:"HLS request timed-out at URL: "+g.uri,code:-101,xhr:g}:g.aborted?{status:g.status,message:"HLS request aborted at URL: "+g.uri,code:-102,xhr:g}:b?{status:g.status,message:"HLS request errored at URL: "+g.uri,code:2,xhr:g}:null},am=function(b,g){return function(a,
l){var t=l.response;if(a=nf(a,l))return g(a,b);if(16!==t.byteLength)return g({status:l.status,message:"Invalid HLS key at URL: "+l.uri,code:2,xhr:l},b);l=new DataView(t);b.key.bytes=new Uint32Array([l.getUint32(0),l.getUint32(4),l.getUint32(8),l.getUint32(12)]);return g(null,b)}},bm=function(b,g,a){return function(l,t){var e=t.response;if(l=nf(l,t))return a(l,b);if(0===e.byteLength)return a({status:t.status,message:"Empty HLS segment content at URL: "+t.uri,code:2,xhr:t},b);b.map.bytes=new Uint8Array(t.response);
g.isInitialized()||g.init();b.map.timescales=Za.timescale(b.map.bytes);b.map.videoTrackIds=Za.videoTrackIds(b.map.bytes);return a(null,b)}},cm=function(b,g,a){return function(l,t){var e=t.response;if(l=nf(l,t))return a(l,b);if(0===e.byteLength)return a({status:t.status,message:"Empty HLS segment content at URL: "+t.uri,code:2,xhr:t},b);b.stats={bandwidth:t.bandwidth,bytesReceived:t.bytesReceived||0,roundTripTime:t.roundTripTime||0};b.key?b.encryptedBytes=new Uint8Array(t.response):b.bytes=new Uint8Array(t.response);
b.map&&b.map.bytes&&(g.isInitialized()||g.init(),(t=g.parse(b.bytes,b.map.videoTrackIds,b.map.timescales))&&t.captions&&(b.captionStreams=t.captionStreams,b.fmp4Captions=t.captions));return a(null,b)}},dm=function(b,g,a){b.addEventListener("message",function z(t){if(t.data.source===g.requestId)return b.removeEventListener("message",z),t=t.data.decrypted,g.bytes=new Uint8Array(t.bytes,t.byteOffset,t.byteLength),a(null,g)});b.postMessage(ti({source:g.requestId,encrypted:g.encryptedBytes,key:g.key.bytes,
iv:g.key.iv}),[g.encryptedBytes.buffer,g.key.bytes.buffer])},em=function(b){return b.reduce(function(b,a){return a.code>b.code?a:b})},fm=function(b,g,a){var l=[],t=0;return function(e,h){e&&(Ji(b),l.push(e));t+=1;if(t===b.length)return h.endOfAllRequests=Date.now(),0<l.length?(e=em(l),a(e,h)):h.encryptedBytes?dm(g,h,a):a(null,h)}},gm=function(b,g){return function(a){b.stats=D.mergeOptions(b.stats,$l(a));!b.stats.firstBytesReceivedAt&&b.stats.bytesReceived&&(b.stats.firstBytesReceivedAt=Date.now());
return g(a,b)}},hm=function(b,g,a,l,t,e,h){var z=[];a=fm(z,a,h);if(t.key){h=D.mergeOptions(g,{uri:t.key.resolvedUri,responseType:"arraybuffer"});var m=am(t,a);h=b(h,m);z.push(h)}t.map&&!t.map.bytes&&(h=D.mergeOptions(g,{uri:t.map.resolvedUri,responseType:"arraybuffer",headers:Ii(t.map)}),m=bm(t,l,a),h=b(h,m),z.push(h));g=D.mergeOptions(g,{uri:t.resolvedUri,responseType:"arraybuffer",headers:Ii(t)});l=cm(t,l,a);b=b(g,l);b.addEventListener("progress",gm(t,e));z.push(b);return function(){return Ji(z)}},
Ki=function(b,g){return b?(b=E.getComputedStyle(b))?b[g]:"":""},Pc=function(b,g){var a=b.slice();b.sort(function(b,t){var l=g(b,t);return 0===l?a.indexOf(b)-a.indexOf(t):l})},of=function(b,g){var a=void 0,l=void 0;b.attributes.BANDWIDTH&&(a=b.attributes.BANDWIDTH);a=a||E.Number.MAX_VALUE;g.attributes.BANDWIDTH&&(l=g.attributes.BANDWIDTH);l=l||E.Number.MAX_VALUE;return a-l},im=function(b,g,a,l){b=b.playlists.map(function(a){var b=a.attributes.RESOLUTION&&a.attributes.RESOLUTION.width;var g=a.attributes.RESOLUTION&&
a.attributes.RESOLUTION.height;var l=(l=a.attributes.BANDWIDTH)||E.Number.MAX_VALUE;return{bandwidth:l,width:b,height:g,playlist:a}});Pc(b,function(a,b){return a.bandwidth-b.bandwidth});b=b.filter(function(a){return!La.isIncompatible(a.playlist)});var t=b.filter(function(a){return La.isEnabled(a.playlist)});t.length||(t=b.filter(function(a){return!La.isDisabled(a.playlist)}));var e=t.filter(function(a){return a.bandwidth*Wa.BANDWIDTH_VARIANCE<g}),h=e[e.length-1],m=e.filter(function(a){return a.bandwidth===
h.bandwidth})[0];e=e.filter(function(a){return a.width&&a.height});Pc(e,function(a,b){return a.width-b.width});var p=e.filter(function(b){return b.width===a&&b.height===l});h=p[p.length-1];p=p.filter(function(a){return a.bandwidth===h.bandwidth})[0];var r=void 0,v=void 0;v=void 0;p||(r=e.filter(function(b){return b.width>a||b.height>l}),v=r.filter(function(a){return a.width===r[0].width&&a.height===r[0].height}),h=v[v.length-1],v=v.filter(function(a){return a.bandwidth===h.bandwidth})[0]);return(b=
v||p||m||t[0]||b[0])?b.playlist:null},jm=function(b){var g=b.currentTime,a=b.bandwidth,l=b.duration,t=b.segmentDuration,e=b.timeUntilRebuffer,h=b.currentTimeline,m=b.syncController;b=b.master.playlists.filter(function(a){return!La.isIncompatible(a)});var p=b.filter(La.isEnabled);p.length||(p=b.filter(function(a){return!La.isDisabled(a)}));b=p.filter(La.hasAttribute.bind(null,"BANDWIDTH")).map(function(b){var z=m.getSyncPoint(b,l,h,g)?1:2;z=La.estimateSegmentRequestTime(t,a,b)*z-e;return{playlist:b,
rebufferingImpact:z}});p=b.filter(function(a){return 0>=a.rebufferingImpact});Pc(p,function(a,b){return of(b.playlist,a.playlist)});if(p.length)return p[0];Pc(b,function(a,b){return a.rebufferingImpact-b.rebufferingImpact});return b[0]||null},km=function(b){var g=b.inbandTextTracks,a=b.captionArray,l=b.timestampOffset;if(a){var t=window.WebKitDataCue||window.VTTCue;a.forEach(function(a){var b=a.stream,e=a.startTime,h=a.endTime;g[b]&&(e+=l,h+=l,g[b].addCue(new t(e,h,a.text)))})}},Li=function(b,g,a){if(!b||
!g)return!1;a=a===b.segments.length;return b.endList&&"open"===g.readyState&&a},lm=function(b,g,a){return"main"===b&&g&&a?a.containsAudio||a.containsVideo?g.containsVideo&&!a.containsVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!g.containsVideo&&a.containsVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":
null:"Neither audio nor video found in segment.":null},mm=function(b){var g=b.segment,a=b.playlist,l=a.mediaSequence,t=a.segments;return["appending ["+b.mediaIndex+"] of ["+l+", "+(l+(void 0===t?[]:t).length)+"] from playlist ["+a.id+"]","["+g.start+" => "+g.end+"] in timeline ["+b.timeline+"]"].join(" ")},pf=function(b){function g(a){Ra(this,g);var b=bb(this,(g.__proto__||Object.getPrototypeOf(g)).call(this));if(!a)throw new TypeError("Initialization settings are required");if("function"!==typeof a.currentTime)throw new TypeError("No currentTime getter specified");
if(!a.mediaSource)throw new TypeError("No MediaSource specified");b.bandwidth=a.bandwidth;b.throughput={rate:0,count:0};b.roundTrip=NaN;b.resetStats_();b.mediaIndex=null;b.hasPlayed_=a.hasPlayed;b.currentTime_=a.currentTime;b.seekable_=a.seekable;b.seeking_=a.seeking;b.duration_=a.duration;b.mediaSource_=a.mediaSource;b.hls_=a.hls;b.loaderType_=a.loaderType;b.startingMedia_=void 0;b.segmentMetadataTrack_=a.segmentMetadataTrack;b.goalBufferLength_=a.goalBufferLength;b.sourceType_=a.sourceType;b.inbandTextTracks_=
a.inbandTextTracks;b.state_="INIT";b.checkBufferTimeout_=null;b.error_=void 0;b.currentTimeline_=-1;b.pendingSegment_=null;b.mimeType_=null;b.sourceUpdater_=null;b.xhrOptions_=null;b.activeInitSegmentId_=null;b.initSegments_={};b.captionParser_=new tl;b.decrypter_=a.decrypter;b.syncController_=a.syncController;b.syncPoint_={segmentIndex:0,time:0};b.syncController_.on("syncinfoupdate",function(){return b.trigger("syncinfoupdate")});b.mediaSource_.addEventListener("sourceopen",function(){return b.ended_=
!1});b.fetchAtBuffer_=!1;b.logger_=Oc("SegmentLoader["+b.loaderType_+"]");Object.defineProperty(b,"state",{get:function(){return this.state_},set:function(a){a!==this.state_&&(this.logger_(this.state_+" -> "+a),this.state_=a)}});return b}mb(g,b);Va(g,[{key:"resetStats_",value:function(){this.mediaSecondsLoaded=this.mediaTransferDuration=this.mediaRequestsErrored=this.mediaRequestsTimedout=this.mediaRequestsAborted=this.mediaRequests=this.mediaBytesTransferred=0}},{key:"dispose",value:function(){this.state=
"DISPOSED";this.pause();this.abort_();this.sourceUpdater_&&this.sourceUpdater_.dispose();this.resetStats_();this.captionParser_.reset()}},{key:"abort",value:function(){"WAITING"!==this.state?this.pendingSegment_&&(this.pendingSegment_=null):(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_())}},{key:"abort_",value:function(){this.pendingSegment_&&this.pendingSegment_.abortRequests();this.pendingSegment_=null}},{key:"error",value:function(a){"undefined"!==typeof a&&(this.error_=
a);this.pendingSegment_=null;return this.error_}},{key:"endOfStream",value:function(){this.ended_=!0;this.pause();this.trigger("ended")}},{key:"buffered_",value:function(){return this.sourceUpdater_?this.sourceUpdater_.buffered():D.createTimeRanges()}},{key:"initSegment",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;if(!a)return null;var g=Ad(a),e=this.initSegments_[g];b&&!e&&a.bytes&&(this.initSegments_[g]=e={resolvedUri:a.resolvedUri,byterange:a.byterange,bytes:a.bytes,
timescales:a.timescales,videoTrackIds:a.videoTrackIds});return e||a}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&(this.sourceUpdater_||this.mimeType_&&"INIT"===this.state)&&!this.paused()}},{key:"load",value:function(){this.monitorBuffer_();if(this.playlist_){this.syncController_.setDateTimeMapping(this.playlist_);if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}}},
{key:"init_",value:function(){this.state="READY";this.sourceUpdater_=new Zl(this.mediaSource_,this.mimeType_,this.loaderType_,this.sourceBufferEmitter_);this.resetEverything();return this.monitorBuffer_()}},{key:"playlist",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(a){var g=this.playlist_,e=this.pendingSegment_;this.playlist_=a;this.xhrOptions_=b;this.hasPlayed_()||(a.syncInfo={mediaSequence:a.mediaSequence,time:0});this.logger_("playlist update ["+(g?g.id:
null)+" => "+a.id+"]");this.trigger("syncinfoupdate");if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();g&&g.uri===a.uri?(b=a.mediaSequence-g.mediaSequence,this.logger_("live window shift ["+b+"]"),null!==this.mediaIndex&&(this.mediaIndex-=b),e&&(e.mediaIndex-=b,0<=e.mediaIndex&&(e.segment=a.segments[e.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(g,a)):null!==this.mediaIndex&&this.resyncLoader()}}},{key:"pause",value:function(){this.checkBufferTimeout_&&(E.clearTimeout(this.checkBufferTimeout_),
this.checkBufferTimeout_=null)}},{key:"paused",value:function(){return null===this.checkBufferTimeout_}},{key:"mimeType",value:function(a,b){this.mimeType_||(this.mimeType_=a,this.sourceBufferEmitter_=b,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_())}},{key:"resetEverything",value:function(a){this.ended_=!1;this.resetLoader();this.remove(0,this.duration_(),a);this.captionParser_.clearAllCaptions();this.trigger("reseteverything")}},{key:"resetLoader",value:function(){this.fetchAtBuffer_=
!1;this.resyncLoader()}},{key:"resyncLoader",value:function(){this.syncPoint_=this.mediaIndex=null;this.abort()}},{key:"remove",value:function(a,b,g){this.sourceUpdater_&&this.sourceUpdater_.remove(a,b,g);ec(a,b,this.segmentMetadataTrack_);if(this.inbandTextTracks_)for(var l in this.inbandTextTracks_)ec(a,b,this.inbandTextTracks_[l])}},{key:"monitorBuffer_",value:function(){this.checkBufferTimeout_&&E.clearTimeout(this.checkBufferTimeout_);this.checkBufferTimeout_=E.setTimeout(this.monitorBufferTick_.bind(this),
1)}},{key:"monitorBufferTick_",value:function(){"READY"===this.state&&this.fillBuffer_();this.checkBufferTimeout_&&E.clearTimeout(this.checkBufferTimeout_);this.checkBufferTimeout_=E.setTimeout(this.monitorBufferTick_.bind(this),500)}},{key:"fillBuffer_",value:function(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var a=this.checkBuffer_(this.buffered_(),this.playlist_,
this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(a)if(Li(this.playlist_,this.mediaSource_,a.mediaIndex))this.endOfStream();else if(a.mediaIndex!==this.playlist_.segments.length-1||"ended"!==this.mediaSource_.readyState||this.seeking_()){if(a.timeline!==this.currentTimeline_||null!==a.startOfSegment&&a.startOfSegment<this.sourceUpdater_.timestampOffset())this.syncController_.reset(),a.timestampOffset=a.startOfSegment,this.captionParser_.clearAllCaptions();this.loadSegment_(a)}}}},
{key:"checkBuffer_",value:function(a,b,g,e,h,m){var l=0;a.length&&(l=a.end(a.length-1));a=Math.max(0,l-h);if(!b.segments.length||a>=this.goalBufferLength_()||!e&&1<=a)return null;if(null===m)return g=this.getSyncSegmentCandidate_(b),this.generateSegmentInfo_(b,g,null,!0);if(null!==g)return l=(e=b.segments[g])&&e.end?e.end:l,this.generateSegmentInfo_(b,g+1,l,!1);this.fetchAtBuffer_?(l=La.getMediaInfoForTime(b,l,m.segmentIndex,m.time),g=l.mediaIndex,l=l.startTime):(l=La.getMediaInfoForTime(b,h,m.segmentIndex,
m.time),g=l.mediaIndex,l=l.startTime);return this.generateSegmentInfo_(b,g,l,!1)}},{key:"getSyncSegmentCandidate_",value:function(a){var b=this;if(-1===this.currentTimeline_)return 0;var g=a.segments.map(function(a,b){return{timeline:a.timeline,segmentIndex:b}}).filter(function(a){return a.timeline===b.currentTimeline_});return g.length?g[Math.min(g.length-1,1)].segmentIndex:Math.max(a.segments.length-1,0)}},{key:"generateSegmentInfo_",value:function(a,b,g,e){if(0>b||b>=a.segments.length)return null;
var l=a.segments[b];return{requestId:"segment-loader-"+Math.random(),uri:l.resolvedUri,mediaIndex:b,isSyncRequest:e,startOfSegment:g,playlist:a,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:l.timeline,duration:l.duration,segment:l}}},{key:"abortRequestEarly_",value:function(a){if(this.hls_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||1E3>Date.now()-(a.firstBytesReceivedAt||Date.now()))return!1;var b=this.currentTime_(),g=a.bandwidth,e=this.pendingSegment_.duration,
h=La.estimateSegmentRequestTime(e,g,this.playlist_,a.bytesReceived);a=Ml(this.buffered_(),b,this.hls_.tech_.playbackRate())-1;if(h<=a)return!1;if(b=jm({master:this.hls_.playlists.master,currentTime:b,bandwidth:g,duration:this.duration_(),segmentDuration:e,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_})){g=h-a-b.rebufferingImpact;e=.5;a<=dc&&(e=1);if(!b.playlist||b.playlist.uri===this.playlist_.uri||g<e)return!1;this.bandwidth=b.playlist.attributes.BANDWIDTH*
Wa.BANDWIDTH_VARIANCE+1;this.abort();this.trigger("earlyabort");return!0}}},{key:"handleProgress_",value:function(a,b){this.pendingSegment_&&b.requestId===this.pendingSegment_.requestId&&!this.abortRequestEarly_(b.stats)&&this.trigger("progress")}},{key:"loadSegment_",value:function(a){this.state="WAITING";this.pendingSegment_=a;this.trimBackBuffer_(a);a.abortRequests=hm(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.captionParser_,this.createSimplifiedSegmentObj_(a),this.handleProgress_.bind(this),
this.segmentRequestFinished_.bind(this))}},{key:"trimBackBuffer_",value:function(a){var b=this.seekable_();a=this.currentTime_();var g=this.playlist_.targetDuration||10;b=b.length&&0<b.start(0)&&b.start(0)<a?b.start(0):a-30;a=Math.min(b,a-g);0<a&&this.remove(0,a)}},{key:"createSimplifiedSegmentObj_",value:function(a){var b=a.segment,g={resolvedUri:b.resolvedUri,byterange:b.byterange,requestId:a.requestId};b.key&&(a=b.key.iv||new Uint32Array([0,0,0,a.mediaIndex+a.playlist.mediaSequence]),g.key={resolvedUri:b.key.resolvedUri,
iv:a});b.map&&(g.map=this.initSegment(b.map));return g}},{key:"segmentRequestFinished_",value:function(a,b){this.mediaRequests+=1;b.stats&&(this.mediaBytesTransferred+=b.stats.bytesReceived,this.mediaTransferDuration+=b.stats.roundTripTime);this.pendingSegment_?b.requestId===this.pendingSegment_.requestId&&(a?(this.pendingSegment_=null,this.state="READY",-102===a.code?this.mediaRequestsAborted+=1:(this.pause(),-101===a.code?(this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate")):
(this.mediaRequestsErrored+=1,this.error(a),this.trigger("error")))):(this.bandwidth=b.stats.bandwidth,this.roundTrip=b.stats.roundTripTime,b.map&&(b.map=this.initSegment(b.map,!0)),this.processSegmentResponse_(b))):this.mediaRequestsAborted+=1}},{key:"processSegmentResponse_",value:function(a){var b=this.pendingSegment_;b.bytes=a.bytes;a.map&&(b.segment.map.bytes=a.map.bytes);b.endOfAllRequests=a.endOfAllRequests;if(a.fmp4Captions){b=this.inbandTextTracks_;var g=this.hls_.tech_,e=a.captionStreams,
h;for(h in e)b[h]||(g.trigger({type:"usage",name:"hls-608"}),e=g.textTracks().getTrackById(h),b[h]=e?e:g.addRemoteTextTrack({kind:"captions",id:h,label:h},!1).track);km({inbandTextTracks:this.inbandTextTracks_,captionArray:a.fmp4Captions,timestampOffset:0});this.captionParser_.clearParsedCaptions()}this.handleSegment_()}},{key:"handleSegment_",value:function(){var a=this;if(this.pendingSegment_){var b=this.pendingSegment_,g=b.segment,e=this.syncController_.probeSegmentInfo(b);"undefined"===typeof this.startingMedia_&&
e&&(e.containsAudio||e.containsVideo)&&(this.startingMedia_={containsAudio:e.containsAudio,containsVideo:e.containsVideo});if(e=lm(this.loaderType_,this.startingMedia_,e))this.error({message:e,blacklistDuration:Infinity}),this.trigger("error");else if(b.isSyncRequest)this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";else{null!==b.timestampOffset&&b.timestampOffset!==this.sourceUpdater_.timestampOffset()&&(this.sourceUpdater_.timestampOffset(b.timestampOffset),this.trigger("timestampoffset"));
e=this.syncController_.mappingForTimeline(b.timeline);null!==e&&this.trigger({type:"segmenttimemapping",mapping:e});this.state="APPENDING";if(g.map){var h=Ad(g.map);this.activeInitSegmentId_&&this.activeInitSegmentId_===h||(e=this.initSegment(g.map),this.sourceUpdater_.appendBuffer(e.bytes,function(){a.activeInitSegmentId_=h}))}b.byteLength=b.bytes.byteLength;this.mediaSecondsLoaded="number"===typeof g.start&&"number"===typeof g.end?this.mediaSecondsLoaded+(g.end-g.start):this.mediaSecondsLoaded+
g.duration;this.logger_(mm(b));this.sourceUpdater_.appendBuffer(b.bytes,this.handleUpdateEnd_.bind(this))}}else this.state="READY"}},{key:"handleUpdateEnd_",value:function(){if(this.pendingSegment_){var a=this.pendingSegment_,b=a.segment,g=null!==this.mediaIndex;this.pendingSegment_=null;this.recordThroughput_(a);this.addSegmentMetadataCue_(a);this.state="READY";this.mediaIndex=a.mediaIndex;this.fetchAtBuffer_=!0;this.currentTimeline_=a.timeline;this.trigger("syncinfoupdate");b.end&&this.currentTime_()-
b.end>3*a.playlist.targetDuration?this.resetEverything():(g&&this.trigger("bandwidthupdate"),this.trigger("progress"),Li(a.playlist,this.mediaSource_,a.mediaIndex+1)&&this.endOfStream(),this.paused()||this.monitorBuffer_())}else this.state="READY",this.paused()||this.monitorBuffer_()}},{key:"recordThroughput_",value:function(a){var b=this.throughput.rate,g=Date.now()-a.endOfAllRequests+1;this.throughput.rate+=(Math.floor(a.byteLength/g*8E3)-b)/++this.throughput.count}},{key:"addSegmentMetadataCue_",
value:function(a){if(this.segmentMetadataTrack_){var b=a.segment,g=b.start;b=b.end;if("number"===typeof g&&isFinite(g)&&"number"===typeof b&&isFinite(b)){ec(g,b,this.segmentMetadataTrack_);var e=E.WebKitDataCue||E.VTTCue;a={bandwidth:a.playlist.attributes.BANDWIDTH,resolution:a.playlist.attributes.RESOLUTION,codecs:a.playlist.attributes.CODECS,byteLength:a.byteLength,uri:a.uri,timeline:a.timeline,playlist:a.playlist.uri,start:g,end:b};var h=JSON.stringify(a);g=new e(g,b,h);g.value=a;this.segmentMetadataTrack_.addCue(g)}}}}]);
return g}(D.EventTarget),Mi=new Uint8Array(["\n","\n"].map(function(b){return b.charCodeAt(0)})),nm=function(b){function g(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};Ra(this,g);b=bb(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,a,b));b.mediaSource_=null;b.subtitlesTrack_=null;return b}mb(g,b);Va(g,[{key:"buffered_",value:function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return D.createTimeRanges();var a=this.subtitlesTrack_.cues;return D.createTimeRanges([[a[0].startTime,
a[a.length-1].startTime]])}},{key:"initSegment",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;if(!a)return null;var g=Ad(a),e=this.initSegments_[g];b&&!e&&a.bytes&&(b=new Uint8Array(Mi.byteLength+a.bytes.byteLength),b.set(a.bytes),b.set(Mi,a.bytes.byteLength),this.initSegments_[g]=e={resolvedUri:a.resolvedUri,byterange:a.byterange,bytes:b});return e||a}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}},{key:"init_",
value:function(){this.state="READY";this.resetEverything();return this.monitorBuffer_()}},{key:"track",value:function(a){if("undefined"===typeof a)return this.subtitlesTrack_;this.subtitlesTrack_=a;"INIT"===this.state&&this.couldBeginLoading_()&&this.init_();return this.subtitlesTrack_}},{key:"remove",value:function(a,b){ec(a,b,this.subtitlesTrack_)}},{key:"fillBuffer_",value:function(){var a=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),
this.currentTimeline_,this.currentTime_()));var b=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(b=this.skipEmptySegments_(b))null===this.syncController_.timestampOffsetForTimeline(b.timeline)?(this.syncController_.one("timestampoffset",function(){a.state="READY";a.paused()||a.monitorBuffer_()}),this.state="WAITING_ON_TIMELINE"):this.loadSegment_(b)}},{key:"skipEmptySegments_",value:function(a){for(;a&&a.segment.empty;)a=
this.generateSegmentInfo_(a.playlist,a.mediaIndex+1,a.startOfSegment+a.duration,a.isSyncRequest);return a}},{key:"handleSegment_",value:function(){var a=this;if(this.pendingSegment_&&this.subtitlesTrack_){this.state="APPENDING";var b=this.pendingSegment_,g=b.segment;if("function"!==typeof E.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var e=function(){a.handleSegment_()};this.state="WAITING_ON_VTTJS";this.subtitlesTrack_.tech_.one("vttjsloaded",e);this.subtitlesTrack_.tech_.one("vttjserror",
function(){a.subtitlesTrack_.tech_.off("vttjsloaded",e);a.error({message:"Error loading vtt.js"});a.state="READY";a.pause();a.trigger("error")})}else{g.requested=!0;try{this.parseVTTCues_(b)}catch(Q){return this.error({message:Q.message}),this.state="READY",this.pause(),this.trigger("error")}this.updateTimeMapping_(b,this.syncController_.timelines[b.timeline],this.playlist_);b.isSyncRequest?(this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY"):(b.byteLength=b.bytes.byteLength,
this.mediaSecondsLoaded+=g.duration,b.cues.length&&this.remove(b.cues[0].endTime,b.cues[b.cues.length-1].endTime),b.cues.forEach(function(b){a.subtitlesTrack_.addCue(b)}),this.handleUpdateEnd_())}}else this.state="READY"}},{key:"parseVTTCues_",value:function(a){var b=void 0,g=!1;"function"===typeof E.TextDecoder?b=new E.TextDecoder("utf8"):(b=E.WebVTT.StringDecoder(),g=!0);b=new E.WebVTT.Parser(E,E.vttjs,b);a.cues=[];a.timestampmap={MPEGTS:0,LOCAL:0};b.oncue=a.cues.push.bind(a.cues);b.ontimestampmap=
function(b){return a.timestampmap=b};b.onparsingerror=function(a){D.log.warn("Error encountered when parsing cues: "+a.message)};if(a.segment.map){var e=a.segment.map.bytes;g&&(e=decodeURIComponent(escape(String.fromCharCode.apply(null,e))));b.parse(e)}e=a.bytes;g&&(e=decodeURIComponent(escape(String.fromCharCode.apply(null,e))));b.parse(e);b.flush()}},{key:"updateTimeMapping_",value:function(a,b,g){var l=a.segment;if(b)if(a.cues.length){var e=a.timestampmap,t=e.MPEGTS/9E4-e.LOCAL+b.mapping;a.cues.forEach(function(a){a.startTime+=
t;a.endTime+=t});g.syncInfo||(g.syncInfo={mediaSequence:g.mediaSequence+a.mediaIndex,time:Math.min(a.cues[0].startTime,a.cues[a.cues.length-1].startTime-l.duration)})}else l.empty=!0}}]);return g}(pf),om=function(b,g){if(b.segments)for(var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,l=void 0,e=0;e<b.segments.length;e++){var h=b.segments[e];if(!l)a:{var m=a+h.duration/2;l=g.cues;for(var p=0;p<l.length;p++){var r=l[p];if(m>=r.adStartTime&&m<=r.adEndTime){l=r;break a}}l=null}if(l){if("cueIn"in
h){l.endTime=a;l.adEndTime=a;a+=h.duration;l=null;continue}if(a<l.endTime){a+=h.duration;continue}l.endTime+=h.duration}else"cueOut"in h&&(l=new E.VTTCue(a,a+h.duration,h.cueOut),l.adStartTime=a,l.adEndTime=a+parseFloat(h.cueOut),g.addCue(l)),"cueOutCont"in h&&(m=h.cueOutCont.split("/").map(parseFloat),l=Bl(m,2),m=l[0],p=l[1],l=new E.VTTCue(a,a+h.duration,""),l.adStartTime=a-m,l.adEndTime=l.adStartTime+p,g.addCue(l));a+=h.duration}},Ni=[{name:"VOD",run:function(b,g,a,l,e){return Infinity!==a?{time:0,
segmentIndex:0}:null}},{name:"ProgramDateTime",run:function(b,g,a,l,e){if(!b.datetimeToDisplayTime)return null;g=g.segments||[];l=a=null;e=e||0;for(var t=0;t<g.length;t++){var h=g[t];if(h.dateTimeObject){h=h.dateTimeObject.getTime()/1E3+b.datetimeToDisplayTime;var m=Math.abs(e-h);if(null!==l&&l<m)break;l=m;a={time:h,segmentIndex:t}}}return a}},{name:"Segment",run:function(b,g,a,l,e){b=g.segments||[];a=g=null;e=e||0;for(var t=0;t<b.length;t++){var h=b[t];if(h.timeline===l&&"undefined"!==typeof h.start){var m=
Math.abs(e-h.start);if(null!==a&&a<m)break;if(!g||null===a||a>=m)a=m,g={time:h.start,segmentIndex:t}}}return g}},{name:"Discontinuity",run:function(b,g,a,l,e){a=null;e=e||0;if(g.discontinuityStarts&&g.discontinuityStarts.length){l=null;for(var t=0;t<g.discontinuityStarts.length;t++){var h=g.discontinuityStarts[t],m=b.discontinuities[g.discontinuitySequence+t+1];if(m){var p=Math.abs(e-m.time);if(null!==l&&l<p)break;if(!a||null===l||l>=p)l=p,a={time:m.time,segmentIndex:h}}}}return a}},{name:"Playlist",
run:function(b,g,a,l,e){return g.syncInfo?{time:g.syncInfo.time,segmentIndex:g.syncInfo.mediaSequence-g.mediaSequence}:null}}],pm=function(b){function g(){Ra(this,g);var a=bb(this,(g.__proto__||Object.getPrototypeOf(g)).call(this));a.inspectCache_=void 0;a.timelines=[];a.discontinuities=[];a.datetimeToDisplayTime=null;a.logger_=Oc("SyncController");return a}mb(g,b);Va(g,[{key:"getSyncPoint",value:function(a,b,g,e){a=this.runStrategies_(a,b,g,e);return a.length?this.selectSyncPoint_(a,{key:"time",
value:e}):null}},{key:"getExpiredTime",value:function(a,b){if(!a||!a.segments)return null;b=this.runStrategies_(a,b,a.discontinuitySequence,0);if(!b.length)return null;b=this.selectSyncPoint_(b,{key:"segmentIndex",value:0});0<b.segmentIndex&&(b.time*=-1);return Math.abs(b.time+Lc(a,b.segmentIndex,0))}},{key:"runStrategies_",value:function(a,b,g,e){for(var l=[],t=0;t<Ni.length;t++){var h=Ni[t],m=h.run(this,a,b,g,e);m&&(m.strategy=h.name,l.push({strategy:h.name,syncPoint:m}))}return l}},{key:"selectSyncPoint_",
value:function(a,b){for(var g=a[0].syncPoint,l=Math.abs(a[0].syncPoint[b.key]-b.value),e=a[0].strategy,h=1;h<a.length;h++){var m=Math.abs(a[h].syncPoint[b.key]-b.value);m<l&&(l=m,g=a[h].syncPoint,e=a[h].strategy)}this.logger_("syncPoint for ["+b.key+": "+b.value+"] chosen with strategy"+(" ["+e+"]: [time:"+g.time+",")+(" segmentIndex:"+g.segmentIndex+"]"));return g}},{key:"saveExpiredSegmentInfo",value:function(a,b){for(var g=b.mediaSequence-a.mediaSequence-1;0<=g;g--){var l=a.segments[g];if(l&&"undefined"!==
typeof l.start){b.syncInfo={mediaSequence:a.mediaSequence+g,time:l.start};this.logger_("playlist refresh sync: [time:"+b.syncInfo.time+","+(" mediaSequence: "+b.syncInfo.mediaSequence+"]"));this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMapping",value:function(a){!this.datetimeToDisplayTime&&a.segments&&a.segments.length&&a.segments[0].dateTimeObject&&(this.datetimeToDisplayTime=-(a.segments[0].dateTimeObject.getTime()/1E3))}},{key:"reset",value:function(){this.inspectCache_=void 0}},{key:"probeSegmentInfo",
value:function(a){var b=a.segment,g=a.playlist,e;(e=b.map?this.probeMp4Segment_(a):this.probeTsSegment_(a))&&this.calculateSegmentTimeMapping_(a,e)&&(this.saveDiscontinuitySyncInfo_(a),g.syncInfo||(g.syncInfo={mediaSequence:g.mediaSequence+a.mediaIndex,time:b.start}));return e}},{key:"probeMp4Segment_",value:function(a){var b=a.segment,g=Za.timescale(b.map.bytes);g=Za.startTime(g,a.bytes);null!==a.timestampOffset&&(a.timestampOffset-=g);return{start:g,end:g+b.duration}}},{key:"probeTsSegment_",value:function(a){var b=
a.bytes;a=this.inspectCache_;var g=73===b[0]&&68===b[1]&&51===b[2]?!0:!1;if(g)b:{var e=!1,h=0,m=null;g=null;for(var p,r=0,v;3<=b.length-r;){switch(Kc.parseType(b,r)){case "timed-metadata":if(10>b.length-r){e=!0;break}p=Kc.parseId3TagSize(b,r);if(p>b.length){e=!0;break}null===g&&(v=b.subarray(r,r+p),g=Kc.parseAacTimestamp(v));r+=p;break;case "audio":if(7>b.length-r){e=!0;break}p=Kc.parseAdtsSize(b,r);if(p>b.length){e=!0;break}null===m&&(v=b.subarray(r,r+p),m=Kc.parseSampleRate(v));h++;r+=p;break;default:r++}if(e){b=
null;break b}}null===m||null===g?b=null:(b=9E4/m,b={audio:[{type:"audio",dts:g,pts:g},{type:"audio",dts:g+1024*h*b,pts:g+1024*h*b}]})}else{g={pid:null,table:null};e={};m=0;for(p=188;p<b.byteLength;)if(71===b[m]&&71===b[p]){r=b.subarray(m,p);v=ka.parseType(r,g.pid);switch(v){case "pat":g.pid||(g.pid=ka.parsePat(r));break;case "pmt":g.table||(g.table=ka.parsePmt(r))}if(g.pid&&g.table)break;m+=188;p+=188}else m++,p++;for(h in g.table)if(g.table.hasOwnProperty(h))switch(g.table[h]){case oa.H264_STREAM_TYPE:e.video=
[];var C;p=b;r=g;v=e;var x=0,u=188,F=!1,w=[];for(C=0;u<p.byteLength;)if(71===p[x]&&71===p[u]){m=p.subarray(x,u);var S=ka.parseType(m,r.pid);switch(S){case "pes":var H=ka.parsePesType(m,r.table);S=ka.parsePayloadUnitStartIndicator(m);if("video"===H&&(S&&!F&&(H=ka.parsePesTime(m))&&(H.type="video",v.video.push(H),F=!0),!v.firstKeyFrame)){if(S&&0!==C){H=new Uint8Array(C);for(S=0;w.length;)C=w.shift(),H.set(C,S),S+=C.byteLength;ka.videoPacketContainsKeyFrame(H)&&(v.firstKeyFrame=ka.parsePesTime(H),v.firstKeyFrame.type=
"video");C=0}w.push(m);C+=m.byteLength}}if(F&&v.firstKeyFrame)break;x+=188;u+=188}else x++,u++;u=p.byteLength;x=u-188;for(F=!1;0<=x;)if(71===p[x]&&71===p[u]){m=p.subarray(x,u);S=ka.parseType(m,r.pid);switch(S){case "pes":if(H=ka.parsePesType(m,r.table),S=ka.parsePayloadUnitStartIndicator(m),"video"===H&&S&&(H=ka.parsePesTime(m)))H.type="video",v.video.push(H),F=!0}if(F)break;x-=188;u-=188}else x--,u--;0===e.video.length&&delete e.video;break;case oa.ADTS_STREAM_TYPE:e.audio=[];m=b;p=g;r=e;v=0;x=188;
for(u=!1;x<m.byteLength;)if(71===m[v]&&71===m[x]){F=m.subarray(v,x);w=ka.parseType(F,p.pid);switch(w){case "pes":if(C=ka.parsePesType(F,p.table),w=ka.parsePayloadUnitStartIndicator(F),"audio"===C&&w&&(F=ka.parsePesTime(F)))F.type="audio",r.audio.push(F),u=!0}if(u)break;v+=188;x+=188}else v++,x++;x=m.byteLength;v=x-188;for(u=!1;0<=v;)if(71===m[v]&&71===m[x]){F=m.subarray(v,x);w=ka.parseType(F,p.pid);switch(w){case "pes":if(C=ka.parsePesType(F,p.table),w=ka.parsePayloadUnitStartIndicator(F),"audio"===
C&&w&&(F=ka.parsePesTime(F)))F.type="audio",r.audio.push(F),u=!0}if(u)break;v-=188;x-=188}else v--,x--;0===e.audio.length&&delete e.audio}b=e}b&&(b.audio||b.video)?(vl(b,a),a=b):a=null;h=b=void 0;if(!a)return null;a.video&&2===a.video.length?(this.inspectCache_=a.video[1].dts,b=a.video[0].dtsTime,h=a.video[1].dtsTime):a.audio&&2===a.audio.length&&(this.inspectCache_=a.audio[1].dts,b=a.audio[0].dtsTime,h=a.audio[1].dtsTime);return{start:b,end:h,containsVideo:a.video&&2===a.video.length,containsAudio:a.audio&&
2===a.audio.length}}},{key:"timestampOffsetForTimeline",value:function(a){return"undefined"===typeof this.timelines[a]?null:this.timelines[a].time}},{key:"mappingForTimeline",value:function(a){return"undefined"===typeof this.timelines[a]?null:this.timelines[a].mapping}},{key:"calculateSegmentTimeMapping_",value:function(a,b){var g=a.segment,l=this.timelines[a.timeline];if(null!==a.timestampOffset)l={time:a.startOfSegment,mapping:a.startOfSegment-b.start},this.timelines[a.timeline]=l,this.trigger("timestampoffset"),
this.logger_("time mapping for timeline "+a.timeline+": "+("[time: "+l.time+"] [mapping: "+l.mapping+"]")),g.start=a.startOfSegment,g.end=b.end+l.mapping;else if(l)g.start=b.start+l.mapping,g.end=b.end+l.mapping;else return!1;return!0}},{key:"saveDiscontinuitySyncInfo_",value:function(a){var b=a.playlist,g=a.segment;if(g.discontinuity)this.discontinuities[g.timeline]={time:g.start,accuracy:0};else if(b.discontinuityStarts&&b.discontinuityStarts.length)for(var e=0;e<b.discontinuityStarts.length;e++){var h=
b.discontinuityStarts[e],m=b.discontinuitySequence+e+1,p=h-a.mediaIndex,r=Math.abs(p);if(!this.discontinuities[m]||this.discontinuities[m].accuracy>r)h=0>p?g.start-Lc(b,a.mediaIndex,h):g.end+Lc(b,a.mediaIndex+1,h),this.discontinuities[m]={time:h,accuracy:r}}}}]);return g}(D.EventTarget),qm=new Gf("./decrypter-worker.worker.js",function(b,g){var a=this;(function(){var b=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");},g=function(){function a(a,b){for(var g=
0;g<b.length;g++){var l=b[g];l.enumerable=l.enumerable||!1;l.configurable=!0;"value"in l&&(l.writable=!0);Object.defineProperty(a,l.key,l)}}return function(b,g,l){g&&a(b.prototype,g);l&&a(b,l);return b}}(),e=function(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof b?"undefined":la(b)));a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?
Object.setPrototypeOf(a,b):a.__proto__=b)},h=null,m=function(){function a(g){b(this,a);if(!h){var l=[[[],[],[],[],[]],[[],[],[],[],[]]],e=l[0],t=l[1],m=e[4],p=t[4],r,v,z,x=[],C=[],u;for(r=0;256>r;r++)C[(x[r]=r<<1^283*(r>>7))^r]=r;for(v=z=0;!m[v];v^=u||1,z=C[z]||1){var F=z^z<<1^z<<2^z<<3^z<<4;F=F>>8^F&255^99;m[v]=F;p[F]=v;var w=x[r=x[u=x[v]]];var S=16843009*w^65537*r^257*u^16843008*v;w=257*x[F]^16843008*F;for(r=0;4>r;r++)e[r][v]=w=w<<24^w>>>8,t[r][F]=S=S<<24^S>>>8}for(r=0;5>r;r++)e[r]=e[r].slice(0),
t[r]=t[r].slice(0);h=l}this._tables=[[h[0][0].slice(),h[0][1].slice(),h[0][2].slice(),h[0][3].slice(),h[0][4].slice()],[h[1][0].slice(),h[1][1].slice(),h[1][2].slice(),h[1][3].slice(),h[1][4].slice()]];l=this._tables[0][4];e=this._tables[1];v=g.length;z=1;if(4!==v&&6!==v&&8!==v)throw Error("Invalid aes key size");m=g.slice(0);p=[];this._key=[m,p];for(g=v;g<4*v+28;g++){t=m[g-1];if(0===g%v||8===v&&4===g%v)t=l[t>>>24]<<24^l[t>>16&255]<<16^l[t>>8&255]<<8^l[t&255],0===g%v&&(t=t<<8^t>>>24^z<<24,z=z<<1^
283*(z>>7));m[g]=m[g-v]^t}for(v=0;g;v++,g--)t=m[v&3?g:g-4],p[v]=4>=g||4>v?t:e[0][l[t>>>24]]^e[1][l[t>>16&255]]^e[2][l[t>>8&255]]^e[3][l[t&255]]}a.prototype.decrypt=function(a,b,g,l,e,t){var h=this._key[1];a^=h[0];l^=h[1];g^=h[2];b^=h[3];var m=h.length/4-2,p,r=4;var v=this._tables[1];var z=v[0],x=v[1],C=v[2],u=v[3],F=v[4];for(p=0;p<m;p++){v=z[a>>>24]^x[l>>16&255]^C[g>>8&255]^u[b&255]^h[r];var w=z[l>>>24]^x[g>>16&255]^C[b>>8&255]^u[a&255]^h[r+1];var S=z[g>>>24]^x[b>>16&255]^C[a>>8&255]^u[l&255]^h[r+
2];b=z[b>>>24]^x[a>>16&255]^C[l>>8&255]^u[g&255]^h[r+3];r+=4;a=v;l=w;g=S}for(p=0;4>p;p++)e[(3&-p)+t]=F[a>>>24]<<24^F[l>>16&255]<<16^F[g>>8&255]<<8^F[b&255]^h[r++],v=a,a=l,l=g,g=b,b=v};return a}(),p=function(){function a(){b(this,a);this.listeners={}}a.prototype.on=function(a,b){this.listeners[a]||(this.listeners[a]=[]);this.listeners[a].push(b)};a.prototype.off=function(a,b){if(!this.listeners[a])return!1;b=this.listeners[a].indexOf(b);this.listeners[a].splice(b,1);return-1<b};a.prototype.trigger=
function(a){var b=this.listeners[a];if(b)if(2===arguments.length)for(var g=b.length,l=0;l<g;++l)b[l].call(this,arguments[1]);else{g=Array.prototype.slice.call(arguments,1);l=b.length;for(var e=0;e<l;++e)b[e].apply(this,g)}};a.prototype.dispose=function(){this.listeners={}};a.prototype.pipe=function(a){this.on("data",function(b){a.push(b)})};return a}(),r=function(a){function g(){b(this,g);var l=a.call(this,p);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
l=!l||"object"!==("undefined"===typeof l?"undefined":la(l))&&"function"!==typeof l?this:l;l.jobs=[];l.delay=1;l.timeout_=null;return l}e(g,a);g.prototype.processJob_=function(){this.jobs.shift()();this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null};g.prototype.push=function(a){this.jobs.push(a);this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))};return g}(p),v=function(a){return a<<24|(a&65280)<<8|(a&16711680)>>8|a>>>24},x=function(){function a(g,
l,e,t){b(this,a);var h=a.STEP,m=new Int32Array(g.buffer),p=new Uint8Array(g.byteLength);g=0;this.asyncStream_=new r;this.asyncStream_.push(this.decryptChunk_(m.subarray(g,g+h),l,e,p));for(g=h;g<m.length;g+=h)e=new Uint32Array([v(m[g-4]),v(m[g-3]),v(m[g-2]),v(m[g-1])]),this.asyncStream_.push(this.decryptChunk_(m.subarray(g,g+h),l,e,p));this.asyncStream_.push(function(){t(null,p.subarray(0,p.byteLength-p[p.byteLength-1]))})}a.prototype.decryptChunk_=function(a,b,g,l){return function(){var e=new Int32Array(a.buffer,
a.byteOffset,a.byteLength>>2),t=new m(Array.prototype.slice.call(b)),h=new Uint8Array(a.byteLength),p=new Int32Array(h.buffer),r;var z=g[0];var x=g[1];var C=g[2];var u=g[3];for(r=0;r<e.length;r+=4){var F=v(e[r]);var w=v(e[r+1]);var S=v(e[r+2]);var H=v(e[r+3]);t.decrypt(F,w,S,H,p,r);p[r]=v(p[r]^z);p[r+1]=v(p[r+1]^x);p[r+2]=v(p[r+2]^C);p[r+3]=v(p[r+3]^u);z=F;x=w;C=S;u=H}l.set(h,a.byteOffset)}};g(a,null,[{key:"STEP",get:function(){return 32E3}}]);return a}(),C=function(a){var b={};Object.keys(a).forEach(function(g){var l=
a[g];ArrayBuffer.isView(l)?b[g]={bytes:l.buffer,byteOffset:l.byteOffset,byteLength:l.byteLength}:b[g]=l});return b};return new function(a){a.onmessage=function(b){var g=b.data;b=new Uint8Array(g.encrypted.bytes,g.encrypted.byteOffset,g.encrypted.byteLength);var l=new Uint32Array(g.key.bytes,g.key.byteOffset,g.key.byteLength/4),e=new Uint32Array(g.iv.bytes,g.iv.byteOffset,g.iv.byteLength/4);new x(b,l,e,function(b,l){a.postMessage(C({source:g.source,decrypted:l}),[l.buffer])})}}(a)})()}),Bd=function(b,
g){b.abort();b.pause();g&&g.activePlaylistLoader&&(g.activePlaylistLoader.pause(),g.activePlaylistLoader=null)},rm=function(b,g){return function(){var a=g.segmentLoaders,l=a[b],e=a.main;a=g.mediaTypes[b];var h=a.activeTrack();h=a.activeGroup(h);var m=a.activePlaylistLoader;Bd(l,a);h&&(h.playlistLoader?(l.resyncLoader(),l=h.playlistLoader,a.activePlaylistLoader=l,l.load()):m&&e.resetEverything())}},sm=function(b,g){return function(){var a=g.segmentLoaders,l=a[b],e=a.main;a=g.mediaTypes[b];var h=a.activeTrack(),
m=a.activeGroup(h),p=a.activePlaylistLoader;Bd(l,a);m&&(m.playlistLoader?p===m.playlistLoader?(l=m.playlistLoader,a.activePlaylistLoader=l,l.load()):(l.track&&l.track(h),l.resetEverything(),l=m.playlistLoader,a.activePlaylistLoader=l,l.load()):e.resetEverything())}},Cd={AUDIO:function(b,g){return function(){var a=g.mediaTypes[b],l=g.blacklistCurrentPlaylist;Bd(g.segmentLoaders[b],a);var e=a.activeTrack(),h=a.activeGroup();h=(h.filter(function(a){return a.default})[0]||h[0]).id;h=a.tracks[h];if(e===
h)l({message:"Problem encountered loading the default audio track."});else{D.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(var m in a.tracks)a.tracks[m].enabled=a.tracks[m]===h;a.onTrackChanged()}}},SUBTITLES:function(b,g){return function(){var a=g.segmentLoaders[b],l=g.mediaTypes[b];D.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");Bd(a,l);if(a=l.activeTrack())a.mode="disabled";l.onTrackChanged()}}},Oi={AUDIO:function(b,
g,a){if(g){var l=a.tech,e=a.requestOptions,h=a.segmentLoaders[b];g.on("loadedmetadata",function(){var a=g.media();h.playlist(a,e);(!l.paused()||a.endList&&"none"!==l.preload())&&h.load()});g.on("loadedplaylist",function(){h.playlist(g.media(),e);l.paused()||h.load()});g.on("error",Cd[b](b,a))}},SUBTITLES:function(b,g,a){var l=a.tech,e=a.requestOptions,h=a.segmentLoaders[b],m=a.mediaTypes[b];g.on("loadedmetadata",function(){var a=g.media();h.playlist(a,e);h.track(m.activeTrack());(!l.paused()||a.endList&&
"none"!==l.preload())&&h.load()});g.on("loadedplaylist",function(){h.playlist(g.media(),e);l.paused()||h.load()});g.on("error",Cd[b](b,a))}},tm=function(b,g){return function(a){return a.attributes[b]===g}},um=function(b){return function(g){return g.resolvedUri===b}},vm={AUDIO:function(b,g){var a=g.hls,l=g.sourceType,e=g.segmentLoaders[b],h=g.requestOptions.withCredentials,m=g.master,p=m.mediaGroups;m=m.playlists;var r=g.mediaTypes[b],v=r.groups;r=r.tracks;var x=g.masterPlaylistLoader;p[b]&&0!==Object.keys(p[b]).length||
(p[b]={main:{default:{default:!0}}});for(var C in p[b]){v[C]||(v[C]=[]);var u=m.filter(tm(b,C)),F;for(F in p[b][C]){var w=p[b][C][F];u.filter(um(w.resolvedUri)).length&&delete w.resolvedUri;var S=w.resolvedUri?new yd(w.resolvedUri,a,h):w.playlists&&"dash"===l?new mf(w.playlists[0],a,h,x):null;w=D.mergeOptions({id:F,playlistLoader:S},w);Oi[b](b,w.playlistLoader,g);v[C].push(w);if("undefined"===typeof r[F]){S=D.AudioTrack;var H=F,A=w.default?"main":"alternative";w.characteristics&&0<=w.characteristics.indexOf("public.accessibility.describes-video")&&
(A="main-desc");w=new S({id:H,kind:A,enabled:!1,language:w.language,default:w.default,label:F});r[F]=w}}}e.on("error",Cd[b](b,g))},SUBTITLES:function(b,g){var a=g.tech,l=g.hls,e=g.sourceType,h=g.segmentLoaders[b],m=g.requestOptions.withCredentials,p=g.master.mediaGroups,r=g.mediaTypes[b],v=r.groups;r=r.tracks;var x=g.masterPlaylistLoader,C;for(C in p[b]){v[C]||(v[C]=[]);for(var u in p[b][C])if(!p[b][C][u].forced){var F=p[b][C][u],w=void 0;"hls"===e?w=new yd(F.resolvedUri,l,m):"dash"===e&&(w=new mf(F.playlists[0],
l,m,x));F=D.mergeOptions({id:u,playlistLoader:w},F);Oi[b](b,F.playlistLoader,g);v[C].push(F);"undefined"===typeof r[u]&&(F=a.addRemoteTextTrack({id:u,kind:"subtitles",enabled:!1,language:F.language,label:u},!1).track,r[u]=F)}}h.on("error",Cd[b](b,g))},"CLOSED-CAPTIONS":function(b,g){var a=g.tech,l=g.master.mediaGroups,e=g.mediaTypes[b];g=e.groups;e=e.tracks;for(var h in l[b]){g[h]||(g[h]=[]);for(var m in l[b][h]){var p=l[b][h][m];p.instreamId.match(/CC\d/)&&(g[h].push(D.mergeOptions({id:m},p)),"undefined"===
typeof e[m]&&(p=a.addRemoteTextTrack({id:p.instreamId,kind:"captions",enabled:!1,language:p.language,label:m},!1).track,e[m]=p))}}}},wm=function(b,g){return function(a){var l=g.mediaTypes[b].groups,e=g.masterPlaylistLoader.media();if(!e)return null;var h=null;e.attributes[b]&&(h=l[e.attributes[b]]);h=h||l.main;return"undefined"===typeof a?h:null===a?null:h.filter(function(b){return b.id===a.id})[0]||null}},xm={AUDIO:function(b,g){return function(){var a=g.mediaTypes[b].tracks,l;for(l in a)if(a[l].enabled)return a[l];
return null}},SUBTITLES:function(b,g){return function(){var a=g.mediaTypes[b].tracks,l;for(l in a)if("showing"===a[l].mode)return a[l];return null}}},ym=function(b){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(a){vm[a](a,b)});var g=b.mediaTypes,a=b.masterPlaylistLoader,l=b.tech,e=b.hls;["AUDIO","SUBTITLES"].forEach(function(a){g[a].activeGroup=wm(a,b);g[a].activeTrack=xm[a](a,b);g[a].onGroupChanged=rm(a,b);g[a].onTrackChanged=sm(a,b)});var h=g.AUDIO.activeGroup();h=(h.filter(function(a){return a.default})[0]||
h[0]).id;g.AUDIO.tracks[h].enabled=!0;g.AUDIO.onTrackChanged();a.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(a){return g[a].onGroupChanged()})});var m=function(){g.AUDIO.onTrackChanged();l.trigger({type:"usage",name:"hls-audio-change"})};l.audioTracks().addEventListener("change",m);l.remoteTextTracks().addEventListener("change",g.SUBTITLES.onTrackChanged);e.on("dispose",function(){l.audioTracks().removeEventListener("change",m);l.remoteTextTracks().removeEventListener("change",
g.SUBTITLES.onTrackChanged)});l.clearTracks("audio");for(var p in g.AUDIO.tracks)l.audioTracks().addTrack(g.AUDIO.tracks[p])},zm=function(){var b={};["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(g){b[g]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:lc,activeTrack:lc,onGroupChanged:lc,onTrackChanged:lc}});return b},zb=void 0,Am="mediaRequests mediaRequestsAborted mediaRequestsTimedout mediaRequestsErrored mediaTransferDuration mediaBytesTransferred".split(" "),Bm=function(b){return this.audioSegmentLoader_[b]+
this.mainSegmentLoader_[b]},Cm=function(b){function g(a){Ra(this,g);var b=bb(this,(g.__proto__||Object.getPrototypeOf(g)).call(this)),e=a.url,h=a.withCredentials,m=a.tech,p=a.bandwidth,r=a.externHls,v=a.useCueTags,x=a.blacklistDuration,C=a.enableLowInitialPlaylist,F=a.sourceType,u=a.seekTo;if(!e)throw Error("A non-empty playlist URL is required");zb=r;b.withCredentials=h;b.tech_=m;b.hls_=m.hls;b.seekTo_=u;b.sourceType_=F;b.useCueTags_=v;b.blacklistDuration=x;b.enableLowInitialPlaylist=C;b.useCueTags_&&
(b.cueTagsTrack_=b.tech_.addTextTrack("metadata","ad-cues"),b.cueTagsTrack_.inBandMetadataTrackDispatchType="");b.requestOptions_={withCredentials:b.withCredentials,timeout:null};b.mediaTypes_=zm();b.mediaSource=new D.MediaSource;b.mediaSource.addEventListener("sourceopen",b.handleSourceOpen_.bind(b));b.seekable_=D.createTimeRanges();b.hasPlayed_=function(){return!1};b.syncController_=new pm(a);b.segmentMetadataTrack_=m.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track;b.decrypter_=
new qm;b.inbandTextTracks_={};h={hls:b.hls_,mediaSource:b.mediaSource,currentTime:b.tech_.currentTime.bind(b.tech_),seekable:function(){return b.seekable()},seeking:function(){return b.tech_.seeking()},duration:function(){return b.mediaSource.duration},hasPlayed:function(){return b.hasPlayed_()},goalBufferLength:function(){return b.goalBufferLength()},bandwidth:p,syncController:b.syncController_,decrypter:b.decrypter_,sourceType:b.sourceType_,inbandTextTracks:b.inbandTextTracks_};b.masterPlaylistLoader_=
"dash"===b.sourceType_?new mf(e,b.hls_,b.withCredentials):new yd(e,b.hls_,b.withCredentials);b.setupMasterPlaylistLoaderListeners_();b.mainSegmentLoader_=new pf(D.mergeOptions(h,{segmentMetadataTrack:b.segmentMetadataTrack_,loaderType:"main"}),a);b.audioSegmentLoader_=new pf(D.mergeOptions(h,{loaderType:"audio"}),a);b.subtitleSegmentLoader_=new nm(D.mergeOptions(h,{loaderType:"vtt"}),a);b.setupSegmentLoaderListeners_();Am.forEach(function(a){b[a+"_"]=Bm.bind(b,a)});b.logger_=Oc("MPC");b.masterPlaylistLoader_.load();
return b}mb(g,b);Va(g,[{key:"setupMasterPlaylistLoaderListeners_",value:function(){var a=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var b=a.masterPlaylistLoader_.media(),g=1500*a.masterPlaylistLoader_.targetDuration;ef(a.masterPlaylistLoader_.master,a.masterPlaylistLoader_.media())?a.requestOptions_.timeout=0:a.requestOptions_.timeout=g;b.endList&&"none"!==a.tech_.preload()&&(a.mainSegmentLoader_.playlist(b,a.requestOptions_),a.mainSegmentLoader_.load());ym({sourceType:a.sourceType_,
segmentLoaders:{AUDIO:a.audioSegmentLoader_,SUBTITLES:a.subtitleSegmentLoader_,main:a.mainSegmentLoader_},tech:a.tech_,requestOptions:a.requestOptions_,masterPlaylistLoader:a.masterPlaylistLoader_,hls:a.hls_,master:a.master(),mediaTypes:a.mediaTypes_,blacklistCurrentPlaylist:a.blacklistCurrentPlaylist.bind(a)});a.triggerPresenceUsage_(a.master(),b);try{a.setupSourceBuffers_()}catch(z){return D.log.warn("Failed to create SourceBuffers",z),a.mediaSource.endOfStream("decode")}a.setupFirstPlay();a.trigger("selectedinitialmedia")});
this.masterPlaylistLoader_.on("loadedplaylist",function(){var b=a.masterPlaylistLoader_.media();if(b){if(a.useCueTags_&&a.updateAdCues_(b),a.mainSegmentLoader_.playlist(b,a.requestOptions_),a.updateDuration(),a.tech_.paused()||(a.mainSegmentLoader_.load(),a.audioSegmentLoader_&&a.audioSegmentLoader_.load()),!b.endList){var g=function(){var b=a.seekable();0!==b.length&&a.mediaSource.addSeekableRange_(b.start(0),b.end(0))};if(Infinity!==a.duration())a.tech_.one("durationchange",function Q(){if(Infinity===
a.duration())g();else a.tech_.one("durationchange",Q)});else g()}}else a.excludeUnsupportedVariants_(),b=void 0,a.enableLowInitialPlaylist&&(b=a.selectInitialPlaylist()),b||(b=a.selectPlaylist()),a.initialMedia_=b,a.masterPlaylistLoader_.media(a.initialMedia_)});this.masterPlaylistLoader_.on("error",function(){a.blacklistCurrentPlaylist(a.masterPlaylistLoader_.error)});this.masterPlaylistLoader_.on("mediachanging",function(){a.mainSegmentLoader_.abort();a.mainSegmentLoader_.pause()});this.masterPlaylistLoader_.on("mediachange",
function(){var b=a.masterPlaylistLoader_.media(),g=1500*a.masterPlaylistLoader_.targetDuration;ef(a.masterPlaylistLoader_.master,a.masterPlaylistLoader_.media())?a.requestOptions_.timeout=0:a.requestOptions_.timeout=g;a.mainSegmentLoader_.playlist(b,a.requestOptions_);a.mainSegmentLoader_.load();a.tech_.trigger({type:"mediachange",bubbles:!0})});this.masterPlaylistLoader_.on("playlistunchanged",function(){var b=a.masterPlaylistLoader_.media();a.stuckAtPlaylistEnd_(b)&&(a.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),
a.tech_.trigger("playliststuck"))});this.masterPlaylistLoader_.on("renditiondisabled",function(){a.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})});this.masterPlaylistLoader_.on("renditionenabled",function(){a.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})}},{key:"triggerPresenceUsage_",value:function(a,b){a=a.mediaGroups||{};var g=!0,l=Object.keys(a.AUDIO),e;for(e in a.AUDIO)for(var h in a.AUDIO[e])a.AUDIO[e][h].uri||(g=!1);g&&this.tech_.trigger({type:"usage",name:"hls-demuxed"});
Object.keys(a.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"hls-webvtt"});zb.Playlist.isAes(b)&&this.tech_.trigger({type:"usage",name:"hls-aes"});zb.Playlist.isFmp4(b)&&this.tech_.trigger({type:"usage",name:"hls-fmp4"});l.length&&1<Object.keys(a.AUDIO[l[0]]).length&&this.tech_.trigger({type:"usage",name:"hls-alternate-audio"});this.useCueTags_&&this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"})}},{key:"setupSegmentLoaderListeners_",value:function(){var a=this;this.mainSegmentLoader_.on("bandwidthupdate",
function(){var b=a.selectPlaylist(),g=a.masterPlaylistLoader_.media(),e=a.tech_.buffered();e=e.length?e.end(e.length-1)-a.tech_.currentTime():0;var h=a.bufferLowWaterLine();(!g.endList||a.duration()<Wa.MAX_BUFFER_LOW_WATER_LINE||b.attributes.BANDWIDTH<g.attributes.BANDWIDTH||e>=h)&&a.masterPlaylistLoader_.media(b);a.tech_.trigger("bandwidthupdate")});this.mainSegmentLoader_.on("progress",function(){a.trigger("progress")});this.mainSegmentLoader_.on("error",function(){a.blacklistCurrentPlaylist(a.mainSegmentLoader_.error())});
this.mainSegmentLoader_.on("syncinfoupdate",function(){a.onSyncInfoUpdate_()});this.mainSegmentLoader_.on("timestampoffset",function(){a.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})});this.audioSegmentLoader_.on("syncinfoupdate",function(){a.onSyncInfoUpdate_()});this.mainSegmentLoader_.on("ended",function(){a.onEndOfStream()});this.mainSegmentLoader_.on("earlyabort",function(){a.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},
120)});this.mainSegmentLoader_.on("reseteverything",function(){a.tech_.trigger("hls-reset")});this.mainSegmentLoader_.on("segmenttimemapping",function(b){a.tech_.trigger({type:"hls-segment-time-mapping",mapping:b.mapping})});this.audioSegmentLoader_.on("ended",function(){a.onEndOfStream()})}},{key:"mediaSecondsLoaded_",value:function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"load",value:function(){this.mainSegmentLoader_.load();
this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load();this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}},{key:"smoothQualityChange_",value:function(){var a=this.selectPlaylist();a!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(a),this.mainSegmentLoader_.resetLoader())}},{key:"fastQualityChange_",value:function(){var a=this,b=this.selectPlaylist();b!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(b),
this.mainSegmentLoader_.resetEverything(function(){D.browser.IE_VERSION||D.browser.IS_EDGE?a.tech_.setCurrentTime(a.tech_.currentTime()+.04):a.tech_.setCurrentTime(a.tech_.currentTime())}))}},{key:"play",value:function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.seekTo_(0);this.hasPlayed_()&&this.load();var a=this.tech_.seekable();if(Infinity===this.tech_.duration()&&this.tech_.currentTime()<a.start(0))return this.seekTo_(a.end(a.length-1))}}},{key:"setupFirstPlay",value:function(){var a=
this,b=this.masterPlaylistLoader_.media();if(!b||this.tech_.paused()||this.hasPlayed_())return!1;if(!b.endList){var g=this.seekable();if(!g.length)return!1;if(D.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){a.trigger("firstplay");a.seekTo_(g.end(0));a.hasPlayed_=function(){return!0}}),!1;this.trigger("firstplay");this.seekTo_(g.end(0))}this.hasPlayed_=function(){return!0};this.load();return!0}},{key:"handleSourceOpen_",value:function(){try{this.setupSourceBuffers_()}catch(l){return D.log.warn("Failed to create Source Buffers",
l),this.mediaSource.endOfStream("decode")}if(this.tech_.autoplay()){var a=this.tech_.play();"undefined"!==typeof a&&"function"===typeof a.then&&a.then(null,function(a){})}this.trigger("sourceopen")}},{key:"onEndOfStream",value:function(){var a=this.mainSegmentLoader_.ended_;this.mediaTypes_.AUDIO.activePlaylistLoader&&(a=!this.mainSegmentLoader_.startingMedia_||this.mainSegmentLoader_.startingMedia_.containsVideo?a&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_);a&&this.mediaSource.endOfStream()}},
{key:"stuckAtPlaylistEnd_",value:function(a){if(!this.seekable().length)return!1;var b=this.syncController_.getExpiredTime(a,this.mediaSource.duration);if(null===b)return!1;a=zb.Playlist.playlistEnd(a,b);b=this.tech_.currentTime();var g=this.tech_.buffered();if(!g.length)return a-b<=Kb;g=g.end(g.length-1);return g-b<=Kb&&a-g<=Kb}},{key:"blacklistCurrentPlaylist",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},b=arguments[1];var g=a.playlist||this.masterPlaylistLoader_.media();
b=b||a.blacklistDuration||this.blacklistDuration;if(!g){this.error=a;try{return this.mediaSource.endOfStream("network")}catch(Q){return this.trigger("error")}}var e=1===this.masterPlaylistLoader_.master.playlists.filter(zd).length;if(e)return D.log.warn("Problem encountered with the current HLS playlist. Trying again since it is the final playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(e);g.excludeUntil=Date.now()+1E3*b;this.tech_.trigger("blacklistplaylist");this.tech_.trigger({type:"usage",
name:"hls-rendition-blacklisted"});b=this.selectPlaylist();D.log.warn("Problem encountered with the current HLS playlist."+(a.message?" "+a.message:"")+" Switching to another playlist.");return this.masterPlaylistLoader_.media(b)}},{key:"pauseLoading",value:function(){this.mainSegmentLoader_.pause();this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause();this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}},{key:"setCurrentTime",value:function(a){var b=
wi(this.tech_.buffered(),a);if(!this.masterPlaylistLoader_||!this.masterPlaylistLoader_.media()||!this.masterPlaylistLoader_.media().segments)return 0;if(b&&b.length)return a;this.mainSegmentLoader_.resetEverything();this.mainSegmentLoader_.abort();this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort());this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort());
this.load()}},{key:"duration",value:function(){return this.masterPlaylistLoader_?this.mediaSource?this.mediaSource.duration:zb.Playlist.duration(this.masterPlaylistLoader_.media()):0}},{key:"seekable",value:function(){return this.seekable_}},{key:"onSyncInfoUpdate_",value:function(){var a=void 0;if(this.masterPlaylistLoader_){var b=this.masterPlaylistLoader_.media();if(b){var g=this.syncController_.getExpiredTime(b,this.mediaSource.duration);if(null!==g){var e=zb.Playlist.seekable(b,g);if(0!==e.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){b=
this.mediaTypes_.AUDIO.activePlaylistLoader.media();g=this.syncController_.getExpiredTime(b,this.mediaSource.duration);if(null===g)return;a=zb.Playlist.seekable(b,g);if(0===a.length)return}a?a.start(0)>e.end(0)||e.start(0)>a.end(0)?this.seekable_=e:this.seekable_=D.createTimeRanges([[a.start(0)>e.start(0)?a.start(0):e.start(0),a.end(0)<e.end(0)?a.end(0):e.end(0)]]):this.seekable_=e;this.logger_("seekable updated ["+ff(this.seekable_)+"]");this.tech_.trigger("seekablechanged")}}}}}},{key:"updateDuration",
value:function(){var a=this,b=this.mediaSource.duration,g=zb.Playlist.duration(this.masterPlaylistLoader_.media()),e=this.tech_.buffered(),h=function Fd(){a.mediaSource.duration=g;a.tech_.trigger("durationchange");a.mediaSource.removeEventListener("sourceopen",Fd)};0<e.length&&(g=Math.max(g,e.end(e.length-1)));b!==g&&("open"!==this.mediaSource.readyState?this.mediaSource.addEventListener("sourceopen",h):h())}},{key:"dispose",value:function(){var a=this;this.decrypter_.terminate();this.masterPlaylistLoader_.dispose();
this.mainSegmentLoader_.dispose();["AUDIO","SUBTITLES"].forEach(function(b){b=a.mediaTypes_[b].groups;for(var g in b)b[g].forEach(function(a){a.playlistLoader&&a.playlistLoader.dispose()})});this.audioSegmentLoader_.dispose();this.subtitleSegmentLoader_.dispose()}},{key:"master",value:function(){return this.masterPlaylistLoader_.master}},{key:"media",value:function(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function(){var a=this.masterPlaylistLoader_.media(),
b;if(a&&"open"===this.mediaSource.readyState){var g=this.masterPlaylistLoader_.master;var e=a.segments&&a.segments.length&&a.segments[0].map?"mp4":"mp2t";var h=a.attributes||{};var m=h.CODECS?Mc(h.CODECS):Ci;var p=a.attributes||{};h=!0;var r=!1;if(a){if(g.mediaGroups.AUDIO&&p.AUDIO){var v=g.mediaGroups.AUDIO[p.AUDIO];if(v){r=!0;h=!1;for(var x in v)if(!v[x].uri&&!v[x].playlists){h=!0;break}}}r&&!m.audioProfile&&(h||(m.audioProfile=Sl(g,p.AUDIO)),m.audioProfile||(D.log.warn("Multiple audio tracks present but no audio codec string is specified. Attempting to use the default audio codec (mp4a.40.2)"),
m.audioProfile=Ci.audioProfile));var C;m.videoCodec&&(b=""+m.videoCodec+m.videoObjectTypeIndicator);m.audioProfile&&(C="mp4a.40."+m.audioProfile);g=jf("audio",e,[C]);x=jf("video",e,[b]);e=jf("video",e,[b,C]);b=r?!h&&b?[x,g]:h||b?[e,g]:[g,g]:b?[e]:[g]}else b=[];if(1>b.length)return this.error="No compatible SourceBuffer configuration for the variant stream:"+a.resolvedUri,this.mediaSource.endOfStream("decode");this.configureLoaderMimeTypes_(b);this.excludeIncompatibleVariants_(a)}}},{key:"configureLoaderMimeTypes_",
value:function(a){var b=1<a.length&&-1===a[0].indexOf(",")&&a[0]!==a[1]?new D.EventTarget:null;this.mainSegmentLoader_.mimeType(a[0],b);a[1]&&this.audioSegmentLoader_.mimeType(a[1],b)}},{key:"excludeUnsupportedVariants_",value:function(){this.master().playlists.forEach(function(a){a.attributes.CODECS&&E.MediaSource&&E.MediaSource.isTypeSupported&&!E.MediaSource.isTypeSupported('video/mp4; codecs="'+Rl(a.attributes.CODECS)+'"')&&(a.excludeUntil=Infinity)})}},{key:"excludeIncompatibleVariants_",value:function(a){var b=
2,g=null,e=void 0;a.attributes.CODECS&&(e=Mc(a.attributes.CODECS),g=e.videoCodec,b=e.codecCount);this.master().playlists.forEach(function(a){var l={codecCount:2,videoCodec:null};a.attributes.CODECS&&(l=Mc(a.attributes.CODECS));l.codecCount!==b&&(a.excludeUntil=Infinity);l.videoCodec!==g&&(a.excludeUntil=Infinity)})}},{key:"updateAdCues_",value:function(a){var b=0,g=this.seekable();g.length&&(b=g.start(0));om(a,this.cueTagsTrack_,b)}},{key:"goalBufferLength",value:function(){var a=this.tech_.currentTime(),
b=Wa.GOAL_BUFFER_LENGTH;return Math.min(b+a*Wa.GOAL_BUFFER_LENGTH_RATE,Math.max(b,Wa.MAX_GOAL_BUFFER_LENGTH))}},{key:"bufferLowWaterLine",value:function(){var a=this.tech_.currentTime(),b=Wa.BUFFER_LOW_WATER_LINE;return Math.min(b+a*Wa.BUFFER_LOW_WATER_LINE_RATE,Math.max(b,Wa.MAX_BUFFER_LOW_WATER_LINE))}}]);return g}(D.EventTarget),Dm=function(b,g,a){return function(l){var e=b.master.playlists[g],h=df(e),m=zd(e);if("undefined"===typeof l)return m;l?delete e.disabled:e.disabled=!0;l===m||h||(a(),l?
b.trigger("renditionenabled"):b.trigger("renditiondisabled"));return l}},Em=function t(g,a,l){Ra(this,t);var e=g.masterPlaylistController_.fastQualityChange_.bind(g.masterPlaylistController_);if(a.attributes.RESOLUTION){var h=a.attributes.RESOLUTION;this.width=h.width;this.height=h.height}this.bandwidth=a.attributes.BANDWIDTH;this.id=l;this.enabled=Dm(g.playlists,a.uri,e)},Fm=function(g){var a=g.playlists;g.representations=function(){return a.master.playlists.filter(function(a){return!df(a)}).map(function(a,
e){return new Em(g,a,a.uri)})}},Pi=["seeking","seeked","pause","playing","error"],Gm=function(){function g(a){var l=this;Ra(this,g);this.tech_=a.tech;this.seekable=a.seekable;this.seekTo=a.seekTo;this.consecutiveUpdates=0;this.checkCurrentTimeTimeout_=this.timer_=this.lastRecordedTime=null;this.logger_=Oc("PlaybackWatcher");this.logger_("initialize");var e=function(){return l.monitorCurrentTime_()},h=function(){return l.techWaiting_()},m=function(){return l.cancelTimer_()},p=function(){return l.fixesBadSeeks_()};
this.tech_.on("seekablechanged",p);this.tech_.on("waiting",h);this.tech_.on(Pi,m);this.tech_.on("canplay",e);this.dispose=function(){l.logger_("dispose");l.tech_.off("seekablechanged",p);l.tech_.off("waiting",h);l.tech_.off(Pi,m);l.tech_.off("canplay",e);l.checkCurrentTimeTimeout_&&E.clearTimeout(l.checkCurrentTimeTimeout_);l.cancelTimer_()}}Va(g,[{key:"monitorCurrentTime_",value:function(){this.checkCurrentTime_();this.checkCurrentTimeTimeout_&&E.clearTimeout(this.checkCurrentTimeTimeout_);this.checkCurrentTimeTimeout_=
E.setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:"checkCurrentTime_",value:function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime();else if(!this.tech_.paused()&&!this.tech_.seeking()){var a=this.tech_.currentTime(),g=this.tech_.buffered();if(this.lastRecordedTime===a&&(!g.length||a+Kb>=g.end(g.length-1)))return this.techWaiting_();5<=this.consecutiveUpdates&&a===this.lastRecordedTime?(this.consecutiveUpdates++,
this.waiting_()):a===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=a)}}},{key:"cancelTimer_",value:function(){this.consecutiveUpdates=0;this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_));this.timer_=null}},{key:"fixesBadSeeks_",value:function(){var a=this.tech_.seeking(),g=this.seekable(),e=this.tech_.currentTime(),h=void 0;a&&this.afterSeekableWindow_(g,e)&&(h=g.end(g.length-1));a&&this.beforeSeekableWindow_(g,e)&&(h=g.start(0)+
Kb);return"undefined"!==typeof h?(this.logger_("Trying to seek outside of seekable at time "+e+" with "+("seekable range "+ff(g)+". Seeking to ")+(h+".")),this.seekTo(h),!0):!1}},{key:"waiting_",value:function(){if(!this.techWaiting_()){var a=this.tech_.currentTime(),g=this.tech_.buffered();g=wi(g,a);g.length&&a+3<=g.end(0)&&(this.cancelTimer_(),this.seekTo(a),this.logger_("Stopped at "+a+" while inside a buffered region "+("["+g.start(0)+" -> "+g.end(0)+"]. Attempting to resume ")+"playback by seeking to the current time."),
this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"}))}}},{key:"techWaiting_",value:function(){var a=this.seekable(),g=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_()||this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(a,g))return a=a.end(a.length-1),this.logger_("Fell out of live window at time "+g+". Seeking to "+("live point (seekable end) "+a)),this.cancelTimer_(),this.seekTo(a),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),
!0;var e=this.tech_.buffered();a=xi(e,g);return this.videoUnderflow_(a,e,g)?(this.cancelTimer_(),this.seekTo(g),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0):0<a.length?(e=a.start(0)-g,this.logger_("Stopped at "+g+", setting timer for "+e+", seeking "+("to "+a.start(0))),this.timer_=setTimeout(this.skipTheGap_.bind(this),1E3*e,g),!0):!1}},{key:"afterSeekableWindow_",value:function(a,g){return a.length?g>a.end(a.length-1)+Kb?!0:!1:!1}},{key:"beforeSeekableWindow_",value:function(a,
g){return a.length&&0<a.start(0)&&g<a.start(0)-Kb?!0:!1}},{key:"videoUnderflow_",value:function(a,g,e){return 0===a.length&&(a=this.gapFromVideoUnderflow_(g,e))?(this.logger_("Encountered a gap in video from "+a.start+" to "+a.end+". "+("Seeking to current time "+e)),!0):!1}},{key:"skipTheGap_",value:function(a){var g=this.tech_.buffered(),e=this.tech_.currentTime();g=xi(g,e);this.cancelTimer_();0!==g.length&&e===a&&(this.logger_("skipTheGap_:","currentTime:",e,"scheduled currentTime:",a,"nextRange start:",
g.start(0)),this.seekTo(g.start(0)+dc),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))}},{key:"gapFromVideoUnderflow_",value:function(a,g){if(2>a.length)a=D.createTimeRanges();else{for(var l=[],e=1;e<a.length;e++){var h=a.end(e-1),m=a.start(e);l.push([h,m])}a=D.createTimeRanges(l)}for(l=0;l<a.length;l++)if(e=a.start(l),h=a.end(l),4>g-e&&2<g-e)return{start:e,end:h};return null}}]);return g}(),Hm={errorInterval:30,getSource:function(g){var a=this.tech({IWillNotUseThisInPlugins:!0}).currentSource_;
return g(a)}},Im=function t(a,l){var e=0,h=0,m=D.mergeOptions(Hm,l);a.ready(function(){a.trigger({type:"usage",name:"hls-error-reload-initialized"})});var p=function(){h&&a.currentTime(h)},r=function(l){null!==l&&void 0!==l&&(h=Infinity!==a.duration()&&a.currentTime()||0,a.one("loadedmetadata",p),a.src(l),a.trigger({type:"usage",name:"hls-error-reload"}),a.play())},v=function(){if(Date.now()-e<1E3*m.errorInterval)a.trigger({type:"usage",name:"hls-error-reload-canceled"});else{if(m.getSource&&"function"===
typeof m.getSource)return e=Date.now(),m.getSource.call(a,r);D.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},x=function Lj(){a.off("loadedmetadata",p);a.off("error",v);a.off("dispose",Lj)};a.on("error",v);a.on("dispose",x);a.reloadSourceOnError=function(l){x();t(a,l)}},Qi=function(a){Im(this,a)};D.use("*",function(a){return{setSource:function(a,e){e(null,a)},setCurrentTime:function(l){a.vhs&&a.currentSource().src===a.vhs.source_.src&&a.vhs.setCurrentTime(l);
return l},play:function(){a.vhs&&a.currentSource().src===a.vhs.source_.src&&a.vhs.setCurrentTime(a.currentTime())}}});var ya={PlaylistLoader:yd,Playlist:La,Decrypter:zl,AsyncStream:fi,decrypt:gi,utils:Ll,STANDARD_PLAYLIST_SELECTOR:function(){return im(this.playlists.master,this.systemBandwidth,parseInt(Ki(this.tech_.el(),"width"),10),parseInt(Ki(this.tech_.el(),"height"),10))},INITIAL_PLAYLIST_SELECTOR:function(){var a=this.playlists.master.playlists.filter(La.isEnabled);Pc(a,function(a,e){return of(a,
e)});return a.filter(function(a){return Mc(a.attributes.CODECS).videoCodec})[0]||null},comparePlaylistBandwidth:of,comparePlaylistResolution:function(a,l){var e=void 0,h=void 0;a.attributes.RESOLUTION&&a.attributes.RESOLUTION.width&&(e=a.attributes.RESOLUTION.width);e=e||E.Number.MAX_VALUE;l.attributes.RESOLUTION&&l.attributes.RESOLUTION.width&&(h=l.attributes.RESOLUTION.width);h=h||E.Number.MAX_VALUE;return e===h&&a.attributes.BANDWIDTH&&l.attributes.BANDWIDTH?a.attributes.BANDWIDTH-l.attributes.BANDWIDTH:
e-h},xhr:si()};"GOAL_BUFFER_LENGTH MAX_GOAL_BUFFER_LENGTH GOAL_BUFFER_LENGTH_RATE BUFFER_LOW_WATER_LINE MAX_BUFFER_LOW_WATER_LINE BUFFER_LOW_WATER_LINE_RATE BANDWIDTH_VARIANCE".split(" ").forEach(function(a){Object.defineProperty(ya,a,{get:function(){D.log.warn("using Hls."+a+" is UNSAFE be sure you know what you are doing");return Wa[a]},set:function(l){D.log.warn("using Hls."+a+" is UNSAFE be sure you know what you are doing");"number"!==typeof l||0>l?D.log.warn("value of Hls."+a+" must be greater than or equal to 0"):
Wa[a]=l}})});var Ri=function(a){return/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i.test(a)?"hls":/^application\/dash\+xml/i.test(a)?"dash":null},Si=function(a,l){l=l.media();for(var e=-1,h=0;h<a.length;h++)if(a[h].id===l.uri){e=h;break}a.selectedIndex_=e;a.trigger({selectedIndex:e,type:"change"})},Jm=function(a,l){l.representations().forEach(function(l){a.addQualityLevel(l)});Si(a,l.playlists)};ya.canPlaySource=function(){return D.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};
ya.supportsNativeHls=function(){var a=K.createElement("video");return D.getTech("Html5").isSupported()?"application/vnd.apple.mpegurl audio/mpegurl audio/x-mpegurl application/x-mpegurl video/x-mpegurl video/mpegurl application/mpegurl".split(" ").some(function(l){return/maybe|probably/i.test(a.canPlayType(l))}):!1}();var Km=D.getTech("Html5").isSupported()?/maybe|probably/i.test(K.createElement("video").canPlayType("application/dash+xml")):!1;ya.supportsNativeDash=Km;ya.supportsTypeNatively=function(a){return"hls"===
a?ya.supportsNativeHls:"dash"===a?ya.supportsNativeDash:!1};ya.isSupported=function(){return D.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Ti=function(a){function l(a,e,h){Ra(this,l);var t=bb(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,e,h.hls));e.options_&&e.options_.playerId&&(h=D(e.options_.playerId),h.hasOwnProperty("hls")||Object.defineProperty(h,"hls",{get:function(){D.log.warn("player.hls is deprecated. Use player.tech().hls instead.");
e.trigger({type:"usage",name:"hls-player-access"});return t}}),h.vhs=t,h.dash=t);t.tech_=e;t.source_=a;t.stats={};t.setOptions_();if(t.options_.overrideNative&&e.overrideNativeAudioTracks&&e.overrideNativeVideoTracks)e.overrideNativeAudioTracks(!0),e.overrideNativeVideoTracks(!0);else if(t.options_.overrideNative&&(e.featuresNativeVideoTracks||e.featuresNativeAudioTracks))throw Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");t.on(K,["fullscreenchange","webkitfullscreenchange",
"mozfullscreenchange","MSFullscreenChange"],function(a){(a=K.fullscreenElement||K.webkitFullscreenElement||K.mozFullScreenElement||K.msFullscreenElement)&&a.contains(t.tech_.el())&&t.masterPlaylistController_.smoothQualityChange_()});t.on(t.tech_,"error",function(){this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()});t.on(t.tech_,"play",t.play);return t}mb(l,a);Va(l,[{key:"setOptions_",value:function(){var a=this;this.options_.withCredentials=this.options_.withCredentials||
!1;"number"!==typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300);"number"!==typeof this.options_.bandwidth&&(this.options_.bandwidth=4194304);this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&4194304===this.options_.bandwidth;["withCredentials","bandwidth"].forEach(function(l){"undefined"!==typeof a.source_[l]&&(a.options_[l]=a.source_[l])});this.bandwidth=this.options_.bandwidth}},{key:"src",value:function(a,l){var e=this;a&&(this.setOptions_(),
this.options_.url=this.source_.src,this.options_.tech=this.tech_,this.options_.externHls=ya,this.options_.sourceType=Ri(l),this.options_.seekTo=function(a){e.tech_.setCurrentTime(a);e.setCurrentTime(a)},this.masterPlaylistController_=new Cm(this.options_),this.playbackWatcher_=new Gm(D.mergeOptions(this.options_,{seekable:function(){return e.seekable()}})),this.masterPlaylistController_.on("error",function(){D.players[e.tech_.options_.playerId].error(e.masterPlaylistController_.error)}),this.masterPlaylistController_.selectPlaylist=
this.selectPlaylist?this.selectPlaylist.bind(this):ya.STANDARD_PLAYLIST_SELECTOR.bind(this),this.masterPlaylistController_.selectInitialPlaylist=ya.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(a){this.masterPlaylistController_.selectPlaylist=a.bind(this)}},
throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(a){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=a;this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(a){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=a;this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},
systemBandwidth:{get:function(){return Math.floor(1/(1/(this.bandwidth||1)+(0<this.throughput?1/this.throughput:0)))},set:function(){D.log.error('The "systemBandwidth" property is read-only')}}}),Object.defineProperties(this.stats,{bandwidth:{get:function(){return e.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return e.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return e.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},
mediaRequestsTimedout:{get:function(){return e.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return e.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return e.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return e.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return e.masterPlaylistController_.mediaSecondsLoaded_()||
0},enumerable:!0},buffered:{get:function(){return yi(e.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return e.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return e.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return e.tech_.name_},enumerable:!0},duration:{get:function(){return e.tech_.duration()},enumerable:!0},master:{get:function(){return e.playlists.master},enumerable:!0},playerDimensions:{get:function(){return e.tech_.currentDimensions()},
enumerable:!0},seekable:{get:function(){return yi(e.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return e.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.masterPlaylistController_.on("selectedinitialmedia",function(){Fm(e);if("dash"===e.options_.sourceType){var a=D.players[e.tech_.options_.playerId];
if(a.eme){var l=e.source_.keySystems;var h=e.playlists.media(),t=e.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader.media();if(l){var m={},p;for(p in l)m[p]={audioContentType:'audio/mp4; codecs="'+t.attributes.CODECS+'"',videoContentType:'video/mp4; codecs="'+h.attributes.CODECS+'"'},h.contentProtection&&h.contentProtection[p]&&h.contentProtection[p].pssh&&(m[p].pssh=h.contentProtection[p].pssh),"string"===typeof l[p]&&(m[p].url=l[p]);l=D.mergeOptions(l,m)}l&&(a.currentSource().keySystems=
l)}}}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.tech_.ready(function(){return e.setupQualityLevels_()}),this.tech_.el()&&this.tech_.src(D.URL.createObjectURL(this.masterPlaylistController_.mediaSource)))}},{key:"setupQualityLevels_",value:function(){var a=this,l=D.players[this.tech_.options_.playerId];l&&l.qualityLevels&&(this.qualityLevels_=l.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){Jm(a.qualityLevels_,
a)}),this.playlists.on("mediachange",function(){Si(a.qualityLevels_,a.playlists)}))}},{key:"play",value:function(){this.masterPlaylistController_.play()}},{key:"setCurrentTime",value:function(a){this.masterPlaylistController_.setCurrentTime(a)}},{key:"duration",value:function(){return this.masterPlaylistController_.duration()}},{key:"seekable",value:function(){return this.masterPlaylistController_.seekable()}},{key:"dispose",value:function(){this.playbackWatcher_&&this.playbackWatcher_.dispose();
this.masterPlaylistController_&&this.masterPlaylistController_.dispose();this.qualityLevels_&&this.qualityLevels_.dispose();Al(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"dispose",this).call(this)}}]);return l}(D.getComponent("Component")),qf={name:"videojs-http-streaming",VERSION:"1.2.6",canHandleSource:function(a){var l=D.mergeOptions(D.options,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{});return qf.canPlayType(a.type,l)},handleSource:function(a,l){var e=D.mergeOptions(D.options,
2<arguments.length&&void 0!==arguments[2]?arguments[2]:{});l.hls=new Ti(a,l,e);l.hls.xhr=si();l.hls.src(a.src,a.type);return l.hls},canPlayType:function(a){var l=D.mergeOptions(D.options,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).hls.overrideNative,e=Ri(a);return!e||ya.supportsTypeNatively(e)&&!l?"":"maybe"}};if("undefined"===typeof D.MediaSource||"undefined"===typeof D.URL)D.MediaSource=Nc,D.URL=Gi;Nc.supportsNativeMediaSources()&&D.getTech("Html5").registerSourceHandler(qf,0);D.HlsHandler=
Ti;D.HlsSourceHandler=qf;D.Hls=ya;D.use||D.registerComponent("Hls",ya);D.options.hls=D.options.hls||{};D.registerPlugin?D.registerPlugin("reloadSourceOnError",Qi):D.plugin("reloadSourceOnError",Qi);return D});!function(){var B=window&&window.videojs;B&&(B.CDN_VERSION="7.2.4");!0}();/*
 The MIT License (MIT)
 Player for VAST and VPAID
*/
window.isDesktop=!/Android|Silk|Mobile|PlayBook/.test(window.navigator.userAgent);window.mutedVideoAd=window.mutedVideoAd||!window.isDesktop;
(function(B){"object"===typeof exports&&"undefined"!==typeof module?module.exports=B():"function"===typeof define&&define.amd?define([],B):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).VASTPlayer=B()})(function(){return function h(u,y,w){function p(e,r){if(!y[e]){if(!u[e]){var m="function"==typeof require&&require;if(!r&&m)return m(e,!0);if(A)return A(e,!0);r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r;}r=y[e]=
{exports:{}};u[e][0].call(r.exports,function(h){var m=u[e][1][h];return p(m?m:h)},r,r.exports,h,u,y,w)}return y[e].exports}for(var A="function"==typeof require&&require,e=0;e<w.length;e++)p(w[e]);return p}({1:[function(u,y,w){y.exports=u("./lib/VASTPlayer")},{"./lib/VASTPlayer":5}],2:[function(u,y,w){function h(e,h,p){h.on(e,function(){for(var h=[],m=arguments.length;m--;)h[m]=arguments[m];p.emit.apply(p,[e].concat(h))})}function p(e,m,p){p.forEach(function(p){0<m.listeners(p).length&&h(p,e,m)});
m.on("newListener",function(r){-1<p.indexOf(r)&&1>m.listeners(r).length&&h(r,e,m)})}function A(e){this.events=e.slice();this.__private__={target:null,source:null}}A.prototype.from=function(e){this.__private__.source=e;this.__private__.target&&p(e,this.__private__.target,this.events);return this};A.prototype.to=function(e){this.__private__.target=e;this.__private__.source&&p(this.__private__.source,e,this.events);return this};y.exports=A},{}],3:[function(u,y,w){function h(e){var h=this;p.call(this,
Math.floor(e.duration||0));this.video=e;[A.PLAYING,A.PAUSE,A.TIMEUPDATE].forEach(function(m){return e.addEventListener(m,function(){return h.tick()},!1)})}var p=u("./VideoTracker");w=u("util").inherits;var A=u("./enums/HTML_MEDIA_EVENTS");w(h,p);h.prototype._getState=function(){return{playing:!this.video.paused,currentTime:this.video.currentTime}};y.exports=h},{"./VideoTracker":7,"./enums/HTML_MEDIA_EVENTS":8,util:35}],4:[function(u,y,w){function h(e){return e}function p(e,h){(e||[]).forEach(function(e){(new Image).src=
h(e)})}function A(e,p){this.pixels=e.reduce(function(e,h){h&&(e[h.event]||(e[h.event]=[])).push(h.uri);return e},{});this.__private__={mapper:p||h}}var e=u("./enums/VPAID_EVENTS");A.prototype.track=function(m){function r(e,m,r){function u(e){return v((m||h)(e))}return function(){r&&!r()||p(x[e],u)}}var x=this.pixels,v=this.__private__.mapper,u=m.adVolume;m.on(e.AdSkipped,r("skip"));m.on(e.AdStarted,r("creativeView"));m.on(e.AdVolumeChange,r("unmute",null,function(){return 0===u&&0<m.adVolume}));m.on(e.AdVolumeChange,
r("mute",null,function(){return 0<u&&0===m.adVolume}));m.on(e.AdImpression,r("impression"));m.on(e.AdVideoStart,r("start"));m.on(e.AdVideoFirstQuartile,r("firstQuartile"));m.on(e.AdVideoMidpoint,r("midpoint"));m.on(e.AdVideoThirdQuartile,r("thirdQuartile"));m.on(e.AdVideoComplete,r("complete"));m.on(e.AdClickThru,r("clickThrough"));m.on(e.AdUserAcceptInvitation,r("acceptInvitationLinear"));m.on(e.AdUserMinimize,r("collapse"));m.on(e.AdUserClose,r("closeLinear"));m.on(e.AdPaused,r("pause"));m.on(e.AdPlaying,
r("resume"));m.on(e.AdError,r("error",function(e){return e.replace(/\[ERRORCODE\]/g,901)}));m.on(e.AdVolumeChange,function(){u=m.adVolume})};y.exports=A},{"./enums/VPAID_EVENTS":10}],5:[function(u,y,w){function h(){var e={},m=arguments.length,p,r;for(p=0;p<m;p++){var v=arguments[p]||{};for(r in v){var x=v[r];void 0===e[r]&&(e[r]=x);"object"===typeof x&&(e[r]=h(e[r],x))}}return e}function p(e){return e}function A(){return Error("VASTPlayer not ready.")}function e(e){return function(){var h=this,m=
this.__private__.player;return this.ready?m[e].apply(m,arguments).then(function(){return h}):aa.reject(A())}}function m(e){return{get:function(){if(!this.ready)throw A();return this.__private__.player[e]},set:function(h){if(!this.ready)throw A();return this.__private__.player[e]=h}}}function r(e,m){var r=this;x.call(this);this.__private__={container:e,config:h(m,{vast:{resolveWrappers:!0,maxRedirects:6},tracking:{mapper:p},mutedVideoAd:!0}),vast:null,ready:!1,player:null};window.mutedVideoAd=this.__private__.config.mutedVideoAd||
!window.isDesktop;this.on(F.AdClickThru,function(e,h,m){e=e||r.vast.get("ads[0].creatives[0].videoClicks.clickThrough");m&&e&&window.open(e)})}var x=u("events").EventEmitter;w=u("util").inherits;var v=u("vastacular").VAST,G=u("./players/JavaScriptVPAID"),R=u("./players/FlashVPAID"),P=u("./players/HTMLVideo"),M=u("./enums/MIME"),F=u("./enums/VPAID_EVENTS"),H=u("./EventProxy"),aa=u("lie"),X=u("./PixelReporter");w(r,x);Object.defineProperties(r.prototype,{container:{get:function(){return this.__private__.container}},
config:{get:function(){return this.__private__.config}},vast:{get:function(){return this.__private__.vast}},ready:{get:function(){return this.__private__.ready}},adRemainingTime:m("adRemainingTime"),adDuration:m("adDuration"),adVolume:m("adVolume")});r.prototype.load=function(e){var h=this;return v.fetch(e,this.config.vast).then(function(e){var m=function(){var m=e.filter("ads[0].creatives[0].mediaFiles",function(e){return(e.type===M.JAVASCRIPT||"application/x-javascript"===e.type)&&"VPAID"===e.apiFramework}),
p=e.filter("ads[0].creatives[0].mediaFiles",function(e){return e.type===M.FLASH&&"VPAID"===e.apiFramework}),v=e.filter("ads[0].creatives[0].mediaFiles",function(){return!0});return 0<m.length?{player:new G(h.container),mediaFiles:m}:0<p.length?{player:new R(h.container,r.vpaidSWFLocation),mediaFiles:p}:{player:new P(h.container),mediaFiles:v}}(),p=e.get("ads[0].creatives[0].parameters"),v=[].concat(e.map("ads[0].impressions",function(e){return{event:"impression",uri:e.uri}}),e.map("ads[0].errors",
function(e){return{event:"error",uri:e}}),e.get("ads[0].creatives[0].trackingEvents"),e.map("ads[0].creatives[0].videoClicks.clickTrackings",function(e){return{event:"clickThrough",uri:e}})),x=m.player;m=m.mediaFiles;var C=new H(F),u=new X(v,h.config.tracking.mapper);C.from(x).to(h);h.__private__.vast=e;h.__private__.player=x;return x.load(m,p).then(function(){u.track(x)})}).then(function(){h.__private__.ready=!0;h.emit("ready");return h}).catch(function(e){h.emit("error",e);throw e;})};r.prototype.startAd=
e("startAd");r.prototype.stopAd=e("stopAd");r.prototype.pauseAd=e("pauseAd");r.prototype.skipAd=e("skipAd",F.AdSkipped);r.prototype.resumeAd=e("resumeAd");r.vpaidSWFLocation="https://cdn.jsdelivr.net/npm/vast-player@0.2.10/dist/vast-player--vpaid.swf";y.exports=r},{"./EventProxy":2,"./PixelReporter":4,"./enums/MIME":9,"./enums/VPAID_EVENTS":10,"./players/FlashVPAID":12,"./players/HTMLVideo":13,"./players/JavaScriptVPAID":14,events:19,lie:21,util:35,vastacular:36}],6:[function(u,y,w){function h(h){var p=
h.split(".").map(parseFloat);this.string=h;this.major=p[0];this.minor=p[1];this.patch=p[2];Object.freeze(this)}h.prototype.toString=function(){return this.string};y.exports=h},{}],7:[function(u,y,w){function h(e,h){h.fired[e]||(h.emit(e),h.fired[e]=!0)}function p(h){A.apply(this,arguments);this.duration=h;this.seconds=Array.apply([],Array(h)).map(function(){return!1});this.fired=[e.AdVideoStart,e.AdVideoFirstQuartile,e.AdVideoMidpoint,e.AdVideoThirdQuartile,e.AdVideoComplete].reduce(function(e,h){e[h]=
!1;return e},{})}var A=u("events").EventEmitter;w=u("util").inherits;var e=u("./enums/VPAID_EVENTS");w(p,A);p.prototype.tick=function(){function m(e){return p.slice(0,u[e-1]).every(function(e){return!0===e})}var p=this.seconds,x=this._getState(),v=Math.round(x.currentTime)-1,u=[1,2,3,4].map(function(e){return Math.floor(this.duration/4*e)},this);x.playing&&(h(e.AdVideoStart,this),-1<v&&(this.seconds[v]=!0));m(1)&&h(e.AdVideoFirstQuartile,this);m(2)&&h(e.AdVideoMidpoint,this);m(3)&&h(e.AdVideoThirdQuartile,
this);m(4)&&h(e.AdVideoComplete,this)};y.exports=p},{"./enums/VPAID_EVENTS":10,events:19,util:35}],8:[function(u,y,w){u="abort canplay canplaythrough durationchange emptied encrypted ended error interruptbegin interruptend loadeddata loadedmetadata loadstart mozaudioavailable pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" ");u.forEach(function(h){this[h.toUpperCase()]=h},u);Object.freeze(u);y.exports=u},{}],9:[function(u,y,w){u={JAVASCRIPT:"application/javascript",
FLASH:"application/x-shockwave-flash"};Object.freeze(u);y.exports=u},{}],10:[function(u,y,w){var h="AdLoaded AdStarted AdStopped AdSkipped AdSkippableStateChange AdSizeChange AdLinearChange AdDurationChange AdExpandedChange AdRemainingTimeChange AdVolumeChange AdImpression AdVideoStart AdVideoFirstQuartile AdVideoMidpoint AdVideoThirdQuartile AdVideoComplete AdClickThru AdInteraction AdUserAcceptInvitation AdUserMinimize AdUserClose AdPaused AdPlaying AdLog AdError".split(" ");h.forEach(function(p){h[p]=
p});Object.freeze(h);y.exports=h},{}],11:[function(u,y,w){var h=u("./window"),p=document.createElement("video");p.setAttribute("class","hd1vplayer_video");p.setAttribute("autoplay","true");w.isDesktop=window.isDesktop;p.volume=.4;p.playsinline=!0;p.setAttribute("playsinline","true");!0===window.mutedVideoAd&&(p.muted=!0,p.setAttribute("muted","true"));var A=u("./enums/MIME");w.canPlay=function(e){var m=h.navigator.mimeTypes,r=h.ActiveXObject;switch(e){case A.FLASH:try{return new r("ShockwaveFlash.ShockwaveFlash"),
2}catch(x){return m&&m[A.FLASH]?2:0}case A.JAVASCRIPT:case "application/x-javascript":return 2;default:if(p.canPlayType)switch(p.canPlayType(e)){case "probably":return 2;case "maybe":return 1}}return 0};Object.freeze(w)},{"./enums/MIME":9,"./window":17}],12:[function(u,y,w){function h(e,h){p.apply(this,arguments);this.swfURI=h;this.object=null}var p=u("./VPAID");w=u("util").inherits;var A=u("lie"),e=u("../uuid"),m=u("querystring"),r=u("../enums/VPAID_EVENTS"),x=u("../VPAIDVersion");w(h,p);h.prototype.load=
function(h,p){var v=this,u=h[0].uri,w=h[0].bitrate;return new A(function(h,H){function F(e){v.container.removeChild(A);v.api=null;v.object=null;delete window[C];e&&H(e)}var A=document.createElement("object"),C="vast_player__"+e(20),G=m.stringify({vpaidURI:u,eventCallback:C});A.type="application/x-shockwave-flash";A.data=v.swfURI+"?"+G;A.style.display="block";A.style.width="100%";A.style.height="100%";A.style.border="none";A.style.opacity="0";A.innerHTML=['<param name="movie" value="'+v.swfURI+'">',
'<param name="flashvars" value="'+G+'">','<param name="quality" value="high">\n<param name="play" value="false">\n<param name="loop" value="false">\n<param name="wmode" value="opaque">\n<param name="scale" value="noscale">\n<param name="salign" value="lt">\n<param name="allowScriptAccess" value="always">'].join("\n");v.object=A;window[C]=function(e){switch(e.type){case r.AdClickThru:return v.emit(e.type,e.url,e.Id,e.playerHandles);case r.AdInteraction:case r.AdLog:return v.emit(e.type,e.Id);case r.AdError:return v.emit(e.type,
e.message);default:return v.emit(e.type)}};v.once("VPAIDInterfaceReady",function(){var e=A.getBoundingClientRect(),h=v.vpaidVersion=new x(A.handshakeVersion("2.0"));if(2<h.major)return H(Error("VPAID version "+h+" is not supported."));v.on("VPAIDInterfaceResize",function(){var e=A.getBoundingClientRect();v.resizeAd(e.width,e.height,"normal")});A.initAd(e.width,e.height,"normal",w,p,null)});v.once(r.AdLoaded,function(){v.api=A;A.style.opacity="1";h(v)});v.once(r.AdError,function(e){F(Error(e))});v.once(r.AdStopped,
F);v.container.appendChild(A)})};y.exports=h},{"../VPAIDVersion":6,"../enums/VPAID_EVENTS":10,"../uuid":16,"./VPAID":15,lie:21,querystring:26,util:35}],13:[function(u,y,w){function h(e,h,m){return e.addEventListener(h,m,!1)}function p(e,m,p){return h(e,m,function ba(){e.removeEventListener(m,ba,!1);return p.apply(this,arguments)})}function A(e,h){function m(){return Error("The <video> has not been loaded.")}return function(){if(!this.video){if(h)return x.reject(m());throw m();}return e.apply(this,
arguments)}}function e(e,h){var m=h.width;e=e.map(function(e){return{mediaFile:e,playability:v(e.type)}}).filter(function(e){return 0<e.playability}).sort(G("-playability","-mediaFile.bitrate"));h=e.map(function(e){return Math.abs(m-e.mediaFile.width)});e=e[h.indexOf(Math.min.apply(Math,h))];return!e||1>e.playability?null:e.mediaFile}function m(e){this.container=e;this.video=null;this.__private__={hasPlayed:!1}}w=u("events").EventEmitter;var r=u("util").inherits,x=u("lie"),v=u("../environment").canPlay,
G=u("sort-by"),R=u("../enums/VPAID_EVENTS"),P=u("../enums/HTML_MEDIA_EVENTS"),M=u("../HTMLVideoTracker"),F=u("../EventProxy");r(m,w);Object.defineProperties(m.prototype,{adRemainingTime:{get:A(function(){return this.video.duration-this.video.currentTime})},adDuration:{get:A(function(){return this.video.duration})},adVolume:{get:A(function(){return this.video.volume}),set:A(function(e){this.video.volume=e})}});m.prototype.load=function(m){var r=this;return new x(function(v,x){var C=document.createElement("video"),
u=e(m,r.container.getBoundingClientRect());if(!u)return x(Error("There are no playable <MediaFile>s."));C.setAttribute("webkit-playsinline",!0);C.volume=.4;C.setAttribute("playsinline","true");C.playsinline=!0;!0===window.mutedVideoAd&&(C.muted=!0,C.setAttribute("muted","true"));C.src=u.uri.trim();C.preload="auto";C.setAttribute("autoplay","true");C.style.display="block";C.style.width="100%";C.style.height="100%";C.style.objectFit="contain";C.setAttribute("class","hd1vplayer_video");p(C,P.LOADEDMETADATA,
function(){var e=new M(C);(new F(R)).from(e).to(r);r.video=C;v(r);r.emit(R.AdLoaded);h(C,P.DURATIONCHANGE,function(){r.emit(R.AdDurationChange)});h(C,P.VOLUMECHANGE,function(){r.emit(R.AdVolumeChange)})});p(C,P.ERROR,function(){var e=C.error;r.emit(R.AdError,e.message);x(e)});p(C,P.PLAYING,function(){r.__private__.hasPlayed=!0;r.emit(R.AdImpression)});p(C,P.ENDED,function(){r.stopAd()});h(C,"click",function(){r.emit(R.AdClickThru,null,null,!0)});r.container.appendChild(C)})};m.prototype.startAd=A(function(){var e=
this,h=this.video;return this.__private__.hasPlayed?x.reject(Error("The ad has already been started.")):new x(function(m){p(h,P.PLAYING,function(){m(e);e.emit(R.AdStarted)});return h.play()})},!0);m.prototype.stopAd=A(function(){this.container.removeChild(this.video);this.emit(R.AdStopped);return x.resolve(this)},!0);m.prototype.pauseAd=A(function(){var e=this,h=this.video;return this.video.paused?x.resolve(this):new x(function(m){p(h,P.PAUSE,function(){m(e);e.emit(R.AdPaused)});return h.pause()})},
!0);m.prototype.resumeAd=A(function(){var e=this,h=this.video;return this.__private__.hasPlayed?this.video.paused?new x(function(m){p(h,P.PLAY,function(){m(e);e.emit(R.AdPlaying)});return h.play()}):x.resolve(this):x.reject(Error("The ad has not been started yet."))},!0);y.exports=m},{"../EventProxy":2,"../HTMLVideoTracker":3,"../enums/HTML_MEDIA_EVENTS":8,"../enums/VPAID_EVENTS":10,"../environment":11,events:19,lie:21,"sort-by":28,util:35}],14:[function(u,y,w){function h(){p.apply(this,arguments);
this.frame=null}w=u("util").inherits;var p=u("./VPAID"),A=u("lie"),e=u("../enums/VPAID_EVENTS"),m=u("../environment").isDesktop,r=u("../VPAIDVersion");w(h,p);h.prototype.load=function(h,p){var v=this,x=h[0].uri;x=x?x.trim():"";var u=h[0].bitrate;return new A(function(h,F){function w(e){v.container.removeChild(A);v.frame=null;v.api=null;e&&F(e)}var A=document.createElement("iframe"),G=document.createElement("script"),C=document.createElement("video");A.src="about:blank";A.style.width="100%";A.style.height=
"100%";A.style.display="block";A.style.opacity="1";A.style.border="none";A.setAttribute("frameborder","0");A.setAttribute("allowfullscreen","true");A.setAttribute("scrolling","no");A.setAttribute("allow","autoplay");A.setAttribute("class","hd1vplayer_iframe");A.setAttribute("id","vpaid_iframe");C.setAttribute("webkit-playsinline","true");C.setAttribute("playsinline","true");C.setAttribute("autoplay","true");C.volume=.4;C.playsinline=!0;C.setAttribute("playsinline","true");!0===window.mutedVideoAd&&
(C.muted=!0,C.setAttribute("muted","true"));C.style.display="block";C.style.width="100%";C.style.height="100%";C.style.objectFit="contain";v.container.appendChild(A);A.contentWindow.document.open();A.contentWindow.document.close();setTimeout(function(){A.contentWindow.document.body.appendChild(C)},600);A.contentWindow.document.body.style.margin="0";v.frame=A;G.src=x;G.onload=function(){var x=A.contentWindow.getVPAIDAd(),S=A.getBoundingClientRect(),H=A.contentWindow.document.body,G=v.vpaidVersion=
new r(x.handshakeVersion("2.0"));if(2<G.major)return F(Error("VPAID version "+G+" is not supported."));A.contentWindow.addEventListener("resize",function(){var e=A.getBoundingClientRect();v.resizeAd(e.width,e.height,"normal")},!1);e.forEach(function(e){return x.subscribe(function(){for(var h=Array(arguments.length),m=arguments.length;m--;)h[m]=arguments[m];return v.emit.apply(v,[e].concat(h))},e)});v.once(e.AdLoaded,function(){A.style.opacity="1";v.api=x;h(v)});v.once(e.AdError,function(e){w(Error(e))});
v.once(e.AdStopped,w);x.initAd(S.width,S.height,"normal",u,{AdParameters:p},{slot:H,videoSlot:C,videoSlotCanAutoPlay:m,playerHadarOne:!0})};G.onerror=function(){w(Error("Failed to load MediaFile ["+x+"]."))};A.contentWindow.document.head.appendChild(G)})};y.exports=h},{"../VPAIDVersion":6,"../enums/VPAID_EVENTS":10,"../environment":11,"./VPAID":15,lie:21,util:35}],15:[function(u,y,w){function h(h,p){return function(){var m=arguments,r=this.api,u=this;if(!p){if(!r)throw Error("Ad has not been loaded.");
return r[h].apply(r,m)}return new e(function(e,v){if(!r)return v(Error("Ad has not been loaded."));u.once(p,function(){e(u)});return r[h].apply(r,m)})}}function p(e){this.container=e;this.vpaidVersion=this.api=null}w=u("util").inherits;var A=u("events").EventEmitter,e=u("lie");u=u("../enums/VPAID_EVENTS");w(p,A);Object.defineProperties(p.prototype,{adLinear:{get:h("getAdLinear")},adWidth:{get:h("getAdWidth")},adHeight:{get:h("getAdHeight")},adExpanded:{get:h("getAdExpanded")},adSkippableState:{get:h("getAdSkippableState")},
adRemainingTime:{get:h("getAdRemainingTime")},adDuration:{get:h("getAdDuration")},adVolume:{get:h("getAdVolume"),set:h("setAdVolume")},adCompanions:{get:h("getAdCompanions")},adIcons:{get:h("getAdIcons")}});p.prototype.load=function(){throw Error("VPAID subclass must implement load() method.");};p.prototype.resizeAd=h("resizeAd",u.AdSizeChange);p.prototype.startAd=h("startAd",u.AdStarted);p.prototype.stopAd=h("stopAd",u.AdStopped);p.prototype.pauseAd=h("pauseAd",u.AdPaused);p.prototype.resumeAd=h("resumeAd",
u.AdPlaying);p.prototype.expandAd=h("expandAd",u.AdExpandedChange);p.prototype.collapseAd=h("collapseAd",u.AdExpandedChange);p.prototype.skipAd=h("skipAd",u.AdSkipped);y.exports=p},{"../enums/VPAID_EVENTS":10,events:19,lie:21,util:35}],16:[function(u,y,w){y.exports=function(h){for(var p="";h--;)p+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".charAt(Math.floor(62*Math.random()));return p}},{}],17:[function(u,y,w){y.exports=window},{}],18:[function(u,y,w){function h(p){if(p){for(var u in h.prototype)p[u]=
h.prototype[u];return p}}"undefined"!==typeof y&&(y.exports=h);h.prototype.on=h.prototype.addEventListener=function(h,u){this._callbacks=this._callbacks||{};(this._callbacks["$"+h]=this._callbacks["$"+h]||[]).push(u);return this};h.prototype.once=function(h,u){function e(){this.off(h,e);u.apply(this,arguments)}e.fn=u;this.on(h,e);return this};h.prototype.off=h.prototype.removeListener=h.prototype.removeAllListeners=h.prototype.removeEventListener=function(h,u){this._callbacks=this._callbacks||{};
if(0==arguments.length)return this._callbacks={},this;var e=this._callbacks["$"+h];if(!e)return this;if(1==arguments.length)return delete this._callbacks["$"+h],this;for(var m,p=0;p<e.length;p++)if(m=e[p],m===u||m.fn===u){e.splice(p,1);break}return this};h.prototype.emit=function(h){this._callbacks=this._callbacks||{};var p=[].slice.call(arguments,1),e=this._callbacks["$"+h];if(e){e=e.slice(0);for(var m=0,r=e.length;m<r;++m)e[m].apply(this,p)}return this};h.prototype.listeners=function(h){this._callbacks=
this._callbacks||{};return this._callbacks["$"+h]||[]};h.prototype.hasListeners=function(h){return!!this.listeners(h).length}},{}],19:[function(u,y,w){function h(){this._events=this._events||{};this._maxListeners=this._maxListeners||void 0}function p(e){return"function"===typeof e}function A(e){return"object"===typeof e&&null!==e}y.exports=h;h.EventEmitter=h;h.prototype._events=void 0;h.prototype._maxListeners=void 0;h.defaultMaxListeners=10;h.prototype.setMaxListeners=function(e){if("number"!==typeof e||
0>e||isNaN(e))throw TypeError("n must be a positive number");this._maxListeners=e;return this};h.prototype.emit=function(e){var h;this._events||(this._events={});if("error"===e&&(!this._events.error||A(this._events.error)&&!this._events.error.length)){var r=arguments[1];if(r instanceof Error)throw r;throw TypeError('Uncaught, unspecified "error" event.');}var x=this._events[e];if(void 0===x)return!1;if(p(x))switch(arguments.length){case 1:x.call(this);break;case 2:x.call(this,arguments[1]);break;
case 3:x.call(this,arguments[1],arguments[2]);break;default:r=arguments.length;var v=Array(r-1);for(h=1;h<r;h++)v[h-1]=arguments[h];x.apply(this,v)}else if(A(x)){r=arguments.length;v=Array(r-1);for(h=1;h<r;h++)v[h-1]=arguments[h];x=x.slice();r=x.length;for(h=0;h<r;h++)x[h].apply(this,v)}return!0};h.prototype.addListener=function(e,m){if(!p(m))throw TypeError("listener must be a function");this._events||(this._events={});this._events.newListener&&this.emit("newListener",e,p(m.listener)?m.listener:
m);this._events[e]?A(this._events[e])?this._events[e].push(m):this._events[e]=[this._events[e],m]:this._events[e]=m;A(this._events[e])&&!this._events[e].warned&&(m=void 0!==this._maxListeners?this._maxListeners:h.defaultMaxListeners)&&0<m&&this._events[e].length>m&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"===typeof console.trace&&console.trace());
return this};h.prototype.on=h.prototype.addListener;h.prototype.once=function(e,h){function m(){this.removeListener(e,m);x||(x=!0,h.apply(this,arguments))}if(!p(h))throw TypeError("listener must be a function");var x=!1;m.listener=h;this.on(e,m);return this};h.prototype.removeListener=function(e,h){if(!p(h))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;var m=this._events[e];var x=m.length;var v=-1;if(m===h||p(m.listener)&&m.listener===h)delete this._events[e],
this._events.removeListener&&this.emit("removeListener",e,h);else if(A(m)){for(;0<x--;)if(m[x]===h||m[x].listener&&m[x].listener===h){v=x;break}if(0>v)return this;1===m.length?(m.length=0,delete this._events[e]):m.splice(v,1);this._events.removeListener&&this.emit("removeListener",e,h)}return this};h.prototype.removeAllListeners=function(e){if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(h in this._events)"removeListener"!==
h&&this.removeAllListeners(h);this.removeAllListeners("removeListener");this._events={};return this}var h=this._events[e];if(p(h))this.removeListener(e,h);else for(;h.length;)this.removeListener(e,h[h.length-1]);delete this._events[e];return this};h.prototype.listeners=function(e){return this._events&&this._events[e]?p(this._events[e])?[this._events[e]]:this._events[e].slice():[]};h.listenerCount=function(e,h){return e._events&&e._events[h]?p(e._events[h])?1:e._events[h].length:0}},{}],20:[function(u,
y,w){(function(h){function p(){v=!0;for(var e,h,m=w.length;m;){h=w;w=[];for(e=-1;++e<m;)h[e]();m=w.length}v=!1}var u=h.MutationObserver||h.WebKitMutationObserver;if(u){var e=0;u=new u(p);var m=h.document.createTextNode("");u.observe(m,{characterData:!0});var r=function(){m.data=e=++e%2}}else if(h.setImmediate||"undefined"===typeof h.MessageChannel)r="document"in h&&"onreadystatechange"in h.document.createElement("script")?function(){var e=h.document.createElement("script");e.onreadystatechange=function(){p();
e.onreadystatechange=null;e.parentNode.removeChild(e);e=null};h.document.documentElement.appendChild(e)}:function(){setTimeout(p,0)};else{var x=new h.MessageChannel;x.port1.onmessage=p;r=function(){x.port2.postMessage(0)}}var v,w=[];y.exports=function(e){1!==w.push(e)||v||r()}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],21:[function(u,y,w){function h(){}function p(e){if("function"!==typeof e)throw new TypeError("resolver must be a function");
this.state=M;this.queue=[];this.outcome=void 0;e!==h&&r(this,e)}function A(e,h,m){this.promise=e;"function"===typeof h&&(this.onFulfilled=h,this.callFulfilled=this.otherCallFulfilled);"function"===typeof m&&(this.onRejected=m,this.callRejected=this.otherCallRejected)}function e(e,h,m){v(function(){try{var p=h(m)}catch(C){return G.reject(e,C)}p===e?G.reject(e,new TypeError("Cannot resolve promise with itself")):G.resolve(e,p)})}function m(e){var h=e&&e.then;if(e&&("object"===typeof e||"function"===
typeof e)&&"function"===typeof h)return function(){h.apply(e,arguments)}}function r(e,h){function m(h){r||(r=!0,G.reject(e,h))}function p(h){r||(r=!0,G.resolve(e,h))}var r=!1,v=x(function(){h(p,m)});"error"===v.status&&m(v.value)}function x(e,h){var m={};try{m.value=e(h),m.status="success"}catch(X){m.status="error",m.value=X}return m}var v=u("immediate"),G={},R=["REJECTED"],P=["FULFILLED"],M=["PENDING"];y.exports=p;p.prototype["finally"]=function(e){if("function"!==typeof e)return this;var h=this.constructor;
return this.then(function(m){return h.resolve(e()).then(function(){return m})},function(m){return h.resolve(e()).then(function(){throw m;})})};p.prototype["catch"]=function(e){return this.then(null,e)};p.prototype.then=function(m,p){if("function"!==typeof m&&this.state===P||"function"!==typeof p&&this.state===R)return this;var r=new this.constructor(h);this.state!==M?e(r,this.state===P?m:p,this.outcome):this.queue.push(new A(r,m,p));return r};A.prototype.callFulfilled=function(e){G.resolve(this.promise,
e)};A.prototype.otherCallFulfilled=function(h){e(this.promise,this.onFulfilled,h)};A.prototype.callRejected=function(e){G.reject(this.promise,e)};A.prototype.otherCallRejected=function(h){e(this.promise,this.onRejected,h)};G.resolve=function(e,h){var p=x(m,h);if("error"===p.status)return G.reject(e,p.value);if(p=p.value)r(e,p);else{e.state=P;e.outcome=h;p=-1;for(var v=e.queue.length;++p<v;)e.queue[p].callFulfilled(h)}return e};G.reject=function(e,h){e.state=R;e.outcome=h;for(var m=-1,p=e.queue.length;++m<
p;)e.queue[m].callRejected(h);return e};p.resolve=function(e){return e instanceof this?e:G.resolve(new this(h),e)};p.reject=function(e){var m=new this(h);return G.reject(m,e)};p.all=function(e){function m(e,h){p.resolve(e).then(function(e){x[h]=e;++u!==r||v||(v=!0,G.resolve(F,x))},function(e){v||(v=!0,G.reject(F,e))})}var p=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,v=!1;if(!r)return this.resolve([]);for(var x=
Array(r),u=0,w=-1,F=new this(h);++w<r;)m(e[w],w);return F};p.race=function(e){function m(e){p.resolve(e).then(function(e){v||(v=!0,G.resolve(u,e))},function(e){v||(v=!0,G.reject(u,e))})}var p=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,v=!1;if(!r)return this.resolve([]);for(var x=-1,u=new this(h);++x<r;)m(e[x]);return u}},{immediate:20}],22:[function(u,y,w){(function(h,p){"object"===typeof y&&"object"===typeof y.exports?
y.exports=p():h.objectPath=p()})(this,function(){function h(h){if(!h)return!0;if(!e(h)||0!==h.length)for(var m in h)if(w.call(h,m))return!1;return!0}function p(e){return"number"===typeof e||"[object Number]"===v.call(e)}function u(e){return"string"===typeof e||"[object String]"===v.call(e)}function e(e){return"object"===typeof e&&"number"===typeof e.length&&"[object Array]"===v.call(e)}function m(e){var h=parseInt(e);return h.toString()===e?h:e}function r(e,v,x,w){p(v)&&(v=[v]);if(h(v))return e;if(u(v))return r(e,
v.split("."),x,w);var F=m(v[0]);if(1===v.length)return v=e[F],void 0!==v&&w||(e[F]=x),v;void 0===e[F]&&(p(F)?e[F]=[]:e[F]={});return r(e[F],v.slice(1),x,w)}function x(r,v){p(v)&&(v=[v]);if(!h(r)){if(h(v))return r;if(u(v))return x(r,v.split("."));var w=m(v[0]),A=r[w];if(1===v.length)void 0!==A&&(e(r)?r.splice(w,1):delete r[w]);else if(void 0!==r[w])return x(r[w],v.slice(1));return r}}var v=Object.prototype.toString,w=Object.prototype.hasOwnProperty,y={ensureExists:function(e,h,m){return r(e,h,m,!0)},
set:function(e,h,m,p){return r(e,h,m,p)},insert:function(h,m,p,r){var v=y.get(h,m);r=~~r;e(v)||(v=[],y.set(h,m,v));v.splice(r,0,p)},empty:function(m,r){if(h(r))return m;if(!h(m)){var x,A;if(!(x=y.get(m,r)))return m;if(u(x))return y.set(m,r,"");if("boolean"===typeof x||"[object Boolean]"===v.call(x))return y.set(m,r,!1);if(p(x))return y.set(m,r,0);if(e(x))x.length=0;else if("object"===typeof x&&"[object Object]"===v.call(x))for(A in x)w.call(x,A)&&delete x[A];else return y.set(m,r,null)}},push:function(h,
m){var p=y.get(h,m);e(p)||(p=[],y.set(h,m,p));p.push.apply(p,Array.prototype.slice.call(arguments,2))},coalesce:function(e,h,m){for(var p,r=0,v=h.length;r<v;r++)if(void 0!==(p=y.get(e,h[r])))return p;return m},get:function(e,r,v){p(r)&&(r=[r]);if(h(r))return e;if(h(e))return v;if(u(r))return y.get(e,r.split("."),v);var x=m(r[0]);return 1===r.length?void 0===e[x]?v:e[x]:y.get(e[x],r.slice(1),v)},del:function(e,h){return x(e,h)}};return y})},{}],23:[function(u,y,w){function h(){throw Error("setTimeout has not been defined");
}function p(){throw Error("clearTimeout has not been defined");}function A(e){if(G===setTimeout)return setTimeout(e,0);if((G===h||!G)&&setTimeout)return G=setTimeout,setTimeout(e,0);try{return G(e,0)}catch(X){try{return G.call(null,e,0)}catch(C){return G.call(this,e,0)}}}function e(e){if(R===clearTimeout)return clearTimeout(e);if((R===p||!R)&&clearTimeout)return R=clearTimeout,clearTimeout(e);try{return R(e)}catch(X){try{return R.call(null,e)}catch(C){return R.call(this,e)}}}function m(){M&&F&&(M=
!1,F.length?P=F.concat(P):H=-1,P.length&&r())}function r(){if(!M){var h=A(m);M=!0;for(var p=P.length;p;){F=P;for(P=[];++H<p;)F&&F[H].run();H=-1;p=P.length}F=null;M=!1;e(h)}}function x(e,h){this.fun=e;this.array=h}function v(){}u=y.exports={};try{var G="function"===typeof setTimeout?setTimeout:h}catch(aa){G=h}try{var R="function"===typeof clearTimeout?clearTimeout:p}catch(aa){R=p}var P=[],M=!1,F,H=-1;u.nextTick=function(e){var h=Array(arguments.length-1);if(1<arguments.length)for(var m=1;m<arguments.length;m++)h[m-
1]=arguments[m];P.push(new x(e,h));1!==P.length||M||A(r)};x.prototype.run=function(){this.fun.apply(null,this.array)};u.title="browser";u.browser=!0;u.env={};u.argv=[];u.version="";u.versions={};u.on=v;u.addListener=v;u.once=v;u.off=v;u.removeListener=v;u.removeAllListeners=v;u.emit=v;u.prependListener=v;u.prependOnceListener=v;u.listeners=function(e){return[]};u.binding=function(e){throw Error("process.binding is not supported");};u.cwd=function(){return"/"};u.chdir=function(e){throw Error("process.chdir is not supported");
};u.umask=function(){return 0}},{}],24:[function(u,y,w){y.exports=function(p,u,e,m){e=e||"=";var r={};if("string"!==typeof p||0===p.length)return r;var x=/\+/g;p=p.split(u||"&");u=1E3;m&&"number"===typeof m.maxKeys&&(u=m.maxKeys);m=p.length;0<u&&m>u&&(m=u);for(u=0;u<m;++u){var v=p[u].replace(x,"%20"),w=v.indexOf(e);if(0<=w){var A=v.substr(0,w);v=v.substr(w+1)}else A=v,v="";A=decodeURIComponent(A);v=decodeURIComponent(v);Object.prototype.hasOwnProperty.call(r,A)?h(r[A])?r[A].push(v):r[A]=[r[A],v]:
r[A]=v}return r};var h=Array.isArray||function(h){return"[object Array]"===Object.prototype.toString.call(h)}},{}],25:[function(u,y,w){function h(e,h){if(e.map)return e.map(h);for(var m=[],p=0;p<e.length;p++)m.push(h(e[p],p));return m}var p=function(e){switch(typeof e){case "string":return e;case "boolean":return e?"true":"false";case "number":return isFinite(e)?e:"";default:return""}};y.exports=function(m,r,x,v){r=r||"&";x=x||"=";null===m&&(m=void 0);return"object"===typeof m?h(e(m),function(e){var v=
encodeURIComponent(p(e))+x;return A(m[e])?h(m[e],function(e){return v+encodeURIComponent(p(e))}).join(r):v+encodeURIComponent(p(m[e]))}).join(r):v?encodeURIComponent(p(v))+x+encodeURIComponent(p(m)):""};var A=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},e=Object.keys||function(e){var h=[],m;for(m in e)Object.prototype.hasOwnProperty.call(e,m)&&h.push(m);return h}},{}],26:[function(u,y,w){w.decode=w.parse=u("./decode");w.encode=w.stringify=u("./encode")},{"./decode":24,
"./encode":25}],27:[function(u,y,w){y.exports=function(h,p,u){for(var e=0,m=h.length,r=3==arguments.length?u:h[e++];e<m;)r=p.call(null,r,h[e],++e,h);return r}},{}],28:[function(u,y,w){var h=u("object-path");var p=function(e){return function(h){return typeof h===e}};var A=function(e,m){var p=1,x=m||function(e,h){return h};"-"===e[0]&&(p=-1,e=e.substr(1));return function(m,r){var v;m=x(e,h.get(m,e));r=x(e,h.get(r,e));m<r&&(v=-1);m>r&&(v=1);m===r&&(v=0);return v*p}};y.exports=function(){var e=Array.prototype.slice.call(arguments),
h=e.filter(p("string")),r=e.filter(p("function"))[0];return function(e,m){for(var p=h.length,v=0,x=0;0===v&&x<p;)v=A(h[x],r)(e,m),x++;return v}}},{"object-path":22}],29:[function(u,y,w){function h(){}function p(e){switch({}.toString.call(e)){case "[object File]":case "[object Blob]":case "[object FormData]":return!0;default:return!1}}function A(h){if(!M(h))return h;var m=[],p;for(p in h)null!=h[p]&&e(m,p,h[p]);return m.join("&")}function e(h,m,p){if(Array.isArray(p))return p.forEach(function(p){e(h,
m,p)});h.push(encodeURIComponent(m)+"="+encodeURIComponent(p))}function m(e){var h={};e=e.split("&");for(var m,p=0,r=e.length;p<r;++p)m=e[p],m=m.split("="),h[decodeURIComponent(m[0])]=decodeURIComponent(m[1]);return h}function r(e){return R(e.split(/ *; */),function(e,h){var m=h.split(/ *= */);h=m.shift();m=m.shift();h&&m&&(e[h]=m);return e},{})}function x(e,h){this.req=e;this.xhr=this.req.xhr;this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"===
typeof this.xhr.responseType?this.xhr.responseText:null;this.statusText=this.req.xhr.statusText;this.setStatusProperties(this.xhr.status);e=this.xhr.getAllResponseHeaders().split(/\r?\n/);h={};e.pop();for(var m=0,p=e.length;m<p;++m){var r=e[m];var v=r.indexOf(":");var x=r.slice(0,v).toLowerCase();v=aa(r.slice(v+1));h[x]=v}this.header=this.headers=h;this.header["content-type"]=this.xhr.getResponseHeader("content-type");this.setHeaderProperties(this.header);this.body="HEAD"!=this.req.method?this.parseBody(this.text?
this.text:this.xhr.response):null}function v(e,h){var m=this;this._query=this._query||[];this.method=e;this.url=h;this.header={};this._header={};this.on("end",function(){var e=null,h=null;try{h=new x(m)}catch(Ba){return e=Error("Parser is unable to parse the response"),e.parse=!0,e.original=Ba,e.rawResponse=m.xhr&&m.xhr.responseText?m.xhr.responseText:null,e.statusCode=m.xhr&&m.xhr.status?m.xhr.status:null,m.callback(e)}m.emit("response",h);if(e||200<=h.status&&300>h.status)return m.callback(e,h);
var p=Error(h.statusText||"Unsuccessful HTTP response");p.original=e;p.response=h;p.status=h.status;m.callback(p,h)})}function G(e,h){e=H("DELETE",e);h&&e.end(h);return e}w=u("emitter");var R=u("reduce"),P=u("./request-base"),M=u("./is-object");var F="undefined"!==typeof window?window:"undefined"!==typeof self?self:this;var H=y.exports=u("./request").bind(null,v);H.getXHR=function(){if(!F.XMLHttpRequest||F.location&&"file:"==F.location.protocol&&F.ActiveXObject){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(C){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(C){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(C){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(C){}}else return new XMLHttpRequest;
return!1};var aa="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};H.serializeObject=A;H.parseString=m;H.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"};H.serialize={"application/x-www-form-urlencoded":A,"application/json":JSON.stringify};H.parse={"application/x-www-form-urlencoded":m,"application/json":JSON.parse};
x.prototype.get=function(e){return this.header[e.toLowerCase()]};x.prototype.setHeaderProperties=function(e){e=this.header["content-type"]||"";this.type=e.split(/ *; */).shift();e=r(e);for(var h in e)this[h]=e[h]};x.prototype.parseBody=function(e){var h=H.parse[this.type];!h&&/[\/+]json\b/.test(this.type)&&(h=H.parse["application/json"]);return h&&e&&(e.length||e instanceof Object)?h(e):null};x.prototype.setStatusProperties=function(e){1223===e&&(e=204);var h=e/100|0;this.status=this.statusCode=e;
this.statusType=h;this.info=1==h;this.ok=2==h;this.clientError=4==h;this.serverError=5==h;this.error=4==h||5==h?this.toError():!1;this.accepted=202==e;this.noContent=204==e;this.badRequest=400==e;this.unauthorized=401==e;this.notAcceptable=406==e;this.notFound=404==e;this.forbidden=403==e};x.prototype.toError=function(){var e=this.req,h=e.method;e=e.url;var m=Error("cannot "+h+" "+e+" ("+this.status+")");m.status=this.status;m.method=h;m.url=e;return m};H.Response=x;w(v.prototype);for(var X in P)v.prototype[X]=
P[X];v.prototype.abort=function(){if(!this.aborted)return this.aborted=!0,this.xhr&&this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this};v.prototype.type=function(e){this.set("Content-Type",H.types[e]||e);return this};v.prototype.responseType=function(e){this._responseType=e;return this};v.prototype.accept=function(e){this.set("Accept",H.types[e]||e);return this};v.prototype.auth=function(e,h,m){m||(m={type:"basic"});switch(m.type){case "basic":e=btoa(e+":"+h);this.set("Authorization","Basic "+
e);break;case "auto":this.username=e,this.password=h}return this};v.prototype.query=function(e){"string"!=typeof e&&(e=A(e));e&&this._query.push(e);return this};v.prototype.attach=function(e,h,m){this._getFormData().append(e,h,m||h.name);return this};v.prototype._getFormData=function(){this._formData||(this._formData=new F.FormData);return this._formData};v.prototype.send=function(e){var h=M(e),m=this._header["content-type"];if(h&&M(this._data))for(var r in e)this._data[r]=e[r];else"string"==typeof e?
(m||this.type("form"),m=this._header["content-type"],this._data="application/x-www-form-urlencoded"==m?this._data?this._data+"&"+e:e:(this._data||"")+e):this._data=e;if(!h||p(e))return this;m||this.type("json");return this};x.prototype.parse=function(e){F.console&&console.warn("Client-side parse() method has been renamed to serialize(). This method is not compatible with superagent v2.0");this.serialize(e);return this};x.prototype.serialize=function(e){this._parser=e;return this};v.prototype.callback=
function(e,h){var m=this._callback;this.clearTimeout();m(e,h)};v.prototype.crossDomainError=function(){var e=Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");e.crossDomain=!0;e.status=this.status;e.method=this.method;e.url=this.url;this.callback(e)};v.prototype.timeoutError=function(){var e=this._timeout,h=Error("timeout of "+e+"ms exceeded");h.timeout=e;this.callback(h)};v.prototype.withCredentials=
function(){this._withCredentials=!0;return this};v.prototype.end=function(e){var m=this,r=this.xhr=H.getXHR(),v=this._query.join("&"),x=this._timeout,u=this._formData||this._data;this._callback=e||h;r.onreadystatechange=function(){if(4==r.readyState){try{var e=r.status}catch(Fa){e=0}if(0==e)return m.timedout?m.timeoutError():m.aborted?void 0:m.crossDomainError();m.emit("end")}};e=function(e){0<e.total&&(e.percent=e.loaded/e.total*100);e.direction="download";m.emit("progress",e)};this.hasListeners("progress")&&
(r.onprogress=e);try{r.upload&&this.hasListeners("progress")&&(r.upload.onprogress=e)}catch(Ea){}x&&!this._timer&&(this._timer=setTimeout(function(){m.timedout=!0;m.abort()},x));v&&(v=H.serializeObject(v),this.url+=~this.url.indexOf("?")?"&"+v:"?"+v);this.username&&this.password?r.open(this.method,this.url,!0,this.username,this.password):r.open(this.method,this.url,!0);this._withCredentials&&(r.withCredentials=!0);"GET"==this.method||"HEAD"==this.method||"string"==typeof u||p(u)||(v=this._header["content-type"],
x=this._parser||H.serialize[v?v.split(";")[0]:""],!x&&/[\/+]json\b/.test(v)&&(x=H.serialize["application/json"]),x&&(u=x(u)));for(var w in this.header)null!=this.header[w]&&r.setRequestHeader(w,this.header[w]);this._responseType&&(r.responseType=this._responseType);this.emit("request",this);r.send("undefined"!==typeof u?u:null);return this};H.Request=v;H.get=function(e,h,m){e=H("GET",e);"function"==typeof h&&(m=h,h=null);h&&e.query(h);m&&e.end(m);return e};H.head=function(e,h,m){e=H("HEAD",e);"function"==
typeof h&&(m=h,h=null);h&&e.send(h);m&&e.end(m);return e};H.del=G;H["delete"]=G;H.patch=function(e,h,m){e=H("PATCH",e);"function"==typeof h&&(m=h,h=null);h&&e.send(h);m&&e.end(m);return e};H.post=function(e,h,m){e=H("POST",e);"function"==typeof h&&(m=h,h=null);h&&e.send(h);m&&e.end(m);return e};H.put=function(e,h,m){e=H("PUT",e);"function"==typeof h&&(m=h,h=null);h&&e.send(h);m&&e.end(m);return e}},{"./is-object":30,"./request":32,"./request-base":31,emitter:18,reduce:27}],30:[function(u,y,w){y.exports=
function(h){return null!=h&&"object"==typeof h}},{}],31:[function(u,y,w){var h=u("./is-object");w.clearTimeout=function(){this._timeout=0;clearTimeout(this._timer);return this};w.parse=function(h){this._parser=h;return this};w.timeout=function(h){this._timeout=h;return this};w.then=function(h,u){return this.end(function(e,m){e?u(e):h(m)})};w.use=function(h){h(this);return this};w.get=function(h){return this._header[h.toLowerCase()]};w.getHeader=w.get;w.set=function(p,u){if(h(p)){for(var e in p)this.set(e,
p[e]);return this}this._header[p.toLowerCase()]=u;this.header[p]=u;return this};w.unset=function(h){delete this._header[h.toLowerCase()];delete this.header[h];return this};w.field=function(h,u){this._getFormData().append(h,u);return this}},{"./is-object":30}],32:[function(u,y,w){y.exports=function(h,p,u){return"function"==typeof u?(new h("GET",p)).end(u):2==arguments.length?new h("GET",p):new h(p,u)}},{}],33:[function(u,y,w){y.exports="function"===typeof Object.create?function(h,p){h.super_=p;h.prototype=
Object.create(p.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}})}:function(h,p){h.super_=p;var u=function(){};u.prototype=p.prototype;h.prototype=new u;h.prototype.constructor=h}},{}],34:[function(u,y,w){y.exports=function(h){return h&&"object"===typeof h&&"function"===typeof h.copy&&"function"===typeof h.fill&&"function"===typeof h.readUInt8}},{}],35:[function(u,y,w){(function(h,p){function A(h,p){var r={seen:[],stylize:m};3<=arguments.length&&(r.depth=arguments[2]);4<=
arguments.length&&(r.colors=arguments[3]);H(p)?r.showHidden=p:p&&w._extend(r,p);C(r.showHidden)&&(r.showHidden=!1);C(r.depth)&&(r.depth=2);C(r.colors)&&(r.colors=!1);C(r.customInspect)&&(r.customInspect=!0);r.colors&&(r.stylize=e);return x(r,h,r.depth)}function e(e,h){return(h=A.styles[h])?"\u001b["+A.colors[h][0]+"m"+e+"\u001b["+A.colors[h][1]+"m":e}function m(e,h){return e}function r(e){var h={};e.forEach(function(e,m){h[e]=!0});return h}function x(e,h,m){if(e.customInspect&&h&&za(h.inspect)&&h.inspect!==
w.inspect&&(!h.constructor||h.constructor.prototype!==h)){var p=h.inspect(m,e);X(p)||(p=x(e,p,m));return p}if(p=v(e,h))return p;var u=Object.keys(h),A=r(u);e.showHidden&&(u=Object.getOwnPropertyNames(h));if(ja(h)&&(0<=u.indexOf("message")||0<=u.indexOf("description")))return y(h);if(0===u.length){if(za(h))return e.stylize("[Function"+(h.name?": "+h.name:"")+"]","special");if(ba(h))return e.stylize(RegExp.prototype.toString.call(h),"regexp");if(ea(h))return e.stylize(Date.prototype.toString.call(h),
"date");if(ja(h))return y(h)}p="";var C=!1,G=["{","}"];F(h)&&(C=!0,G=["[","]"]);za(h)&&(p=" [Function"+(h.name?": "+h.name:"")+"]");ba(h)&&(p=" "+RegExp.prototype.toString.call(h));ea(h)&&(p=" "+Date.prototype.toUTCString.call(h));ja(h)&&(p=" "+y(h));if(0===u.length&&(!C||0==h.length))return G[0]+p+G[1];if(0>m)return ba(h)?e.stylize(RegExp.prototype.toString.call(h),"regexp"):e.stylize("[Object]","special");e.seen.push(h);u=C?R(e,h,m,A,u):u.map(function(p){return P(e,h,m,A,p,C)});e.seen.pop();return M(u,
p,G)}function v(e,h){if(C(h))return e.stylize("undefined","undefined");if(X(h))return h="'"+JSON.stringify(h).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",e.stylize(h,"string");if(aa(h))return e.stylize(""+h,"number");if(H(h))return e.stylize(""+h,"boolean");if(null===h)return e.stylize("null","null")}function y(e){return"["+Error.prototype.toString.call(e)+"]"}function R(e,h,m,p,r){for(var v=[],u=0,x=h.length;u<x;++u)Object.prototype.hasOwnProperty.call(h,String(u))?v.push(P(e,
h,m,p,String(u),!0)):v.push("");r.forEach(function(r){r.match(/^\d+$/)||v.push(P(e,h,m,p,r,!0))});return v}function P(e,h,m,p,r,v){var u,w;h=Object.getOwnPropertyDescriptor(h,r)||{value:h[r]};h.get?w=h.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):h.set&&(w=e.stylize("[Setter]","special"));Object.prototype.hasOwnProperty.call(p,r)||(u="["+r+"]");w||(0>e.seen.indexOf(h.value)?(w=null===m?x(e,h.value,null):x(e,h.value,m-1),-1<w.indexOf("\n")&&(w=v?w.split("\n").map(function(e){return"  "+
e}).join("\n").substr(2):"\n"+w.split("\n").map(function(e){return"   "+e}).join("\n"))):w=e.stylize("[Circular]","special"));if(C(u)){if(v&&r.match(/^\d+$/))return w;u=JSON.stringify(""+r);u.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(u=u.substr(1,u.length-2),u=e.stylize(u,"name")):(u=u.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),u=e.stylize(u,"string"))}return u+": "+w}function M(e,h,m){var p=0;return 60<e.reduce(function(e,h){p++;0<=h.indexOf("\n")&&p++;return e+h.replace(/\u001b\[\d\d?m/g,
"").length+1},0)?m[0]+(""===h?"":h+"\n ")+" "+e.join(",\n  ")+" "+m[1]:m[0]+h+" "+e.join(", ")+" "+m[1]}function F(e){return Array.isArray(e)}function H(e){return"boolean"===typeof e}function aa(e){return"number"===typeof e}function X(e){return"string"===typeof e}function C(e){return void 0===e}function ba(e){return S(e)&&"[object RegExp]"===Object.prototype.toString.call(e)}function S(e){return"object"===typeof e&&null!==e}function ea(e){return S(e)&&"[object Date]"===Object.prototype.toString.call(e)}
function ja(e){return S(e)&&("[object Error]"===Object.prototype.toString.call(e)||e instanceof Error)}function za(e){return"function"===typeof e}function Ba(e){return 10>e?"0"+e.toString(10):e.toString(10)}function Ea(){var e=new Date,h=[Ba(e.getHours()),Ba(e.getMinutes()),Ba(e.getSeconds())].join(":");return[e.getDate(),Ia[e.getMonth()],h].join(" ")}var Fa=/%[sdj%]/g;w.format=function(e){if(!X(e)){for(var h=[],m=0;m<arguments.length;m++)h.push(A(arguments[m]));return h.join(" ")}m=1;var p=arguments,
r=p.length;h=String(e).replace(Fa,function(e){if("%%"===e)return"%";if(m>=r)return e;switch(e){case "%s":return String(p[m++]);case "%d":return Number(p[m++]);case "%j":try{return JSON.stringify(p[m++])}catch(pa){return"[Circular]"}default:return e}});for(var v=p[m];m<r;v=p[++m])h=null!==v&&S(v)?h+(" "+A(v)):h+(" "+v);return h};w.deprecate=function(e,m){if(C(p.process))return function(){return w.deprecate(e,m).apply(this,arguments)};if(!0===h.noDeprecation)return e;var r=!1;return function(){if(!r){if(h.throwDeprecation)throw Error(m);
h.traceDeprecation?console.trace(m):console.error(m);r=!0}return e.apply(this,arguments)}};var ta={},nb;w.debuglog=function(e){C(nb)&&(nb=h.env.NODE_DEBUG||"");e=e.toUpperCase();if(!ta[e])if((new RegExp("\\b"+e+"\\b","i")).test(nb)){var m=h.pid;ta[e]=function(){var h=w.format.apply(w,arguments);console.error("%s %d: %s",e,m,h)}}else ta[e]=function(){};return ta[e]};w.inspect=A;A.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],
cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};A.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};w.isArray=F;w.isBoolean=H;w.isNull=function(e){return null===e};w.isNullOrUndefined=function(e){return null==e};w.isNumber=aa;w.isString=X;w.isSymbol=function(e){return"symbol"===typeof e};w.isUndefined=C;w.isRegExp=ba;w.isObject=S;w.isDate=ea;w.isError=ja;w.isFunction=za;w.isPrimitive=function(e){return null===
e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e};w.isBuffer=u("./support/isBuffer");var Ia="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");w.log=function(){console.log("%s - %s",Ea(),w.format.apply(w,arguments))};w.inherits=u("inherits");w._extend=function(e,h){if(!h||!S(h))return e;for(var m=Object.keys(h),p=m.length;p--;)e[m[p]]=h[m[p]];return e}}).call(this,u("_process"),"undefined"!==typeof global?global:"undefined"!==
typeof self?self:"undefined"!==typeof window?window:{})},{"./support/isBuffer":34,_process:23,inherits:33}],36:[function(u,y,w){w.VAST=u("./lib/VAST")},{"./lib/VAST":37}],37:[function(u,y,w){function h(){}function p(e){m(e,this,!0);this.ads.forEach(function(e){r({system:{version:null},errors:[]},e);e.creatives.forEach(function(e){r({id:null,sequence:null,adID:null},e);M[e.type](e)});P[e.type](e)});this.__private__={wrappers:[],inlines:[]}}var A=u("lie"),e=u("superagent"),m=u("./utils/copy"),r=u("./utils/defaults"),
x=u("./utils/extend"),v=u("./utils/nodeify_promise"),G=Array.prototype.push,R=u("./xml_from_vast"),P={inline:function(e){r({description:null,survey:null},e)},wrapper:function(){}},M={linear:function(e){r({trackingEvents:[],parameters:null,videoClicks:null},e);(e.mediaFiles||[]).forEach(function(e){r({id:null,bitrate:null,scalable:null,maintainAspectRatio:null,apiFramework:null},e)})},companions:function(e){e.companions.forEach(function(e){r({expandedWidth:null,expandedHeight:null,apiFramework:null,
trackingEvents:[],clickThrough:null,altText:null,parameters:null},e)})},nonLinear:function(e){r({trackingEvents:[]},e);e.ads.forEach(function(e){r({id:null,expandedWidth:null,expandedHeight:null,scalable:null,maintainAspectRatio:null,minSuggestedDuration:null,apiFramework:null,clickThrough:null,parameters:null},e)})}};Object.defineProperties(p.prototype,{wrappers:{get:function(){var e=this.__private__.wrappers;e.length=0;G.apply(e,this.filter("ads",function(e){return"wrapper"===e.type}));return e}},
inlines:{get:function(){var e=this.__private__.inlines;e.length=0;G.apply(e,this.filter("ads",function(e){return"inline"===e.type}));return e}}});p.prototype.get=function(e){return((e||"").match(/[^\[\]\.]+/g)||[]).reduce(function(e,h){return(e||void 0)&&e[h]},this)};p.prototype.set=function(e,h){function m(e,h){switch(e.input.charAt(h)){case ".":return Object;case "[":return Array;case "]":return m(e,h+1);default:return null}}var p=function(){for(var h=/[^\[\]\.]+/g,p=[],r;r=h.exec(e);)p.push({token:r[0],
type:m(r,r.index+r[0].length)});return p}(),r=p.pop();p=p.reduce(function(e,h){return e[h.token]||(e[h.token]=new h.type)},this);if(!e)throw Error("prop must be specified.");return p[r.token]=h};p.prototype.map=function(e,h){e=this.get(e)||[];var m=e.length,p=[];if(!(e instanceof Array))return p;for(var r=0;r<m;r++)p.push(h.call(this,e[r],r,e));return p};p.prototype.filter=function(e,h){e=this.get(e)||[];var m=e.length,p=[];if(!(e instanceof Array))return p;for(var r=0;r<m;r++)h.call(this,e[r],r,
e)&&p.push(e[r]);return p};p.prototype.find=function(e,h){e=this.get(e)||[];var m=e.length;if(e instanceof Array)for(var p=0;p<m;p++)if(h.call(this,e[p],p,e))return e[p]};p.prototype.toPOJO=function(){var e=JSON.parse(JSON.stringify(this));delete e.__private__;return e};p.prototype.copy=function(){return new this.constructor(this.toPOJO())};p.prototype.resolveWrappers=function(h,m){function p(e,h){function m(e){return function(h){return h.type===e}}var p=function(e){return{linear:e.filter(m("linear")),
companions:e.filter(m("companions")),nonLinear:e.filter(m("nonLinear"))}}(e.creatives);r(e.impressions,h.impressions);r(e.errors,h.errors);h.creatives.forEach(function(e){r(p[e.type].shift()||{},e)});G.apply(h.creatives,"wrapper"!==h.type?[]:["linear","companions","nonLinear"].reduce(function(e,h){return e.concat(p[h])},[]));return h}var u=isNaN(h)?Infinity:h;h="function"===typeof h?h:m;var w=this.constructor,y=this;return 0===u?A.reject(Error("Too many redirects were made.")):v(A.all(this.map("wrappers",
function(h){return A.resolve(e.get(h.vastAdTagURI)).then(function(e){return{wrapper:h,response:w.pojoFromXML(e.text).ads}})})).then(function(e){var h=e.map(function(e){return e.wrapper}),m=e.map(function(e){return e.response});return new w(x(y.toPOJO(),{ads:y.map("ads",function(e){var r=h.indexOf(e),v=h[r];return(r=m[r])?r.map(p.bind(null,v)):[e]}).reduce(function(e,h){return e.concat(h)})}))}).then(function(e){return 0<e.get("wrappers.length")?e.resolveWrappers(u-1):e}),h)};p.prototype.toXML=function(){var e=
this.validate();if(!e.valid)throw Error("VAST is invalid: "+e.reasons.join(", "));return R(this)};p.prototype.validate=function(){function e(e){r.get(e)||v.push(e+" is required")}function m(e){0<r.get(e+".length")||v.push(e+" must contain at least one value")}function p(h,p){p.exists.map(h).forEach(e);p.atLeastOne.map(h).forEach(m)}var r=this,v=[],u={inline:function(e){var m={linear:function(e){p(e,{exists:["duration"],atLeastOne:["mediaFiles"]})},companions:function(e){r.get(e("companions")).forEach(function(h,
m){p(function(h){return e("companions["+m+"]."+h)},{exists:[],atLeastOne:["resources"]})})},nonLinear:function(e){r.get(e("ads")).forEach(function(h,m){p(function(h){return e("ads["+m+"]."+h)},{exists:[],atLeastOne:["resources"]})})}};p(e,{exists:["title"],atLeastOne:["creatives"]});r.get(e("creatives")).forEach(function(r,v){function u(h){return e("creatives["+v+"]."+h)}p(u,{exists:["type"],atLeastOne:[]});(m[r.type]||h)(u)})},wrapper:function(e){p(e,{exists:["vastAdTagURI"],atLeastOne:[]})}};p(function(e){return e},
{exists:[],atLeastOne:["ads"]});this.get("ads").forEach(function(e,m){function r(e){return"ads["+m+"]."+e}p(r,{exists:["type","system.name"],atLeastOne:["impressions"]});(u[e.type]||h)(r)});return{valid:0===v.length,reasons:0===v.length?null:v}};p.pojoFromXML=u("./pojo_from_xml");p.fetch=function(h,m,p){var r="object"===typeof m?m||{}:{};m="function"===typeof p?p:m;var u=this;return v(A.resolve(e.get(h).set(r.headers||{})).then(function(e){e=new u(u.pojoFromXML(e.text));return r.resolveWrappers?e.resolveWrappers(r.maxRedirects):
e}),m)};y.exports=p},{"./pojo_from_xml":38,"./utils/copy":40,"./utils/defaults":41,"./utils/extend":42,"./utils/nodeify_promise":43,"./xml_from_vast":50,lie:21,superagent:29}],38:[function(u,y,w){function h(e){return e[0]||{attributes:{}}}function p(e){return e.find("StaticResource,IFrameResource,HTMLResource").map(function(e){return{type:e.tag.replace(/Resource$/,"").toLowerCase(),creativeType:e.attributes.creativeType,data:e.value}})}var A=u("./utils/parse_xml"),e=u("./utils/timestamp_to_seconds"),
m=u("./utils/string_to_boolean"),r=u("./utils/extend"),x=u("./utils/trim_object"),v=u("./utils/numberify"),G={linear:function(p){var r=h(p.find("Duration")),u=p.find("Tracking"),x=h(p.find("AdParameters")),w=p.find("VideoClicks")[0];p=p.find("MediaFile");return{type:"linear",duration:e(r.value)||void 0,trackingEvents:u.map(function(e){return{event:e.attributes.event,uri:e.value}}),parameters:x.value,videoClicks:w&&function(){var e=h(w.find("ClickThrough")),m=w.find("ClickTracking"),p=w.find("CustomClick");
return{clickThrough:e.value,clickTrackings:m.map(function(e){return e.value}),customClicks:p.map(function(e){return{id:e.attributes.id,uri:e.value}})}}(),mediaFiles:p.map(function(e){var h=e.attributes;return{id:h.id,delivery:h.delivery,type:h.type,uri:e.value,bitrate:v(h.bitrate),width:v(h.width),height:v(h.height),scalable:m(h.scalable),maintainAspectRatio:m(h.maintainAspectRatio),apiFramework:h.apiFramework}})}},companions:function(e){return{type:"companions",companions:e.find("Companion").map(function(e){var m=
e.find("Tracking"),r=h(e.find("CompanionClickThrough")),u=h(e.find("AltText")),x=h(e.find("AdParameters"));return{id:e.attributes.id,width:v(e.attributes.width),height:v(e.attributes.height),expandedWidth:v(e.attributes.expandedWidth),expandedHeight:v(e.attributes.expandedHeight),apiFramework:e.attributes.apiFramework,resources:p(e),trackingEvents:m.map(function(e){return{event:e.attributes.event,uri:e.value}}),clickThrough:r.value,altText:u.value,parameters:x.value}})}},nonLinear:function(r){var u=
r.find("NonLinear");r=r.find("Tracking");return{type:"nonLinear",ads:u.map(function(r){var u=h(r.find("NonLinearClickThrough")),x=h(r.find("AdParameters"));return{id:r.attributes.id,width:v(r.attributes.width),height:v(r.attributes.height),expandedWidth:v(r.attributes.expandedWidth),expandedHeight:v(r.attributes.expandedHeight),scalable:m(r.attributes.scalable),maintainAspectRatio:m(r.attributes.maintainAspectRatio),minSuggestedDuration:e(r.attributes.minSuggestedDuration)||void 0,apiFramework:r.attributes.apiFramework,
resources:p(r),clickThrough:u.value,parameters:x.value}}),trackingEvents:r.map(function(e){return{event:e.attributes.event,uri:e.value}})}}},R={inline:function(e){var m=h(e.find("AdTitle")),p=h(e.find("Description"));e=h(e.find("Survey"));return{type:"inline",title:m.value,description:p.value,survey:e.value}},wrapper:function(e){return{type:"wrapper",vastAdTagURI:h(e.find("VASTAdTagURI")).value}}};y.exports=function(e){var m=A(e);if(!m("VAST")[0])throw Error("["+e+"] is not a valid VAST document.");
return x({version:h(m("VAST")).attributes.version,ads:m("Ad").map(function(e){var m=h(e.find("Wrapper,InLine")).tag.toLowerCase(),p=h(e.find("AdSystem")),u=e.find("Error"),x=e.find("Impression"),w=e.find("Creative");return r({id:e.attributes.id,system:{name:p.value,version:p.attributes.version},errors:u.map(function(e){return e.value}),impressions:x.map(function(e){return{uri:e.value,id:e.attributes.id}}),creatives:w.map(function(e){var m=function(){switch(h(e.find("Linear,CompanionAds,NonLinearAds")).tag){case "Linear":return"linear";
case "CompanionAds":return"companions";case "NonLinearAds":return"nonLinear"}}();return r({id:e.attributes.id,sequence:v(e.attributes.sequence),adID:e.attributes.AdID},G[m](e))})},R[m](e))})},!0)}},{"./utils/extend":42,"./utils/numberify":44,"./utils/parse_xml":45,"./utils/string_to_boolean":47,"./utils/timestamp_to_seconds":48,"./utils/trim_object":49}],39:[function(u,y,w){function h(e){return null!==e&&void 0!==e}function p(e){return void 0!==e?String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,
"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):""}function A(e){for(var h="";e--;)h+=" ";return h}function e(e){return(void 0!==e?function(e){for(var h=[],m=/]]\x3e/g,p=0,r,v;r=m.exec(e);)v=r.index+2,h.push(r.input.substring(p,v)),p=v;h.push(e.substring(p,e.length));return h}(String(e)):[""]).reduce(function(e,h){return e+"<![CDATA["+h+"]]\x3e"},"")}function m(h){return h.cdata?e(h.value):p(h.value)}function r(e,v,u){var x=e.tag,w=e.attributes||{},y=Object.keys(w),G=e.value,H=0<(e.children||
[]).length;y=y.every(function(e){return h(w[e])})&&0<y.length;G=h(G)||H||y;y=A(v);var aa="<"+x+Object.keys(w).reduce(function(e,m){return u&&!h(w[m])?e:e+" "+m+'="'+p(w[m])+'"'},"")+">";x="</"+x+">";return!u||G||e.required?H?[y+aa].concat(e.children.reduce(function(e,h){return e.concat(r(h,v+4,u))},[]),[y+x]):[y+aa+m(e)+x]:[]}y.exports=function(e,h){return['<?xml version="1.0" encoding="UTF-8"?>'].concat(r(e,0,h)).join("\n")}},{}],40:[function(u,y,w){function h(e,h,p){return Object.keys(e).reduce(function(h,
m){h[m]=p?A(e[m],null,!0):e[m];return h},h||{})}function p(h,p,u){p=p||[];e.apply(p,u?h.map(function(e){return A(e,null,!0)}):h);return p}function A(e,r,u){var m=("object"===typeof r||null)&&r;r="boolean"===typeof r?r:u;return Object(e)!==e?e:e instanceof Array?p(e,m,r):h(e,m,r)}var e=Array.prototype.push;y.exports=A},{}],41:[function(u,y,w){function h(e){return Object(e)===e}function p(e){return e instanceof Array}var A=Array.prototype.push;y.exports=function x(m,r){return[m,r].every(p)?(A.apply(r,
m.filter(function(h){return 0>r.indexOf(h)})),r):Object.keys(m).reduce(function(p,r){[m[r],p[r]].every(h)&&x(m[r],p[r]);r in p||(p[r]=m[r]);return p},r)}},{}],42:[function(u,y,w){y.exports=function(){return Array.prototype.slice.call(arguments).reduce(function(h,p){return Object.keys(p||{}).reduce(function(h,e){h[e]=p[e];return h},h)},{})}},{}],43:[function(u,y,w){y.exports=function(h,p){if("function"!==typeof p)return h;h.then(function(h){p(null,h)},function(h){p(h)});return h}},{}],44:[function(u,
y,w){y.exports=function(h){if(/string|number|boolean/.test(typeof h))return isNaN(h)?void 0:Number(h)}},{}],45:[function(u,y,w){function h(m){return{tag:m.tagName,value:0<m.childElementCount?null:m.textContent,attributes:e.call(m.attributes,function(e,h){e[h.name]=h.value;return e},{}),find:function(e){return p.call(m.querySelectorAll(e),h)},children:function(){return A.call(m.childNodes,function(e){return e instanceof Element}).map(h)}}}var p=Array.prototype.map,A=Array.prototype.filter,e=Array.prototype.reduce,
m=new DOMParser;y.exports=function(e){var r=m.parseFromString(e,"application/xml");return function(e){return p.call(r.querySelectorAll(e),h)}}},{}],46:[function(u,y,w){function h(h){return(9<h?"":"0")+h.toString()}y.exports=function(p){return Number(p)!==p?null:[Math.floor(p/60/60),Math.floor(p/60%60),Math.floor(p%60%60)].map(h).join(":")}},{}],47:[function(u,y,w){y.exports=function(h){switch((h||"").toLowerCase()){case "true":return!0;case "false":return!1}}},{}],48:[function(u,y,w){y.exports=function(h){return(h=
(h||"").match(/^(\d\d):(\d\d):(\d\d)$/))&&h.slice(1,4).map(parseFloat).reduce(function(h,u,e){return h+u*Math.pow(60,Math.abs(e-2))},0)}},{}],49:[function(u,y,w){y.exports=function e(p,u){return Object(p)!==p?p:Object.keys(p).reduce(function(m,r){u&&p[r]instanceof Array?m[r]=p[r].filter(function(e){return void 0!==e}).map(function(m){return e(m,!0)}):u&&p[r]instanceof Object?m[r]=e(p[r],!0):void 0!==p[r]&&(m[r]=p[r]);return m},{})}},{}],50:[function(u,y,w){function h(e){return{tag:"TrackingEvents",
children:e.map(function(e){return{tag:"Tracking",attributes:{event:e.event},value:e.uri,cdata:!0}})}}function p(e){return e.map(function(e){a:{switch(e.type){case "static":var h="StaticResource";break a;case "iframe":h="IFrameResource";break a;case "html":h="HTMLResource";break a}h=void 0}return{tag:h,attributes:{creativeType:e.creativeType},value:e.data,cdata:!0}})}function A(e){return{tag:"AdParameters",value:e.parameters}}var e=u("./utils/seconds_to_timestamp"),m=u("./utils/compile_xml"),r={linear:function(m){return{tag:"Linear",
children:[{tag:"Duration",value:e(m.duration)},h(m.trackingEvents),A(m)].concat(m.videoClicks?[{tag:"VideoClicks",children:[{tag:"ClickThrough",value:m.videoClicks.clickThrough,cdata:!0}].concat(m.videoClicks.clickTrackings.map(function(e){return{tag:"ClickTracking",value:e,cdata:!0}}),m.videoClicks.customClicks.map(function(e){return{tag:"CustomClick",attributes:{id:e.id},value:e.uri,cdata:!0}}))}]:[],[{tag:"MediaFiles",children:m.mediaFiles.map(function(e){return{tag:"MediaFile",attributes:{id:e.id,
width:e.width,height:e.height,bitrate:e.bitrate,type:e.type,delivery:e.delivery,scalable:e.scalable,maintainAspectRatio:e.maintainAspectRatio,apiFramework:e.apiFramework},value:e.uri,cdata:!0}})}])}},companions:function(e){return{tag:"CompanionAds",children:e.companions.map(function(e){return{tag:"Companion",attributes:{id:e.id,width:e.width,height:e.height,expandedWidth:e.expandedWidth,expandedHeight:e.expandedHeight,apiFramework:e.apiFramework},children:p(e.resources).concat([h(e.trackingEvents),
{tag:"CompanionClickThrough",value:e.clickThrough,cdata:!0},{tag:"AltText",value:e.altText},A(e)])}})}},nonLinear:function(m){return{tag:"NonLinearAds",children:m.ads.map(function(h){return{tag:"NonLinear",attributes:{id:h.id,width:h.width,height:h.height,expandedWidth:h.expandedWidth,expandedHeight:h.expandedHeight,scalable:h.scalable,maintainAspectRatio:h.maintainAspectRatio,minSuggestedDuration:e(h.minSuggestedDuration),apiFramework:h.apiFramework},children:p(h.resources).concat([{tag:"NonLinearClickThrough",
value:h.clickThrough,cdata:!0},A(h)])}}).concat([h(m.trackingEvents)])}}};y.exports=function(e){return m({tag:"VAST",attributes:{version:e.get("version")},children:e.map("ads",function(e){var h={id:e.id};a:{switch(e.type){case "inline":var m="InLine";break a;case "wrapper":m="Wrapper";break a}m=void 0}return{tag:"Ad",attributes:h,children:[{tag:m,children:[{tag:"AdSystem",attributes:{version:e.system.version},value:e.system.name},{tag:"AdTitle",value:e.title},{tag:"Description",value:e.description},
{tag:"Survey",value:e.survey,cdata:!0},{tag:"VASTAdTagURI",value:e.vastAdTagURI,cdata:!0}].concat(e.errors.map(function(e){return{tag:"Error",value:e,cdata:!0}}),e.impressions.map(function(e){return{tag:"Impression",value:e.uri,cdata:!0,attributes:{id:e.id}}}),[{tag:"Creatives",children:e.creatives.map(function(e){return{tag:"Creative",attributes:{id:e.id,sequence:e.sequence,AdID:e.adID},children:[r[e.type](e)]}}),required:!0}])}]}})},!0)}},{"./utils/compile_xml":39,"./utils/seconds_to_timestamp":46}]},
{},[1])(1)});/*
 
 https://github.com/videojs/videojs-youtube
*/
(function(B,u){if("object"===typeof exports&&"undefined"!==typeof module){var y=require("video.js");module.exports=u(y.default||y)}else"function"===typeof define&&define.amd?define(["videojs"],function(w){return B.Youtube=u(w)}):B.Youtube=u(B.videojs)})(this,function(B){function u(){YT.ready(function(){A.isApiReady=!0;for(var e=0;e<A.apiReadyQueue.length;++e)A.apiReadyQueue[e].initYTPlayer()})}function y(e,h){var m=!1,p=document.createElement("script"),v=document.getElementsByTagName("script")[0];
v.parentNode.insertBefore(p,v);p.onload=function(){m||(m=!0,h())};p.onreadystatechange=function(){m||"complete"!==this.readyState&&"loaded"!==this.readyState||(m=!0,h())};p.src=e}function w(){var e=document.head||document.getElementsByTagName("head")[0],h=document.createElement("style");h.type="text/css";h.styleSheet?h.styleSheet.cssText=".vjs-youtube .vjs-iframe-blocker { display: none; }.vjs-youtube.vjs-user-inactive .vjs-iframe-blocker { display: block; }.vjs-youtube .vjs-poster { background-size: cover; }.vjs-youtube-mobile .vjs-big-play-button { display: none; }":
h.appendChild(document.createTextNode(".vjs-youtube .vjs-iframe-blocker { display: none; }.vjs-youtube.vjs-user-inactive .vjs-iframe-blocker { display: block; }.vjs-youtube .vjs-poster { background-size: cover; }.vjs-youtube-mobile .vjs-big-play-button { display: none; }"));e.appendChild(h)}var h=B.browser.IS_IOS||B.browser.IS_NATIVE_ANDROID,p=B.getTech("Tech"),A=B.extend(p,{constructor:function(e,m){p.call(this,e,m);this.setPoster(e.poster);this.setSrc(this.options_.source,!0);this.setTimeout(function(){this.el_&&
(this.el_.parentNode.className+=" vjs-youtube",h&&(this.el_.parentNode.className+=" vjs-youtube-mobile"),A.isApiReady?this.initYTPlayer():A.apiReadyQueue.push(this))}.bind(this))},dispose:function(){if(this.ytPlayer)this.ytPlayer.stopVideo&&this.ytPlayer.stopVideo(),this.ytPlayer.destroy&&this.ytPlayer.destroy();else{var e=A.apiReadyQueue.indexOf(this);-1!==e&&A.apiReadyQueue.splice(e,1)}this.ytPlayer=null;this.el_.parentNode.className=this.el_.parentNode.className.replace(" vjs-youtube","").replace(" vjs-youtube-mobile",
"");this.el_.parentNode.removeChild(this.el_);p.prototype.dispose.call(this)},createEl:function(){var e=document.createElement("div");e.setAttribute("id",this.options_.techId);e.setAttribute("style","width:100%;height:100%;top:0;left:0;position:absolute");e.setAttribute("class","vjs-tech");var m=document.createElement("div");m.appendChild(e);h||this.options_.ytControls||(e=document.createElement("div"),e.setAttribute("class","vjs-iframe-blocker"),e.setAttribute("style","position:absolute;top:0;left:0;width:100%;height:100%"),
e.onclick=function(){this.pause()}.bind(this),m.appendChild(e));return m},initYTPlayer:function(){var e={controls:0,modestbranding:1,rel:0,showinfo:0,autoplay:this.options_.autoplay?1:0,mute:this.options_.autoplay?1:0,loop:this.options_.loop?1:0,cc_load_policy:0,iv_load_policy:3,playsinline:1};"undefined"!==typeof this.options_.autohide&&(e.autohide=this.options_.autohide);"undefined"!==typeof this.options_.cc_load_policy&&(e.cc_load_policy=this.options_.cc_load_policy);"undefined"!==typeof this.options_.ytControls&&
(e.controls=this.options_.ytControls);"undefined"!==typeof this.options_.disablekb&&(e.disablekb=this.options_.disablekb);"undefined"!==typeof this.options_.color&&(e.color=this.options_.color);e.controls?"undefined"!==typeof this.options_.fs&&(e.fs=this.options_.fs):e.fs=0;if(-1!==this.options_.source.src.indexOf("end=")){var h=this.options_.source.src.match(/end=([0-9]*)/);this.options_.end=parseInt(h[1])}"undefined"!==typeof this.options_.end&&(e.end=this.options_.end);"undefined"!==typeof this.options_.hl?
e.hl=this.options_.hl:"undefined"!==typeof this.options_.language&&(e.hl=this.options_.language.substr(0,2));"undefined"!==typeof this.options_.iv_load_policy&&(e.iv_load_policy=this.options_.iv_load_policy);"undefined"!==typeof this.options_.list?e.list=this.options_.list:this.url&&"undefined"!==typeof this.url.listId&&(e.list=this.url.listId);"undefined"!==typeof this.options_.listType&&(e.listType=this.options_.listType);"undefined"!==typeof this.options_.modestbranding&&(e.modestbranding=this.options_.modestbranding);
"undefined"!==typeof this.options_.playlist&&(e.playlist=this.options_.playlist);"undefined"!==typeof this.options_.playsinline&&(e.playsinline=this.options_.playsinline);"undefined"!==typeof this.options_.rel&&(e.rel=this.options_.rel);"undefined"!==typeof this.options_.showinfo&&(e.showinfo=this.options_.showinfo);-1!==this.options_.source.src.indexOf("start=")&&(h=this.options_.source.src.match(/start=([0-9]*)/),this.options_.start=parseInt(h[1]));"undefined"!==typeof this.options_.start&&(e.start=
this.options_.start);"undefined"!==typeof this.options_.theme&&(e.theme=this.options_.theme);if("undefined"!==typeof this.options_.customVars){var p=this.options_.customVars;Object.keys(p).forEach(function(h){e[h]=p[h]})}this.activeVideoId=this.url?this.url.videoId:null;this.activeList=e.list;h={videoId:this.activeVideoId,playerVars:e,events:{onReady:this.onPlayerReady.bind(this),onPlaybackQualityChange:this.onPlayerPlaybackQualityChange.bind(this),onPlaybackRateChange:this.onPlayerPlaybackRateChange.bind(this),
onStateChange:this.onPlayerStateChange.bind(this),onVolumeChange:this.onPlayerVolumeChange.bind(this),onError:this.onPlayerError.bind(this)}};"undefined"!==typeof this.options_.enablePrivacyEnhancedMode&&this.options_.enablePrivacyEnhancedMode&&(h.host="https://www.youtube-nocookie.com");this.ytPlayer=new YT.Player(this.options_.techId,h)},onPlayerReady:function(){this.options_.muted&&this.ytPlayer.mute();1<this.ytPlayer.getAvailablePlaybackRates().length&&(this.featuresPlaybackRate=!0);this.playerReady_=
!0;this.triggerReady();this.playOnReady?this.play():this.cueOnReady&&(this.cueVideoById_(this.url.videoId),this.activeVideoId=this.url.videoId)},onPlayerPlaybackQualityChange:function(){},onPlayerPlaybackRateChange:function(){this.trigger("ratechange")},onPlayerStateChange:function(e){e=e.data;if(e!==this.lastState&&!this.errorNumber)switch(this.lastState=e,e){case -1:this.trigger("loadstart");this.trigger("loadedmetadata");this.trigger("durationchange");this.trigger("ratechange");break;case YT.PlayerState.ENDED:this.trigger("ended");
break;case YT.PlayerState.PLAYING:this.trigger("timeupdate");this.trigger("durationchange");this.trigger("playing");this.trigger("play");if(this.isSeeking)this.onSeeked();break;case YT.PlayerState.PAUSED:this.trigger("canplay");if(this.isSeeking)this.onSeeked();else this.trigger("pause");break;case YT.PlayerState.BUFFERING:this.player_.trigger("timeupdate"),this.player_.trigger("waiting")}},onPlayerVolumeChange:function(){this.trigger("volumechange")},onPlayerError:function(e){this.errorNumber=e.data;
this.trigger("pause");this.trigger("error")},error:function(){var e=1E3+this.errorNumber;switch(this.errorNumber){case 5:return{code:e,message:"Error while trying to play the video"};case 2:case 100:return{code:e,message:"Unable to find the video"};case 101:case 150:return{code:e,message:"Playback on other Websites has been disabled by the video owner."}}return{code:e,message:"YouTube unknown error ("+this.errorNumber+")"}},loadVideoById_:function(e){e={videoId:e};this.options_.start&&(e.startSeconds=
this.options_.start);this.options_.end&&(e.endEnd=this.options_.end);this.ytPlayer.loadVideoById(e)},cueVideoById_:function(e){e={videoId:e};this.options_.start&&(e.startSeconds=this.options_.start);this.options_.end&&(e.endEnd=this.options_.end);this.ytPlayer.cueVideoById(e)},src:function(e){e&&this.setSrc({src:e});return this.source},poster:function(){return h?null:this.poster_},setPoster:function(e){this.poster_=e},setSrc:function(e){e&&e.src&&(delete this.errorNumber,this.source=e,this.url=A.parseUrl(e.src),
!this.options_.poster&&this.url.videoId&&(this.poster_="https://img.youtube.com/vi/"+this.url.videoId+"/0.jpg",this.trigger("posterchange"),this.checkHighResPoster()),this.options_.autoplay?this.isReady_?this.play():this.playOnReady=!0:this.activeVideoId!==this.url.videoId&&(this.isReady_?(this.cueVideoById_(this.url.videoId),this.activeVideoId=this.url.videoId):this.cueOnReady=!0))},autoplay:function(){return this.options_.autoplay},setAutoplay:function(e){this.options_.autoplay=e},loop:function(){return this.options_.loop},
setLoop:function(e){this.options_.loop=e},play:function(){this.url&&this.url.videoId&&(this.wasPausedBeforeSeek=!1,this.isReady_?(this.url.listId&&(this.activeList===this.url.listId?this.ytPlayer.playVideo():(this.ytPlayer.loadPlaylist(this.url.listId),this.activeList=this.url.listId)),this.activeVideoId===this.url.videoId?this.ytPlayer.playVideo():(this.loadVideoById_(this.url.videoId),this.activeVideoId=this.url.videoId)):(this.trigger("waiting"),this.playOnReady=!0))},pause:function(){this.ytPlayer&&
this.ytPlayer.pauseVideo()},paused:function(){return this.ytPlayer?this.lastState!==YT.PlayerState.PLAYING&&this.lastState!==YT.PlayerState.BUFFERING:!0},currentTime:function(){return this.ytPlayer?this.ytPlayer.getCurrentTime():0},setCurrentTime:function(e){this.lastState===YT.PlayerState.PAUSED&&(this.timeBeforeSeek=this.currentTime());this.isSeeking||(this.wasPausedBeforeSeek=this.paused());this.ytPlayer.seekTo(e,!0);this.trigger("timeupdate");this.trigger("seeking");this.isSeeking=!0;this.lastState===
YT.PlayerState.PAUSED&&this.timeBeforeSeek!==e&&(clearInterval(this.checkSeekedInPauseInterval),this.checkSeekedInPauseInterval=setInterval(function(){this.lastState===YT.PlayerState.PAUSED&&this.isSeeking?this.currentTime()!==this.timeBeforeSeek&&(this.trigger("timeupdate"),this.onSeeked()):clearInterval(this.checkSeekedInPauseInterval)}.bind(this),250))},seeking:function(){return this.isSeeking},seekable:function(){return this.ytPlayer?B.createTimeRange(0,this.ytPlayer.getDuration()):B.createTimeRange()},
onSeeked:function(){clearInterval(this.checkSeekedInPauseInterval);this.isSeeking=!1;this.wasPausedBeforeSeek&&this.pause();this.trigger("seeked")},playbackRate:function(){return this.ytPlayer?this.ytPlayer.getPlaybackRate():1},setPlaybackRate:function(e){this.ytPlayer&&this.ytPlayer.setPlaybackRate(e)},duration:function(){return this.ytPlayer?this.ytPlayer.getDuration():0},currentSrc:function(){return this.source&&this.source.src},ended:function(){return this.ytPlayer?this.lastState===YT.PlayerState.ENDED:
!1},volume:function(){return this.ytPlayer?this.ytPlayer.getVolume()/100:1},setVolume:function(e){this.ytPlayer&&this.ytPlayer.setVolume(100*e)},muted:function(){return this.ytPlayer?this.ytPlayer.isMuted():!1},setMuted:function(e){this.ytPlayer&&(this.muted(!0),e?this.ytPlayer.mute():this.ytPlayer.unMute(),this.setTimeout(function(){this.trigger("volumechange")},50))},buffered:function(){if(!this.ytPlayer||!this.ytPlayer.getVideoLoadedFraction)return B.createTimeRange();var e=this.ytPlayer.getVideoLoadedFraction()*
this.ytPlayer.getDuration();return B.createTimeRange(0,e)},preload:function(){},load:function(){},reset:function(){},networkState:function(){if(!this.ytPlayer)return 0;switch(this.ytPlayer.getPlayerState()){case -1:return 0;case 3:return 2;default:return 1}},readyState:function(){if(!this.ytPlayer)return 0;switch(this.ytPlayer.getPlayerState()){case -1:return 0;case 5:return 1;case 3:return 2;default:return 4}},supportsFullScreen:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled||
document.mozFullScreenEnabled||document.msFullscreenEnabled},checkHighResPoster:function(){var e="https://img.youtube.com/vi/"+this.url.videoId+"/maxresdefault.jpg";try{var h=new Image;h.onload=function(){if("naturalHeight"in h){if(90>=h.naturalHeight||120>=h.naturalWidth)return}else if(90>=h.height||120>=h.width)return;this.poster_=e;this.trigger("posterchange")}.bind(this);h.onerror=function(){};h.src=e}catch(r){}}});A.isSupported=function(){return!0};A.canPlaySource=function(e){return A.canPlayType(e.type)};
A.canPlayType=function(e){return"video/youtube"===e};A.parseUrl=function(e){var h={videoId:null},p=e.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&\?]*).*/);p&&11===p[2].length&&(h.videoId=p[2]);(p=e.match(/[?&]list=([^#&\?]+)/))&&p[1]&&(h.listId=p[1]);return h};A.apiReadyQueue=[];"undefined"!==typeof document&&(y("https://www.youtube.com/iframe_api",u),w());"undefined"!==typeof B.registerTech?B.registerTech("Youtube",A):B.registerComponent("Youtube",A)});/*
 
 https://github.com/trieu/videojs-facebook
*/
(function(B,u){if("object"===typeof exports&&"undefined"!==typeof module){var y=require("video.js");module.exports=u(y.default||y)}else"function"===typeof define&&define.amd?define(["videojs"],function(w){return B.Facebook=u(w)}):B.Facebook=u(B.videojs)})(this,function(B){function u(){var h=document.head||document.getElementsByTagName("head")[0],u=document.createElement("style");u.type="text/css";u.styleSheet?u.styleSheet.cssText=".vjs-facebook .vjs-iframe-blocker { display: none; }.vjs-facebook.vjs-user-inactive .vjs-iframe-blocker { display: block; }.vjs-facebook .vjs-poster { background-size: cover; }.vjs-facebook-mobile .vjs-big-play-button { display: none; }":
u.appendChild(document.createTextNode(".vjs-facebook .vjs-iframe-blocker { display: none; }.vjs-facebook.vjs-user-inactive .vjs-iframe-blocker { display: block; }.vjs-facebook .vjs-poster { background-size: cover; }.vjs-facebook-mobile .vjs-big-play-button { display: none; }"));h.appendChild(u)}var y=B.browser.IS_IOS||B.browser.IS_NATIVE_ANDROID,w=B.getTech("Tech"),h=B.extend(w,{constructor:function(h,u){mpl1DebugLog("constructor",h);w.call(this,h,u);this.setPoster(h.poster);this.setSrc(this.options_.source,
!0);this.setTimeout(function(){this.el_&&(this.el_.parentNode.className+=" vjs-facebook",y&&(this.el_.parentNode.className+=" vjs-facebook-mobile"),this.initFBPlayer())}.bind(this))},dispose:function(){this.fbPlayer&&(this.fbPlayer.pause(),this.iframeFbVideo&&this.iframeFbVideo.remove());this.fbPlayer=null;this.el_.parentNode.className=this.el_.parentNode.className.replace(" vjs-facebook","").replace(" vjs-facebook-mobile","");this.el_.parentNode.removeChild(this.el_);w.prototype.dispose.call(this)},
createEl:function(){var h=document.createElement("div");h.setAttribute("id",this.options_.techId);h.setAttribute("style","width:100%;height:100%;top:0;left:0;position:absolute");h.setAttribute("class","vjs-tech");h.innerHTML='<iframe id="f_'+this.options_.techId+'" src="about:blank"  frameborder="0" style="visibility:visible;border:0;overflow:hidden;"></iframe>';var u=document.createElement("div");u.appendChild(h);y||this.options_.ytControls||(h=document.createElement("div"),h.setAttribute("class",
"vjs-iframe-blocker"),h.setAttribute("style","position:absolute;top:0;left:0;width:100%;height:100%"),h.onclick=function(){this.pause()}.bind(this),u.appendChild(h));mpl1DebugLog("createEl",u);return u},initFBPlayer:function(){mpl1DebugLog("initFBPlayer");mpl1DebugLog(this.options_);var h=this.options_.source.width,u=this.options_.source.height,e=document.getElementById("f_"+this.options_.techId);e.setAttribute("width",h);e.setAttribute("height",u);console.log("initFBPlayer",e,h,u);this.iframeFbVideo=
e;this.fbVideoSetup()},fbVideoSetup:function(){var h=Math.floor(9999999*Math.random()),u=this.options_.source.src,e=this.options_.autoplay,m=this.options_.source.width,r=this.options_.source.height,w="hd1fbh_"+h,v=" var done = false, callAdPlayer = false;\n          window.fbAsyncInit = function () {       \n              if(done) return;          \n              done = true;\n              FB.init({ appId: '', status:true, xfbml:true, version: 'v3.2'});          \n              FB.Event.subscribe('xfbml.ready', function (msg) {\n                console.log('===========> xfbml.ready');\n                if (msg.type === 'video') {                       \n                    var node = document.querySelector('iframe');\n                    if(node) {\n                        node.removeAttribute('allowfullscreen'); \n                        //node.style.height = '"+
r+"px';\n                    }\n                    //if(node) node.setAttribute('donotallowfullscreen','true');                     \n                    parent['"+w+"'](msg.instance);\n                    callAdPlayer = true;\n                }\n              });\n              setTimeout(function(){\n                if(!callAdPlayer) parent['"+w+"'](false);\n              },5000)\n          };           \n          (function (d, s, id) {\n              var js, fjs = d.getElementsByTagName(s)[0], r = false;               \n              js = d.createElement(s);\n              js.id = id;\n              js.src = location.protocol + \"//static.blueseed.tv/ajs/video-player/facebook.sdk.js\";\n              js.onload = s.onreadystatechange = function () {\n                if (!r && (!this.readyState || this.readyState == 'complete')) {\n                    r = true;\n                    window.fbAsyncInit();\n                }\n            };\n              fjs.parentNode.insertBefore(js, fjs);\n          }(document, 'script', 'facebook-jssdk'));\n          setTimeout(fbAsyncInit,5000);\n      ",
y=!1,B=document.createElement("div");h={id:"fb"+h,"data-href":u,"class":"fb-video","data-show-captions":"false","data-show-text":"false","data-controls":"false","data-width":m,"data-height":r,"data-autoplay":"false"};for(var P in h)B.setAttribute(P,h[P]);P=document.createElement("div");P.appendChild(B);y=this.iframeFbVideo.contentDocument||this.iframeFbVideo.contentWindow.document;y.write("\n        <style>\n        body { overflow:hidden; margin:0 auto;background-color:#000; }    \n        </style>\n      ");
y.write(P.innerHTML);y.write('<div id="fb-controller" style="display:none;" class="fbv-controller play-button"></div>');y.write('<div id="fb-root" style="display:none;"></div>');y.write("<script>"+v+"\x3c/script>");y.close();this.on("fullscreenchange",function(){});var M=this;window[w]=function(h){M.fbPlayer=h;mpl1DebugLog(M.fbPlayer);M.iframeFbVideo.setAttribute("height",y.documentElement.clientHeight);h.subscribe("startedBuffering",function(e){mpl1DebugLog("fbVideoPlayer startedBuffering Ok");M.onPlayerStateChange({data:-1})});
h.subscribe("startedPlaying",function(e){mpl1DebugLog("fbVideoPlayer startedPlaying Ok");M.onPlayerStateChange({data:2})});h.subscribe("paused",function(e){M.onPlayerStateChange({data:1});mpl1DebugLog("fbVideoPlayer paused Ok")});h.subscribe("error",function(e){M.onPlayerStateChange({data:4});mpl1DebugLog("fbVideoPlayer error");console.error(e)});h.subscribe("finishedPlaying",function(e){M.onPlayerStateChange({data:4});mpl1DebugLog("fbVideoPlayer finishedPlaying Ok");"function"===typeof eventCallback.ended&&
eventCallback.ended()});h.subscribe("finishedBuffering",function(e){mpl1DebugLog("fbVideoPlayer finishedBuffering Ok");M.onPlayerStateChange({data:2})});e?h.mute():h.unmute();M.onPlayerReady()}},onPlayerReady:function(){mpl1DebugLog("onPlayerReady");this.options_.muted&&this.fbPlayer.mute();this.playerReady_=!0;this.triggerReady();this.playOnReady&&this.play()},onPlayerPlaybackQualityChange:function(){},onPlayerPlaybackRateChange:function(){this.trigger("ratechange")},onPlayerStateChange:function(h){mpl1DebugLog("onPlayerStateChange",
h);var p=h.data;if(p===this.lastState||this.errorNumber)mpl1DebugLog("onPlayerStateChange, skip",h);else switch(this.lastState=p,p){case -1:this.trigger("loadstart");this.trigger("loadedmetadata");this.trigger("durationchange");this.trigger("ratechange");break;case 1:this.trigger("canplay");if(this.isSeeking)this.onSeeked();else this.trigger("pause");break;case 2:this.trigger("timeupdate");this.trigger("durationchange");this.trigger("playing");this.trigger("play");if(this.isSeeking)this.onSeeked();
break;case 3:this.player_.trigger("timeupdate");this.player_.trigger("waiting");break;case 4:this.trigger("ended")}},onPlayerVolumeChange:function(){this.trigger("volumechange")},onPlayerError:function(h){this.errorNumber=h.data;this.trigger("pause");this.trigger("error")},error:function(){var h=1E3+this.errorNumber;switch(this.errorNumber){case 5:return{code:h,message:"Error while trying to play the video"};case 2:case 100:return{code:h,message:"Unable to find the video"};case 101:case 150:return{code:h,
message:"Playback on other Websites has been disabled by the video owner."}}return{code:h,message:"YouTube unknown error ("+this.errorNumber+")"}},src:function(h){mpl1DebugLog("src",h);h&&this.setSrc({src:h});return this.source},poster:function(){return y?null:this.poster_},setPoster:function(h){this.poster_=h},setSrc:function(p){mpl1DebugLog("setSrc",p);p&&p.src&&(delete this.errorNumber,this.source=p,this.url=h.parseUrl(p.src).dataHref,this.options_.autoplay?this.isReady_?this.play():this.playOnReady=
!0:this.activeVideoId!==this.url.videoId&&this.isReady_&&(this.activeVideoId=this.url.videoId))},autoplay:function(){return this.options_.autoplay},setAutoplay:function(h){this.options_.autoplay=h},loop:function(){return this.options_.loop},setLoop:function(h){this.options_.loop=h},play:function(){mpl1DebugLog("fbVideoPlayer.play ...... ",this.url,this.lastState);this.url&&(this.wasPausedBeforeSeek=!1,this.fbPlayer&&!this.lastState&&(this.lastState=1),2!==this.lastState&&this.fbPlayer.play())},pause:function(){mpl1DebugLog(this.lastState+
" fbVideoPlayer.pause ...... ",this.url);2===this.lastState?(this.fbPlayer.pause(),this.onPlayerStateChange({data:1})):(this.fbPlayer.play(),this.onPlayerStateChange({data:2}))},paused:function(){return this.fbPlayer?2!==this.lastState&&3!==this.lastState:!0},currentTime:function(){return this.fbPlayer?this.fbPlayer.getCurrentPosition():0},setCurrentTime:function(h){this.lastState===YT.PlayerState.PAUSED&&(this.timeBeforeSeek=this.currentTime());this.isSeeking||(this.wasPausedBeforeSeek=this.paused());
this.fbPlayer.seek(h);this.trigger("timeupdate");this.trigger("seeking");this.isSeeking=!0;1===this.lastState&&this.timeBeforeSeek!==h&&(clearInterval(this.checkSeekedInPauseInterval),this.checkSeekedInPauseInterval=setInterval(function(){1===this.lastState&&this.isSeeking?this.currentTime()!==this.timeBeforeSeek&&(this.trigger("timeupdate"),this.onSeeked()):clearInterval(this.checkSeekedInPauseInterval)}.bind(this),250))},seeking:function(){return this.isSeeking},seekable:function(){return this.fbPlayer?
B.createTimeRange(0,this.fbPlayer.getDuration()):B.createTimeRange()},onSeeked:function(){clearInterval(this.checkSeekedInPauseInterval);this.isSeeking=!1;this.wasPausedBeforeSeek&&this.pause();this.trigger("seeked")},playbackRate:function(){return 1},setPlaybackRate:function(h){this.fbPlayer&&this.fbPlayer.setPlaybackRate(h)},duration:function(){return this.fbPlayer?this.fbPlayer.getDuration():0},currentSrc:function(){return this.source&&this.source.src},ended:function(){return this.fbPlayer?this.lastState===
YT.PlayerState.ENDED:!1},volume:function(){return this.fbPlayer?this.fbPlayer.getVolume()/100:1},setVolume:function(h){this.fbPlayer&&this.fbPlayer.setVolume(h)},muted:function(){return this.fbPlayer?this.fbPlayer.isMuted():!1},setMuted:function(h){this.fbPlayer&&(this.muted(!0),h?this.fbPlayer.mute():this.fbPlayer.unmute(),this.setTimeout(function(){this.trigger("volumechange")},50))},buffered:function(){if(!this.fbPlayer||!this.fbPlayer.getVideoLoadedFraction)return B.createTimeRange();var h=this.fbPlayer.getVideoLoadedFraction()*
this.fbPlayer.getDuration();return B.createTimeRange(0,h)},preload:function(){},load:function(){},reset:function(){},networkState:function(){return this.fbPlayer?2:0},supportsFullScreen:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled}});h.isSupported=function(){return!0};h.canPlaySource=function(p){return h.canPlayType(p.type)};h.canPlayType=function(h){return"video/facebook"===h};h.parseUrl=function(h){return{videoId:null,
dataHref:h}};"undefined"!==typeof document&&u();"undefined"!==typeof B.registerTech?B.registerTech("facebook",h):B.registerComponent("facebook",h)});/*
 2016 Benoit Tremblay <trembl.ben@gmail.com>
 @license MIT
 @vimeo/player v1.0.6 | (c) 2016 Vimeo | MIT License | https://github.com/vimeo/player.js */
(function(B){"object"===typeof exports&&"undefined"!==typeof module?module.exports=B():"function"===typeof define&&define.amd?define([],B):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).videojsVimeo=B()})(function(){return function h(u,y,w){function p(e,r){if(!y[e]){if(!u[e]){var m="function"==typeof require&&require;if(!r&&m)return m(e,!0);if(A)return A(e,!0);r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r;}r=y[e]=
{exports:{}};u[e][0].call(r.exports,function(h){var m=u[e][1][h];return p(m?m:h)},r,r.exports,h,u,y,w)}return y[e].exports}for(var A="function"==typeof require&&require,e=0;e<w.length;e++)p(w[e]);return p}({1:[function(u,y,w){(function(h){!function(h,u){"object"==typeof w&&"undefined"!=typeof y?y.exports=u():(h.Vimeo=h.Vimeo||{},h.Vimeo.Player=u())}(this,function(){function p(e,h){return h={exports:{}},e(h,h.exports),h.exports}function u(e,h,m){var p=C.get(e.element)||{};h in p||(p[h]=[]);p[h].push(m);
C.set(e.element,p)}function e(e,h){return(C.get(e.element)||{})[h]||[]}function m(e,h,m){var p=C.get(e.element)||{};if(!p[h])return!0;if(!m)return p[h]=[],C.set(e.element,p),!0;m=p[h].indexOf(m);return-1!==m&&p[h].splice(m,1),C.set(e.element,p),p[h]&&0===p[h].length}function r(e,h){return 0===e.indexOf(h.toLowerCase())?e:""+h.toLowerCase()+e.substr(0,1).toUpperCase()+e.substr(1)}function w(e){return/^(https?:)?\/\/(player.)?vimeo.com(?=$|\/)/.test(e)}function v(){var e=0>=arguments.length||void 0===
arguments[0]?{}:arguments[0],h=e.id;e=e.url;e=h||e;if(!e)throw Error("An id or url must be passed, either in an options object or as a data-vimeo-id or data-vimeo-url attribute.");if(!isNaN(parseFloat(e))&&isFinite(e)&&Math.floor(e)==e)return"https://vimeo.com/"+e;if(w(e))return e.replace("http:","https:");if(h)throw new TypeError("\u201c"+h+"\u201d is not a valid video id.");throw new TypeError("\u201c"+e+"\u201d is not a vimeo.com url.");}function y(e){var h=1>=arguments.length||void 0===arguments[1]?
{}:arguments[1],m=ba,p=Array.isArray(m),r=0;for(m=p?m:m[Symbol.iterator]();;){if(p){if(r>=m.length)break;var v=m[r++]}else{if(r=m.next(),r.done)break;v=r.value}var u=e.getAttribute("data-vimeo-"+v);(u||""===u)&&(h[v]=""===u?1:u)}return h}function R(e){var h=1>=arguments.length||void 0===arguments[1]?{}:arguments[1];return new Promise(function(m,p){if(!w(e))throw new TypeError("\u201c"+e+"\u201d is not a vimeo.com url.");var r="https://vimeo.com/api/oembed.json?url="+encodeURIComponent(e),v;for(v in h)h.hasOwnProperty(v)&&
(r+="&"+v+"="+encodeURIComponent(h[v]));var u="XDomainRequest"in window?new XDomainRequest:new XMLHttpRequest;u.open("GET",r,!0);u.onload=function(){if(404===u.status)return void p(Error("\u201c"+e+"\u201d was not found."));if(403===u.status)return void p(Error("\u201c"+e+"\u201d is not embeddable."));try{var h=JSON.parse(u.responseText);m(h)}catch(cb){p(cb)}};u.onerror=function(){p(Error("There was an error fetching the embed code from Vimeo"+(u.status?" ("+u.status+")":"")+"."))};u.send()})}function P(e,
h){e=e.html;if(!h)throw new TypeError("An element must be provided");if(null!==h.getAttribute("data-vimeo-initialized"))return h.querySelector("iframe");var m=document.createElement("div");return m.innerHTML=e,h.appendChild(m.firstChild),h.setAttribute("data-vimeo-initialized","true"),h.querySelector("iframe")}function M(e){return"string"==typeof e&&(e=JSON.parse(e)),e}function F(e,h,m){e.element.contentWindow.postMessage&&(h={method:h},void 0!==m&&(h.value=m),m=parseFloat(navigator.userAgent.toLowerCase().replace(/^.*msie (\d+).*$/,
"$1")),8<=m&&10>m&&(h=JSON.stringify(h)),e.element.contentWindow.postMessage(h,e.origin))}var H="undefined"!=typeof window.postMessage;if("undefined"==typeof Array.prototype.indexOf||!H)throw Error("Sorry, the Vimeo Player API is not available in this browser.");var aa="undefined"!=typeof window?window:"undefined"!=typeof h?h:"undefined"!=typeof self?self:{},X=(H=(p(function(e,h){!function(e){function h(e,h){function p(e){return this&&this.constructor===p?(this._keys=[],this._values=[],this._itp=
[],this.objectOnly=h,void(e&&m.call(this,e))):new p(e)}return h||M(e,"size",{get:S}),e.constructor=p,p.prototype=e,p}function m(e){this.add?e.forEach(this.add,this):e.forEach(function(e){this.set(e[0],e[1])},this)}function p(e){return this.has(e)&&(this._keys.splice(P,1),this._values.splice(P,1),this._itp.forEach(function(e){P<e[0]&&e[0]--})),-1<P}function r(e){return this.has(e)?this._values[P]:void 0}function u(e,h){if(this.objectOnly&&h!==Object(h))throw new TypeError("Invalid value used as weak collection key");
if(h!=h||0===h)for(P=e.length;P--&&!ja(e[P],h););else P=e.indexOf(h);return-1<P}function v(e){return u.call(this,this._values,e)}function w(e){return u.call(this,this._keys,e)}function x(e,h){return this.has(e)?this._values[P]=h:this._values[this._keys.push(e)-1]=h,this}function y(e){return this.has(e)||this._values.push(e),this}function A(){(this._keys||0).length=this._values.length=0}function C(){return R(this._itp,this._keys)}function G(){return R(this._itp,this._values)}function F(){return R(this._itp,
this._keys,this._values)}function H(){return R(this._itp,this._values,this._values)}function R(e,h,m){var p=[0],r=!1;return e.push(p),{next:function(){var u,v=p[0];return!r&&v<h.length?(u=m?[h[v],m[v]]:h[v],p[0]++):(r=!0,e.splice(e.indexOf(p),1)),{done:r,value:u}}}}function S(){return this._values.length}function za(e,h){for(var m=this.entries();;){var p=m.next();if(p.done)break;e.call(h,p.value[1],p.value[0],this)}}var P,M=Object.defineProperty,ja=function(e,h){return e===h||e!==e&&h!==h};"undefined"==
typeof WeakMap&&(e.WeakMap=h({delete:p,clear:A,get:r,has:w,set:x},!0));"undefined"!=typeof Map&&"function"==typeof(new Map).values&&(new Map).values().next||(e.Map=h({delete:p,has:w,get:r,set:x,keys:C,values:G,entries:F,forEach:za,clear:A}));"undefined"!=typeof Set&&"function"==typeof(new Set).values&&(new Set).values().next||(e.Set=h({has:v,add:y,delete:p,clear:A,keys:G,values:G,entries:H,forEach:za}));"undefined"==typeof WeakSet&&(e.WeakSet=h({delete:p,add:y,clear:A,has:v},!0))}("undefined"!=typeof h&&
"undefined"!=typeof aa?aa:window)}),p(function(e){!function(h,m,p){m[h]=m[h]||p();"undefined"!=typeof e&&e.exports&&(e.exports=m[h])}("Promise",aa,function(){function e(e,h){F.add(e,h);y||(y=C(F.drain))}function h(e){var h,m=typeof e;return null==e||"object"!=m&&"function"!=m||(h=e.then),"function"==typeof h&&h}function m(){for(var e=0;e<this.chain.length;e++){var m=void 0,p=void 0,r=1===this.state?this.chain[e].success:this.chain[e].failure,u=this.chain[e];try{!1===r?u.reject(this.msg):(p=!0===r?
this.msg:r.call(void 0,this.msg),p===u.promise?u.reject(TypeError("Promise-chain cycle")):(m=h(p))?m.call(p,u.resolve,u.reject):u.resolve(p))}catch(da){u.reject(da)}}this.chain.length=0}function p(u){var w,x=this;if(!x.triggered){x.triggered=!0;x.def&&(x=x.def);try{(w=h(u))?e(function(){var e=new v(x);try{w.call(u,function(){p.apply(e,arguments)},function(){r.apply(e,arguments)})}catch(Cb){r.call(e,Cb)}}):(x.msg=u,x.state=1,0<x.chain.length&&e(m,x))}catch(db){r.call(new v(x),db)}}}function r(h){var p=
this;p.triggered||(p.triggered=!0,p.def&&(p=p.def),p.msg=h,p.state=2,0<p.chain.length&&e(m,p))}function u(e,h,m,p){for(var r=0;r<h.length;r++)!function(r){e.resolve(h[r]).then(function(e){m(r,e)},p)}(r)}function v(e){this.def=e;this.triggered=!1}function w(e){this.promise=e;this.state=0;this.triggered=!1;this.chain=[];this.msg=void 0}function x(h){if("function"!=typeof h)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var u=new w(this);this.then=
function(h,p){var r={success:"function"!=typeof h||h,failure:"function"==typeof p&&p};return r.promise=new this.constructor(function(e,h){if("function"!=typeof e||"function"!=typeof h)throw TypeError("Not a function");r.resolve=e;r.reject=h}),u.chain.push(r),0!==u.state&&e(m,u),r.promise};this.catch=function(e){return this.then(void 0,e)};try{h.call(void 0,function(e){p.call(u,e)},function(e){r.call(u,e)})}catch(Ja){r.call(u,Ja)}}var y,A=Object.prototype.toString,C="undefined"!=typeof setImmediate?
function(e){return setImmediate(e)}:setTimeout;try{Object.defineProperty({},"x",{});var G=function(e,h,m,p){return Object.defineProperty(e,h,{value:m,writable:!0,configurable:!1!==p})}}catch(Ma){G=function(e,h,m){return e[h]=m,e}}var F=function(){function e(e,h){this.fn=e;this.self=h;this.next=void 0}var h,m,p;return{add:function(r,u){p=new e(r,u);m?m.next=p:h=p;m=p;p=void 0},drain:function(){var e=h;for(h=m=y=void 0;e;)e.fn.call(e.self),e=e.next}}}();var H=G({},"constructor",x,!1);return x.prototype=
H,G(H,"__NPO__",0,!1),G(x,"resolve",function(e){return e&&"object"==typeof e&&1===e.__NPO__?e:new this(function(h,m){if("function"!=typeof h||"function"!=typeof m)throw TypeError("Not a function");h(e)})}),G(x,"reject",function(e){return new this(function(h,m){if("function"!=typeof h||"function"!=typeof m)throw TypeError("Not a function");m(e)})}),G(x,"all",function(e){var h=this;return"[object Array]"!=A.call(e)?h.reject(TypeError("Not an array")):0===e.length?h.resolve([]):new h(function(m,p){if("function"!=
typeof m||"function"!=typeof p)throw TypeError("Not a function");var r=e.length,v=Array(r),w=0;u(h,e,function(e,h){v[e]=h;++w===r&&m(v)},p)})}),G(x,"race",function(e){var h=this;return"[object Array]"!=A.call(e)?h.reject(TypeError("Not an array")):new h(function(m,p){if("function"!=typeof m||"function"!=typeof p)throw TypeError("Not a function");u(h,e,function(e,h){m(h)},p)})}),x})})))&&"object"==typeof H&&"default"in H?H.default:H,C=new WeakMap,ba="id url width maxwidth height maxheight portrait title byline color autoplay autopause loop responsive".split(" "),
S=new WeakMap,ea=new WeakMap;H=function(){function h(p){var r=this,u=1>=arguments.length||void 0===arguments[1]?{}:arguments[1];if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");if(window.jQuery&&p instanceof jQuery&&(1<p.length&&window.console&&console.warn&&console.warn("A jQuery object with multiple elements was passed, using the first element."),p=p[0]),"string"==typeof p&&(p=document.getElementById(p)),!(p instanceof window.HTMLElement))throw new TypeError("You must pass either a valid element or a valid id.");
if("IFRAME"!==p.nodeName){var x=p.querySelector("iframe");x&&(p=x)}if("IFRAME"===p.nodeName&&!w(p.getAttribute("src")||""))throw Error("The player element passed isn\u2019t a Vimeo embed.");if(S.has(p))return S.get(p);this.element=p;this.origin="*";x=new X(function(h,x){var A=function(p){if(w(p.origin)&&r.element.contentWindow===p.source){"*"===r.origin&&(r.origin=p.origin);p=M(p.data);var u="method"in p&&"ping"===p.method;if("event"in p&&"ready"===p.event||u)p=(r.element.setAttribute("data-ready",
"true"),void h());else{p=M(p);var v=[];u=void 0;if(p.event){if("error"===p.event){u=e(r,p.data.method);v=Array.isArray(u);var x=0;for(u=v?u:u[Symbol.iterator]();;){if(v){if(x>=u.length)break;var y=u[x++]}else{if(x=u.next(),x.done)break;y=x.value}var A=Error(p.data.message);A.name=p.data.name;y.reject(A);m(r,p.data.method,y)}}v=e(r,"event:"+p.event);u=p.data}else p.method&&(v=e(r,p.method),u=p.value,m(r,p.method));p=v;v=Array.isArray(p);x=0;for(p=v?p:p[Symbol.iterator]();;){if(v){if(x>=p.length)break;
y=p[x++]}else{if(x=p.next(),x.done)break;y=x.value}try{"function"==typeof y?y.call(r,u):y.resolve(u)}catch(pa){}}p=void 0}return p}};if(window.addEventListener?window.addEventListener("message",A,!1):window.attachEvent&&window.attachEvent("onmessage",A),"IFRAME"!==r.element.nodeName){A=y(p,u);var G=v(A);R(G,A).then(function(e){var h=P(e,p);r.element=h;var m=p,u=C.get(m);C.set(h,u);C.delete(m);return e}).catch(function(e){return x(e)})}});return ea.set(this,x),S.set(this.element,this),"IFRAME"===this.element.nodeName&&
F(this,"ping"),this}return h.prototype.then=function(e){var h=1>=arguments.length||void 0===arguments[1]?function(){}:arguments[1];return this.ready().then(e,h)},h.prototype.callMethod=function(e){var h=this,m=1>=arguments.length||void 0===arguments[1]?{}:arguments[1];return new X(function(p,r){return h.ready().then(function(){u(h,e,{resolve:p,reject:r});F(h,e,m)})})},h.prototype.get=function(e){var h=this;return new X(function(m,p){return e=r(e,"get"),h.ready().then(function(){u(h,e,{resolve:m,reject:p});
F(h,e)})})},h.prototype.set=function(e,h){var m=this;return X.resolve(h).then(function(h){if(e=r(e,"set"),void 0===h||null===h)throw new TypeError("There must be a value to set.");return m.ready().then(function(){return new X(function(p,r){u(m,e,{resolve:p,reject:r});F(m,e,h)})})})},h.prototype.on=function(h,m){if(!h)throw new TypeError("You must pass an event name.");if(!m)throw new TypeError("You must pass a callback function.");if("function"!=typeof m)throw new TypeError("The callback must be a function.");
0===e(this,"event:"+h).length&&this.callMethod("addEventListener",h).catch(function(){});u(this,"event:"+h,m)},h.prototype.off=function(e,h){if(!e)throw new TypeError("You must pass an event name.");if(h&&"function"!=typeof h)throw new TypeError("The callback must be a function.");m(this,"event:"+e,h)&&this.callMethod("removeEventListener",e).catch(function(e){})},h.prototype.loadVideo=function(e){return this.callMethod("loadVideo",e)},h.prototype.ready=function(){var e=ea.get(this);return X.resolve(e)},
h.prototype.enableTextTrack=function(e,h){if(!e)throw new TypeError("You must pass a language.");return this.callMethod("enableTextTrack",{language:e,kind:h})},h.prototype.disableTextTrack=function(){return this.callMethod("disableTextTrack")},h.prototype.pause=function(){return this.callMethod("pause")},h.prototype.play=function(){return this.callMethod("play")},h.prototype.unload=function(){return this.callMethod("unload")},h.prototype.getAutopause=function(){return this.get("autopause")},h.prototype.setAutopause=
function(e){return this.set("autopause",e)},h.prototype.getColor=function(){return this.get("color")},h.prototype.setColor=function(e){return this.set("color",e)},h.prototype.getCurrentTime=function(){return this.get("currentTime")},h.prototype.setCurrentTime=function(e){return this.set("currentTime",e)},h.prototype.getDuration=function(){return this.get("duration")},h.prototype.getEnded=function(){return this.get("ended")},h.prototype.getLoop=function(){return this.get("loop")},h.prototype.setLoop=
function(e){return this.set("loop",e)},h.prototype.getPaused=function(){return this.get("paused")},h.prototype.getTextTracks=function(){return this.get("textTracks")},h.prototype.getVideoEmbedCode=function(){return this.get("videoEmbedCode")},h.prototype.getVideoId=function(){return this.get("videoId")},h.prototype.getVideoTitle=function(){return this.get("videoTitle")},h.prototype.getVideoWidth=function(){return this.get("videoWidth")},h.prototype.getVideoHeight=function(){return this.get("videoHeight")},
h.prototype.getVideoUrl=function(){return this.get("videoUrl")},h.prototype.getVolume=function(){return this.get("volume")},h.prototype.setVolume=function(e){return this.set("volume",e)},h}();return function(){var e=function(e){"console"in window&&console.error&&console.error("There was an error creating an embed: "+e)},h=function(){if(p){if(r>=m.length)return"break";u=m[r++]}else{if(r=m.next(),r.done)return"break";u=r.value}var h=u;try{if(null!==h.getAttribute("data-vimeo-defer"))return"continue";
var w=y(h),x=v(w);R(x,w).then(function(e){return P(e,h)}).catch(e)}catch(Mb){e(Mb)}},m=[].slice.call((0>=arguments.length||void 0===arguments[0]?document:arguments[0]).querySelectorAll("[data-vimeo-id], [data-vimeo-url]")),p=Array.isArray(m),r=0;m=p?m:m[Symbol.iterator]();a:for(;;){var u;switch(h()){case "break":break a}}}(),H})}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],2:[function(u,y,w){(function(h){function p(e,h){if("function"!==
typeof h&&null!==h)throw new TypeError("Super expression must either be null or a function, not "+typeof h);e.prototype=Object.create(h&&h.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});h&&(Object.setPrototypeOf?Object.setPrototypeOf(e,h):e.__proto__=h)}w.__esModule=!0;var y=(h="undefined"!==typeof window?window.videojs:"undefined"!==typeof h?h.videojs:null)&&h.__esModule?h:{default:h},e=(h=u("@vimeo/player"))&&h.__esModule?h:{default:h};y.default.getComponent("Component");
h=y.default.getComponent("Tech");var m=!1,r=function(h){function r(e,p){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");p=h.call(this,e,p);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");p=!p||"object"!==typeof p&&"function"!==typeof p?this:p;if(!m){m=!0;var u=document.head||document.getElementsByTagName("head")[0],v=document.createElement("style");v.type="text/css";v.styleSheet?v.styleSheet.cssText="\n      .vjs-vimeo iframe {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n      }\n    ":
v.appendChild(document.createTextNode("\n      .vjs-vimeo iframe {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n      }\n    "));u.appendChild(v)}p.setPoster(e.poster);p.initVimeoPlayer();return p}p(r,h);r.prototype.initVimeoPlayer=function(){var h=this,m={url:this.options_.source.src,byline:!1,portrait:!1,title:!1};this.options_.autoplay&&(m.autoplay=!0);this.options_.height&&(m.height=this.options_.height);this.options_.width&&(m.width=
this.options_.width);this.options_.maxheight&&(m.maxheight=this.options_.maxheight);this.options_.maxwidth&&(m.maxwidth=this.options_.maxwidth);this.options_.loop&&(m.loop=this.options_.loop);this._player=new e.default(this.el(),m);this.initVimeoState();"play pause ended timeupdate progress seeked".split(" ").forEach(function(e){h._player.on(e,function(m){h._vimeoState.progress.duration!=m.duration&&h.trigger("durationchange");h._vimeoState.progress=m;h.trigger(e)})});this._player.on("pause",function(){return h._vimeoState.playing=
!1});this._player.on("play",function(){h._vimeoState.playing=!0;h._vimeoState.ended=!1});this._player.on("ended",function(){h._vimeoState.playing=!1;h._vimeoState.ended=!0});this._player.on("volumechange",function(e){return h._vimeoState.volume=e});this._player.on("error",function(e){return h.trigger("error",e)});this.triggerReady()};r.prototype.initVimeoState=function(){var e=this._vimeoState={ended:!1,playing:!1,volume:0,progress:{seconds:0,percent:0,duration:0}};this._player.getCurrentTime().then(function(h){return e.progress.seconds=
h});this._player.getDuration().then(function(h){return e.progress.duration=h});this._player.getPaused().then(function(h){return e.playing=!h});this._player.getVolume().then(function(h){return e.volume=h})};r.prototype.createEl=function(){var e=y.default.createEl("div",{id:this.options_.techId});e.style.cssText="width:100%;height:100%;top:0;left:0;position:absolute";e.className="vjs-vimeo";return e};r.prototype.controls=function(){return!0};r.prototype.supportsFullScreen=function(){return!0};r.prototype.src=
function(){return this.options_.source};r.prototype.currentSrc=function(){return this.options_.source.src};r.prototype.currentTime=function(){return this._vimeoState.progress.seconds};r.prototype.setCurrentTime=function(e){this._player.setCurrentTime(e)};r.prototype.volume=function(){return this._vimeoState.volume};r.prototype.setVolume=function(e){return this._player.setVolume(volume)};r.prototype.duration=function(){return this._vimeoState.progress.duration};r.prototype.buffered=function(){var e=
this._vimeoState.progress;return y.default.createTimeRange(0,e.percent*e.duration)};r.prototype.paused=function(){return!this._vimeoState.playing};r.prototype.pause=function(){this._player.pause()};r.prototype.play=function(){this._player.play()};r.prototype.muted=function(){return 0===this._vimeoState.volume};r.prototype.ended=function(){return this._vimeoState.ended};r.prototype.playbackRate=function(){return 1};return r}(h);r.prototype.featuresTimeupdateEvents=!0;r.isSupported=function(){return!0};
h.withSourceHandlers(r);r.nativeSourceHandler={};r.nativeSourceHandler.canPlayType=function(e){return"video/vimeo"===e?"maybe":""};r.nativeSourceHandler.canHandleSource=function(e){return e.type?r.nativeSourceHandler.canPlayType(e.type):e.src?r.nativeSourceHandler.canPlayType(e.src):""};r.nativeSourceHandler.handleSource=function(e,h){h.src(e.src)};r.nativeSourceHandler.dispose=function(){};r.registerSourceHandler(r.nativeSourceHandler);h.registerTech("Vimeo",r);r.VERSION="0.0.1";w.default=r}).call(this,
"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"@vimeo/player":1}]},{},[2])(2)});/*
 2017 Brooks Lyrette <brooks@dotsub.com>
 @license Apache-2.0
*/
(function(B){"object"===typeof exports&&"undefined"!==typeof module?module.exports=B():"function"===typeof define&&define.amd?define([],B):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).videojsWatermark=B()})(function(){return function h(u,y,w){function p(e,r){if(!y[e]){if(!u[e]){var m="function"==typeof require&&require;if(!r&&m)return m(e,!0);if(A)return A(e,!0);r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r;}r=
y[e]={exports:{}};u[e][0].call(r.exports,function(h){var m=u[e][1][h];return p(m?m:h)},r,r.exports,h,u,y,w)}return y[e].exports}for(var A="function"==typeof require&&require,e=0;e<w.length;e++)p(w[e]);return p}({1:[function(u,y,w){(function(h){Object.defineProperty(w,"__esModule",{value:!0});var p=(h="undefined"!==typeof window?window.videojs:"undefined"!==typeof h?h.videojs:null)&&h.__esModule?h:{"default":h},u={position:"top-right",fadeTime:3E3,url:void 0,image:void 0},e=function(e,h){var m=e.el(),
p=document.createElement("div"),r=document.createElement("img");p.classList.add("vjs-watermark-content");p.classList.add("vjs-watermark-"+h.position);r.src=h.image;if(h.url){var u=document.createElement("a");u.href=h.url;u.onclick=function(m){m.preventDefault();e.pause();window.open(h.url)};u.appendChild(r);p.appendChild(u)}else p.appendChild(r);m.appendChild(p)},m=function(e){setTimeout(function(){return document.getElementsByClassName("vjs-watermark-content")[0].classList.add("vjs-watermark-fade")},
e.fadeTime)},r=function(h,p){h.addClass("vjs-watermark");if(p.image&&(e(h,p),null!==p.fadeTime))h.on("play",function(){return m(p)})};h=function(e){var h=this;this.ready(function(){r(h,p["default"].mergeOptions(u,e))})};p["default"].registerPlugin("watermark",h);h.VERSION="2.0.0";w["default"]=h;y.exports=w["default"]}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}]},{},[1])(1)});(function(){var B=[].indexOf||function(u){for(var y=0,w=this.length;y<w;y++)if(y in this&&this[y]===u)return y;return-1};videojs.registerPlugin("ga",function(u){var y;null==u&&(u={});var w={};var h="loaded percentsPlayed start end seek play pause resize volumeChange error fullscreen".split(" ");var p=u.eventsToTrack||w.eventsToTrack||h;var A=u.percentsPlayedInterval||w.percentsPlayedInterval||10;var e=u.eventCategory||w.eventCategory||"Video";var m=u.eventLabel||w.eventLabel;u.debug=u.debug||!1;var r=
[];var x=y=0;var v=!1;var G=function(){m||(m=this.currentSrc().split("/").slice(-1)[0].replace(/\.(\w{3,4})(\?.*)?$/i,""));0<=B.call(p,"loadedmetadata")&&ba("loadedmetadata",!0)};var R=function(){var e;var h=Math.round(this.currentTime());var m=Math.round(this.duration());var u=Math.round(h/m*100);for(m=e=0;99>=e;m=e+=A)u>=m&&0>B.call(r,m)&&(0<=B.call(p,"start")&&0===m&&0<u?ba("start",!0):0<=B.call(p,"percentsPlayed")&&0!==u&&ba("percent played",!0,m),0<u&&r.push(m));0<=B.call(p,"seek")&&(x=y,y=h,
1<Math.abs(x-y)&&(v=!0,ba("seek start",!1,x),ba("seek end",!1,y)))};var P=function(){ba("end",!0)};var M=function(){var e=Math.round(this.currentTime());ba("play",!0,e);v=!1};var F=function(){var e=Math.round(this.currentTime());var h=Math.round(this.duration());e===h||v||ba("pause",!1,e)};var H=function(){var e=!0===this.muted()?0:this.volume();ba("volume change",!1,e)};var aa=function(){ba("resize - "+this.width()+"*"+this.height(),!0)};var X=function(){var e=Math.round(this.currentTime());ba("error",
!0,e)};var C=function(){var e=Math.round(this.currentTime());"function"===typeof this.isFullscreen&&this.isFullscreen()||"function"===typeof this.isFullScreen&&this.isFullScreen()?ba("enter fullscreen",!1,e):ba("exit fullscreen",!1,e)};var ba=function(h,p,r){window.ga?ga("send","event",{eventCategory:e,eventAction:h,eventLabel:m,eventValue:r,nonInteraction:p}):window._gaq?_gaq.push(["_trackEvent",e,h,m,r,p]):u.debug&&console.log("Google Analytics not detected")};this.ready(function(){this.on("loadedmetadata",
G);this.on("timeupdate",R);if(0<=B.call(p,"end"))this.on("ended",P);if(0<=B.call(p,"play"))this.on("play",M);if(0<=B.call(p,"pause"))this.on("pause",F);if(0<=B.call(p,"volumeChange"))this.on("volumechange",H);if(0<=B.call(p,"resize"))this.on("resize",aa);if(0<=B.call(p,"error"))this.on("error",X);if(0<=B.call(p,"fullscreen"))return this.on("fullscreenchange",C)});return{sendbeacon:ba}})}).call(this);!function(B,u){"object"==typeof exports&&"object"==typeof module?module.exports=u():"function"==typeof define&&define.amd?define([],u):"object"==typeof exports?exports.viewability=u():B.viewability=u()}("undefined"!=typeof self?self:this,function(){return function(B){function u(w){if(y[w])return y[w].exports;var h=y[w]={i:w,l:!1,exports:{}};return B[w].call(h.exports,h,h.exports,u),h.l=!0,h.exports}var y={};return u.m=B,u.c=y,u.d=function(w,h,p){u.o(w,h)||Object.defineProperty(w,h,{configurable:!1,
enumerable:!0,get:p})},u.n=function(w){var h=w&&w.__esModule?function(){return w.default}:function(){return w};return u.d(h,"a",h),h},u.o=function(u,h){return Object.prototype.hasOwnProperty.call(u,h)},u.p="",u(u.s=2)}([function(B,u,y){B.exports=function(u){var h=window.innerHeight,p=u.getBoundingClientRect().top;u=u.getBoundingClientRect().bottom;var w=u-p;return p>h?{value:0,state:"EL_IS_BELOW_VIEW"}:0>=u?{value:0,state:"EL_IS_ABOVE_VIEW"}:0<=p&&u<=h?{value:1,state:"EL_IS_WITHIN_VERTICAL_VIEW"}:
0>p&&u>h?{value:h/w,state:"EL_BOTTOM_AND_TOP_TRUNCATED"}:0>p&&u<=h?{value:u/w,state:"EL_TOP_TRUNCATED"}:0<=p&&u>h?{value:(h-p)/w,state:"EL_BOTTOM_TRUNCATED"}:{value:0,state:"EL_IS_NOT_WITHIN_VIEW"}}},function(B,u,y){B.exports=function(u){var h=window.innerWidth,p=u.getBoundingClientRect().left;u=u.getBoundingClientRect().right;var w=u-p;return p>h?{value:0,state:"EL_IS_TOO_RIGHT"}:0>=u?{value:0,state:"EL_IS_TOO_LEFT"}:0<=p&&u<=h?{value:1,state:"EL_IS_WITHIN_HORIZONTAL_VIEW"}:0>p&&u>h?{value:h/w,state:"EL_LEFT_AND_RIGHT_TRUNCATED"}:
0>p&&u<=h?{value:u/w,state:"EL_LEFT_TRUNCATED"}:0<=p&&u>h?{value:(h-p)/w,state:"EL_RIGHT_TRUNCATED"}:{value:0,state:"EL_IS_NOT_WITHIN_VIEW"}}},function(B,u,y){B.exports={vertical:y(0),horizontal:y(1),isElementOnScreen:y(3)}},function(B,u,y){var w=y(1),h=y(0);B.exports=function(p,u){return u?1==h(p).value*w(p).value:0<h(p).value*w(p).value}}])});var VMAP=function(){function B(e,m){return[].concat(h(e.childNodes)).filter(function(e){return e.nodeName===m||m==="vmap:"+e.nodeName||e.nodeName==="vmap:"+m})}function u(e){var m={attributes:{},children:{},value:{}};return m.value=function(e){e=e&&e.childNodes&&[].concat(h(e.childNodes));if(!e)return{};var m=e.filter(function(e){return"#cdata-section"===e.nodeName});if(m&&0<m.length)try{return JSON.parse(m[0].data)}catch(v){}return e.reduce(function(e,h){var m="";switch(h.nodeName){case "#text":m=
h.textContent.trim();break;case "#cdata-section":m=h.data}return e+m},"")}(e),e.attributes&&[].concat(h(e.attributes)).forEach(function(e){e.nodeName&&void 0!==e.nodeValue&&null!==e.nodeValue&&(m.attributes[e.nodeName]=e.nodeValue)}),e.childNodes&&[].concat(h(e.childNodes)).filter(function(e){return"#"!==e.nodeName.substring(0,1)}).forEach(function(e){m.children[e.nodeName]=u(e)}),m}var y=function(e,h){if(!(e instanceof h))throw new TypeError("Cannot call a class as a function");},w=function(){function e(e,
h){for(var m=0;m<h.length;m++){var p=h[m];p.enumerable=p.enumerable||!1;p.configurable=!0;"value"in p&&(p.writable=!0);Object.defineProperty(e,p.key,p)}}return function(h,p,u){return p&&e(h.prototype,p),u&&e(h,u),h}}(),h=function(e){if(Array.isArray(e)){for(var h=0,p=Array(e.length);h<e.length;h++)p[h]=e[h];return p}return Array.from(e)},p=function r(h){for(var m in y(this,r),this.id=h.getAttribute("id"),this.allowMultipleAds=h.getAttribute("allowMultipleAds"),this.followRedirects=h.getAttribute("followRedirects"),
this.vastAdData=null,this.adTagURI=null,this.customData=null,h.childNodes){var p=h.childNodes[m];switch(p.localName){case "AdTagURI":this.adTagURI={templateType:p.getAttribute("templateType"),uri:(p.textContent||p.text||"").trim()};break;case "VASTAdData":for(this.vastAdData=p.firstChild;this.vastAdData&&1!==this.vastAdData.nodeType;)this.vastAdData=this.vastAdData.nextSibling;break;case "CustomAdData":this.customData=p}}},A=function(){function h(m){for(var r in y(this,h),this.timeOffset=m.getAttribute("timeOffset"),
this.breakType=m.getAttribute("breakType"),this.breakId=m.getAttribute("breakId"),this.repeatAfter=m.getAttribute("repeatAfter"),this.adSource=null,this.trackingEvents=[],this.extensions=[],m.childNodes){var v=m.childNodes[r];switch(v.localName){case "AdSource":this.adSource=new p(v);break;case "TrackingEvents":for(var w in v.childNodes){var A=v.childNodes[w];"Tracking"===A.localName&&this.trackingEvents.push({event:A.getAttribute("event"),uri:(A.textContent||A.text||"").trim()})}break;case "Extensions":this.extensions=
B(v,"Extension").map(function(h){return u(h)})}}}return w(h,[{key:"track",value:function(h,m){for(var p in this.trackingEvents){var r=this.trackingEvents[p];if(r.event===h){var u=r.uri;"error"===r.event&&(u=u.replace("[ERRORCODE]",m));this.tracker(u)}}}},{key:"tracker",value:function(h){"undefined"!=typeof window&&null!==window&&((new Image).src=h)}}]),h}();return function x(h){if(y(this,x),null==(null!=h?h.documentElement:void 0)||"VMAP"!==h.documentElement.localName)throw Error("Not a VMAP document");
for(var p in this.version=h.documentElement.getAttribute("version"),this.adBreaks=[],this.extensions=[],h.documentElement.childNodes){var r=h.documentElement.childNodes[p];switch(r.localName){case "AdBreak":this.adBreaks.push(new A(r));break;case "Extensions":this.extensions=B(r,"Extension").map(function(h){return u(h)})}}}}();(function(B,u){function y(e,h,m,p){function r(e){mpl1DebugLog("----------------prepareLoadAd is called ");e.pause();e.hide();e.el_.parentNode.style["background-color"]="black";console.log(e)}function v(e,h,m){h.adUnitPlayer=!1;mpl1DebugLog(h.adUnitPlayer);h.show();m||h.play();e&&e.setAttribute("style","display:none!important")}function x(e,h,m,p){this.adPosition=e;this.timeCheck=h;this.adUrls=m;this.skipAdTime=p;this.playedAdDone=!1}mpl1DebugLog(" set VAST-PLAYER from setVideoAdPlayer ..."+m);var y=
e.getAttribute("id")||"hadarone_vpl_"+Math.floor(9999999*Math.random());if(!0!==w.videoAdIds[y]){m=m?m:[];p=p?p:[];if(!(0<m.length||0<p.length))return!1;var A=h.width(),B=h.height();h.adUnitPlayer=!1;var G=function(m,p,w,x){function y(e){R.innerHTML=F;R.onclick=function(h){var m=m||window.Event,p=document.querySelector(P);p&&p.contentWindow.document.body&&(p=p.contentWindow.document.body.querySelector("video"))&&(p.muted=!0);if(p=document.querySelector(S))p.muted=!0;e.stopAd();if(void 0!==m.prototype.stopPropagation)h.stopPropagation();
else return!1}}if(!1!==h.adUnitPlayer)return mpl1DebugLog("Skip due to duplicated vast-player session"),!1;mpl1DebugLog("loadVideoAds: vastUrl "+m);if("string"!==typeof m||""===m)return mpl1DebugLog("loadVideoAds: SKIP AD because vastUrl is not valid  "),!1;r(h);var C=h.muted(),H=p||5,F=e.getAttribute("data-skip-label")||"Skip Ad",G=document.createElement("div");p="adContainer"+Math.floor(9999999*Math.random());var P="#"+p+" .hd1vplayer_iframe",S="#"+p+" .hd1vplayer_video";G.setAttribute("id",p);
G.setAttribute("data-vastUrl",m);G.setAttribute("style","width:"+A+"px!important;height:"+B+"px!important;position:relative!important;background-color:#000;color:#FFF");e.appendChild(G);var R=document.createElement("div");R.className="preroll-skip-button";var M=document.createElement("div");M.className="preroll-sound-button";M.style.padding="9px 18px";M.style["font-size"]="22px";window.isDesktop||(R.style.padding="9px",R.style["font-size"]="10px",M.style["font-size"]="18px");C?(M.innerHTML="&#128263;",
M.setAttribute("data-muted","1")):(M.innerHTML="&#128264;",M.setAttribute("data-muted","0"));M.onclick=function(e){var h=h||window.Event,m="1"===M.getAttribute("data-muted"),p=document.querySelector(P);p&&(p.contentWindow.document.body.querySelector("video").muted=!m);if(p=document.querySelector(S))p.muted=!m;M.setAttribute("data-muted",m?"0":"1");M.innerHTML=m?"&#128264;":"&#128263;";if(void 0!==h.prototype.stopPropagation)e.stopPropagation();else return!1};window.isDesktop||(M.style.padding="9px",
M.style["font-size"]="10px");var X=new u(G,{mutedVideoAd:C});h.adUnitPlayer=X;X.once("AdStopped",function(){v(G,h,w);x(!0)});X.load(m).then(function(){G.appendChild(M);if(0<H){G.appendChild(R);R.innerHTML=" "+H+"s";var e=H,h=setInterval(function(){e--;R.innerHTML=" "+e+"s"},1E3);setTimeout(function(){clearInterval(h);y(X)},1E3*H)}setTimeout(function(){var e=document.querySelector(P);e&&e.contentWindow.document.body&&(e=e.contentWindow.document.body.querySelector("video"))&&e.play();(e=document.querySelector(S))&&
e.play()},1E3);return X.startAd()}).catch(function(e){"function"===typeof x?(h.adUnitPlayer=!1,G.setAttribute("style","display:none!important"),x(!1,h),console.log("callbackForNextAd is NOT null 0")):w?console.log("callbackForNextAd is null 2"):(console.log("callbackForNextAd is null 1"),v(G,h));mpl1DebugLog(e)});return X};x.prototype.checkToRun=function(e){mpl1DebugLog("midproll currentTime"+e);mpl1DebugLog("midproll timeCheck "+this.timeCheck);mpl1DebugLog("midproll adUrls"+this.adUrls.length);
var h="postproll"===this.adPosition||"preroll"===this.adPosition;h||(h=e&&e>=this.timeCheck&&0<e&&!1===this.playedAdDone);var m="postproll"===this.adPosition;if(h){this.playedAdDone=!0;var p=this.adPosition,r=this.adUrls;e=0<r.length?r[0]:!1;var u=this.skipAdTime;h=!1;if("string"===typeof e){var v=function(e,h){r.shift();e||(e=0<r.length&&5>r.length?r[0]:!1,mpl1DebugLog(p+" callbackForNextAd1 adUrl "+e),e?G(e,u,m,v):(h.show(),h.play()));mpl1DebugLog(p+" callbackForNextAd1 adUrls.length "+r.length)};
h=G(e,u,m,v)}if(!1!==h)return!0}return!1};x.prototype.timeCheck=function(){return this.timeCheck};w.videoAdIds[y]=!0;var C=parseInt(e.getAttribute("data-skip-after"))||5;y={};for(var ba=[],S=0;S<p.length;S++){var ea=p[S];mpl1DebugLog(ea);if(ea){var ja=ea.timeAfter||0,za=ea.adType||"preroll";ea=ea.adUrl||"";"preroll"===za&&"string"===typeof ea&&m.push(ea);if("midproll"===za&&0<ja&&"string"===typeof ea){var Ba=""+ja;ja=y[Ba];"object"===typeof ja?ja.push(ea):(ja=[],ja.push(ea),y[Ba]=ja)}"postroll"===
za&&"string"===typeof ea&&ba.push(ea)}}0<m.length?(new x("preroll",0,m,C)).checkToRun(1):v(!1,h);var Ea=[];for(Ba in y)ja=parseInt(Ba),m=y[Ba],mpl1DebugLog(" timeAfter"+ja),console.log(" midprollAdUrls",m),Ea.push(new x("midproll",ja,m,C));Ea.sort(function(e,h){return e.timeCheck<h.timeCheck?-1:e.timeCheck>h.timeCheck?1:0});var Fa=setInterval(function(){mpl1DebugLog(Ea);if(0<Ea.length){var e=Ea[0],m=Math.floor(h.currentTime());mpl1DebugLog("currentTime "+m);mpl1DebugLog("timeCheck "+e.timeCheck);
!1!==e.checkToRun(m)?Ea.splice(0,1):mpl1DebugLog("wait for ad")}else clearInterval(Fa),Fa=0},1200);mpl1DebugLog("setInterval for loadAdFunctions "+Fa);h.on("ended",function(){0<Fa&&clearInterval(Fa);(new x("postproll",0,ba,C)).checkToRun(1)})}}var w={videoAdIds:[]};window.mpl1DebugLog=function(e){(!0===window.debugMediaPlayerOne||0<=location.hash.indexOf("player-debug"))&&console.log(e)};B.options.hls.overrideNative=!0;B.options.html5.nativeAudioTracks=!1;B.options.html5.nativeVideoTracks=!1;B.hook("setup",
function(e){for(var h=e.el_.parentElement,m=[],p=h.attributes,r=0;r<p.length;r++){var u=p[r];if(u){var w=(u.nodeValue||"").trim();0===w.indexOf("http")&&0===u.nodeName.indexOf("data-vast-url")&&m.push(w)}}if(0<m.length&&-1<h.className.indexOf("hadarone-video-player"))e.one("play",function(){y(h,e,m)})});var h=function(e,h){if(e){var m=e.getElementsByTagName("video")[0];if(m){var p=B(m);p.one("play",function(){y(e,p,h)})}}},p=function(e,h,m,p,u,y,A,F,H,aa,X,C,ba){var r=Math.floor(9999999*Math.random()),
v="hd1_c_"+r,x="hd1_vpl_"+r;r='<div class="hadarone-video-player" id="'+v+'"';"number"===typeof aa&&(r+=' data-skip-after="'+aa+'" ');"string"===typeof X&&(r+=' data-skip-label="'+X+'" ');r=r+">"+('<video id="'+x+'" playsinline="true" class="video-js vjs-default-skin"  width="'+A+'" height="'+F+'" >');m&&""!=m&&(r+='<source src="'+m+'" type="video/mp4" />');p&&""!=p&&(r+='<source src="'+p+'" type="video/webm" />');u&&""!=u&&(r+='<source src="'+u+'" type="application/x-mpegURL" />');r+="</video></div>";
if(h=document.getElementById(h))h.innerHTML=r;var G=B(x,{controls:!0,controlBar:{fullscreenToggle:!1},autoplay:e,muted:!0===e,preload:"auto",poster:y});G.one("play",function(){w.setVideoAdPlayer(document.getElementById(v),G,H,C);var e=document.createElement("div");e.setAttribute("class","playerlogo");document.querySelector("#"+x+" .vjs-remaining-time").parentNode.appendChild(e);"function"===typeof ba&&ba(G)});return G},A=function(e,h,m,p,u,y,A,F,H,aa){var r=Math.floor(9999999*Math.random()),v="hd1_c_"+
r,x="hd1_vpl_"+r;r='<div class="hadarone-video-player" id="'+v+'"';"number"===typeof A&&(r+=' data-skip-after="'+A+'" ');"string"===typeof F&&(r+=' data-skip-label="'+F+'" ');r=r+">"+('<video id="'+x+'"  class="video-js vjs-default-skin"  width="'+p+'" height="'+u+'" >')+"</video></div>";if(h=document.getElementById(h)){h.innerHTML=r;var G=B(x,{controls:!0,controlBar:{fullscreenToggle:!1},autoplay:e,preload:"auto",youtube:{playsinline:1},techOrder:["youtube"],sources:[{type:"video/youtube",src:m}]});
G.one("play",function(){w.setVideoAdPlayer(document.getElementById(v),G,y,H);var e=document.createElement("div");e.setAttribute("class","playerlogo");document.querySelector("#"+x+" .vjs-remaining-time").parentNode.appendChild(e);"function"===typeof aa&&aa(G)});e&&G.muted()&&G.play();return G}},e=function(e,h,m,p,u,y,A,F,H,aa){var r=Math.floor(9999999*Math.random()),v="hd1_c_"+r,x="hd1_vpl_"+r;r='<div class="hadarone-video-player" id="'+v+'"';"number"===typeof A&&(r+=' data-skip-after="'+A+'" ');"string"===
typeof F&&(r+=' data-skip-label="'+F+'" ');r=r+">"+('<video id="'+x+'"  class="video-js vjs-default-skin"  width="'+p+'" height="'+u+'" >')+"</video></div>";if(h=document.getElementById(h)){h.innerHTML=r;var G=B(x,{controls:!0,controlBar:{fullscreenToggle:!0},autoplay:e,preload:"auto",youtube:{playsinline:1},techOrder:["vimeo"],sources:[{type:"video/vimeo",src:m,vimeo:{color:"#fbc51b"}}]});G.one("play",function(){w.setVideoAdPlayer(document.getElementById(v),G,y,H);var e=document.createElement("div");
e.setAttribute("class","playerlogo");document.querySelector("#"+x+" .vjs-remaining-time").parentNode.appendChild(e);"function"===typeof aa&&aa(G)});e&&G.muted()&&G.play();return G}},m=function(e,h,m,p,u,y,A,F,H,aa){var r=Math.floor(9999999*Math.random()),v="hd1_c_"+r,x="hd1_vpl_"+r;r='<div class="hadarone-video-player" id="'+v+'"';"number"===typeof A&&(r+=' data-skip-after="'+A+'" ');"string"===typeof F&&(r+=' data-skip-label="'+F+'" ');r=r+">"+('<video id="'+x+'"  class="video-js vjs-default-skin"  width="'+
p+'" height="'+u+'" >')+"</video></div>";if(h=document.getElementById(h)){h.innerHTML=r;var G=B(x,{controls:!1,controlBar:{fullscreenToggle:!1},autoplay:e,preload:"auto",techOrder:["facebook"],sources:[{type:"video/facebook",src:m,width:p,height:u,autoplay:e}]});G.one("play",function(){w.setVideoAdPlayer(document.getElementById(v),G,y,H);var e=document.createElement("div");e.setAttribute("class","playerlogo");document.querySelector("#"+x+" .vjs-remaining-time").parentNode.appendChild(e);"function"===
typeof aa&&aa(G)});e&&G.muted()&&G.play();return G}};w.setVideoAd=h;w.setVideoAdsById=function(e,m){e=document.getElementById(e);h(e,m)};w.setVideoAds=function(e,m){for(var p=0;p<e.length;p++)h(e[p],m)};w.setVideoAdPlayer=y;w.createVideo=p;w.create=function(h,u,v,w,y,B,M,F){var r=document.getElementById(u);if(r){var x=r.offsetWidth;if(0!==x){r=0===r.offsetHeight?Math.floor(9*x/16):r.offsetHeight;var G=y?y:[];B=B?B:5;w=w?w:"";y=!1;0<v.indexOf("//www.youtube.com")?y=A(h,u,v,x,r,G,B,"Skip Ad",M,F):0<
v.indexOf("//vimeo.com")?y=e(h,u,v,x,r,G,B,"Skip Ad",M,F):0<v.indexOf("//www.facebook.com")?y=m(h,u,v,x,r,G,B,"Skip Ad",M,F):0<v.indexOf(".mp4")?y=p(h,u,v,!1,!1,w,x,r,G,B,"Skip Ad",M,F):0<v.indexOf(".webm")?y=p(h,u,!1,v,!1,w,x,r,G,B,"Skip Ad",M,F):0<v.indexOf(".m3u8")&&(y=p(h,u,!1,!1,v,w,x,r,G,B,"Skip Ad",M,F));window.mediaPlayer1Configs&&(h=window.mediaPlayer1Configs,h.watermarkImage&&h.watermarkUrl&&h.watermarkPosition&&y.watermark({image:h.watermarkImage,url:h.watermarkUrl,position:h.watermarkPosition}));
return y}}};window.MediaPlayerOne=w;window.HadarOnePlayer=w;setTimeout(function(){"function"===typeof window.mediaPlayerOneReady&&window.mediaPlayerOneReady();"function"===typeof window.mediaPlayerTracking&&window.mediaPlayerTracking()},123)})(window.videojs,window.VASTPlayer);
